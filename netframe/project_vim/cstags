cscope 15 $HOME/virtualboxshare/dpan/git_workspace/root/netframe -q 0000003085 0000334720
	@libs/include/libev/ev++.h

40 #i‚de‡
EVPP_H__


41 
	#EVPP_H__


	)

43 #ifde‡
EV_H


44 #ö˛udê
EV_H


46 
	~"ev.h
"

49 #i‚de‡
EV_USE_STDEXCEPT


50 
	#EV_USE_STDEXCEPT
 1

	)

53 #i‡
EV_USE_STDEXCEPT


54 
	~<°dex˚±
>

57 
«me•a˚
 
	gev
 {

59 
ev_t°amp
 
	tt°amp
;

62 
	gUNDEF
 = 
EV_UNDEF
,

63 
	gNONE
 = 
EV_NONE
,

64 
	gREAD
 = 
EV_READ
,

65 
	gWRITE
 = 
EV_WRITE
,

66 #i‡
EV_COMPAT3


67 
	gTIMEOUT
 = 
EV_TIMEOUT
,

69 
	gTIMER
 = 
EV_TIMER
,

70 
	gPERIODIC
 = 
EV_PERIODIC
,

71 
	gSIGNAL
 = 
EV_SIGNAL
,

72 
	gCHILD
 = 
EV_CHILD
,

73 
	gSTAT
 = 
EV_STAT
,

74 
	gIDLE
 = 
EV_IDLE
,

75 
	gCHECK
 = 
EV_CHECK
,

76 
	gPREPARE
 = 
EV_PREPARE
,

77 
	gFORK
 = 
EV_FORK
,

78 
	gASYNC
 = 
EV_ASYNC
,

79 
	gEMBED
 = 
EV_EMBED
,

80 #unde‡
ERROR


81 
	gERROR
 = 
EV_ERROR


86 
	gAUTO
 = 
EVFLAG_AUTO
,

87 
	gNOENV
 = 
EVFLAG_NOENV
,

88 
	gFORKCHECK
 = 
EVFLAG_FORKCHECK
,

90 
	gSELECT
 = 
EVBACKEND_SELECT
,

91 
	gPOLL
 = 
EVBACKEND_POLL
,

92 
	gEPOLL
 = 
EVBACKEND_EPOLL
,

93 
	gKQUEUE
 = 
EVBACKEND_KQUEUE
,

94 
	gDEVPOLL
 = 
EVBACKEND_DEVPOLL
,

95 
	gPORT
 = 
EVBACKEND_PORT


100 #i‡
EV_COMPAT3


101 
	gNONBLOCK
 = 
EVLOOP_NONBLOCK
,

102 
	gONESHOT
 = 
EVLOOP_ONESHOT
,

104 
	gNOWAIT
 = 
EVRUN_NOWAIT
,

105 
	gONCE
 = 
EVRUN_ONCE


108 
	ehow_t


110 
	gONE
 = 
EVBREAK_ONE
,

111 
	gALL
 = 
EVBREAK_ALL


114 
	gbad_lo›


115 #i‡
EV_USE_STDEXCEPT


116 : 
°d
::
ru¡ime_îr‹


119 #i‡
EV_USE_STDEXCEPT


120 
bad_lo›
 ()

121 : 
°d
::
ru¡ime_îr‹
 ("libevÉventÜoop cannot be initialized, bad value of LIBEV_FLAGS?")

127 #ifde‡
EV_AX


128 #unde‡
EV_AX


131 #ifde‡
EV_AX_


132 #unde‡
EV_AX_


135 #i‡
EV_MULTIPLICITY


136 
	#EV_AX
 
øw_lo›


	)

137 
	#EV_AX_
 
øw_lo›
,

	)

139 
	#EV_AX


	)

140 
	#EV_AX_


	)

143 
	slo›_ªf


145 
lo›_ªf
 (
EV_P
Ë
throw
 ()

146 #i‡
EV_MULTIPLICITY


147 : 
EV_AX
 (
EV_A
)

152 
boﬁ
 
›î©‹
 =(c⁄° 
lo›_ªf
 &
Ÿhî
Ëc⁄° 
throw
 ()

154 #i‡
EV_MULTIPLICITY


155  
EV_AX
 =
Ÿhî
.EV_AX;

157  
	gåue
;

161 
boﬁ
 
	g›î©‹
 !(c⁄° 
lo›_ªf
 &
Ÿhî
Ëc⁄° 
throw
 ()

163 #i‡
EV_MULTIPLICITY


164  ! (*
this
 =
Ÿhî
);

166  
	gÁl£
;

170 #i‡
EV_MULTIPLICITY


171 
boﬁ
 
	g›î©‹
 =(c⁄° 
EV_P
Ëc⁄° 
throw
 ()

173  
this
->
EV_AX
 =
EV_A
;

176 
boﬁ
 
	g›î©‹
 !(c⁄° 
EV_P
Ëc⁄° 
throw
 ()

178  (*
this
 =
EV_A
);

181 
›î©‹
 
	gev_lo›
 * (Ëc⁄° 
throw
 ()

183  
	gEV_AX
;

186 
›î©‹
 c⁄° 
	gev_lo›
 * (Ëc⁄° 
throw
 ()

188  
	gEV_AX
;

191 
boﬁ
 
is_deÁu…
 (Ëc⁄° 
throw
 ()

193  
	gEV_AX
 =
ev_deÁu…_lo›
 (0);

197 #i‡
EV_COMPAT3


198 
lo›
 (
Êags
 = 0)

200 
ev_run
 (
EV_AX_
 
Êags
);

203 
u∆o›
 (
how_t
 
how
 = 
ONE
Ë
throw
 ()

205 
ev_bªak
 (
EV_AX_
 
how
);

209 
run
 (
Êags
 = 0)

211 
ev_run
 (
EV_AX_
 
Êags
);

214 
bªak_lo›
 (
how_t
 
how
 = 
ONE
Ë
throw
 ()

216 
ev_bªak
 (
EV_AX_
 
how
);

219 
po°_f‹k
 (Ë
throw
 ()

221 
ev_lo›_f‹k
 (
EV_AX
);

224 
backíd
 (Ëc⁄° 
throw
 ()

226  
ev_backíd
 (
EV_AX
);

229 
t°amp
 
now
 (Ëc⁄° 
throw
 ()

231  
ev_now
 (
EV_AX
);

234 
ªf
 (Ë
throw
 ()

236 
ev_ªf
 (
EV_AX
);

239 
uƒef
 (Ë
throw
 ()

241 
ev_uƒef
 (
EV_AX
);

244 #i‡
EV_FEATURE_API


245 
ôî©i⁄
 (Ëc⁄° 
throw
 ()

247  
ev_ôî©i⁄
 (
EV_AX
);

250 
dïth
 (Ëc⁄° 
throw
 ()

252  
ev_dïth
 (
EV_AX
);

255 
£t_io_cﬁÀ˘_öãrvÆ
 (
t°amp
 
öãrvÆ
Ë
throw
 ()

257 
ev_£t_io_cﬁÀ˘_öãrvÆ
 (
EV_AX_
 
öãrvÆ
);

260 
£t_timeout_cﬁÀ˘_öãrvÆ
 (
t°amp
 
öãrvÆ
Ë
throw
 ()

262 
ev_£t_timeout_cﬁÀ˘_öãrvÆ
 (
EV_AX_
 
öãrvÆ
);

267 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, (*
cb
)(, *), *
¨g
 = 0Ë
throw
 ()

269 
ev_⁄˚
 (
EV_AX_
 
fd
, 
evíts
, 
timeout
, 
cb
, 
¨g
);

273 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

274 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, 
K
 *
obje˘
Ë
throw
 ()

276 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
mëhod_thunk
<
K
, 
mëhod
>, 
obje˘
);

280 
	gãm∂©e
<
˛ass
 
	gK
>

281 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, 
K
 *
obje˘
Ë
throw
 ()

283 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
mëhod_thunk
<
K
, &K::
›î©‹
 ()>, 
obje˘
);

286 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

287 
mëhod_thunk
 (
ªvíts
, *
¨g
)

289 (
	g°©ic_ˇ°
<
	gK
 *>(
	g¨g
)->*
	gmëhod
)

290 (
	gªvíts
);

294 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

295 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, 
K
 *
obje˘
Ë
throw
 ()

297 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
mëhod_nﬂrgs_thunk
<
K
, 
mëhod
>, 
obje˘
);

300 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

301 
mëhod_nﬂrgs_thunk
 (
ªvíts
, *
¨g
)

303 (
	g°©ic_ˇ°
<
	gK
 *>(
	g¨g
)->*
	gmëhod
)

308 
	gãm∂©e
<(*
	gcb
)()>

309 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
Ë
throw
 ()

311 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
sim∂î_func_thunk
<
cb
>);

314 
	gãm∂©e
<(*
	gcb
)()>

315 
sim∂î_func_thunk
 (
ªvíts
, *
¨g
)

317 (*
	gcb
)

318 (
	gªvíts
);

322 
	gãm∂©e
<(*
	gcb
)()>

323 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
Ë
throw
 ()

325 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
sim∂e°_func_thunk
<
cb
>);

328 
	gãm∂©e
<(*
	gcb
)()>

329 
sim∂e°_func_thunk
 (
ªvíts
, *
¨g
)

331 (*
	gcb
)

335 
„ed_fd_evít
 (
fd
, 
ªvíts
Ë
throw
 ()

337 
ev_„ed_fd_evít
 (
EV_AX_
 
fd
, 
ªvíts
);

340 
„ed_sig«l_evít
 (
signum
Ë
throw
 ()

342 
ev_„ed_sig«l_evít
 (
EV_AX_
 
signum
);

345 #i‡
EV_MULTIPLICITY


346 
ev_lo›
* 
	gEV_AX
;

351 #i‡
EV_MULTIPLICITY


352 
	gdy«mic_lo›
 : 
lo›_ªf


355 
dy«mic_lo›
 (
Êags
 = 
AUTO
Ë
throw
 (
bad_lo›
)

356 : 
lo›_ªf
 (
ev_lo›_√w
 (
Êags
))

358 i‡(!
EV_AX
)

359 
throw
 
bad_lo›
 ();

362 ~
dy«mic_lo›
 (Ë
throw
 ()

364 
ev_lo›_de°roy
 (
EV_AX
);

365 
	gEV_AX
 = 0;

368 
	g¥iv©e
:

370 
dy«mic_lo›
 (const dynamic_loop &);

372 
	gdy«mic_lo›
 & 
	g›î©‹
(c⁄° 
dy«mic_lo›
 &);

377 
	gdeÁu…_lo›
 : 
lo›_ªf


379 
deÁu…_lo›
 (
Êags
 = 
AUTO
Ë
throw
 (
bad_lo›
)

380 #i‡
EV_MULTIPLICITY


381 : 
lo›_ªf
 (
ev_deÁu…_lo›
 (
Êags
))

385 #i‡
EV_MULTIPLICITY


386 !
EV_AX


388 !
ev_deÁu…_lo›
 (
Êags
)

391 
throw
 
bad_lo›
 ();

394 
	g¥iv©e
:

395 
deÁu…_lo›
 (const default_loop &);

396 
	gdeÁu…_lo›
 &
	g›î©‹
 = (c⁄° 
deÁu…_lo›
 &);

399 
ölöe
 
lo›_ªf
 
gë_deÁu…_lo›
 (Ë
throw
 ()

401 #i‡
EV_MULTIPLICITY


402  
ev_deÁu…_lo›
 (0);

404  
lo›_ªf
 ();

408 #unde‡
EV_AX


409 #unde‡
EV_AX_


411 #unde‡
EV_PX


412 #unde‡
EV_PX_


413 #i‡
EV_MULTIPLICITY


414 
	#EV_PX
 
lo›_ªf
 
EV_A


	)

415 
	#EV_PX_
 
lo›_ªf
 
EV_A_


	)

417 
	#EV_PX


	)

418 
	#EV_PX_


	)

421 
	gãm∂©e
<
˛ass
 
	gev_w©chî
, cœs†
	gw©chî
>

422 
	gba£
 : 
ev_w©chî


424 #i‡
EV_MULTIPLICITY


425 
EV_PX
;

428 
£t
 (
EV_P
Ë
throw
 ()

430 
	gthis
->
	gEV_A
 = 
EV_A
;

434 
ba£
 (
EV_PX
Ë
throw
 ()

435 #i‡
EV_MULTIPLICITY


436 : 
EV_A
 (EV_A)

439 
ev_öô
 (
this
, 0);

442 
£t_
 (c⁄° *
d©a
, (*
cb
)(
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)Ë
throw
 ()

444 
	gthis
->
	gd©a
 = (*)
d©a
;

445 
ev_£t_cb
 (
°©ic_ˇ°
<
ev_w©chî
 *>(
this
), 
cb
);

449 
	gãm∂©e
<(*
	gfun˘i⁄
)(
	gw©chî
 &
	gw
, )>

450 
£t
 (*
d©a
 = 0Ë
throw
 ()

452 
£t_
 (
d©a
, 
fun˘i⁄_thunk
<
fun˘i⁄
>);

455 
	gãm∂©e
<(*
	gfun˘i⁄
)(
	gw©chî
 &
	gw
, )>

456 
fun˘i⁄_thunk
 (
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)

458 
	gfun˘i⁄


459 (*
	g°©ic_ˇ°
<
	gw©chî
 *>(
	gw
), 
	gªvíts
);

463 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)(
w©chî
 &
w
, )>

464 
£t
 (
K
 *
obje˘
Ë
throw
 ()

466 
£t_
 (
obje˘
, 
mëhod_thunk
<
K
, 
mëhod
>);

470 
	gãm∂©e
<
˛ass
 
	gK
>

471 
£t
 (
K
 *
obje˘
Ë
throw
 ()

473 
£t_
 (
obje˘
, 
mëhod_thunk
<
K
, &K::
›î©‹
 ()>);

476 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)(
w©chî
 &
w
, )>

477 
mëhod_thunk
 (
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)

479 (
	g°©ic_ˇ°
<
	gK
 *>(
	gw
->
	gd©a
)->*
	gmëhod
)

480 (*
	g°©ic_ˇ°
<
	gw©chî
 *>(
	gw
), 
	gªvíts
);

484 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

485 
£t
 (
K
 *
obje˘
Ë
throw
 ()

487 
£t_
 (
obje˘
, 
mëhod_nﬂrgs_thunk
<
K
, 
mëhod
>);

490 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

491 
mëhod_nﬂrgs_thunk
 (
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)

493 (
	g°©ic_ˇ°
<
	gK
 *>(
	gw
->
	gd©a
)->*
	gmëhod
)

497 
›î©‹
 ()(
	gevíts
 = 
EV_UNDEF
)

500 
ev_cb
 (
°©ic_ˇ°
<
ev_w©chî
 *>(
this
))

501 (
°©ic_ˇ°
<
ev_w©chî
 *>(
this
), 
evíts
);

504 
boﬁ
 
is_a˘ive
 (Ëc⁄° 
throw
 ()

506  
ev_is_a˘ive
 (
°©ic_ˇ°
<c⁄° 
ev_w©chî
 *>(
this
));

509 
boﬁ
 
is_≥ndög
 (Ëc⁄° 
throw
 ()

511  
ev_is_≥ndög
 (
°©ic_ˇ°
<c⁄° 
ev_w©chî
 *>(
this
));

514 
„ed_evít
 (
ªvíts
Ë
throw
 ()

516 
ev_„ed_evít
 (
EV_A_
 
°©ic_ˇ°
<
ev_w©chî
 *>(
this
), 
ªvíts
);

520 
ölöe
 
t°amp
 
now
 (
EV_P
Ë
throw
 ()

522  
ev_now
 (
EV_A
);

525 
ölöe
 
dñay
 (
t°amp
 
öãrvÆ
Ë
throw
 ()

527 
ev_¶ìp
 (
öãrvÆ
);

530 
ölöe
 
vîsi⁄_maj‹
 (Ë
throw
 ()

532  
ev_vîsi⁄_maj‹
 ();

535 
ölöe
 
vîsi⁄_mö‹
 (Ë
throw
 ()

537  
ev_vîsi⁄_mö‹
 ();

540 
ölöe
 
suµ‹ãd_backíds
 (Ë
throw
 ()

542  
ev_suµ‹ãd_backíds
 ();

545 
ölöe
 
ªcommíded_backíds
 (Ë
throw
 ()

547  
ev_ªcommíded_backíds
 ();

550 
ölöe
 
embeddabÀ_backíds
 (Ë
throw
 ()

552  
ev_embeddabÀ_backíds
 ();

555 
ölöe
 
£t_Æloˇt‹
 (*(*
cb
)(*
±r
, 
size
Ë
throw
 ())Åhrow ()

557 
ev_£t_Æloˇt‹
 (
cb
);

560 
ölöe
 
£t_sy£º_cb
 ((*
cb
)(c⁄° *
msg
Ë
throw
 ())Åhrow ()

562 
ev_£t_sy£º_cb
 (
cb
);

565 #i‡
EV_MULTIPLICITY


566 
	#EV_CONSTRUCT
(
˝p°em
,
c°em
) \

567 (
EV_PX
 = 
	`gë_deÁu…_lo›
 ()Ë
	`throw
 () \

568 : 
ba£
<
ev_
 ## 
c°em
, 
˝p°em
> (
EV_A
) \

570 }

	)

572 
	#EV_CONSTRUCT
(
˝p°em
,
c°em
) \

573 (Ë
	`throw
 () \

575 }

	)

580 
	#EV_BEGIN_WATCHER
(
˝p°em
,
c°em
) \

582 
˝p°em
 : 
ba£
<
ev_
 ## 
c°em
, cppstem> \

584 
	`°¨t
 (Ë
	`throw
 () \

586 
ev_
 ## 
c°em
 ## 
	`_°¨t
 (
EV_A_
 
°©ic_ˇ°
<ev_ ## c°em *>(
this
)); \

589 
	`°›
 (Ë
	`throw
 () \

591 
ev_
 ## 
c°em
 ## 
	`_°›
 (
EV_A_
 
°©ic_ˇ°
<ev_ ## c°em *>(
this
)); \

594 
˝p°em
 
	`EV_CONSTRUCT
(˝p°em,
c°em
) \

596 ~
	`˝p°em
 (Ë
	`throw
 () \

598 
	`°›
 (); \

601 
usög
 
ba£
<
ev_
 ## 
c°em
, 
˝p°em
>::
£t
; \

603 
¥iv©e
: \

605 
	`˝p°em
 (c⁄° 
˝p°em
 &
o
); \

607 
˝p°em
 &
›î©‹
 =(c⁄° cµ°em &
o
); \

609 
public
:

	)

611 
	#EV_END_WATCHER
(
˝p°em
,
c°em
) \

612 };

	)

614 
EV_BEGIN_WATCHER
 (
io
, io)

615 
£t
 (
fd
, 
evíts
Ë
throw
 ()

617 
	ga˘ive
 = 
is_a˘ive
 ();

618 i‡(
	ga˘ive
Ë
°›
 ();

619 
ev_io_£t
 (
°©ic_ˇ°
<
ev_io
 *>(
this
), 
fd
, 
evíts
);

620 i‡(
	ga˘ive
Ë
°¨t
 ();

623 
£t
 (
evíts
Ë
throw
 ()

625 
	ga˘ive
 = 
is_a˘ive
 ();

626 i‡(
	ga˘ive
Ë
°›
 ();

627 
ev_io_£t
 (
°©ic_ˇ°
<
ev_io
 *>(
this
), 
fd
, 
evíts
);

628 i‡(
	ga˘ive
Ë
°¨t
 ();

631 
°¨t
 (
fd
, 
evíts
Ë
throw
 ()

633 
£t
 (
fd
, 
evíts
);

634 
°¨t
 ();

636 
EV_END_WATCHER
 (
io
, io)

638 
EV_BEGIN_WATCHER
 (
timî
,Åimer)

639 
£t
 (
ev_t°amp
 
a·î
,Év_t°am∞
ª≥©
 = 0.Ë
throw
 ()

641 
a˘ive
 = 
is_a˘ive
 ();

642 i‡(
	ga˘ive
Ë
°›
 ();

643 
ev_timî_£t
 (
°©ic_ˇ°
<
ev_timî
 *>(
this
), 
a·î
, 
ª≥©
);

644 i‡(
	ga˘ive
Ë
°¨t
 ();

647 
°¨t
 (
ev_t°amp
 
a·î
,Év_t°am∞
ª≥©
 = 0.Ë
throw
 ()

649 
£t
 (
a·î
, 
ª≥©
);

650 
°¨t
 ();

653 
agaö
 (Ë
throw
 ()

655 
ev_timî_agaö
 (
EV_A_
 
°©ic_ˇ°
<
ev_timî
 *>(
this
));

658 
ev_t°amp
 
ªmaöög
 ()

660  
ev_timî_ªmaöög
 (
EV_A_
 
°©ic_ˇ°
<
ev_timî
 *>(
this
));

662 
EV_END_WATCHER
 (
timî
,Åimer)

664 #i‡
EV_PERIODIC_ENABLE


665 
EV_BEGIN_WATCHER
 (
≥riodic
,Öeriodic)

666 
£t
 (
ev_t°amp
 
©
,Év_t°am∞
öãrvÆ
 = 0.Ë
throw
 ()

668 
a˘ive
 = 
is_a˘ive
 ();

669 i‡(
	ga˘ive
Ë
°›
 ();

670 
ev_≥riodic_£t
 (
°©ic_ˇ°
<
ev_≥riodic
 *>(
this
), 
©
, 
öãrvÆ
, 0);

671 i‡(
	ga˘ive
Ë
°¨t
 ();

674 
°¨t
 (
ev_t°amp
 
©
,Év_t°am∞
öãrvÆ
 = 0.Ë
throw
 ()

676 
£t
 (
©
, 
öãrvÆ
);

677 
°¨t
 ();

680 
agaö
 (Ë
throw
 ()

682 
ev_≥riodic_agaö
 (
EV_A_
 
°©ic_ˇ°
<
ev_≥riodic
 *>(
this
));

684 
EV_END_WATCHER
 (
≥riodic
,Öeriodic)

687 #i‡
EV_SIGNAL_ENABLE


688 
EV_BEGIN_WATCHER
 (
sig
, 
sig«l
)

689 
£t
 (
signum
Ë
throw
 ()

691 
	ga˘ive
 = 
is_a˘ive
 ();

692 i‡(
	ga˘ive
Ë
°›
 ();

693 
ev_sig«l_£t
 (
°©ic_ˇ°
<
ev_sig«l
 *>(
this
), 
signum
);

694 i‡(
	ga˘ive
Ë
°¨t
 ();

697 
°¨t
 (
signum
Ë
throw
 ()

699 
£t
 (
signum
);

700 
°¨t
 ();

702 
EV_END_WATCHER
 (
sig
, 
sig«l
)

705 #i‡
EV_CHILD_ENABLE


706 
EV_BEGIN_WATCHER
 (
chûd
, child)

707 
£t
 (
pid
, 
åa˚
 = 0Ë
throw
 ()

709 
a˘ive
 = 
is_a˘ive
 ();

710 i‡(
	ga˘ive
Ë
°›
 ();

711 
ev_chûd_£t
 (
°©ic_ˇ°
<
ev_chûd
 *>(
this
), 
pid
, 
åa˚
);

712 i‡(
	ga˘ive
Ë
°¨t
 ();

715 
°¨t
 (
pid
, 
åa˚
 = 0Ë
throw
 ()

717 
£t
 (
pid
, 
åa˚
);

718 
°¨t
 ();

720 
EV_END_WATCHER
 (
chûd
, child)

723 #i‡
EV_STAT_ENABLE


724 
EV_BEGIN_WATCHER
 (
°©
, stat)

725 
£t
 (c⁄° *
∑th
, 
ev_t°amp
 
öãrvÆ
 = 0.Ë
throw
 ()

727 
a˘ive
 = 
is_a˘ive
 ();

728 i‡(
	ga˘ive
Ë
°›
 ();

729 
ev_°©_£t
 (
°©ic_ˇ°
<
ev_°©
 *>(
this
), 
∑th
, 
öãrvÆ
);

730 i‡(
	ga˘ive
Ë
°¨t
 ();

733 
°¨t
 (c⁄° *
∑th
, 
ev_t°amp
 
öãrvÆ
 = 0.Ë
throw
 ()

735 
°›
 ();

736 
£t
 (
∑th
, 
öãrvÆ
);

737 
°¨t
 ();

740 
upd©e
 (Ë
throw
 ()

742 
ev_°©_°©
 (
EV_A_
 
°©ic_ˇ°
<
ev_°©
 *>(
this
));

744 
EV_END_WATCHER
 (
°©
, stat)

747 #i‡
EV_IDLE_ENABLE


748 
EV_BEGIN_WATCHER
 (
idÀ
, idle)

749 
£t
 (Ë
throw
 () { }

750 
EV_END_WATCHER
 (
idÀ
, idle)

753 #i‡
EV_PREPARE_ENABLE


754 
EV_BEGIN_WATCHER
 (
¥ï¨e
,Örepare)

755 
£t
 (Ë
throw
 () { }

756 
EV_END_WATCHER
 (
¥ï¨e
,Örepare)

759 #i‡
EV_CHECK_ENABLE


760 
EV_BEGIN_WATCHER
 (
check
, check)

761 
£t
 (Ë
throw
 () { }

762 
EV_END_WATCHER
 (
check
, check)

765 #i‡
EV_EMBED_ENABLE


766 
EV_BEGIN_WATCHER
 (
embed
,Émbed)

767 
£t_embed
 (
ev_lo›
 *
embedded_lo›
Ë
throw
 ()

769 
	ga˘ive
 = 
is_a˘ive
 ();

770 i‡(
	ga˘ive
Ë
°›
 ();

771 
ev_embed_£t
 (
°©ic_ˇ°
<
ev_embed
 *>(
this
), 
embedded_lo›
);

772 i‡(
	ga˘ive
Ë
°¨t
 ();

775 
°¨t
 (
ev_lo›
 *
embedded_lo›
Ë
throw
 ()

777 
£t
 (
embedded_lo›
);

778 
°¨t
 ();

781 
swìp
 ()

783 
ev_embed_swìp
 (
EV_A_
 
°©ic_ˇ°
<
ev_embed
 *>(
this
));

785 
EV_END_WATCHER
 (
embed
,Émbed)

788 #i‡
EV_FORK_ENABLE


789 
EV_BEGIN_WATCHER
 (
f‹k
, fork)

790 
£t
 (Ë
throw
 () { }

791 
EV_END_WATCHER
 (
f‹k
, fork)

794 #i‡
EV_ASYNC_ENABLE


795 
EV_BEGIN_WATCHER
 (
async
,ásync)

796 
£nd
 (Ë
throw
 ()

798 
ev_async_£nd
 (
EV_A_
 
°©ic_ˇ°
<
ev_async
 *>(
this
));

801 
boﬁ
 
async_≥ndög
 (Ë
throw
 ()

803  
ev_async_≥ndög
 (
°©ic_ˇ°
<
ev_async
 *>(
this
));

805 
EV_END_WATCHER
 (
async
,ásync)

808 #unde‡
EV_PX


809 #unde‡
EV_PX_


810 #unde‡
EV_CONSTRUCT


811 #unde‡
EV_BEGIN_WATCHER


812 #unde‡
EV_END_WATCHER


	@libs/include/libev/ev.h

40 #i‚de‡
EV_H_


41 
	#EV_H_


	)

43 #ifde‡
__˝lu•lus


44 
	#EV_CPP
(
x
Ë
	)
x

46 
	#EV_CPP
(
x
)

	)

49 
	#EV_THROW
 
	`EV_CPP
(
	`throw
())

	)

51 
EV_CPP
("C" {)

56 #i‚de‡
EV_COMPAT3


57 
	#EV_COMPAT3
 1

	)

60 #i‚de‡
EV_FEATURES


61 #i‡
deföed
 
__OPTIMIZE_SIZE__


62 
	#EV_FEATURES
 0x7c

	)

64 
	#EV_FEATURES
 0x7f

	)

68 
	#EV_FEATURE_CODE
 ((
EV_FEATURES
Ë& 1)

	)

69 
	#EV_FEATURE_DATA
 ((
EV_FEATURES
Ë& 2)

	)

70 
	#EV_FEATURE_CONFIG
 ((
EV_FEATURES
Ë& 4)

	)

71 
	#EV_FEATURE_API
 ((
EV_FEATURES
Ë& 8)

	)

72 
	#EV_FEATURE_WATCHERS
 ((
EV_FEATURES
Ë& 16)

	)

73 
	#EV_FEATURE_BACKENDS
 ((
EV_FEATURES
Ë& 32)

	)

74 
	#EV_FEATURE_OS
 ((
EV_FEATURES
Ë& 64)

	)

77 #i‚de‡
EV_MINPRI


78 
	#EV_MINPRI
 (
EV_FEATURE_CONFIG
 ? -2 : 0)

	)

80 #i‚de‡
EV_MAXPRI


81 
	#EV_MAXPRI
 (
EV_FEATURE_CONFIG
 ? +2 : 0)

	)

84 #i‚de‡
EV_MULTIPLICITY


85 
	#EV_MULTIPLICITY
 
EV_FEATURE_CONFIG


	)

88 #i‚de‡
EV_PERIODIC_ENABLE


89 
	#EV_PERIODIC_ENABLE
 
EV_FEATURE_WATCHERS


	)

92 #i‚de‡
EV_STAT_ENABLE


93 
	#EV_STAT_ENABLE
 
EV_FEATURE_WATCHERS


	)

96 #i‚de‡
EV_PREPARE_ENABLE


97 
	#EV_PREPARE_ENABLE
 
EV_FEATURE_WATCHERS


	)

100 #i‚de‡
EV_CHECK_ENABLE


101 
	#EV_CHECK_ENABLE
 
EV_FEATURE_WATCHERS


	)

104 #i‚de‡
EV_IDLE_ENABLE


105 
	#EV_IDLE_ENABLE
 
EV_FEATURE_WATCHERS


	)

108 #i‚de‡
EV_FORK_ENABLE


109 
	#EV_FORK_ENABLE
 
EV_FEATURE_WATCHERS


	)

112 #i‚de‡
EV_CLEANUP_ENABLE


113 
	#EV_CLEANUP_ENABLE
 
EV_FEATURE_WATCHERS


	)

116 #i‚de‡
EV_SIGNAL_ENABLE


117 
	#EV_SIGNAL_ENABLE
 
EV_FEATURE_WATCHERS


	)

120 #i‚de‡
EV_CHILD_ENABLE


121 #ifde‡
_WIN32


122 
	#EV_CHILD_ENABLE
 0

	)

124 
	#EV_CHILD_ENABLE
 
EV_FEATURE_WATCHERS


	)

128 #i‚de‡
EV_ASYNC_ENABLE


129 
	#EV_ASYNC_ENABLE
 
EV_FEATURE_WATCHERS


	)

132 #i‚de‡
EV_EMBED_ENABLE


133 
	#EV_EMBED_ENABLE
 
EV_FEATURE_WATCHERS


	)

136 #i‚de‡
EV_WALK_ENABLE


137 
	#EV_WALK_ENABLE
 0

	)

142 #i‡
EV_CHILD_ENABLE
 && !
EV_SIGNAL_ENABLE


143 #unde‡
EV_SIGNAL_ENABLE


144 
	#EV_SIGNAL_ENABLE
 1

	)

149 
	tev_t°amp
;

151 #i‚de‡
EV_ATOMIC_T


152 
	~<sig«l.h
>

153 
	#EV_ATOMIC_T
 
sig_©omic_t
 vﬁ©ûe

	)

156 #i‡
EV_STAT_ENABLE


157 #ifde‡
_WIN32


158 
	~<time.h
>

159 
	~<sys/ty≥s.h
>

161 
	~<sys/°©.h
>

165 #i‡
EV_MULTIPLICITY


166 
ev_lo›
;

167 
	#EV_P
 
ev_lo›
 *
lo›


	)

168 
	#EV_P_
 
EV_P
,

	)

169 
	#EV_A
 
lo›


	)

170 
	#EV_A_
 
EV_A
,

	)

171 
	#EV_DEFAULT_UC
 
	`ev_deÁu…_lo›_uc_
 (Ë

	)

172 
	#EV_DEFAULT_UC_
 
EV_DEFAULT_UC
,

	)

173 
	#EV_DEFAULT
 
	`ev_deÁu…_lo›
 (0Ë

	)

174 
	#EV_DEFAULT_
 
EV_DEFAULT
,

	)

176 
	#EV_P
 

	)

177 
	#EV_P_


	)

178 
	#EV_A


	)

179 
	#EV_A_


	)

180 
	#EV_DEFAULT


	)

181 
	#EV_DEFAULT_


	)

182 
	#EV_DEFAULT_UC


	)

183 
	#EV_DEFAULT_UC_


	)

184 #unde‡
EV_EMBED_ENABLE


188 #i‡
__STDC_VERSION__
 >199901L || 
__GNUC__
 >= 3

189 
	#EV_INLINE
 
ölöe


	)

191 
	#EV_INLINE
 

	)

194 #ifde‡
EV_API_STATIC


195 
	#EV_API_DECL
 

	)

197 
	#EV_API_DECL
 

	)

201 #i‚de‡
EV_PROTOTYPES


202 
	#EV_PROTOTYPES
 1

	)

207 
	#EV_VERSION_MAJOR
 4

	)

208 
	#EV_VERSION_MINOR
 15

	)

212 
EV_UNDEF
 = ()0xFFFFFFFF,

213 
EV_NONE
 = 0x00,

214 
EV_READ
 = 0x01,

215 
EV_WRITE
 = 0x02,

216 
EV__IOFDSET
 = 0x80,

217 
EV_IO
 = 
EV_READ
,

218 
EV_TIMER
 = 0x00000100,

219 #i‡
EV_COMPAT3


220 
EV_TIMEOUT
 = 
EV_TIMER
,

222 
EV_PERIODIC
 = 0x00000200,

223 
EV_SIGNAL
 = 0x00000400,

224 
EV_CHILD
 = 0x00000800,

225 
EV_STAT
 = 0x00001000,

226 
EV_IDLE
 = 0x00002000,

227 
EV_PREPARE
 = 0x00004000,

228 
EV_CHECK
 = 0x00008000,

229 
EV_EMBED
 = 0x00010000,

230 
EV_FORK
 = 0x00020000,

231 
EV_CLEANUP
 = 0x00040000,

232 
EV_ASYNC
 = 0x00080000,

233 
EV_CUSTOM
 = 0x01000000,

234 
EV_ERROR
 = ()0x80000000

238 #i‚de‡
EV_COMMON


239 
	#EV_COMMON
 *
d©a
;

	)

242 #i‚de‡
EV_CB_DECLARE


243 
	#EV_CB_DECLARE
(
ty≥
Ë(*
cb
)(
EV_P_
 ty≥ *
w
, 
ªvíts
);

	)

245 #i‚de‡
EV_CB_INVOKE


246 
	#EV_CB_INVOKE
(
w©chî
,
ªvíts
Ë(w©chî)->
	`cb
 (
	`EV_A_
 (w©chî), (ªvíts))

	)

250 
	#EV_CB
(
ty≥
,
«me
Ë
	`«me
 (
EV_P_
 
ev_
 ##Åy≥ *
w
, 
ªvíts
)

	)

269 #i‡
EV_MINPRI
 =
EV_MAXPRI


270 
	#EV_DECL_PRIORITY


	)

271 #ñi‡!
deföed
 (
EV_DECL_PRIORITY
)

272 
	#EV_DECL_PRIORITY
 
¥i‹ôy
;

	)

276 
	#EV_WATCHER
(
ty≥
) \

277 
a˘ive
; \

278 
≥ndög
; \

279 
EV_DECL_PRIORITY
 \

280 
EV_COMMON
 \

281 
	`EV_CB_DECLARE
 (
ty≥
Ë

	)

283 
	#EV_WATCHER_LIST
(
ty≥
) \

284 
	`EV_WATCHER
 (
ty≥
) \

285 
ev_w©chî_li°
 *
√xt
;

	)

287 
	#EV_WATCHER_TIME
(
ty≥
) \

288 
	`EV_WATCHER
 (
ty≥
) \

289 
ev_t°amp
 
©
;

	)

292 
	sev_w©chî


294 
EV_WATCHER
 (
ev_w©chî
)

295 } 
	tev_w©chî
;

298 
	sev_w©chî_li°


300 
EV_WATCHER_LIST
 (
ev_w©chî_li°
)

301 } 
	tev_w©chî_li°
;

304 
	sev_w©chî_time


306 
EV_WATCHER_TIME
 (
ev_w©chî_time
)

307 } 
	tev_w©chî_time
;

311 
	sev_io


313 
EV_WATCHER_LIST
 (
ev_io
)

315 
	gfd
;

316 
	gevíts
;

317 } 
	tev_io
;

321 
	sev_timî


323 
EV_WATCHER_TIME
 (
ev_timî
)

325 
ev_t°amp
 
	gª≥©
;

326 } 
	tev_timî
;

330 
	sev_≥riodic


332 
EV_WATCHER_TIME
 (
ev_≥riodic
)

334 
ev_t°amp
 
	goff£t
;

335 
ev_t°amp
 
	göãrvÆ
;

336 
ev_t°amp
 (*
ªscheduÀ_cb
)(
ev_≥riodic
 *
	gw
,Év_t°am∞
	gnow
Ë
	gEV_THROW
;

337 } 
	tev_≥riodic
;

341 
	sev_sig«l


343 
EV_WATCHER_LIST
 (
ev_sig«l
)

345 
	gsignum
;

346 } 
	tev_sig«l
;

351 
	sev_chûd


353 
EV_WATCHER_LIST
 (
ev_chûd
)

355 
	gÊags
;

356 
	gpid
;

357 
	gΩid
;

358 
	gr°©us
;

359 } 
	tev_chûd
;

361 #i‡
EV_STAT_ENABLE


363 #ifde‡
_WIN32


364 
_°©i64
 
	tev_°©d©a
;

366 
°©
 
	tev_°©d©a
;

371 
	sev_°©


373 
EV_WATCHER_LIST
 (
ev_°©
)

375 
ev_timî
 
	gtimî
;

376 
ev_t°amp
 
	göãrvÆ
;

377 c⁄° *
	g∑th
;

378 
ev_°©d©a
 
	g¥ev
;

379 
ev_°©d©a
 
	g©å
;

381 
	gwd
;

382 } 
	tev_°©
;

385 #i‡
EV_IDLE_ENABLE


388 
	sev_idÀ


390 
EV_WATCHER
 (
ev_idÀ
)

391 } 
	tev_idÀ
;

397 
	sev_¥ï¨e


399 
EV_WATCHER
 (
ev_¥ï¨e
)

400 } 
	tev_¥ï¨e
;

404 
	sev_check


406 
EV_WATCHER
 (
ev_check
)

407 } 
	tev_check
;

409 #i‡
EV_FORK_ENABLE


412 
	sev_f‹k


414 
EV_WATCHER
 (
ev_f‹k
)

415 } 
	tev_f‹k
;

418 #i‡
EV_CLEANUP_ENABLE


421 
	sev_˛ónup


423 
EV_WATCHER
 (
ev_˛ónup
)

424 } 
	tev_˛ónup
;

427 #i‡
EV_EMBED_ENABLE


430 
	sev_embed


432 
EV_WATCHER
 (
ev_embed
)

434 
ev_lo›
 *
	gŸhî
;

435 
ev_io
 
	gio
;

436 
ev_¥ï¨e
 
	g¥ï¨e
;

437 
ev_check
 
	gcheck
;

438 
ev_timî
 
	gtimî
;

439 
ev_≥riodic
 
	g≥riodic
;

440 
ev_idÀ
 
	gidÀ
;

441 
ev_f‹k
 
	gf‹k
;

442 #i‡
EV_CLEANUP_ENABLE


443 
ev_˛ónup
 
	g˛ónup
;

445 } 
	tev_embed
;

448 #i‡
EV_ASYNC_ENABLE


451 
	sev_async


453 
EV_WATCHER
 (
ev_async
)

455 
EV_ATOMIC_T
 
	g£¡
;

456 } 
	tev_async
;

458 
	#ev_async_≥ndög
(
w
Ë(+(w)->
£¡
)

	)

462 
	uev_™y_w©chî


464 
ev_w©chî
 
	gw
;

465 
ev_w©chî_li°
 
	gwl
;

467 
ev_io
 
	gio
;

468 
ev_timî
 
	gtimî
;

469 
ev_≥riodic
 
	g≥riodic
;

470 
ev_sig«l
 
	gsig«l
;

471 
ev_chûd
 
	gchûd
;

472 #i‡
EV_STAT_ENABLE


473 
ev_°©
 
	g°©
;

475 #i‡
EV_IDLE_ENABLE


476 
ev_idÀ
 
	gidÀ
;

478 
ev_¥ï¨e
 
	g¥ï¨e
;

479 
ev_check
 
	gcheck
;

480 #i‡
EV_FORK_ENABLE


481 
ev_f‹k
 
	gf‹k
;

483 #i‡
EV_CLEANUP_ENABLE


484 
ev_˛ónup
 
	g˛ónup
;

486 #i‡
EV_EMBED_ENABLE


487 
ev_embed
 
	gembed
;

489 #i‡
EV_ASYNC_ENABLE


490 
ev_async
 
	gasync
;

497 
	gEVFLAG_AUTO
 = 0x00000000U,

499 
	gEVFLAG_NOENV
 = 0x01000000U,

500 
	gEVFLAG_FORKCHECK
 = 0x02000000U,

502 
	gEVFLAG_NOINOTIFY
 = 0x00100000U,

503 #i‡
EV_COMPAT3


504 
	gEVFLAG_NOSIGFD
 = 0,

506 
	gEVFLAG_SIGNALFD
 = 0x00200000U,

507 
	gEVFLAG_NOSIGMASK
 = 0x00400000U

512 
	gEVBACKEND_SELECT
 = 0x00000001U,

513 
	gEVBACKEND_POLL
 = 0x00000002U,

514 
	gEVBACKEND_EPOLL
 = 0x00000004U,

515 
	gEVBACKEND_KQUEUE
 = 0x00000008U,

516 
	gEVBACKEND_DEVPOLL
 = 0x00000010U,

517 
	gEVBACKEND_PORT
 = 0x00000020U,

518 
	gEVBACKEND_ALL
 = 0x0000003FU,

519 
	gEVBACKEND_MASK
 = 0x0000FFFFU

522 #i‡
EV_PROTOTYPES


523 
EV_API_DECL
 
ev_vîsi⁄_maj‹
 (Ë
	gEV_THROW
;

524 
EV_API_DECL
 
ev_vîsi⁄_mö‹
 (Ë
	gEV_THROW
;

526 
EV_API_DECL
 
ev_suµ‹ãd_backíds
 (Ë
	gEV_THROW
;

527 
EV_API_DECL
 
ev_ªcommíded_backíds
 (Ë
	gEV_THROW
;

528 
EV_API_DECL
 
ev_embeddabÀ_backíds
 (Ë
	gEV_THROW
;

530 
EV_API_DECL
 
ev_t°amp
 
ev_time
 (Ë
	gEV_THROW
;

531 
EV_API_DECL
 
ev_¶ìp
 (
ev_t°amp
 
dñay
Ë
	gEV_THROW
;

539 
EV_API_DECL
 
ev_£t_Æloˇt‹
 (*(*
cb
)(*
±r
, 
size
Ë
EV_THROW
Ë
	gEV_THROW
;

545 
EV_API_DECL
 
ev_£t_sy£º_cb
 ((*
cb
)(c⁄° *
msg
Ë
EV_THROW
Ë
	gEV_THROW
;

547 #i‡
EV_MULTIPLICITY


551 
EV_API_DECL
 
ev_lo›
 *
ev_deÁu…_lo›
 (
Êags
 
EV_CPP
 (0)Ë
EV_THROW
;

553 #ifde‡
EV_API_STATIC


554 
EV_API_DECL
 
ev_lo›
 *
	gev_deÁu…_lo›_±r
;

557 
EV_INLINE
 
ev_lo›
 *

558 
ev_deÁu…_lo›_uc_
 (Ë
	gEV_THROW


560 
ev_lo›
 *
ev_deÁu…_lo›_±r
;

562  
	gev_deÁu…_lo›_±r
;

565 
EV_INLINE
 

566 
ev_is_deÁu…_lo›
 (
EV_P
Ë
	gEV_THROW


568  
	gEV_A
 =
EV_DEFAULT_UC
;

572 
EV_API_DECL
 
ev_lo›
 *
ev_lo›_√w
 (
Êags
 
EV_CPP
 (0)Ë
EV_THROW
;

574 
EV_API_DECL
 
ev_t°amp
 
ev_now
 (
EV_P
Ë
	gEV_THROW
;

578 
EV_API_DECL
 
ev_deÁu…_lo›
 (
Êags
 
EV_CPP
 (0)Ë
EV_THROW
;

580 
EV_API_DECL
 
ev_t°amp
 
	gev_π_now
;

582 
EV_INLINE
 
ev_t°amp


583 
ev_now
 (Ë
	gEV_THROW


585  
	gev_π_now
;

589 
EV_INLINE
 

590 
ev_is_deÁu…_lo›
 (Ë
	gEV_THROW


598 
EV_API_DECL
 
ev_lo›_de°roy
 (
EV_P
);

604 
EV_API_DECL
 
ev_lo›_f‹k
 (
EV_P
Ë
	gEV_THROW
;

606 
EV_API_DECL
 
ev_backíd
 (
EV_P
Ë
	gEV_THROW
;

608 
EV_API_DECL
 
ev_now_upd©e
 (
EV_P
Ë
	gEV_THROW
;

610 #i‡
EV_WALK_ENABLE


614 
EV_API_DECL
 
ev_wÆk
 (
EV_P_
 
ty≥s
, (*
cb
)(EV_P_ 
ty≥
, *
w
)Ë
	gEV_THROW
;

621 
	gEVRUN_NOWAIT
 = 1,

622 
	gEVRUN_ONCE
 = 2

627 
	gEVBREAK_CANCEL
 = 0,

628 
	gEVBREAK_ONE
 = 1,

629 
	gEVBREAK_ALL
 = 2

632 #i‡
EV_PROTOTYPES


633 
EV_API_DECL
 
ev_run
 (
EV_P_
 
Êags
 
EV_CPP
 (= 0));

634 
EV_API_DECL
 
ev_bªak
 (
EV_P_
 
how
 
EV_CPP
 (
EVBREAK_ONE
)Ë
EV_THROW
;

641 
EV_API_DECL
 
ev_ªf
 (
EV_P
Ë
	gEV_THROW
;

642 
EV_API_DECL
 
ev_uƒef
 (
EV_P
Ë
	gEV_THROW
;

648 
EV_API_DECL
 
ev_⁄˚
 (
EV_P_
 
fd
, 
evíts
, 
ev_t°amp
 
timeout
, (*
cb
)(
ªvíts
, *
¨g
), *¨gË
	gEV_THROW
;

650 #i‡
EV_FEATURE_API


651 
EV_API_DECL
 
ev_ôî©i⁄
 (
EV_P
Ë
	gEV_THROW
;

652 
EV_API_DECL
 
ev_dïth
 (
EV_P
Ë
	gEV_THROW
;

653 
EV_API_DECL
 
ev_vîify
 (
EV_P
Ë
	gEV_THROW
;

655 
EV_API_DECL
 
ev_£t_io_cﬁÀ˘_öãrvÆ
 (
EV_P_
 
ev_t°amp
 
öãrvÆ
Ë
	gEV_THROW
;

656 
EV_API_DECL
 
ev_£t_timeout_cﬁÀ˘_öãrvÆ
 (
EV_P_
 
ev_t°amp
 
öãrvÆ
Ë
	gEV_THROW
;

659 
EV_API_DECL
 
ev_£t_u£rd©a
 (
EV_P_
 *
d©a
Ë
	gEV_THROW
;

660 
EV_API_DECL
 *
ev_u£rd©a
 (
EV_P
Ë
	gEV_THROW
;

661 
EV_API_DECL
 
ev_£t_övoke_≥ndög_cb
 (
EV_P_
 (*
övoke_≥ndög_cb
)(
EV_P
)Ë
	gEV_THROW
;

662 
EV_API_DECL
 
ev_£t_lo›_ªÀa£_cb
 (
EV_P_
 (*
ªÀa£
)(
EV_P
), (*
acquúe
)(EV_PË
EV_THROW
Ë
	gEV_THROW
;

664 
EV_API_DECL
 
ev_≥ndög_cou¡
 (
EV_P
Ë
	gEV_THROW
;

665 
EV_API_DECL
 
ev_övoke_≥ndög
 (
EV_P
);

670 
EV_API_DECL
 
ev_su•íd
 (
EV_P
Ë
	gEV_THROW
;

671 
EV_API_DECL
 
ev_ªsume
 (
EV_P
Ë
	gEV_THROW
;

678 
	#ev_öô
(
ev
,
cb_
) do { \

679 ((
ev_w©chî
 *)(*)(
ev
))->
a˘ive
 = \

680 ((
ev_w©chî
 *)(*)(
ev
))->
≥ndög
 = 0; \

681 
	`ev_£t_¥i‹ôy
 ((
ev
), 0); \

682 
	`ev_£t_cb
 ((
ev
), 
cb_
); \

683 } 0)

	)

685 
	#ev_io_£t
(
ev
,
fd_
,
evíts_
Ëdÿ{ (ev)->
fd
 = (fd_); (ev)->
evíts
 = (evíts_Ë| 
EV__IOFDSET
; } 0)

	)

686 
	#ev_timî_£t
(
ev
,
a·î_
,
ª≥©_
Ëdÿ{ ((
ev_w©chî_time
 *)”v))->
©
 = (a·î_); (ev)->
ª≥©
 = (ª≥©_); } 0)

	)

687 
	#ev_≥riodic_£t
(
ev
,
ofs_
,
ivÆ_
,
rcb_
Ëdÿ{ (ev)->
off£t
 = (ofs_); (ev)->
öãrvÆ
 = (ivÆ_); (ev)->
ªscheduÀ_cb
 = (rcb_); } 0)

	)

688 
	#ev_sig«l_£t
(
ev
,
signum_
Ëdÿ{ (ev)->
signum
 = (signum_); } 0)

	)

689 
	#ev_chûd_£t
(
ev
,
pid_
,
åa˚_
Ëdÿ{ (ev)->
pid
 = (pid_); (ev)->
Êags
 = !!—ø˚_); } 0)

	)

690 
	#ev_°©_£t
(
ev
,
∑th_
,
öãrvÆ_
Ëdÿ{ (ev)->
∑th
 = (∑th_); (ev)->
öãrvÆ
 = (öãrvÆ_); (ev)->
wd
 = -2; } 0)

	)

691 
	#ev_idÀ_£t
(
ev
Ë

	)

692 
	#ev_¥ï¨e_£t
(
ev
Ë

	)

693 
	#ev_check_£t
(
ev
Ë

	)

694 
	#ev_embed_£t
(
ev
,
Ÿhî_
Ëdÿ{ (ev)->
Ÿhî
 = (Ÿhî_); } 0)

	)

695 
	#ev_f‹k_£t
(
ev
Ë

	)

696 
	#ev_˛ónup_£t
(
ev
Ë

	)

697 
	#ev_async_£t
(
ev
Ë

	)

699 
	#ev_io_öô
(
ev
,
cb
,
fd
,
evíts
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_io_£t
 (”v),(fd),”víts)); } 0)

	)

700 
	#ev_timî_öô
(
ev
,
cb
,
a·î
,
ª≥©
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_timî_£t
 (”v),◊·î),‘ïót)); } 0)

	)

701 
	#ev_≥riodic_öô
(
ev
,
cb
,
ofs
,
ivÆ
,
rcb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_≥riodic_£t
 (”v),(ofs),(ivÆ),‘cb)); } 0)

	)

702 
	#ev_sig«l_öô
(
ev
,
cb
,
signum
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_sig«l_£t
 (”v), (signum)); } 0)

	)

703 
	#ev_chûd_öô
(
ev
,
cb
,
pid
,
åa˚
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_chûd_£t
 (”v),’id),—ø˚)); } 0)

	)

704 
	#ev_°©_öô
(
ev
,
cb
,
∑th
,
öãrvÆ
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_°©_£t
 (”v),’©h),(öãrvÆ)); } 0)

	)

705 
	#ev_idÀ_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_idÀ_£t
 (”v)); } 0)

	)

706 
	#ev_¥ï¨e_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_¥ï¨e_£t
 (”v)); } 0)

	)

707 
	#ev_check_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_check_£t
 (”v)); } 0)

	)

708 
	#ev_embed_öô
(
ev
,
cb
,
Ÿhî
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_embed_£t
 (”v),(Ÿhî)); } 0)

	)

709 
	#ev_f‹k_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_f‹k_£t
 (”v)); } 0)

	)

710 
	#ev_˛ónup_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_˛ónup_£t
 (”v)); } 0)

	)

711 
	#ev_async_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_async_£t
 (”v)); } 0)

	)

713 
	#ev_is_≥ndög
(
ev
Ë(0 + ((
ev_w©chî
 *)(*)”v))->
≥ndög
Ë

	)

714 
	#ev_is_a˘ive
(
ev
Ë(0 + ((
ev_w©chî
 *)(*)”v))->
a˘ive
Ë

	)

716 
	#ev_cb
(
ev
Ë”v)->
cb


	)

718 #i‡
EV_MINPRI
 =
EV_MAXPRI


719 
	#ev_¥i‹ôy
(
ev
Ë(”v), 
EV_MINPRI
)

	)

720 
	#ev_£t_¥i‹ôy
(
ev
,
¥i
Ë(”v), (¥i))

	)

722 
	#ev_¥i‹ôy
(
ev
Ë(+(((
ev_w©chî
 *)(*)”v))->
¥i‹ôy
))

	)

723 
	#ev_£t_¥i‹ôy
(
ev
,
¥i
Ë–(
ev_w©chî
 *)(*)”v))->
¥i‹ôy
 = (¥i)

	)

726 
	#ev_≥riodic_©
(
ev
Ë(+((
ev_w©chî_time
 *)”v))->
©
)

	)

728 #i‚de‡
ev_£t_cb


729 
	#ev_£t_cb
(
ev
,
cb_
Ë
	`ev_cb
 (evË(cb_)

	)

734 #i‡
EV_PROTOTYPES


738 
EV_API_DECL
 
ev_„ed_evít
 (
EV_P_
 *
w
, 
ªvíts
Ë
	gEV_THROW
;

739 
EV_API_DECL
 
ev_„ed_fd_evít
 (
EV_P_
 
fd
, 
ªvíts
Ë
	gEV_THROW
;

740 #i‡
EV_SIGNAL_ENABLE


741 
EV_API_DECL
 
ev_„ed_sig«l
 (
signum
Ë
	gEV_THROW
;

742 
EV_API_DECL
 
ev_„ed_sig«l_evít
 (
EV_P_
 
signum
Ë
	gEV_THROW
;

744 
EV_API_DECL
 
ev_övoke
 (
EV_P_
 *
w
, 
ªvíts
);

745 
EV_API_DECL
 
ev_˛ór_≥ndög
 (
EV_P_
 *
w
Ë
	gEV_THROW
;

747 
EV_API_DECL
 
ev_io_°¨t
 (
EV_P_
 
ev_io
 *
w
Ë
	gEV_THROW
;

748 
EV_API_DECL
 
ev_io_°›
 (
EV_P_
 
ev_io
 *
w
Ë
	gEV_THROW
;

750 
EV_API_DECL
 
ev_timî_°¨t
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

751 
EV_API_DECL
 
ev_timî_°›
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

753 
EV_API_DECL
 
ev_timî_agaö
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

755 
EV_API_DECL
 
ev_t°amp
 
ev_timî_ªmaöög
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

757 #i‡
EV_PERIODIC_ENABLE


758 
EV_API_DECL
 
ev_≥riodic_°¨t
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
	gEV_THROW
;

759 
EV_API_DECL
 
ev_≥riodic_°›
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
	gEV_THROW
;

760 
EV_API_DECL
 
ev_≥riodic_agaö
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
	gEV_THROW
;

764 #i‡
EV_SIGNAL_ENABLE


765 
EV_API_DECL
 
ev_sig«l_°¨t
 (
EV_P_
 
ev_sig«l
 *
w
Ë
	gEV_THROW
;

766 
EV_API_DECL
 
ev_sig«l_°›
 (
EV_P_
 
ev_sig«l
 *
w
Ë
	gEV_THROW
;

770 #i‡
EV_CHILD_ENABLE


771 
EV_API_DECL
 
ev_chûd_°¨t
 (
EV_P_
 
ev_chûd
 *
w
Ë
	gEV_THROW
;

772 
EV_API_DECL
 
ev_chûd_°›
 (
EV_P_
 
ev_chûd
 *
w
Ë
	gEV_THROW
;

775 #i‡
EV_STAT_ENABLE


776 
EV_API_DECL
 
ev_°©_°¨t
 (
EV_P_
 
ev_°©
 *
w
Ë
	gEV_THROW
;

777 
EV_API_DECL
 
ev_°©_°›
 (
EV_P_
 
ev_°©
 *
w
Ë
	gEV_THROW
;

778 
EV_API_DECL
 
ev_°©_°©
 (
EV_P_
 
ev_°©
 *
w
Ë
	gEV_THROW
;

781 #i‡
EV_IDLE_ENABLE


782 
EV_API_DECL
 
ev_idÀ_°¨t
 (
EV_P_
 
ev_idÀ
 *
w
Ë
	gEV_THROW
;

783 
EV_API_DECL
 
ev_idÀ_°›
 (
EV_P_
 
ev_idÀ
 *
w
Ë
	gEV_THROW
;

786 #i‡
EV_PREPARE_ENABLE


787 
EV_API_DECL
 
ev_¥ï¨e_°¨t
 (
EV_P_
 
ev_¥ï¨e
 *
w
Ë
	gEV_THROW
;

788 
EV_API_DECL
 
ev_¥ï¨e_°›
 (
EV_P_
 
ev_¥ï¨e
 *
w
Ë
	gEV_THROW
;

791 #i‡
EV_CHECK_ENABLE


792 
EV_API_DECL
 
ev_check_°¨t
 (
EV_P_
 
ev_check
 *
w
Ë
	gEV_THROW
;

793 
EV_API_DECL
 
ev_check_°›
 (
EV_P_
 
ev_check
 *
w
Ë
	gEV_THROW
;

796 #i‡
EV_FORK_ENABLE


797 
EV_API_DECL
 
ev_f‹k_°¨t
 (
EV_P_
 
ev_f‹k
 *
w
Ë
	gEV_THROW
;

798 
EV_API_DECL
 
ev_f‹k_°›
 (
EV_P_
 
ev_f‹k
 *
w
Ë
	gEV_THROW
;

801 #i‡
EV_CLEANUP_ENABLE


802 
EV_API_DECL
 
ev_˛ónup_°¨t
 (
EV_P_
 
ev_˛ónup
 *
w
Ë
	gEV_THROW
;

803 
EV_API_DECL
 
ev_˛ónup_°›
 (
EV_P_
 
ev_˛ónup
 *
w
Ë
	gEV_THROW
;

806 #i‡
EV_EMBED_ENABLE


808 
EV_API_DECL
 
ev_embed_°¨t
 (
EV_P_
 
ev_embed
 *
w
Ë
	gEV_THROW
;

809 
EV_API_DECL
 
ev_embed_°›
 (
EV_P_
 
ev_embed
 *
w
Ë
	gEV_THROW
;

810 
EV_API_DECL
 
ev_embed_swìp
 (
EV_P_
 
ev_embed
 *
w
Ë
	gEV_THROW
;

813 #i‡
EV_ASYNC_ENABLE


814 
EV_API_DECL
 
ev_async_°¨t
 (
EV_P_
 
ev_async
 *
w
Ë
	gEV_THROW
;

815 
EV_API_DECL
 
ev_async_°›
 (
EV_P_
 
ev_async
 *
w
Ë
	gEV_THROW
;

816 
EV_API_DECL
 
ev_async_£nd
 (
EV_P_
 
ev_async
 *
w
Ë
	gEV_THROW
;

819 #i‡
EV_COMPAT3


820 
	#EVLOOP_NONBLOCK
 
EVRUN_NOWAIT


	)

821 
	#EVLOOP_ONESHOT
 
EVRUN_ONCE


	)

822 
	#EVUNLOOP_CANCEL
 
EVBREAK_CANCEL


	)

823 
	#EVUNLOOP_ONE
 
EVBREAK_ONE


	)

824 
	#EVUNLOOP_ALL
 
EVBREAK_ALL


	)

825 #i‡
EV_PROTOTYPES


826 
EV_INLINE
 
ev_lo›
 (
EV_P_
 
Êags
Ë{ 
ev_run
 (
EV_A_
 flags); }

827 
EV_INLINE
 
ev_u∆o›
 (
EV_P_
 
how
 ) { 
ev_bªak
 (
EV_A_
 how ); }

828 
EV_INLINE
 
ev_deÁu…_de°roy
 (Ë{ 
ev_lo›_de°roy
 (
EV_DEFAULT
); }

829 
EV_INLINE
 
ev_deÁu…_f‹k
 (Ë{ 
ev_lo›_f‹k
 (
EV_DEFAULT
); }

830 #i‡
EV_FEATURE_API


831 
EV_INLINE
 
ev_lo›_cou¡
 (
EV_P
Ë{  
ev_ôî©i⁄
 (
EV_A
); }

832 
EV_INLINE
 
ev_lo›_dïth
 (
EV_P
Ë{  
ev_dïth
 (
EV_A
); }

833 
EV_INLINE
 
ev_lo›_vîify
 (
EV_P
Ë{ 
ev_vîify
 (
EV_A
); }

837 
ev_lo›
 
	tev_lo›
;

842 
EV_CPP
(})

	@libs/include/libev/event.h

40 #i‚de‡
EVENT_H_


41 
	#EVENT_H_


	)

43 #ifde‡
EV_H


44 #ö˛udê
EV_H


46 
	~"ev.h
"

49 #i‚de‡
EVLOOP_NONBLOCK


50 
	#EVLOOP_NONBLOCK
 
EVRUN_NOWAIT


	)

52 #i‚de‡
EVLOOP_ONESHOT


53 
	#EVLOOP_ONESHOT
 
EVRUN_ONCE


	)

55 #i‚de‡
EV_TIMEOUT


56 
	#EV_TIMEOUT
 
EV_TIMER


	)

59 #ifde‡
__˝lu•lus


64 #i‡!
deföed
 (
WIN32
Ë|| deföed (
__MINGW32__
)

65 
	~<time.h
>

66 
	~<sys/time.h
>

69 
evít_ba£
;

71 
	#EVLIST_TIMEOUT
 0x01

	)

72 
	#EVLIST_INSERTED
 0x02

	)

73 
	#EVLIST_SIGNAL
 0x04

	)

74 
	#EVLIST_ACTIVE
 0x08

	)

75 
	#EVLIST_INTERNAL
 0x10

	)

76 
	#EVLIST_INIT
 0x80

	)

78 (*
evít_ˇŒback_‚
)(, , *);

80 
	sevít


84 
ev_io
 
io
;

85 
ev_sig«l
 
sig
;

86 } 
iosig
;

87 
ev_timî
 
to
;

90 
evít_ba£
 *
ev_ba£
;

91 
evít_ˇŒback_‚
 
ev_ˇŒback
;

92 *
ev_¨g
;

93 
ev_fd
;

94 
ev_¥i
;

95 
ev_ªs
;

96 
ev_Êags
;

97 
ev_evíts
;

100 
evít_ˇŒback_‚
 
evít_gë_ˇŒback
 (c⁄° 
evít
 *
ev
);

102 
	#EV_READ
 
EV_READ


	)

103 
	#EV_WRITE
 
EV_WRITE


	)

104 
	#EV_PERSIST
 0x10

	)

105 
	#EV_ET
 0x20

	)

107 
	#EVENT_SIGNAL
(
ev
Ë((Ë”v)->
ev_fd
)

	)

108 
	#EVENT_FD
(
ev
Ë((Ë”v)->
ev_fd
)

	)

110 
	#evít_öôülized
(
ev
Ë(”v)->
ev_Êags
 & 
EVLIST_INIT
)

	)

112 
	#evtimî_add
(
ev
,
tv
Ë
	`evít_add
 (ev,Åv)

	)

113 
	#evtimî_£t
(
ev
,
cb
,
d©a
Ë
	`evít_£t
 (ev, -1, 0, cb, d©a)

	)

114 
	#evtimî_dñ
(
ev
Ë
	`evít_dñ
 (ev)

	)

115 
	#evtimî_≥ndög
(
ev
,
tv
Ë
	`evít_≥ndög
 (ev, 
EV_TIMEOUT
,Åv)

	)

116 
	#evtimî_öôülized
(
ev
Ë
	`evít_öôülized
 (ev)

	)

118 
	#timeout_add
(
ev
,
tv
Ë
	`evtimî_add
 (ev,Åv)

	)

119 
	#timeout_£t
(
ev
,
cb
,
d©a
Ë
	`evtimî_£t
 (ev, cb, d©a)

	)

120 
	#timeout_dñ
(
ev
Ë
	`evtimî_dñ
 (ev)

	)

121 
	#timeout_≥ndög
(
ev
,
tv
Ë
	`evtimî_≥ndög
 (ev,Åv)

	)

122 
	#timeout_öôülized
(
ev
Ë
	`evtimî_öôülized
 (ev)

	)

124 
	#sig«l_add
(
ev
,
tv
Ë
	`evít_add
 (ev,Åv)

	)

125 
	#sig«l_£t
(
ev
,
sig
,
cb
,
d©a
Ë
	`evít_£t
 (ev, sig, 
EV_SIGNAL
 | 
EV_PERSIST
, cb, d©a)

	)

126 
	#sig«l_dñ
(
ev
Ë
	`evít_dñ
 (ev)

	)

127 
	#sig«l_≥ndög
(
ev
,
tv
Ë
	`evít_≥ndög
 (ev, 
EV_SIGNAL
,Åv)

	)

128 
	#sig«l_öôülized
(
ev
Ë
	`evít_öôülized
 (ev)

	)

130 c⁄° *
evít_gë_vîsi⁄
 ();

131 c⁄° *
evít_gë_mëhod
 ();

133 *
evít_öô
 ();

134 
evít_ba£_‰ì
 (
evít_ba£
 *
ba£
);

136 
	#EVLOOP_ONCE
 
EVLOOP_ONESHOT


	)

137 
evít_lo›
 ();

138 
evít_lo›exô
 (
timevÆ
 *
tv
);

139 
evít_di•©ch
 ();

141 
	#_EVENT_LOG_DEBUG
 0

	)

142 
	#_EVENT_LOG_MSG
 1

	)

143 
	#_EVENT_LOG_WARN
 2

	)

144 
	#_EVENT_LOG_ERR
 3

	)

145 (*
evít_log_cb
)(
	t£vîôy
, c⁄° *
	tmsg
);

146 
evít_£t_log_ˇŒback
(
evít_log_cb
 
cb
);

148 
evít_£t
 (
evít
 *
ev
, 
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
);

149 
evít_⁄˚
 (
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
, 
timevÆ
 *
tv
);

151 
evít_add
 (
evít
 *
ev
, 
timevÆ
 *
tv
);

152 
evít_dñ
 (
evít
 *
ev
);

153 
evít_a˘ive
 (
evít
 *
ev
, 
ªs
, 
nˇŒs
);

155 
evít_≥ndög
 (
evít
 *
ev
, , 
timevÆ
 *
tv
);

157 
evít_¥i‹ôy_öô
 (
≈ri
);

158 
evít_¥i‹ôy_£t
 (
evít
 *
ev
, 
¥i
);

160 
evít_ba£
 *
evít_ba£_√w
 ();

161 c⁄° *
evít_ba£_gë_mëhod
 (c⁄° 
evít_ba£
 *);

162 
evít_ba£_£t
 (
evít_ba£
 *
ba£
, 
evít
 *
ev
);

163 
evít_ba£_lo›
 (
evít_ba£
 *
ba£
, );

164 
evít_ba£_lo›exô
 (
evít_ba£
 *
ba£
, 
timevÆ
 *
tv
);

165 
evít_ba£_di•©ch
 (
evít_ba£
 *
ba£
);

166 
evít_ba£_⁄˚
 (
evít_ba£
 *
ba£
, 
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
, 
timevÆ
 *
tv
);

167 
evít_ba£_¥i‹ôy_öô
 (
evít_ba£
 *
ba£
, 
fd
);

172 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/Automated.h

38 #i‚de‡
CUNIT_AUTOMATED_H_SEEN


39 
	#CUNIT_AUTOMATED_H_SEEN


	)

41 
	~"CUnô.h
"

42 
	~"Te°DB.h
"

44 #ifde‡
__˝lu•lus


48 
CU_EXPORT
 
CU_autom©ed_run_ã°s
();

59 
CU_EXPORT
 
CU_Eº‹Code
 
CU_li°_ã°s_to_fûe
();

69 
CU_EXPORT
 
CU_£t_ouçut_fûíame
(c⁄° * 
szFûíameRoŸ
);

79 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


81 
	#autom©ed_run_ã°s
(Ë
	`CU_autom©ed_run_ã°s
()

	)

83 
	#£t_ouçut_fûíame
(
x
Ë
	`CU_£t_ouçut_fûíame
((x))

	)

86 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/Basic.h

33 #i‚de‡
CUNIT_BASIC_H_SEEN


34 
	#CUNIT_BASIC_H_SEEN


	)

36 
	~"CUnô.h
"

37 
	~"Te°DB.h
"

39 #ifde‡
__˝lu•lus


45 
CU_BRM_NORMAL
 = 0,

46 
CU_BRM_SILENT
,

47 
CU_BRM_VERBOSE


48 } 
	tCU_BasicRunMode
;

50 
CU_EXPORT
 
CU_Eº‹Code
 
CU_basic_run_ã°s
();

61 
CU_EXPORT
 
CU_Eº‹Code
 
CU_basic_run_suôe
(
CU_pSuôe
 
pSuôe
);

73 
CU_EXPORT
 
CU_Eº‹Code
 
CU_basic_run_ã°
(
CU_pSuôe
 
pSuôe
, 
CU_pTe°
 
pTe°
);

87 
CU_EXPORT
 
CU_basic_£t_mode
(
CU_BasicRunMode
 
mode
);

93 
CU_EXPORT
 
CU_BasicRunMode
 
CU_basic_gë_mode
();

99 
CU_EXPORT
 
CU_basic_show_Áûuªs
(
CU_pFaûuªRec‹d
 
pFaûuª
);

109 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/CUError.h

49 #i‚de‡
CUNIT_CUERROR_H_SEEN


50 
	#CUNIT_CUERROR_H_SEEN


	)

52 
	~<î∫o.h
>

64 
	mCUE_SUCCESS
 = 0,

65 
	mCUE_NOMEMORY
 = 1,

68 
	mCUE_NOREGISTRY
 = 10,

69 
	mCUE_REGISTRY_EXISTS
 = 11,

72 
	mCUE_NOSUITE
 = 20,

73 
	mCUE_NO_SUITENAME
 = 21,

74 
	mCUE_SINIT_FAILED
 = 22,

75 
	mCUE_SCLEAN_FAILED
 = 23,

76 
	mCUE_DUP_SUITE
 = 24,

77 
	mCUE_SUITE_INACTIVE
 = 25,

80 
	mCUE_NOTEST
 = 30,

81 
	mCUE_NO_TESTNAME
 = 31,

82 
	mCUE_DUP_TEST
 = 32,

83 
	mCUE_TEST_NOT_IN_SUITE
 = 33,

84 
	mCUE_TEST_INACTIVE
 = 34,

87 
	mCUE_FOPEN_FAILED
 = 40,

88 
	mCUE_FCLOSE_FAILED
 = 41,

89 
	mCUE_BAD_FILENAME
 = 42,

90 
	mCUE_WRITE_ERROR
 = 43

91 } 
	tCU_Eº‹Code
;

100 
	eCU_Eº‹A˘i⁄
 {

101 
	mCUEA_IGNORE
,

102 
	mCUEA_FAIL
,

103 
	mCUEA_ABORT


104 } 
	tCU_Eº‹A˘i⁄
;

108 
	~"CUnô.h
"

110 #ifde‡
__˝lu•lus


114 
CU_EXPORT
 
CU_Eº‹Code
 
CU_gë_îr‹
();

128 
CU_EXPORT
 c⁄° * 
CU_gë_îr‹_msg
();

143 
CU_EXPORT
 
CU_£t_îr‹_a˘i⁄
(
CU_Eº‹A˘i⁄
 
a˘i⁄
);

159 
CU_EXPORT
 
CU_Eº‹A˘i⁄
 
CU_gë_îr‹_a˘i⁄
();

169 #ifde‡
CUNIT_BUILD_TESTS


170 
ã°_cunô_CUEº‹
();

174 
CU_EXPORT
 
CU_£t_îr‹
(
CU_Eº‹Code
 
îr‹
);

189 #ifde‡
__˝lu•lus


193 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


195 
	#gë_îr‹
(Ë
	`CU_gë_îr‹_msg
()

	)

	@libs/include/rock/CUnit/CUnit.h

50 #i‚de‡
CUNIT_CUNIT_H_SEEN


51 
	#CUNIT_CUNIT_H_SEEN


	)

53 
	~<°rög.h
>

54 
	~<m©h.h
>

57 
	#CU_VERSION
 "2.1-2"

	)

61 
	#CU_MAX_TEST_NAME_LENGTH
 256

	)

63 
	#CU_MAX_SUITE_NAME_LENGTH
 256

	)

66 #i‚de‡
CU_BOOL


68 
	#CU_BOOL
 

	)

71 #i‚de‡
CU_TRUE


73 
	#CU_TRUE
 1

	)

76 #i‚de‡
CU_FALSE


78 
	#CU_FALSE
 0

	)

81 #i‚de‡
CU_UNREFERENCED_PARAMETER


83 
	#CU_UNREFERENCED_PARAMETER
(
x
Ë()
	)
x

86 #i‚de‡
CU_MAX


87 
	#CU_MAX
(
a
,
b
Ë((◊Ë>(b)Ë? (aË: (b))

	)

90 #i‚de‡
CU_MIN


91 
	#CU_MIN
(
a
,
b
Ë((◊Ë>(b)Ë? (bË: (a))

	)

94 #i‡
deföed
(
WIN32
Ë|| deföed(
_WIN32
Ë|| deföed(
__WIN32
Ë|| deföed(
__WIN32__
)

95 #ifde‡
CU_DLL


96 #ifde‡
CU_BUILD_DLL


97 
	#CU_EXPORT
 
	`__de˛•ec
(
dŒexp‹t
)

	)

99 
	#CU_EXPORT
 
	`__de˛•ec
(
dŒimp‹t
)

	)

102 
	#CU_EXPORT


	)

104 #ifde‡
_MSC_VER


105 
	#¢¥ötf
 
_¢¥ötf


	)

108 
	#CU_EXPORT


	)

111 
	~"CUEº‹.h
"

112 
	~"Te°DB.h
"

113 
	~"Te°Run.h
"

116 
	#CU_PASS
(
msg
) \

117 { 
	`CU_as£πIm∂emíèti⁄
(
CU_TRUE
, 
__LINE__
, ("CU_PASS(" #msg ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

122 
	#CU_ASSERT
(
vÆue
) \

123 { 
	`CU_as£πIm∂emíèti⁄
((
vÆue
), 
__LINE__
, #vÆue, 
__FILE__
, "", 
CU_FALSE
); }

	)

128 
	#CU_ASSERT_FATAL
(
vÆue
) \

129 { 
	`CU_as£πIm∂emíèti⁄
((
vÆue
), 
__LINE__
, #vÆue, 
__FILE__
, "", 
CU_TRUE
); }

	)

134 
	#CU_TEST
(
vÆue
) \

135 { 
	`CU_as£πIm∂emíèti⁄
((
vÆue
), 
__LINE__
, #vÆue, 
__FILE__
, "", 
CU_FALSE
); }

	)

140 
	#CU_TEST_FATAL
(
vÆue
) \

141 { 
	`CU_as£πIm∂emíèti⁄
((
vÆue
), 
__LINE__
, #vÆue, 
__FILE__
, "", 
CU_TRUE
); }

	)

144 
	#CU_FAIL
(
msg
) \

145 { 
	`CU_as£πIm∂emíèti⁄
(
CU_FALSE
, 
__LINE__
, ("CU_FAIL(" #msg ")"), 
__FILE__
, "", CU_FALSE); }

	)

148 
	#CU_FAIL_FATAL
(
msg
) \

149 { 
	`CU_as£πIm∂emíèti⁄
(
CU_FALSE
, 
__LINE__
, ("CU_FAIL_FATAL(" #msg ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

154 
	#CU_ASSERT_TRUE
(
vÆue
) \

155 { 
	`CU_as£πIm∂emíèti⁄
((
vÆue
), 
__LINE__
, ("CU_ASSERT_TRUE(" #vÆuê")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

160 
	#CU_ASSERT_TRUE_FATAL
(
vÆue
) \

161 { 
	`CU_as£πIm∂emíèti⁄
((
vÆue
), 
__LINE__
, ("CU_ASSERT_TRUE_FATAL(" #vÆuê")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

166 
	#CU_ASSERT_FALSE
(
vÆue
) \

167 { 
	`CU_as£πIm∂emíèti⁄
(!(
vÆue
), 
__LINE__
, ("CU_ASSERT_FALSE(" #vÆuê")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

172 
	#CU_ASSERT_FALSE_FATAL
(
vÆue
) \

173 { 
	`CU_as£πIm∂emíèti⁄
(!(
vÆue
), 
__LINE__
, ("CU_ASSERT_FALSE_FATAL(" #vÆuê")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

178 
	#CU_ASSERT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
) \

179 { 
	`CU_as£πIm∂emíèti⁄
(((
a˘uÆ
Ë=(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

184 
	#CU_ASSERT_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
) \

185 { 
	`CU_as£πIm∂emíèti⁄
(((
a˘uÆ
Ë=(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

190 
	#CU_ASSERT_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
) \

191 { 
	`CU_as£πIm∂emíèti⁄
(((
a˘uÆ
Ë!(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

196 
	#CU_ASSERT_NOT_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
) \

197 { 
	`CU_as£πIm∂emíèti⁄
(((
a˘uÆ
Ë!(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_NOT_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

202 
	#CU_ASSERT_PTR_EQUAL
(
a˘uÆ
, 
ex≥˘ed
) \

203 { 
	`CU_as£πIm∂emíèti⁄
(((*)(
a˘uÆ
Ë=(*)(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_PTR_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

208 
	#CU_ASSERT_PTR_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
) \

209 { 
	`CU_as£πIm∂emíèti⁄
(((*)(
a˘uÆ
Ë=(*)(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_PTR_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

214 
	#CU_ASSERT_PTR_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
) \

215 { 
	`CU_as£πIm∂emíèti⁄
(((*)(
a˘uÆ
Ë!(*)(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_PTR_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

220 
	#CU_ASSERT_PTR_NOT_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
) \

221 { 
	`CU_as£πIm∂emíèti⁄
(((*)(
a˘uÆ
Ë!(*)(
ex≥˘ed
)), 
__LINE__
, ("CU_ASSERT_PTR_NOT_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

226 
	#CU_ASSERT_PTR_NULL
(
vÆue
) \

227 { 
	`CU_as£πIm∂emíèti⁄
((
NULL
 =(*)(
vÆue
)), 
__LINE__
, ("CU_ASSERT_PTR_NULL(" #vÆue")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

232 
	#CU_ASSERT_PTR_NULL_FATAL
(
vÆue
) \

233 { 
	`CU_as£πIm∂emíèti⁄
((
NULL
 =(*)(
vÆue
)), 
__LINE__
, ("CU_ASSERT_PTR_NULL_FATAL(" #vÆue")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

238 
	#CU_ASSERT_PTR_NOT_NULL
(
vÆue
) \

239 { 
	`CU_as£πIm∂emíèti⁄
((
NULL
 !(*)(
vÆue
)), 
__LINE__
, ("CU_ASSERT_PTR_NOT_NULL(" #vÆue")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

244 
	#CU_ASSERT_PTR_NOT_NULL_FATAL
(
vÆue
) \

245 { 
	`CU_as£πIm∂emíèti⁄
((
NULL
 !(*)(
vÆue
)), 
__LINE__
, ("CU_ASSERT_PTR_NOT_NULL_FATAL(" #vÆue")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

250 
	#CU_ASSERT_STRING_EQUAL
(
a˘uÆ
, 
ex≥˘ed
) \

251 { 
	`CU_as£πIm∂emíèti⁄
(!(
	`°rcmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
))), 
__LINE__
, ("CU_ASSERT_STRING_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

256 
	#CU_ASSERT_STRING_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
) \

257 { 
	`CU_as£πIm∂emíèti⁄
(!(
	`°rcmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
))), 
__LINE__
, ("CU_ASSERT_STRING_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

262 
	#CU_ASSERT_STRING_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
) \

263 { 
	`CU_as£πIm∂emíèti⁄
((
	`°rcmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
))), 
__LINE__
, ("CU_ASSERT_STRING_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

268 
	#CU_ASSERT_STRING_NOT_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
) \

269 { 
	`CU_as£πIm∂emíèti⁄
((
	`°rcmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
))), 
__LINE__
, ("CU_ASSERT_STRING_NOT_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

275 
	#CU_ASSERT_NSTRING_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
cou¡
) \

276 { 
	`CU_as£πIm∂emíèti⁄
(!(
	`°∫cmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
), (
size_t
)(
cou¡
))), 
__LINE__
, ("CU_ASSERT_NSTRING_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #cou¡ ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

282 
	#CU_ASSERT_NSTRING_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
, 
cou¡
) \

283 { 
	`CU_as£πIm∂emíèti⁄
(!(
	`°∫cmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
), (
size_t
)(
cou¡
))), 
__LINE__
, ("CU_ASSERT_NSTRING_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed "," #cou¡ ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

289 
	#CU_ASSERT_NSTRING_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
cou¡
) \

290 { 
	`CU_as£πIm∂emíèti⁄
((
	`°∫cmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
), (
size_t
)(
cou¡
))), 
__LINE__
, ("CU_ASSERT_NSTRING_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #cou¡ ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

296 
	#CU_ASSERT_NSTRING_NOT_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
, 
cou¡
) \

297 { 
	`CU_as£πIm∂emíèti⁄
((
	`°∫cmp
((c⁄° *)(
a˘uÆ
), (c⁄° *)(
ex≥˘ed
), (
size_t
)(
cou¡
))), 
__LINE__
, ("CU_ASSERT_NSTRING_NOT_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed "," #cou¡ ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

303 
	#CU_ASSERT_DOUBLE_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
gønuœrôy
) \

304 { 
	`CU_as£πIm∂emíèti⁄
(((
	`Ábs
(()(
a˘uÆ
Ë- (
ex≥˘ed
)Ë<Ábs(()(
gønuœrôy
)))), 
__LINE__
, ("CU_ASSERT_DOUBLE_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #gønuœrôy ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

310 
	#CU_ASSERT_DOUBLE_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
, 
gønuœrôy
) \

311 { 
	`CU_as£πIm∂emíèti⁄
(((
	`Ábs
(()(
a˘uÆ
Ë- (
ex≥˘ed
)Ë<Ábs(()(
gønuœrôy
)))), 
__LINE__
, ("CU_ASSERT_DOUBLE_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed "," #gønuœrôy ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

317 
	#CU_ASSERT_DOUBLE_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
gønuœrôy
) \

318 { 
	`CU_as£πIm∂emíèti⁄
(((
	`Ábs
(()(
a˘uÆ
Ë- (
ex≥˘ed
)Ë> fabs(()(
gønuœrôy
)))), 
__LINE__
, ("CU_ASSERT_DOUBLE_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #gønuœrôy ")"), 
__FILE__
, "", 
CU_FALSE
); }

	)

324 
	#CU_ASSERT_DOUBLE_NOT_EQUAL_FATAL
(
a˘uÆ
, 
ex≥˘ed
, 
gønuœrôy
) \

325 { 
	`CU_as£πIm∂emíèti⁄
(((
	`Ábs
(()(
a˘uÆ
Ë- (
ex≥˘ed
)Ë> fabs(()(
gønuœrôy
)))), 
__LINE__
, ("CU_ASSERT_DOUBLE_NOT_EQUAL_FATAL(" #a˘uÆ "," #ex≥˘ed "," #gønuœrôy ")"), 
__FILE__
, "", 
CU_TRUE
); }

	)

327 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


329 #i‚de‡
BOOL


331 
	#BOOL
 

	)

334 #i‚de‡
TRUE


336 
	#TRUE
 1

	)

339 #i‚de‡
FALSE


341 
	#FALSE
 0

	)

345 
	#MAX_TEST_NAME_LENGTH
 256

	)

347 
	#MAX_SUITE_NAME_LENGTH
 256

	)

350 
	#ASSERT
(
vÆue
Ë{ i‡(
FALSE
 =()(vÆue)Ë{ 
	`CU_as£πIm∂emíèti⁄
((
BOOL
)vÆue, 
__LINE__
, #vÆue, 
__FILE__
, "", FALSE); ; }}

	)

352 
	#ASSERT_TRUE
(
vÆue
Ë{ i‡(
FALSE
 =(vÆue)Ë{ 
	`CU_as£πIm∂emíèti⁄
(FALSE, 
__LINE__
, ("ASSERT_TRUE(" #vÆuê")"), 
__FILE__
, "", FALSE); ; }}

	)

354 
	#ASSERT_FALSE
(
vÆue
Ë{ i‡(
FALSE
 !(vÆue)Ë{ 
	`CU_as£πIm∂emíèti⁄
(FALSE, 
__LINE__
, ("ASSERT_FALSE(" #vÆuê")"), 
__FILE__
, "", FALSE); ; }}

	)

356 
	#ASSERT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
Ë{ i‡(◊˘uÆË!”x≥˘ed)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", FALSE); ; }}

	)

358 
	#ASSERT_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
Ë{ i‡((*)◊˘uÆË=(*)”x≥˘ed)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", FALSE); ; }}

	)

360 
	#ASSERT_PTR_EQUAL
(
a˘uÆ
, 
ex≥˘ed
Ë{ i‡((*)◊˘uÆË!(*)”x≥˘ed)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_PTR_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", FALSE); ; }}

	)

362 
	#ASSERT_PTR_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
Ë{ i‡((*)◊˘uÆË=(*)”x≥˘ed)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_PTR_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", FALSE); ; }}

	)

364 
	#ASSERT_PTR_NULL
(
vÆue
Ë{ i‡(
NULL
 !(*)(vÆue)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_PTR_NULL(" #vÆue")"), 
__FILE__
, "", FALSE); ; }}

	)

366 
	#ASSERT_PTR_NOT_NULL
(
vÆue
Ë{ i‡(
NULL
 =(*)(vÆue)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_PTR_NOT_NULL(" #vÆue")"), 
__FILE__
, "", FALSE); ; }}

	)

368 
	#ASSERT_STRING_EQUAL
(
a˘uÆ
, 
ex≥˘ed
Ë{ i‡(
	`°rcmp
((c⁄° *Ô˘uÆ, (c⁄° *Îx≥˘ed)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_STRING_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", FALSE); ; }}

	)

370 
	#ASSERT_STRING_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
Ë{ i‡(!
	`°rcmp
((c⁄° *Ô˘uÆ, (c⁄° *Îx≥˘ed)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
TRUE
, 
__LINE__
, ("ASSERT_STRING_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed ")"), 
__FILE__
, "", 
FALSE
); ; }}

	)

372 
	#ASSERT_NSTRING_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
cou¡
Ë{ i‡(
	`°∫cmp
((c⁄° *Ô˘uÆ, (c⁄° *Îx≥˘ed, (
size_t
)cou¡)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_NSTRING_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #cou¡ ")"), 
__FILE__
, "", FALSE); ; }}

	)

374 
	#ASSERT_NSTRING_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
cou¡
Ë{ i‡(!
	`°∫cmp
((c⁄° *Ô˘uÆ, (c⁄° *Îx≥˘ed, (
size_t
)cou¡)Ë{ 
	`CU_as£πIm∂emíèti⁄
(
TRUE
, 
__LINE__
, ("ASSERT_NSTRING_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #cou¡ ")"), 
__FILE__
, "", 
FALSE
); ; }}

	)

376 
	#ASSERT_DOUBLE_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
gønuœrôy
Ë{ i‡((
	`Ábs
((Ô˘uÆ -Éx≥˘edË> fabs(()gønuœrôy))Ë{ 
	`CU_as£πIm∂emíèti⁄
(
FALSE
, 
__LINE__
, ("ASSERT_DOUBLE_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #gønuœrôy ")"), 
__FILE__
, "", FALSE); ; }}

	)

378 
	#ASSERT_DOUBLE_NOT_EQUAL
(
a˘uÆ
, 
ex≥˘ed
, 
gønuœrôy
Ë{ i‡((
	`Ábs
((Ô˘uÆ -Éx≥˘edË<Ábs(()gønuœrôy))Ë{ 
	`CU_as£πIm∂emíèti⁄
(
TRUE
, 
__LINE__
, ("ASSERT_DOUBLE_NOT_EQUAL(" #a˘uÆ "," #ex≥˘ed "," #gønuœrôy ")"), 
__FILE__
, "", 
FALSE
); ; }}

	)

	@libs/include/rock/CUnit/CUnit_intl.h

34 #i‚de‡
CUNIT_CUNIT_INTL_H_SEEN


35 
	#CUNIT_CUNIT_INTL_H_SEEN


	)

51 #unde‡
_


52 
	#_
(
Såög
Ë(Såög)

	)

53 #unde‡
N_


54 
	#N_
(
Såög
Ë
	)
Såög

55 #unde‡
ãxtdomaö


56 
	#ãxtdomaö
(
Domaö
)

	)

57 #unde‡
bödãxtdomaö


58 
	#bödãxtdomaö
(
Package
, 
Dúe˘‹y
)

	)

	@libs/include/rock/CUnit/Console.h

38 #i‚de‡
CUNIT_CONSOLE_H_SEEN


39 
	#CUNIT_CONSOLE_H_SEEN


	)

41 
	~"CUnô.h
"

42 
	~"Te°DB.h
"

44 #ifde‡
__˝lu•lus


48 
CU_EXPORT
 
CU_c⁄sﬁe_run_ã°s
();

51 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


53 
	#c⁄sﬁe_run_ã°s
(Ë
	`CU_c⁄sﬁe_run_ã°s
()

	)

56 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/MyMem.h

44 #i‚de‡
CUNIT_MYMEM_H_SEEN


45 
	#CUNIT_MYMEM_H_SEEN


	)

47 #ifde‡
__˝lu•lus


51 #ifde‡
MEMTRACE


52 * 
CU_ˇŒoc
(
size_t
 
nmemb
, size_à
size
, 
uiLöe
, c⁄° * 
szFûeName
);

53 * 
CU_mÆloc
(
size_t
 
size
, 
uiLöe
, c⁄° * 
szFûeName
);

54 
CU_‰ì
(*
±r
, 
uiLöe
, c⁄° * 
szFûeName
);

55 * 
CU_ªÆloc
(*
±r
, 
size_t
 
size
, 
uiLöe
, c⁄° * 
szFûeName
);

56 
CU_EXPORT
 
CU_dump_mem‹y_ußge
(const *);

59 
	#CU_CALLOC
(
x
, 
y
Ë
	`CU_ˇŒoc
((x), (y), 
__LINE__
, 
__FILE__
)

	)

61 
	#CU_MALLOC
(
x
Ë
	`CU_mÆloc
((x), 
__LINE__
, 
__FILE__
)

	)

63 
	#CU_FREE
(
x
Ë
	`CU_‰ì
((x), 
__LINE__
, 
__FILE__
)

	)

65 
	#CU_REALLOC
(
x
, 
y
Ë
	`CU_ªÆloc
((x), (y), 
__LINE__
, 
__FILE__
)

	)

67 
	#CU_CREATE_MEMORY_REPORT
(
x
Ë
	`CU_dump_mem‹y_ußge
((x))

	)

69 
	#CU_DUMP_MEMORY_USAGE
(
x
Ë
	`CU_dump_mem‹y_ußge
((x))

	)

72 
	#CU_CALLOC
(
x
, 
y
Ë
	`ˇŒoc
((x), (y))

	)

74 
	#CU_MALLOC
(
x
Ë
	`mÆloc
((x))

	)

76 
	#CU_FREE
(
x
Ë
	`‰ì
((x))

	)

78 
	#CU_REALLOC
(
x
, 
y
Ë
	`ªÆloc
((x), (y))

	)

80 
	#CU_CREATE_MEMORY_REPORT
(
x
)

	)

82 
	#CU_DUMP_MEMORY_USAGE
(
x
)

	)

85 #ifde‡
CUNIT_BUILD_TESTS


87 
ã°_cunô_dó˘iv©e_mÆloc
();

89 
ã°_cunô_a˘iv©e_mÆloc
();

91 
ã°_cunô_gë_n_memevíts
(* 
pLoˇti⁄
);

93 
ã°_cunô_gë_n_Æloˇti⁄s
(* 
pLoˇti⁄
);

95 
ã°_cunô_gë_n_dóŒoˇti⁄s
(* 
pLoˇti⁄
);

97 
ã°_cunô_MyMem
();

100 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/TestDB.h

58 #i‚de‡
CUNIT_TESTDB_H_SEEN


59 
	#CUNIT_TESTDB_H_SEEN


	)

61 
	~<£tjmp.h
>

63 
	~"CUnô.h
"

64 
	~"CUEº‹.h
"

66 #ifde‡
__˝lu•lus


74 (*
CU_InôülizeFunc
)();

75 (*
CU_CÀ™upFunc
)();

76 (*
CU_Te°Func
)();

104 
	sCU_Te°


106 * 
pName
;

107 
CU_BOOL
 
fA˘ive
;

108 
CU_Te°Func
 
pTe°Func
;

109 
jmp_buf
* 
pJumpBuf
;

111 
CU_Te°
* 
pNext
;

112 
CU_Te°
* 
pPªv
;

114 } 
	tCU_Te°
;

115 
CU_Te°
* 
	tCU_pTe°
;

143 
	sCU_Suôe


145 * 
pName
;

146 
CU_BOOL
 
fA˘ive
;

147 
CU_pTe°
 
pTe°
;

148 
CU_InôülizeFunc
 
pInôülizeFunc
;

149 
CU_CÀ™upFunc
 
pCÀ™upFunc
;

151 
uiNumbîOfTe°s
;

152 
CU_Suôe
* 
pNext
;

153 
CU_Suôe
* 
pPªv
;

155 } 
	tCU_Suôe
;

156 
CU_Suôe
* 
	tCU_pSuôe
;

195 
	sCU_Te°Regi°ry


197 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


200 
uiNumbîOfSuôes
;

201 
uiNumbîOfGroups
;

203 
uiNumbîOfTe°s
;

206 
CU_pSuôe
 
pSuôe
;

207 
CU_pSuôe
 
pGroup
;

210 
uiNumbîOfSuôes
;

211 
uiNumbîOfTe°s
;

212 
CU_pSuôe
 
pSuôe
;

214 } 
	tCU_Te°Regi°ry
;

215 
CU_Te°Regi°ry
* 
	tCU_pTe°Regi°ry
;

221 
CU_EXPORT


222 
CU_Eº‹Code
 
CU_öôülize_ªgi°ry
();

241 
CU_EXPORT


242 
CU_˛ónup_ªgi°ry
();

261 
CU_EXPORT
 
CU_BOOL
 
CU_ªgi°ry_öôülized
();

271 
CU_EXPORT


272 
CU_pSuôe
 
CU_add_suôe
(c⁄° *
°rName
,

273 
CU_InôülizeFunc
 
pInô
,

274 
CU_CÀ™upFunc
 
pCÀ™
);

311 
CU_EXPORT


312 
CU_Eº‹Code
 
CU_£t_suôe_a˘ive
(
CU_pSuôe
 
pSuôe
, 
CU_BOOL
 
fNewA˘ive
);

328 
CU_EXPORT


329 
CU_Eº‹Code
 
CU_£t_suôe_«me
(
CU_pSuôe
 
pSuôe
, c⁄° *
°rNewName
);

347 
CU_EXPORT


348 
CU_Eº‹Code
 
CU_£t_suôe_öôfunc
(
CU_pSuôe
 
pSuôe
, 
CU_InôülizeFunc
 
pNewInô
);

366 
CU_EXPORT


367 
CU_Eº‹Code
 
CU_£t_suôe_˛ónupfunc
(
CU_pSuôe
 
pSuôe
, 
CU_CÀ™upFunc
 
pNewCÀ™
);

384 
CU_EXPORT


385 
CU_pSuôe
 
CU_gë_suôe
(c⁄° * 
°rName
);

401 
CU_EXPORT


402 
CU_pSuôe
 
CU_gë_suôe_©_pos
(
pos
);

418 
CU_EXPORT


419 
CU_gë_suôe_pos
(
CU_pSuôe
 
pSuôe
);

436 
CU_EXPORT


437 
CU_gë_suôe_pos_by_«me
(c⁄° * 
°rName
);

455 
CU_EXPORT


456 
CU_pTe°
 
CU_add_ã°
(
CU_pSuôe
 
pSuôe
, c⁄° * 
°rName
, 
CU_Te°Func
 
pTe°Func
);

492 
CU_EXPORT


493 
CU_Eº‹Code
 
CU_£t_ã°_a˘ive
(
CU_pTe°
 
pTe°
, 
CU_BOOL
 
fNewA˘ive
);

510 
CU_EXPORT


511 
CU_Eº‹Code
 
CU_£t_ã°_«me
(
CU_pTe°
 
pTe°
, c⁄° *
°rNewName
);

529 
CU_EXPORT


530 
CU_Eº‹Code
 
CU_£t_ã°_func
(
CU_pTe°
 
pTe°
, 
CU_Te°Func
 
pNewFunc
);

547 
CU_EXPORT


548 
CU_pTe°
 
CU_gë_ã°
(
CU_pSuôe
 
pSuôe
, c⁄° *
°rName
);

568 
CU_EXPORT


569 
CU_pTe°
 
CU_gë_ã°_©_pos
(
CU_pSuôe
 
pSuôe
, 
pos
);

587 
CU_EXPORT


588 
CU_gë_ã°_pos
(
CU_pSuôe
 
pSuôe
, 
CU_pTe°
 
pTe°
);

608 
CU_EXPORT


609 
CU_gë_ã°_pos_by_«me
(
CU_pSuôe
 
pSuôe
, c⁄° *
°rName
);

629 
	#CU_ADD_TEST
(
suôe
, 
ã°
Ë(
	`CU_add_ã°
(suôe, #ã°, (
CU_Te°Func
Èe°))

	)

660 
	sCU_Te°Info
 {

661 *
pName
;

662 
CU_Te°Func
 
pTe°Func
;

663 } 
	tCU_Te°Info
;

664 
CU_Te°Info
* 
	tCU_pTe°Info
;

673 
	sCU_SuôeInfo
 {

674 *
pName
;

675 
CU_InôülizeFunc
 
pInôFunc
;

676 
CU_CÀ™upFunc
 
pCÀ™upFunc
;

677 
CU_Te°Info
 *
pTe°s
;

678 } 
	tCU_SuôeInfo
;

679 
CU_SuôeInfo
* 
	tCU_pSuôeInfo
;

681 
	#CU_TEST_INFO_NULL
 { 
NULL
, NULL }

	)

683 
	#CU_SUITE_INFO_NULL
 { 
NULL
, NULL, NULL, NULL }

	)

687 
CU_EXPORT
 
CU_Eº‹Code
 
CU_ªgi°î_suôes
(
CU_SuôeInfo
 
suôe_öfo
[]);

696 
CU_EXPORT
 
CU_Eº‹Code
 
CU_ªgi°î_nsuôes
(
suôe_cou¡
, ...);

710 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


711 
CU_Te°Info
 
	tã°_ˇ£_t
;

712 
CU_SuôeInfo
 
	tã°_group_t
;

715 
	sã°_suôe
 {

716 *
«me
;

717 
ã°_group_t
 *
groups
;

718 } 
	tã°_suôe_t
;

721 
	#TEST_CASE_NULL
 { 
NULL
, NULL }

	)

723 
	#TEST_GROUP_NULL
 { 
NULL
, NULL, NULL, NULL }

	)

726 
	#ã°_group_ªgi°î
(
tg
Ë
	`CU_ªgi°î_suôes
—g)

	)

729 
CU_EXPORT
 
ã°_suôe_ªgi°î
(
ã°_suôe_t
 *
ts
)

731 
ã°_group_t
 *
tg
;

732 
îr‹
;

734 
tg
 = 
ts
->
groups
;Åg->
pName
;Åg++)

735 i‡((
îr‹
 = 
CU_ªgi°î_suôes
(
tg
)Ë!
CUE_SUCCESS
)

736  
îr‹
;

738  
CUE_SUCCESS
;

743 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


744 
CU_InôülizeFunc
 
	tInôülizeFunc
;

745 
CU_CÀ™upFunc
 
	tCÀ™upFunc
;

746 
CU_Te°Func
 
	tTe°Func
;

748 
CU_Te°
 
	t_Te°Ca£
;

749 
CU_pTe°
 
	tPTe°Ca£
;

751 
CU_Suôe
 
	t_Te°Group
;

752 
CU_pSuôe
 
	tPTe°Group
;

754 
CU_Te°Regi°ry
 
	t_Te°Regi°ry
;

755 
CU_pTe°Regi°ry
 
	tPTe°Regi°ry
;

759 
	#öôülize_ªgi°ry
(Ë
	`CU_öôülize_ªgi°ry
()

	)

761 
	#˛ónup_ªgi°ry
(Ë
	`CU_˛ónup_ªgi°ry
()

	)

763 
	#add_ã°_group
(
«me
, 
öô
, 
˛ón
Ë
	`CU_add_suôe
“ame, inô, cÀ™)

	)

765 
	#add_ã°_ˇ£
(
group
, 
«me
, 
ã°
Ë
	`CU_add_ã°
(group,Çame,Åe°)

	)

769 
	#gë_ªgi°ry
(Ë
	`CU_gë_ªgi°ry
()

	)

771 
	#£t_ªgi°ry
(
ªg
Ë
	`CU_£t_ªgi°ry
(‘eg))

	)

774 
	#gë_group_by_«me
(
group
, 
ªg
Ë
	`CU_gë_suôe_by_«me
(group,Ñeg)

	)

776 
	#gë_ã°_by_«me
(
ã°
, 
group
Ë
	`CU_gë_ã°_by_«me
—e°, group)

	)

779 
	#ADD_TEST_TO_GROUP
(
group
, 
ã°
Ë(
	`CU_add_ã°
(group, #ã°, (
CU_Te°Func
Èe°))

	)

787 
CU_EXPORT
 
CU_pTe°Regi°ry
 
CU_gë_ªgi°ry
();

800 
CU_EXPORT
 
CU_pTe°Regi°ry
 
CU_£t_ªgi°ry
(CU_pTe°Regi°ry 
pTe°Regi°ry
);

818 
CU_EXPORT
 
CU_pTe°Regi°ry
 
CU_¸óã_√w_ªgi°ry
();

827 
CU_EXPORT


828 
CU_de°roy_exi°ög_ªgi°ry
(
CU_pTe°Regi°ry
* 
µRegi°ry
);

843 
CU_EXPORT


844 
CU_pSuôe
 
CU_gë_suôe_by_«me
(c⁄° *
szSuôeName
, 
CU_pTe°Regi°ry
 
pRegi°ry
);

859 
CU_EXPORT


860 
CU_pSuôe
 
CU_gë_suôe_by_ödex
(
ödex
, 
CU_pTe°Regi°ry
 
pRegi°ry
);

875 
CU_EXPORT


876 
CU_pTe°
 
CU_gë_ã°_by_«me
(c⁄° * 
szTe°Name
, 
CU_pSuôe
 
pSuôe
);

890 
CU_EXPORT


891 
CU_pTe°
 
CU_gë_ã°_by_ödex
(
ödex
, 
CU_pSuôe
 
pSuôe
);

906 #ifde‡
CUNIT_BUILD_TESTS


907 
ã°_cunô_Te°DB
();

910 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/TestRun.h

67 #i‚de‡
CUNIT_TESTRUN_H_SEEN


68 
	#CUNIT_TESTRUN_H_SEEN


	)

70 
	~"CUnô.h
"

71 
	~"CUEº‹.h
"

72 
	~"Te°DB.h
"

73 
	~<°dio.h
>

75 #ifde‡
__˝lu•lus


80 
	eCU_FaûuªTy≥s


82 
CUF_SuôeI«˘ive
 = 1,

83 
CUF_SuôeInôFaûed
,

84 
CUF_SuôeCÀ™upFaûed
,

85 
CUF_Te°I«˘ive
,

86 
CUF_As£πFaûed


87 } 
	tCU_FaûuªTy≥
;

91 
	sCU_FaûuªRec‹d


93 
CU_FaûuªTy≥
 
ty≥
;

94 
uiLöeNumbî
;

95 * 
°rFûeName
;

96 * 
°rC⁄dôi⁄
;

97 
CU_pTe°
 
pTe°
;

98 
CU_pSuôe
 
pSuôe
;

100 
CU_FaûuªRec‹d
* 
pNext
;

101 
CU_FaûuªRec‹d
* 
pPªv
;

103 } 
	tCU_FaûuªRec‹d
;

104 
CU_FaûuªRec‹d
* 
	tCU_pFaûuªRec‹d
;

108 
	sCU_RunSumm¨y


110 
nSuôesRun
;

111 
nSuôesFaûed
;

112 
nSuôesI«˘ive
;

113 
nTe°sRun
;

114 
nTe°sFaûed
;

115 
nTe°sI«˘ive
;

116 
nAs£πs
;

117 
nAs£πsFaûed
;

118 
nFaûuªRec‹ds
;

119 
Eœp£dTime
;

120 } 
	tCU_RunSumm¨y
;

121 
CU_RunSumm¨y
* 
	tCU_pRunSumm¨y
;

126 (*
CU_SuôeSèπMesßgeH™dÀr
)(c⁄° 
	tCU_pSuôe
 
	tpSuôe
);

129 (*
CU_Te°SèπMesßgeH™dÀr
)(c⁄° 
	tCU_pTe°
 
	tpTe°
, c⁄° 
	tCU_pSuôe
 
	tpSuôe
);

136 (*
CU_Te°Com∂ëeMesßgeH™dÀr
)(c⁄° 
	tCU_pTe°
 
	tpTe°
, c⁄° 
	tCU_pSuôe
 
	tpSuôe
,

137 c⁄° 
	tCU_pFaûuªRec‹d
 
	tpFaûuª
);

145 (*
CU_SuôeCom∂ëeMesßgeH™dÀr
)(c⁄° 
	tCU_pSuôe
 
	tpSuôe
,

146 c⁄° 
	tCU_pFaûuªRec‹d
 
	tpFaûuª
);

154 (*
CU_AŒTe°sCom∂ëeMesßgeH™dÀr
)(c⁄° 
	tCU_pFaûuªRec‹d
 
	tpFaûuª
);

161 (*
CU_SuôeInôFaûuªMesßgeH™dÀr
)(c⁄° 
	tCU_pSuôe
 
	tpSuôe
);

166 (*
CU_SuôeCÀ™upFaûuªMesßgeH™dÀr
)(c⁄° 
	tCU_pSuôe
 
	tpSuôe
);

174 
CU_EXPORT
 
CU_£t_suôe_°¨t_h™dÀr
(
CU_SuôeSèπMesßgeH™dÀr
 
pSuôeSèπMesßge
);

176 
CU_EXPORT
 
CU_£t_ã°_°¨t_h™dÀr
(
CU_Te°SèπMesßgeH™dÀr
 
pTe°SèπMesßge
);

178 
CU_EXPORT
 
CU_£t_ã°_com∂ëe_h™dÀr
(
CU_Te°Com∂ëeMesßgeH™dÀr
 
pTe°Com∂ëeMesßge
);

180 
CU_EXPORT
 
CU_£t_suôe_com∂ëe_h™dÀr
(
CU_SuôeCom∂ëeMesßgeH™dÀr
 
pSuôeCom∂ëeMesßge
);

182 
CU_EXPORT
 
CU_£t_Æl_ã°_com∂ëe_h™dÀr
(
CU_AŒTe°sCom∂ëeMesßgeH™dÀr
 
pAŒTe°sCom∂ëeMesßge
);

184 
CU_EXPORT
 
CU_£t_suôe_öô_Áûuª_h™dÀr
(
CU_SuôeInôFaûuªMesßgeH™dÀr
 
pSuôeInôFaûuªMesßge
);

186 
CU_EXPORT
 
CU_£t_suôe_˛ónup_Áûuª_h™dÀr
(
CU_SuôeCÀ™upFaûuªMesßgeH™dÀr
 
pSuôeCÀ™upFaûuªMesßge
);

189 
CU_EXPORT
 
CU_SuôeSèπMesßgeH™dÀr
 
CU_gë_suôe_°¨t_h™dÀr
();

191 
CU_EXPORT
 
CU_Te°SèπMesßgeH™dÀr
 
CU_gë_ã°_°¨t_h™dÀr
();

193 
CU_EXPORT
 
CU_Te°Com∂ëeMesßgeH™dÀr
 
CU_gë_ã°_com∂ëe_h™dÀr
();

195 
CU_EXPORT
 
CU_SuôeCom∂ëeMesßgeH™dÀr
 
CU_gë_suôe_com∂ëe_h™dÀr
();

197 
CU_EXPORT
 
CU_AŒTe°sCom∂ëeMesßgeH™dÀr
 
CU_gë_Æl_ã°_com∂ëe_h™dÀr
();

199 
CU_EXPORT
 
CU_SuôeInôFaûuªMesßgeH™dÀr
 
CU_gë_suôe_öô_Áûuª_h™dÀr
();

201 
CU_EXPORT
 
CU_SuôeCÀ™upFaûuªMesßgeH™dÀr
 
CU_gë_suôe_˛ónup_Áûuª_h™dÀr
();

207 
CU_EXPORT
 
CU_Eº‹Code
 
CU_run_Æl_ã°s
();

227 
CU_EXPORT
 
CU_Eº‹Code
 
CU_run_suôe
(
CU_pSuôe
 
pSuôe
);

253 
CU_EXPORT
 
CU_Eº‹Code
 
CU_run_ã°
(
CU_pSuôe
 
pSuôe
, 
CU_pTe°
 
pTe°
);

285 
CU_EXPORT
 
CU_£t_Áû_⁄_öa˘ive
(
CU_BOOL
 
√w_öa˘ive
);

300 
CU_EXPORT
 
CU_BOOL
 
CU_gë_Áû_⁄_öa˘ive
();

313 
CU_EXPORT
 
CU_gë_numbî_of_suôes_run
();

315 
CU_EXPORT
 
CU_gë_numbî_of_suôes_Áûed
();

317 
CU_EXPORT
 
CU_gë_numbî_of_suôes_öa˘ive
();

319 
CU_EXPORT
 
CU_gë_numbî_of_ã°s_run
();

321 
CU_EXPORT
 
CU_gë_numbî_of_ã°s_Áûed
();

323 
CU_EXPORT
 
CU_gë_numbî_of_ã°s_öa˘ive
();

325 
CU_EXPORT
 
CU_gë_numbî_of_as£πs
();

327 
CU_EXPORT
 
CU_gë_numbî_of_suc˚s£s
();

329 
CU_EXPORT
 
CU_gë_numbî_of_Áûuªs
();

331 
CU_EXPORT
 
CU_gë_numbî_of_Áûuª_ªc‹ds
();

337 
CU_EXPORT
 
CU_gë_ñ≠£d_time
();

345 
CU_EXPORT
 
CU_pFaûuªRec‹d
 
CU_gë_Áûuª_li°
();

352 
CU_EXPORT
 
CU_pRunSumm¨y
 
CU_gë_run_summ¨y
();

362 
CU_EXPORT
 * 
CU_gë_run_ªsu…s_°rög
();

377 
CU_EXPORT
 
CU_¥öt_run_ªsu…s
(
FILE
 *
fûe
);

392 
CU_EXPORT
 
CU_pSuôe
 
CU_gë_cuºít_suôe
();

394 
CU_EXPORT
 
CU_pTe°
 
CU_gë_cuºít_ã°
();

396 
CU_EXPORT
 
CU_BOOL
 
CU_is_ã°_ru¬ög
();

401 
CU_EXPORT
 
CU_˛ór_¥evious_ªsu…s
();

410 
CU_EXPORT
 
CU_BOOL
 
CU_as£πIm∂emíèti⁄
(CU_BOOL 
bVÆue
,

411 
uiLöe
,

412 c⁄° *
°rC⁄dôi⁄
,

413 c⁄° *
°rFûe
,

414 c⁄° *
°rFun˘i⁄
,

415 
CU_BOOL
 
bF©Æ
);

431 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


432 
CU_FaûuªRec‹d
 
	t_Te°Resu…
;

433 
CU_pFaûuªRec‹d
 
	tPTe°Resu…
;

436 #ifde‡
CUNIT_BUILD_TESTS


437 
ã°_cunô_Te°Run
();

440 #ifde‡
__˝lu•lus


	@libs/include/rock/CUnit/Util.h

48 #i‚de‡
CUNIT_UTIL_H_SEEN


49 
	#CUNIT_UTIL_H_SEEN


	)

51 
	~"CUnô.h
"

53 #ifde‡
__˝lu•lus


57 
	#CUNIT_MAX_ENTITY_LEN
 5

	)

60 
CU_EXPORT
 
size_t
 
CU_å™¶©e_•ecül_ch¨a˘îs
(c⁄° *
szSrc
, *
szDe°
, size_à
maxÀn
);

86 
CU_EXPORT
 
size_t
 
CU_å™¶©ed_°æí
(c⁄° *
szSrc
);

98 
CU_EXPORT
 
CU_com∑ª_°rögs
(c⁄° *
szSrc
, c⁄° *
szDe°
);

108 
CU_EXPORT
 
CU_åim_À·
(*
szSåög
);

114 
CU_EXPORT
 
CU_åim_right
(*
szSåög
);

120 
CU_EXPORT
 
CU_åim
(*
szSåög
);

126 
CU_EXPORT
 
size_t
 
CU_numbî_width
(
numbî
);

132 #ifde‡
CUNIT_BUILD_TESTS


133 
ã°_cunô_Utû
();

136 #ifde‡
__˝lu•lus


140 #ifde‡
USE_DEPRECATED_CUNIT_NAMES


141 
	#CUNIT_MAX_STRING_LENGTH
 1024

	)

143 
	#å™¶©e_•ecül_ch¨a˘îs
(
§c
, 
de°
, 
Àn
Ë
	`CU_å™¶©e_•ecül_ch¨a˘îs
(§c, de°,Üí)

	)

145 
	#com∑ª_°rögs
(
§c
, 
de°
Ë
	`CU_com∑ª_°rögs
(§c, de°)

	)

148 
	#åim_À·
(
°r
Ë
	`CU_åim_À·
(°r)

	)

150 
	#åim_right
(
°r
Ë
	`CU_åim_right
(°r)

	)

152 
	#åim
(
°r
Ë
	`CU_åim
(°r)

	)

	@libs/include/rock/aes.h

12 #i‚de‡
_AES_H_


13 
	#_AES_H_


	)

15 
	~<°döt.h
>

16 
	~<°dboﬁ.h
>

18 
öt32_t
 
	töt32
;

19 
uöt32_t
 
	tuöt32
;

20 
	tbyã
;

23 
	#AES_ENCRYPT
 1

	)

24 
	#AES_DECRYPT
 0

	)

25 
	#AES_BLOCK_SIZE
 16

	)

27 
	s´s_c⁄ãxt


29 
öt32
 
	mƒ
;

30 
uöt32
 *
	mrk
;

31 
uöt32
 
	mbuf
[68];

32 } 
	t´s_c⁄ãxt
;

34 #ifde‡
__˝lu•lus


49 
öt32
 
´s_£tkey_íc
(
´s_c⁄ãxt
* 
˘x
, c⁄° 
byã
* 
key
, i¡32 
key_bôsize
);

60 
öt32
 
´s_£tkey_dec
(
´s_c⁄ãxt
* 
˘x
, c⁄° 
byã
* 
key
, i¡32 
key_bôsize
);

70 
´s_¸y±_ecb
(
´s_c⁄ãxt
* 
˘x
, 
öt32
 
mode
, c⁄° 
byã
 
öput
[16], byã 
ouçut
[16]);

84 
boﬁ
 
´s_í¸y±
(
´s_c⁄ãxt
* 
˘x
, c⁄° 
byã
* 
öput
, 
uöt32
 
öÀn
, uöt32 
‰om
, byã* 
ouçut
, uöt32 *
ouéí
);

98 
boﬁ
 
´s_de¸y±
(
´s_c⁄ãxt
* 
˘x
, c⁄° 
byã
* 
öput
, 
uöt32
 
öÀn
, uöt32 
‰om
, byã* 
ouçut
, uöt32 *
ouéí
);

101 #ifde‡
__˝lu•lus


	@libs/include/rock/asyncproc.h

15 #i‚de‡
_ASYNCPROC_H_


16 
	#_ASYNCPROC_H_


	)

18 
	~<d¨øy.h
>

20 #ifde‡
__˝lu•lus


24 
async_¥oc_c⁄ãxt
 * 
	tasync_¥oc_t
;

34 (*
ˇŒback
Ë(*
¨g1
, *
¨g2
, *
¨g3
);

35 (*
func
Ë(
d¨øy
 
¨gv
);

36 } 
h™dÀ
;

37 
h™dÀ_id
;

38 *
¨g1
;

39 *
¨g2
;

40 *
¨g3
;

41 
d¨øy
 
¨gv
;

42 } 
	t¥oc_d©a_t
;

50 
öt64_t
 
èsk_id
;

51 
îrcode
;

52 } 
	t¥oc_îr_t
;

63 
async_¥oc_t
 
öô_¥oc_sys
(
¥oc_thªad_num
, 
max_¥oc_queue_Àn
, 
max_îr_queue_Àn
);

74 
öt64_t
 
¥oc
(
async_¥oc_t
 
¥oc_c⁄ãxt
, 
¥oc_d©a_t
 * 
d©a
);

83 
¥oc_îr_t
 
gë_¥oc_îr
(
async_¥oc_t
 
¥oc_c⁄ãxt
);

92 
gë_cuºít_¥oc_queue_size
(
async_¥oc_t
 
¥oc_c⁄ãxt
);

99 
de°roy_¥oc_sys
(
async_¥oc_t
 
¥oc_c⁄ãxt
);

101 #ifde‡
__˝lu•lus


	@libs/include/rock/bstrlib.h

15 #i‚de‡
_BSTRLIB_H_


16 
	#_BSTRLIB_H_


	)

18 #ifde‡
__˝lu•lus


22 
	~<°d¨g.h
>

23 
	~<°rög.h
>

24 
	~<limôs.h
>

25 
	~<˘y≥.h
>

27 #i‡!
deföed
 (
BSTRLIB_VSNP_OK
Ë&& !deföed (
BSTRLIB_NOVSNP
)

28 #i‡
deföed
 (
__TURBOC__
Ë&& !deföed (
__BORLANDC__
)

29 
	#BSTRLIB_NOVSNP


	)

33 
	#BSTR_ERR
 (-1)

	)

34 
	#BSTR_OK
 (0)

	)

35 
	#BSTR_BS_BUFF_LENGTH_GET
 (0)

	)

37 
ègb°rög
 * 
	tb°rög
;

38 c⁄° 
	tègb°rög
 * 
	tc⁄°_b°rög
;

41 
	#c°r2b°r
 
b‰omc°r


	)

42 
b°rög
 
b‰omc°r
 (c⁄° * 
°r
);

43 
b°rög
 
b‰omc°øŒoc
 (
mÀn
, c⁄° * 
°r
);

44 
b°rög
 
blk2b°r
 (c⁄° * 
blk
, 
Àn
);

45 * 
b°r2c°r
 (
c⁄°_b°rög
 
s
, 
z
);

46 
bc°r‰ì
 (* 
s
);

47 
b°rög
 
b°r˝y
 (
c⁄°_b°rög
 
b1
);

48 
bassign
 (
b°rög
 
a
, 
c⁄°_b°rög
 
b
);

49 
bassignmid°r
 (
b°rög
 
a
, 
c⁄°_b°rög
 
b
, 
À·
, 
Àn
);

50 
bassignc°r
 (
b°rög
 
a
, c⁄° * 
°r
);

51 
bassignblk
 (
b°rög
 
a
, c⁄° * 
s
, 
Àn
);

54 
bde°roy
 (
b°rög
 
b
);

57 
bÆloc
 (
b°rög
 
s
, 
Àn
);

58 
bÆlocmö
 (
b°rög
 
b
, 
Àn
);

61 
b°rög
 
bmid°r
 (
c⁄°_b°rög
 
b
, 
À·
, 
Àn
);

64 
bc⁄ˇt
 (
b°rög
 
b0
, 
c⁄°_b°rög
 
b1
);

65 
bc⁄ch¨
 (
b°rög
 
b0
, 
c
);

66 
bˇtc°r
 (
b°rög
 
b
, c⁄° * 
s
);

67 
bˇtblk
 (
b°rög
 
b
, c⁄° * 
s
, 
Àn
);

68 
bö£π
 (
b°rög
 
s1
, 
pos
, 
c⁄°_b°rög
 
s2
, 
fûl
);

69 
bö£πch
 (
b°rög
 
s1
, 
pos
, 
Àn
, 
fûl
);

70 
bª∂a˚
 (
b°rög
 
b1
, 
pos
, 
Àn
, 
c⁄°_b°rög
 
b2
, 
fûl
);

71 
bdñëe
 (
b°rög
 
s1
, 
pos
, 
Àn
);

72 
b£t°r
 (
b°rög
 
b0
, 
pos
, 
c⁄°_b°rög
 
b1
, 
fûl
);

73 
båunc
 (
b°rög
 
b
, 
n
);

76 
b°ricmp
 (
c⁄°_b°rög
 
b0
, c⁄°_b°rög 
b1
);

77 
b°∫icmp
 (
c⁄°_b°rög
 
b0
, c⁄°_b°rög 
b1
, 
n
);

78 
bi£qˇ£Àss
 (
c⁄°_b°rög
 
b0
, c⁄°_b°rög 
b1
);

79 
bis°emeqˇ£Àssblk
 (
c⁄°_b°rög
 
b0
, c⁄° * 
blk
, 
Àn
);

80 
bi£q
 (
c⁄°_b°rög
 
b0
, c⁄°_b°rög 
b1
);

81 
bis°emeqblk
 (
c⁄°_b°rög
 
b0
, c⁄° * 
blk
, 
Àn
);

82 
bi£qc°r
 (
c⁄°_b°rög
 
b
, c⁄° * 
s
);

83 
bi£qc°rˇ£Àss
 (
c⁄°_b°rög
 
b
, c⁄° * 
s
);

84 
b°rcmp
 (
c⁄°_b°rög
 
b0
, c⁄°_b°rög 
b1
);

85 
b°∫cmp
 (
c⁄°_b°rög
 
b0
, c⁄°_b°rög 
b1
, 
n
);

86 
bö°r
 (
c⁄°_b°rög
 
s1
, 
pos
, c⁄°_b°rög 
s2
);

87 
bö°º
 (
c⁄°_b°rög
 
s1
, 
pos
, c⁄°_b°rög 
s2
);

88 
bö°rˇ£Àss
 (
c⁄°_b°rög
 
s1
, 
pos
, c⁄°_b°rög 
s2
);

89 
bö°ºˇ£Àss
 (
c⁄°_b°rög
 
s1
, 
pos
, c⁄°_b°rög 
s2
);

90 
b°rchΩ
 (
c⁄°_b°rög
 
b
, 
c
, 
pos
);

91 
b°ºchΩ
 (
c⁄°_b°rög
 
b
, 
c
, 
pos
);

92 
	#b°rchr
(
b
,
c
Ë
	`b°rchΩ
 ((b), (c), 0)

	)

93 
	#b°ºchr
(
b
,
c
Ë
	`b°ºchΩ
 ((b), (c), 
	`bÀngth
(b)-1)

	)

94 
böchr
 (
c⁄°_b°rög
 
b0
, 
pos
, c⁄°_b°rög 
b1
);

95 
böchº
 (
c⁄°_b°rög
 
b0
, 
pos
, c⁄°_b°rög 
b1
);

96 
bnöchr
 (
c⁄°_b°rög
 
b0
, 
pos
, c⁄°_b°rög 
b1
);

97 
bnöchº
 (
c⁄°_b°rög
 
b0
, 
pos
, c⁄°_b°rög 
b1
);

98 
bfödª∂a˚
 (
b°rög
 
b
, 
c⁄°_b°rög
 
föd
, c⁄°_b°rög 
ª∂
, 
pos
);

99 
bfödª∂a˚ˇ£Àss
 (
b°rög
 
b
, 
c⁄°_b°rög
 
föd
, c⁄°_b°rög 
ª∂
, 
pos
);

102 
	sb°r_li°_s
 {

103 
	gqty
, 
	gmÀn
;

104 
b°rög
 * 
	gíåy
;

106 
b°r_li°_s
 * 
b°rLi°Cª©e
 ();

107 
b°rLi°De°roy
 (
b°r_li°_s
 * 
¶
);

108 
b°rLi°AŒoc
 (
b°r_li°_s
 * 
¶
, 
msz
);

109 
b°rLi°AŒocMö
 (
b°r_li°_s
 * 
¶
, 
msz
);

112 
b°r_li°_s
 * 
b•lô
 (
c⁄°_b°rög
 
°r
, 
•lôCh¨
);

113 
b°r_li°_s
 * 
b•lôs
 (
c⁄°_b°rög
 
°r
, c⁄°_b°rög 
•lôSå
);

114 
b°r_li°_s
 * 
b•lô°r
 (
c⁄°_b°rög
 
°r
, c⁄°_b°rög 
•lôSå
);

115 
b°rög
 
bjoö
 (c⁄° 
b°r_li°_s
 * 
bl
, 
c⁄°_b°rög
 
£p
);

116 
b•lôcb
 (
c⁄°_b°rög
 
°r
, 
•lôCh¨
, 
pos
,

117 (* 
cb
Ë(* 
∑rm
, 
ofs
, 
Àn
), *Öarm);

118 
b•lôscb
 (
c⁄°_b°rög
 
°r
, c⁄°_b°rög 
•lôSå
, 
pos
,

119 (* 
cb
Ë(* 
∑rm
, 
ofs
, 
Àn
), *Öarm);

120 
b•lô°rcb
 (
c⁄°_b°rög
 
°r
, c⁄°_b°rög 
•lôSå
, 
pos
,

121 (* 
cb
Ë(* 
∑rm
, 
ofs
, 
Àn
), *Öarm);

124 
b∑âîn
 (
b°rög
 
b
, 
Àn
);

125 
btouµî
 (
b°rög
 
b
);

126 
btﬁowî
 (
b°rög
 
b
);

127 
b…rimws
 (
b°rög
 
b
);

128 
bπrimws
 (
b°rög
 
b
);

129 
båimws
 (
b°rög
 
b
);

132 #i‡!
deföed
 (
BSTRLIB_NOVSNP
)

133 
b°rög
 
bf‹m©
 (c⁄° * 
fmt
, ...);

134 
bf‹m©a
 (
b°rög
 
b
, c⁄° * 
fmt
, ...);

135 
bassignf‹m©
 (
b°rög
 
b
, c⁄° * 
fmt
, ...);

136 
bvcf‹m©a
 (
b°rög
 
b
, 
cou¡
, c⁄° * 
fmt
, 
va_li°
 
¨gli°
);

138 
	#bvf‹m©a
(
ªt
, 
b
, 
fmt
, 
œ°¨g
) { \

139 
b°rög
 
b°πmp_b
 = (
b
); \

140 c⁄° * 
b°πmp_fmt
 = (
fmt
); \

141 
b°πmp_r
 = 
BSTR_ERR
, 
b°πmp_sz
 = 16; \

143 
va_li°
 
b°πmp_¨gli°
; \

144 
	`va_°¨t
 (
b°πmp_¨gli°
, 
œ°¨g
); \

145 
b°πmp_r
 = 
	`bvcf‹m©a
 (
b°πmp_b
, 
b°πmp_sz
, 
b°πmp_fmt
, 
b°πmp_¨gli°
); \

146 
	`va_íd
 (
b°πmp_¨gli°
); \

147 i‡(
b°πmp_r
 >= 0) { \

148 
b°πmp_r
 = 
BSTR_OK
; \

150 } i‡(-
b°πmp_r
 <
b°πmp_sz
) { \

151 
b°πmp_r
 = 
BSTR_ERR
; \

154 
b°πmp_sz
 = -
b°πmp_r
; \

156 
ªt
 = 
b°πmp_r
; \

157 }

	)

161 (*
	gbNgëc
Ë(*
	t∑rm
);

162 
size_t
 (* 
	tbNªad
Ë(*
	tbuff
, 
	tsize_t
 
	tñsize
, size_à
	t√Àm
, *
	t∑rm
);

165 
b°rög
 
bgës
 (
bNgëc
 
gëcPå
, * 
∑rm
, 
ãrmö©‹
);

166 
b°rög
 
bªad
 (
bNªad
 
ªadPå
, * 
∑rm
);

167 
bgëß
 (
b°rög
 
b
, 
bNgëc
 
gëcPå
, * 
∑rm
, 
ãrmö©‹
);

168 
bassigngës
 (
b°rög
 
b
, 
bNgëc
 
gëcPå
, * 
∑rm
, 
ãrmö©‹
);

169 
bªada
 (
b°rög
 
b
, 
bNªad
 
ªadPå
, * 
∑rm
);

172 
bSåóm
 * 
bs›í
 (
bNªad
 
ªadPå
, * 
∑rm
);

173 * 
bs˛o£
 (
bSåóm
 * 
s
);

174 
bsbufÊígth
 (
bSåóm
 * 
s
, 
sz
);

175 
b§ód 
 (
b°rög
 
b
, 
bSåóm
 * 
s
, 
ãrmö©‹
);

176 
b§ód s
 (
b°rög
 
r
, 
bSåóm
 * 
s
, 
c⁄°_b°rög
 
ãrm
);

177 
b§ód
 (
b°rög
 
b
, 
bSåóm
 * 
s
, 
n
);

178 
b§ód a
 (
b°rög
 
b
, 
bSåóm
 * 
s
, 
ãrmö©‹
);

179 
b§ód ß
 (
b°rög
 
r
, 
bSåóm
 * 
s
, 
c⁄°_b°rög
 
ãrm
);

180 
b§óda
 (
b°rög
 
b
, 
bSåóm
 * 
s
, 
n
);

181 
bsuƒód
 (
bSåóm
 * 
s
, 
c⁄°_b°rög
 
b
);

182 
b•ìk
 (
b°rög
 
r
, c⁄° 
bSåóm
 * 
s
);

183 
bs•lôscb
 (
bSåóm
 * 
s
, 
c⁄°_b°rög
 
•lôSå
,

184 (* 
cb
Ë(* 
∑rm
, 
ofs
, 
c⁄°_b°rög
 
íåy
), *Öarm);

185 
bs•lô°rcb
 (
bSåóm
 * 
s
, 
c⁄°_b°rög
 
•lôSå
,

186 (* 
cb
Ë(* 
∑rm
, 
ofs
, 
c⁄°_b°rög
 
íåy
), *Öarm);

187 
b£of
 (c⁄° 
bSåóm
 * 
s
);

189 
	sègb°rög
 {

190 
	gmÀn
;

191 
	g¶í
;

192 * 
	gd©a
;

196 
	#bÀngthe
(
b
, 
e
Ë(((bË=(*)0 || (b)->
¶í
 < 0Ë? ()”Ë: ((b)->¶í))

	)

197 
	#bÀngth
(
b
Ë(
	`bÀngthe
 ((b), 0))

	)

198 
	#bd©aof£
(
b
, 
o
, 
e
Ë(((bË=(*)0 || (b)->
d©a
 =(*)0Ë? (*)”Ë: ((*)(b)->d©aË+ (o))

	)

199 
	#bd©aofs
(
b
, 
o
Ë(
	`bd©aof£
 ((b), (o), (*)0))

	)

200 
	#bd©´
(
b
, 
e
Ë(
	`bd©aof£
 (b, 0,É))

	)

201 
	#bd©a
(
b
Ë(
	`bd©aofs
 (b, 0))

	)

202 
	#bch¨e
(
b
, 
p
, 
e
Ë(((()’)Ë< ()
	`bÀngth
(b)Ë? ((b)->
d©a
[’)]Ë: (e))

	)

203 
	#bch¨
(
b
, 
p
Ë
	`bch¨e
 ((b), (p), '\0')

	)

206 
	#bsSèticMÀn
(
q
,
m
Ë{(m), (Ë(q)-1, (*Ë("" q "")}

	)

207 #i‡
deföed
(
_MSC_VER
)

209 
	#bsSètic
(
q
Ë
	`bsSèticMÀn
(q,-32)

	)

211 #i‚de‡
bsSètic


212 
	#bsSètic
(
q
Ë
	`bsSèticMÀn
(q,-
__LINE__
)

	)

216 
	#bsSèticBlkP¨ms
(
q
Ë((*)("" q "")), ((Ë(q)-1)

	)

219 
	#c°r2tb°r
 
bt‰omc°r


	)

220 
	#bt‰omc°r
(
t
,
s
) { \

221 (
t
).
d©a
 = (*Ë(
s
); \

222 (
t
).
¶í
 = (—).
d©a
Ë? ((Ë(
°æí
) ((*)(t).data)) : 0; \

223 (
t
).
mÀn
 = -1; \

224 }

	)

225 
	#blk2tb°r
(
t
,
s
,
l
) { \

226 (
t
).
d©a
 = (*Ë(
s
); \

227 (
t
).
¶í
 = 
l
; \

228 (
t
).
mÀn
 = -1; \

229 }

	)

230 
	#bt‰omblk
(
t
,
s
,
l
Ë
	`blk2tb°r
—,s,l)

	)

231 
	#bmid2tb°r
(
t
,
b
,
p
,
l
) { \

232 
c⁄°_b°rög
 
b°πmp_s
 = (
b
); \

233 i‡(
b°πmp_s
 && b°πmp_s->
d©a
 && b°πmp_s->
¶í
 >= 0) { \

234 
b°πmp_À·
 = (
p
); \

235 
b°πmp_Àn
 = (
l
); \

236 i‡(
b°πmp_À·
 < 0) { \

237 
b°πmp_Àn
 +
b°πmp_À·
; \

238 
b°πmp_À·
 = 0; \

240 i‡(
b°πmp_Àn
 > 
b°πmp_s
->
¶í
 - 
b°πmp_À·
) \

241 
b°πmp_Àn
 = 
b°πmp_s
->
¶í
 - 
b°πmp_À·
; \

242 i‡(
b°πmp_Àn
 <= 0) { \

243 (
t
).
d©a
 = (*)""; \

244 (
t
).
¶í
 = 0; \

246 (
t
).
d©a
 = 
b°πmp_s
->d©®+ 
b°πmp_À·
; \

247 (
t
).
¶í
 = 
b°πmp_Àn
; \

250 (
t
).
d©a
 = (*)""; \

251 (
t
).
¶í
 = 0; \

253 (
t
).
mÀn
 = -
__LINE__
; \

254 }

	)

255 
	#bt‰omblk…rimws
(
t
,
s
,
l
) { \

256 
b°πmp_idx
 = 0, 
b°πmp_Àn
 = (
l
); \

257 * 
b°πmp_s
 = (
s
); \

258 i‡(
b°πmp_s
 && 
b°πmp_Àn
 >= 0) { \

259 ; 
b°πmp_idx
 < 
b°πmp_Àn
; bstrtmp_idx++) { \

260 i‡(!
	`is•a˚
 (
b°πmp_s
[
b°πmp_idx
])) ; \

263 (
t
).
d©a
 = 
b°πmp_s
 + 
b°πmp_idx
; \

264 (
t
).
¶í
 = 
b°πmp_Àn
 - 
b°πmp_idx
; \

265 (
t
).
mÀn
 = -
__LINE__
; \

266 }

	)

267 
	#bt‰omblkπrimws
(
t
,
s
,
l
) { \

268 
b°πmp_Àn
 = (
l
) - 1; \

269 * 
b°πmp_s
 = (
s
); \

270 i‡(
b°πmp_s
 && 
b°πmp_Àn
 >= 0) { \

271 ; 
b°πmp_Àn
 >= 0; bstrtmp_len--) { \

272 i‡(!
	`is•a˚
 (
b°πmp_s
[
b°πmp_Àn
])) ; \

275 (
t
).
d©a
 = 
b°πmp_s
; \

276 (
t
).
¶í
 = 
b°πmp_Àn
 + 1; \

277 (
t
).
mÀn
 = -
__LINE__
; \

278 }

	)

279 
	#bt‰omblkåimws
(
t
,
s
,
l
) { \

280 
b°πmp_idx
 = 0, 
b°πmp_Àn
 = (
l
) - 1; \

281 * 
b°πmp_s
 = (
s
); \

282 i‡(
b°πmp_s
 && 
b°πmp_Àn
 >= 0) { \

283 ; 
b°πmp_idx
 <
b°πmp_Àn
; bstrtmp_idx++) { \

284 i‡(!
	`is•a˚
 (
b°πmp_s
[
b°πmp_idx
])) ; \

286 ; 
b°πmp_Àn
 >
b°πmp_idx
; bstrtmp_len--) { \

287 i‡(!
	`is•a˚
 (
b°πmp_s
[
b°πmp_Àn
])) ; \

290 (
t
).
d©a
 = 
b°πmp_s
 + 
b°πmp_idx
; \

291 (
t
).
¶í
 = 
b°πmp_Àn
 + 1 - 
b°πmp_idx
; \

292 (
t
).
mÀn
 = -
__LINE__
; \

293 }

	)

296 
	#bwrôïrŸe˘
(
t
Ë{ i‡(—).
mÀn
 >0Ë—).mÀ¿-1; }

	)

297 
	#bwrôóŒow
(
t
Ë{ i‡(—).
mÀn
 =-1Ë—).mÀ¿—).
¶í
 + (—).¶í =0); }

	)

298 
	#biswrôïrŸe˘ed
(
t
Ë(—).
mÀn
 <0)

	)

300 #ifde‡
__˝lu•lus


	@libs/include/rock/cjson.h

23 #i‚de‡
cJSON__h


24 
	#cJSON__h


	)

26 
	~<sys/ty≥s.h
>

27 
	~<°dboﬁ.h
>

28 #ifde‡
__˝lu•lus


33 
	#cJSON_FÆ£
 0

	)

34 
	#cJSON_True
 1

	)

35 
	#cJSON_NULL
 2

	)

36 
	#cJSON_Numbî
 3

	)

37 
	#cJSON_Såög
 4

	)

38 
	#cJSON_Aºay
 5

	)

39 
	#cJSON_Obje˘
 6

	)

41 
	#cJSON_IsRe„ªn˚
 256

	)

44 
	scJSON
 {

45 
cJSON
 *
√xt
, *
¥ev
;

46 
cJSON


47 *
chûd
;

49 
ty≥
;

51 *
vÆue°rög
;

52 
vÆueöt
;

53 
vÆuedoubÀ
;

55 *
°rög
;

56 } 
	tcJSON
;

58 
	scJSON_Hooks
 {

59 *(*
mÆloc_‚
Ë(
size_t
 
sz
);

60 (*
‰ì_‚
Ë(*
±r
);

61 } 
	tcJSON_Hooks
;

64 
cJSON_InôHooks
(
cJSON_Hooks
 * 
hooks
);

67 
cJSON
 *
cJSON_P¨£
(c⁄° *
vÆue
);

69 *
cJSON_Pröt
(
cJSON
 * 
ôem
);

71 *
cJSON_PrötUnf‹m©ãd
(
cJSON
 * 
ôem
);

73 
cJSON_Dñëe
(
cJSON
 * 
c
);

76 
cJSON_GëAºaySize
(
cJSON
 * 
¨øy
);

78 
cJSON
 *
cJSON_GëAºayIãm
(cJSON * 
¨øy
, 
ôem
);

80 
cJSON
 *
cJSON_GëObje˘Iãm
(cJSON * 
obje˘
, c⁄° *
°rög
);

83 c⁄° *
cJSON_GëEº‹På
();

86 
cJSON
 *
cJSON_Cª©eNuŒ
();

87 
cJSON
 *
cJSON_Cª©eTrue
();

88 
cJSON
 *
cJSON_Cª©eFÆ£
();

89 
cJSON
 *
cJSON_Cª©eBoﬁ
(
b
);

90 
cJSON
 *
cJSON_Cª©eNumbî
(
num
);

91 
cJSON
 *
cJSON_Cª©eSåög
(c⁄° *
°rög
);

92 
cJSON
 *
cJSON_Cª©eAºay
();

93 
cJSON
 *
cJSON_Cª©eObje˘
();

96 
cJSON
 *
cJSON_Cª©eI¡Aºay
(c⁄° *
numbîs
, 
cou¡
);

97 
cJSON
 *
cJSON_Cª©eFlﬂtAºay
(c⁄° *
numbîs
, 
cou¡
);

98 
cJSON
 *
cJSON_Cª©eDoubÀAºay
(c⁄° *
numbîs
, 
cou¡
);

99 
cJSON
 *
cJSON_Cª©eSåögAºay
(c⁄° **
°rögs
, 
cou¡
);

102 
cJSON_AddIãmToAºay
(
cJSON
 * 
¨øy
, cJSON * 
ôem
);

103 
cJSON_AddIãmToObje˘
(
cJSON
 * 
obje˘
, c⁄° *
°rög
,

104 
cJSON
 * 
ôem
);

106 
cJSON_AddIãmRe„ªn˚ToAºay
(
cJSON
 * 
¨øy
, cJSON * 
ôem
);

107 
cJSON_AddIãmRe„ªn˚ToObje˘
(
cJSON
 * 
obje˘
,

108 c⁄° *
°rög
,

109 
cJSON
 * 
ôem
);

112 
cJSON
 *
cJSON_DëachIãmFromAºay
(cJSON * 
¨øy
, 
which
);

113 
cJSON_DñëeIãmFromAºay
(
cJSON
 * 
¨øy
, 
which
);

114 
cJSON
 *
cJSON_DëachIãmFromObje˘
(cJSON * 
obje˘
,

115 c⁄° *
°rög
);

116 
cJSON_DñëeIãmFromObje˘
(
cJSON
 * 
obje˘
, c⁄° *
°rög
);

119 
cJSON_Rïœ˚IãmInAºay
(
cJSON
 * 
¨øy
, 
which
,

120 
cJSON
 * 
√wôem
);

121 
cJSON_Rïœ˚IãmInObje˘
(
cJSON
 * 
obje˘
, c⁄° *
°rög
,

122 
cJSON
 * 
√wôem
);

125 
cJSON
 *
cJSON_Du∂iˇã
(cJSON * 
ôem
, 
ªcur£
);

131 
cJSON
 *
cJSON_P¨£WôhO±s
(c⁄° *
vÆue
,

132 c⁄° **
ªtu∫_∑r£_íd
,

133 
ªquúe_nuŒ_ãrmö©ed
);

135 
cJSON_Möify
(*
js⁄
);

138 
	#cJSON_AddNuŒToObje˘
(
obje˘
,
«me
Ë
	`cJSON_AddIãmToObje˘
(obje˘,Çame, 
	`cJSON_Cª©eNuŒ
())

	)

139 
	#cJSON_AddTrueToObje˘
(
obje˘
,
«me
Ë
	`cJSON_AddIãmToObje˘
(obje˘,Çame, 
	`cJSON_Cª©eTrue
())

	)

140 
	#cJSON_AddFÆ£ToObje˘
(
obje˘
,
«me
Ë
	`cJSON_AddIãmToObje˘
(obje˘,Çame, 
	`cJSON_Cª©eFÆ£
())

	)

141 
	#cJSON_AddBoﬁToObje˘
(
obje˘
,
«me
,
b
Ë
	`cJSON_AddIãmToObje˘
(obje˘,Çame, 
	`cJSON_Cª©eBoﬁ
(b))

	)

142 
	#cJSON_AddNumbîToObje˘
(
obje˘
,
«me
,
n
Ë
	`cJSON_AddIãmToObje˘
(obje˘,Çame, 
	`cJSON_Cª©eNumbî
“))

	)

143 
	#cJSON_AddSåögToObje˘
(
obje˘
,
«me
,
s
Ë
	`cJSON_AddIãmToObje˘
(obje˘,Çame, 
	`cJSON_Cª©eSåög
(s))

	)

146 
	#cJSON_SëI¡VÆue
(
obje˘
,
vÆ
Ë((obje˘)?(obje˘)->
vÆueöt
=(obje˘)->
vÆuedoubÀ
=(vÆ):(vÆ))

	)

148 #ifde‡
__˝lu•lus


	@libs/include/rock/crc32.h

1 #i‚de‡
_CRC32_C_


2 
	#_CRC32_C_


	)

4 #ifde‡
__˝lu•lus


9 
uöt32_t
 
¸c32_ˇlc
(c⁄° *
buf
, 
size_t
 
size
);

11 #ifde‡
__˝lu•lus


	@libs/include/rock/cstring.h

13 #i‚de‡
_CSTRING_H_


14 
	#_CSTRING_H_


	)

16 #ifde‡
__˝lu•lus


20 
	~<°dboﬁ.h
>

22 
	~"d¨øy.h
"

31 * 
touµî°r
(*
°r
);

40 * 
tﬁowî°r
(*
°r
);

50 * 
…rimws
(* 
°r
);

59 * 
πrimws
 (* 
°r
);

68 * 
åimws
 (* 
°r
);

77 * 
ªvî£
(* 
°r
);

87 
boﬁ
 
°¨tswôh
(c⁄° * 
__ª°ri˘
 
hay°ack
, c⁄° * __ª°ri˘ 
√edÀ
);

97 
boﬁ
 
ídswôh
(c⁄° * 
__ª°ri˘
 
hay°ack
, c⁄° * __ª°ri˘ 
√edÀ
);

107 
ödexof
(c⁄° * 
hay°ack
, 
ch
);

117 
ödexof°r
(c⁄° * 
__ª°ri˘
 
hay°ack
, c⁄° * __ª°ri˘ 
√edÀ
);

127 
rödexof
(c⁄° * 
hay°ack
, 
ch
);

138 *
ª∂a˚_ch_fú°
(* 
hay°ack
, 
èrgë
, 
ª∂a˚mít
);

149 *
ª∂a˚_ch_Æl
(* 
hay°ack
, 
èrgë
, 
ª∂a˚mít
);

161 *
ª∂a˚_°r_fú°
(*
hay°ack
, c⁄° *
__ª°ri˘
 
èrgë
, \

162 c⁄° *
__ª°ri˘
 
ª∂a˚mít
);

173 *
ª∂a˚_°r_Æl
(*
hay°ack
, c⁄° *
__ª°ri˘
 
èrgë
, \

174 c⁄° *
__ª°ri˘
 
ª∂a˚mít
);

176 
	ssub°r_ôem_t


178 * 
sub°r
;

189 
d¨øy
 
•lô
(c⁄° *
hay°ack
, c⁄° 
√edÀ
);

199 
d¨øy
 
•lôs
(c⁄° *
__ª°ri˘
 
hay°ack
, c⁄° *__ª°ri˘ 
•lô_°r
);

209 
d¨øy
 
•lô°r
(c⁄° *
__ª°ri˘
 
hay°ack
, c⁄° *__ª°ri˘ 
•lô_°r
);

212 #ifde‡
__˝lu•lus


	@libs/include/rock/darray.h

22 #i‚de‡
_DARRAY_H_


23 
	#_DARRAY_H_


	)

25 #ifde‡
__˝lu•lus


30 
	~<m©h.h
>

31 
	~<°döt.h
>

32 
	~<°rög.h
>

33 
	~<±hªad.h
>

34 
	~<°dlib.h
>

35 
	~<as£π.h
>

36 
	~<°dio.h
>

81 #ifde‡
DARRAY_DEBUG_MODE


82 
	#DEBUG_PUTS
(...Ë
	`¥ötf
(
__VA_ARGS__
)

	)

84 
	#DEBUG_PUTS
(...Ë(()0)

	)

87 #i‚de‡
mem_Æloc


88 #ifde‡
SLAB_ALLOC


89 
	#mem_Æloc
 
¶ab_Æloc


	)

91 
	#mem_Æloc
 
mÆloc


	)

95 #i‚de‡
mem_‰ì


96 #ifde‡
SLAB_ALLOC


97 
	#mem_‰ì
 
¶ab_‰ì


	)

99 
	#mem_‰ì
 
‰ì


	)

103 
	#DARRAY_NODE_SIZE
 128

	)

105 
	sd¨øy_comm⁄_hód


107 
uöt32_t
 
node_cou¡
;

108 
uöt32_t
 
ˇ∑côy
;

109 
uöt32_t
 
£tsize
;

110 
d¨øy_comm⁄_node
 * 
fú°_node_±r
;

111 
d¨øy_comm⁄_node
 * 
œ°_node_±r
;

112 
uöt32_t
 
node_size
;

113 
uöt32_t
 
ôem_size
;

114 
uöt32_t
 
ˇche_node_subs¸ùt
;

115 
uöt32_t
 
ˇche_ôem_subs¸ùt
;

116 
d¨øy_comm⁄_node
 * 
ˇche_node_±r
;

117 * 
ˇche_ôem_±r
;

118 
±hªad_rwlock_t
 
lock
;

121 
d¨øy_comm⁄_hód
 * 
	td¨øy
;

123 
	sd¨øy_comm⁄_node


125 
uöt32_t
 
id
;

126 
uöt32_t
 
off£t
;

127 
d¨øy_comm⁄_node
 *
¥e_node
;

128 
d¨øy_comm⁄_node
 *
√xt_node
;

129 
ôem_¨øy
[];

135 
ölöe
 
uöt32_t
 
mö_ö_3
(uöt32_à
a
, uöt32_à
b
, uöt32_à
c
Ë
__©åibuã__
((
Æways_ölöe
));

136 
ölöe
 
d¨øy_comm⁄_node
 * 
d¨øy_föd_node
(
d¨øy_comm⁄_hód
 *
hód_±r
, 
uöt32_t
 
¡h
Ë
__©åibuã__
((
Æways_ölöe
));

137 
ölöe
 
d¨øy_exãnd_node
(
d¨øy_comm⁄_hód
 *
hód_±r
, 
size_t
 
sizeof_node
Ë
__©åibuã__
((
Æways_ölöe
));

149 
	#d¨øy_√w
(
hód_±r
, 
ôem_°ru˘
) \

150 
d¨øy_comm⁄_hód
 *
hód_±r
 = 
	`mem_Æloc
((darray_common_head)); \

151 
	`as£π
(
hód_±r
 !
NULL
); \

152 
	`bzîo
(
hód_±r
, (
d¨øy_comm⁄_hód
)); \

153 
	`±hªad_rwlock_öô
(&
hód_±r
->
lock
, 
NULL
); \

155 
d¨øy_comm⁄_node
 *
node_±r
 = 
	`mem_Æloc
((d¨øy_comm⁄_nodeË+ ((
ôem_°ru˘
)*
DARRAY_NODE_SIZE
)); \

156 
	`as£π
(
node_±r
 !
NULL
); \

157 
	`bzîo
(
node_±r
, (
d¨øy_comm⁄_node
)); \

158 
hód_±r
->
node_cou¡
 = 1; \

159 
hód_±r
->
ˇ∑côy
 = 
DARRAY_NODE_SIZE
; \

160 
hód_±r
->
node_size
 = 
DARRAY_NODE_SIZE
; \

161 
hód_±r
->
ôem_size
 = (
ôem_°ru˘
); \

162 
hód_±r
->
fú°_node_±r
 = 
node_±r
; \

163 
hód_±r
->
œ°_node_±r
 = 
node_±r
; \

164 
hód_±r
->
ˇche_node_subs¸ùt
 = 0; \

165 
hód_±r
->
ˇche_ôem_subs¸ùt
 = 0; \

166 
hód_±r
->
ˇche_node_±r
 = hód_±r->
fú°_node_±r
; \

167 
hód_±r
->
ˇche_ôem_±r
 = &(
node_±r
->
ôem_¨øy
[0]); \

168 
hód_±r
->
£tsize
 = 0; \

169 
node_±r
->
id
 = 0; \

170 
node_±r
->
off£t
 = 0; \

171 } 0)

	)

173 
	#d¨øy_√w2
(
hód_±r
, 
ôem_°ru˘
, 
my_node_size
) \

174 
d¨øy_comm⁄_hód
 *
hód_±r
 = 
	`mem_Æloc
((darray_common_head)); \

175 
	`as£π
(
hód_±r
 !
NULL
); \

176 
	`bzîo
(
hód_±r
, (
d¨øy_comm⁄_hód
)); \

177 
	`±hªad_rwlock_öô
(&
hód_±r
->
lock
, 
NULL
); \

179 
	`DEBUG_PUTS
("Ælo¯size: %zu\n", (
ôem_°ru˘
)*
my_node_size
); \

180 
d¨øy_comm⁄_node
 *
node_±r
 = 
	`mem_Æloc
((d¨øy_comm⁄_nodeË+ ((
ôem_°ru˘
)*
my_node_size
)); \

181 
	`as£π
(
node_±r
 !
NULL
); \

182 
	`bzîo
(
node_±r
, (
d¨øy_comm⁄_node
)); \

183 
hód_±r
->
node_cou¡
 = 1; \

184 
hód_±r
->
ˇ∑côy
 = 
my_node_size
; \

185 
hód_±r
->
node_size
 = 
my_node_size
; \

186 
hód_±r
->
ôem_size
 = (
ôem_°ru˘
); \

187 
hód_±r
->
fú°_node_±r
 = 
node_±r
; \

188 
hód_±r
->
œ°_node_±r
 = 
node_±r
; \

189 
hód_±r
->
ˇche_node_subs¸ùt
 = 0; \

190 
hód_±r
->
ˇche_ôem_subs¸ùt
 = 0; \

191 
hód_±r
->
ˇche_node_±r
 = hód_±r->
fú°_node_±r
; \

192 
hód_±r
->
ˇche_ôem_±r
 = &(
node_±r
->
ôem_¨øy
[0]); \

193 
hód_±r
->
£tsize
 = 0; \

194 
node_±r
->
id
 = 0; \

195 
node_±r
->
off£t
 = 0; \

196 } 0)

	)

204 
	#d¨øy_√w_±r
(
hód_±r
) \

205 
d¨øy_comm⁄_hód
 *
hód_±r
 = 
NULL


	)

207 
	#d¨øy_de˛¨e
(
hód_±r
) \

208 
d¨øy_comm⁄_hód
 *
hód_±r


	)

217 #ifde‡
MUL_THREAD


218 
	#d¨øy_exlock
(
hód_±r
Ëdÿ{ 
	`as£π
(hód_±r!=
NULL
); 
	`±hªad_rwlock_wæock
(&(hód_±r->
lock
)); } 0)

	)

220 
	#d¨øy_exlock
(
hód_±r
Ëdÿ{} 0)

	)

230 #ifde‡
MUL_THREAD


231 
	#d¨øy_shlock
(
hód_±r
Ëdÿ{ 
	`as£π
(hód_±r!=
NULL
); 
	`±hªad_rwlock_rdlock
(&(hód_±r->
lock
)); } 0)

	)

233 
	#d¨øy_shlock
(
hód_±r
Ëdÿ{} 0)

	)

242 #ifde‡
MUL_THREAD


243 
	#d¨øy_u∆ock
(
hód_±r
Ëdÿ{ 
	`as£π
(hód_±r!=
NULL
); 
	`±hªad_rwlock_u∆ock
(&(hód_±r->
lock
)); } 0)

	)

245 
	#d¨øy_u∆ock
(
hód_±r
Ëdÿ{ } 0)

	)

254 
	#d¨øy_‰ì
(
hód_±r
) do { \

255 
	`as£π
(
hód_±r
 !
NULL
); \

256 
	`d¨øy_exlock
(
hód_±r
); \

257 
d¨øy_comm⁄_node
 *
p
 = (d¨øy_comm⁄_nodê*)(
hód_±r
->
fú°_node_±r
); \

258 
d¨øy_comm⁄_node
 *
µ
 = 
p
; \

259 
µ
) { \

260 
p
 = 
µ
->
√xt_node
; \

261 
	`mem_‰ì
(
µ
); \

262 
µ
 = 
p
; \

264 
hód_±r
->
node_cou¡
 = hód_±r->
ˇ∑côy
 = hód_±r->
ˇche_ôem_subs¸ùt
 = hód_±r->
ˇche_node_subs¸ùt
 = 0; \

265 
hód_±r
->
fú°_node_±r
 = hód_±r->
œ°_node_±r
 = hód_±r->
ˇche_node_±r
 = 
NULL
; \

266 
hód_±r
->
ˇche_ôem_±r
 = 
NULL
; \

267 
	`d¨øy_u∆ock
(
hód_±r
); \

268 
	`±hªad_rwlock_de°roy
(&(
hód_±r
->
lock
)); \

269 
	`mem_‰ì
(
hód_±r
); \

270 } 0)

	)

272 
	#d¨øy_f‹óch
(
hód_±r
, 
ôem_°ru˘
, 
ôem_±r
, 
_max_
, 
CODES
) \

273 
size_t
 
_my_cou¡î_
=0; _my_cou¡î_<(size_t)(
_max_
); _my_counter_++) \

275 
ôem_°ru˘
 *
ôem_±r
 = 
	`d¨øy_addr
(
hód_±r
, 
_my_cou¡î_
); \

276 do{ 
CODES
 } 0); \

277 }

	)

279 
	#d¨øy_Æl
(
hód_±r
, 
ôem_°ru˘
, 
ôem_±r
, 
CODES
) \

280 
	`d¨øy_f‹óch
(
hód_±r
, 
ôem_°ru˘
, 
ôem_±r
, (((hód_±r)->
node_size
)*((hód_±r)->
node_cou¡
)), 
CODES
)

	)

282 
	#d¨øy_m≠
(
hód_±r
, 
ôem_°ru˘
, 
ôem_±r
, 
CODES
) \

283 
	`d¨øy_f‹óch
(
hód_±r
, 
ôem_°ru˘
, 
ôem_±r
, (
	`d¨øy_£tsize
(hód_±r)), 
CODES
)

	)

292 
	#d¨øy_size
(
hód_±r
Ë((hód_±r)->
ˇ∑côy
)

	)

294 
	#d¨øy_£tsize
(
hód_±r
Ë((hód_±r)->
£tsize
)

	)

296 
	#_d¨øy_addr
(
hód_±r
, 
ödex
, 
ôem_±r
) do { \

297 
	`as£π
(
hód_±r
 !
NULL
); \

298 
d¨øy_comm⁄_node
 *
node_±r
; \

299 
off£t_ö_node
 = 
ödex
 % 
hód_±r
->
node_size
; \

300 
	`d¨øy_shlock
(
hód_±r
); \

301 i‡((
ödex
 >0Ë&& (ödex < ()
hód_±r
->
ˇ∑côy
)) { \

302 i‡(
ödex
 =()
hód_±r
->
ˇche_ôem_subs¸ùt
) { \

303 
ôem_±r
 = (*)
hód_±r
->
ˇche_ôem_±r
; \

304 
	`DEBUG_PUTS
("cache_item_ptr\n"); \

306 
node_±r
 = 
	`d¨øy_föd_node
(
hód_±r
, 
ödex
); \

307 
ôem_±r
 = (*)&(
node_±r
->
ôem_¨øy
[
hód_±r
->
ôem_size
 * 
off£t_ö_node
]); \

308 
hód_±r
->
ˇche_ôem_±r
 = 
ôem_±r
; \

309 
hód_±r
->
ˇche_ôem_subs¸ùt
 = 
ödex
; \

310 i‡(
node_±r
 =
NULL
Ë
ôem_±r
 = NULL; \

312 } i‡(
ödex
 >()
hód_±r
->
ˇ∑côy
) { \

313 
g≠
 = ()
	`˚û
((
ödex
 + 1 - 
hód_±r
->
ˇ∑côy
)*1.0 / (hód_±r->
node_size
*1.0)); \

314 
	`DEBUG_PUTS
("Exãnd: %d\n", 
g≠
); \

315 ; 
g≠
 > 0; --gap) { \

316 
	`d¨øy_exãnd_node
(
hód_±r
, (
d¨øy_comm⁄_node
)+hód_±r->
node_size
*hód_±r->
ôem_size
); \

318 
ôem_±r
 = (*)&(
hód_±r
->
œ°_node_±r
->
ôem_¨øy
[hód_±r->
ôem_size
 * (
ödex
 % hód_±r->
node_size
)]); \

319 
hód_±r
->
ˇche_ôem_subs¸ùt
 = 
ödex
; \

320 
hód_±r
->
ˇche_ôem_±r
 = 
ôem_±r
; \

323 
ôem_±r
 = 
NULL
; \

325 
	`d¨øy_u∆ock
(
hód_±r
); \

326 } 0)

	)

337 
ölöe
 *

338 
d¨øy_addr
(
d¨øy_comm⁄_hód
 *
hód_±r
, 
ödex
)

341 *
ôem_±r
;

343 
_d¨øy_addr
(
hód_±r
, 
ödex
, 
ôem_±r
);

344 i‡(
ödex
 > 0)

346 i‡(
ödex
 > ()
d¨øy_£tsize
(
hód_±r
))

347 
d¨øy_£tsize
(
hód_±r
Ë
ödex
+1;

350  
ôem_±r
;

362 
ölöe
 

363 
d¨øy_push
(
d¨øy_comm⁄_hód
 *
hód_±r
, *
ôem_±r
)

365 
ödex
;

366 *
±r
;

368 i‡(
d¨øy_£tsize
(
hód_±r
) == 0)

370 
ödex
 = 0;

374 
ödex
 = 
hód_±r
->
ˇche_ôem_subs¸ùt
 + 1;

376 
±r
 = 
d¨øy_addr
(
hód_±r
, 
ödex
);

378 
mem˝y
(
±r
, (*)
ôem_±r
, 
hód_±r
->
ôem_size
);

379 
d¨øy_£tsize
(
hód_±r
) ++;

381  
ödex
;

392 
ölöe
 

393 
d¨øy_shrök_size
(
d¨øy_comm⁄_hód
 *
hód_±r
, 
size_t
 
nsize
)

395 
d¨øy_comm⁄_node
 *
node_±r
;

396 
size_t
 
‰ì_node_cou¡
;

398 i‡(
d¨øy_size
(
hód_±r
Ë> 
nsize
)

400 
‰ì_node_cou¡
 = 
hód_±r
->
node_cou¡
 - (
size_t
)
˚û
((
nsize
*1.0)/(hód_±r->
node_size
*1.0));

401 i‡(
nsize
 == 0)

403 
‰ì_node_cou¡
 --;

405 
d¨øy_exlock
(
hód_±r
);

406 ; 
‰ì_node_cou¡
 > 0; --free_node_count)

408 
node_±r
 = 
hód_±r
->
œ°_node_±r
;

409 
hód_±r
->
œ°_node_±r
 = 
node_±r
->
¥e_node
;

410 
hód_±r
->
œ°_node_±r
->
√xt_node
 = 
NULL
;

411 
hód_±r
->
node_cou¡
 --;

412 
hód_±r
->
ˇ∑côy
 -hód_±r->
node_size
;

413 
mem_‰ì
(
node_±r
);

415 
hód_±r
->
ˇche_node_subs¸ùt
 = 0;

416 
hód_±r
->
ˇche_node_±r
 = hód_±r->
fú°_node_±r
;

417 
hód_±r
->
ˇche_ôem_subs¸ùt
 = 0;

418 
hód_±r
->
ˇche_ôem_±r
 = &(hód_±r->
fú°_node_±r
->
ôem_¨øy
[0]);

419 
d¨øy_u∆ock
(
hód_±r
);

426 
ölöe
 

427 
d¨øy_˛ór
(
d¨øy_comm⁄_hód
 *
hód_±r
)

429 
d¨øy_comm⁄_node
 *
node_±r
;

431 
node_±r
 = 
hód_±r
->
œ°_node_±r
;

432 
node_±r
 !
hód_±r
->
fú°_node_±r
)

434 
d¨øy_comm⁄_node
 *
tmp
 = 
node_±r
->
¥e_node
;

435 
mem_‰ì
(
node_±r
);

436 
node_±r
 = 
tmp
;

438 
hód_±r
->
node_cou¡
 = 1;

439 
hód_±r
->
ˇ∑côy
 = hód_±r->
node_size
;

440 
hód_±r
->
£tsize
 = 0;

441 
hód_±r
->
œ°_node_±r
 = hód_±r->
fú°_node_±r
;

442 
hód_±r
->
ˇche_node_subs¸ùt
 = 0;

443 
hód_±r
->
ˇche_node_±r
 = hód_±r->
fú°_node_±r
;

444 
hód_±r
->
ˇche_ôem_subs¸ùt
 = 0;

445 
hód_±r
->
ˇche_ôem_±r
 = &(hód_±r->
fú°_node_±r
->
ôem_¨øy
[0]);

446 
hód_±r
->
fú°_node_±r
->
id
 = 0;

447 
hód_±r
->
fú°_node_±r
->
off£t
 = 0;

456 
ölöe
 
uöt32_t


457 
mö_ö_3
(
uöt32_t
 
a
, uöt32_à
b
, uöt32_à
c
)

459 
a
 = (◊ < 
b
) ?á : b);

460 
a
 = (◊ < 
c
) ?á : c);

462  
a
;

465 
ölöe
 
d¨øy_comm⁄_node
 *

466 
d¨øy_föd_node
(
d¨øy_comm⁄_hód
 *
hód_±r
, 
uöt32_t
 
¡h
)

468 
öt32_t
 
node_id
;

469 
uöt32_t
 
a
, 
b
, 
c
, 
g≠
;

470 
d¨øy_comm⁄_node
 *
node_±r
, *
ba£_±r
;

472 
node_id
 = 
¡h
 / 
hód_±r
->
node_size
;

474 i‡(
node_id
 =()
hód_±r
->
ˇche_node_subs¸ùt
)

476  
hód_±r
->
ˇche_node_±r
;

479 
a
 = 
node_id
;

480 
b
 = 
abs
(
node_id
 - ()
hód_±r
->
ˇche_node_subs¸ùt
);

481 
c
 = 
abs
(
node_id
 - (()
hód_±r
->
node_cou¡
-1));

482 
g≠
 = 
mö_ö_3
(
a
, 
b
, 
c
);

484 i‡(()
g≠
 =
node_id
)

485 
ba£_±r
 = 
hód_±r
->
fú°_node_±r
;

486 i‡(
g≠
 =
b
)

487 
ba£_±r
 = 
hód_±r
->
ˇche_node_±r
;

489 
ba£_±r
 = 
hód_±r
->
œ°_node_±r
;

491 
node_±r
 = 
ba£_±r
;

492 i‡(
node_id
 > ()
ba£_±r
->
id
)

495 (
g≠
>0Ë&& (
node_±r
!=
NULL
))

497 
node_±r
 =Çode_±r->
√xt_node
;

498 --
g≠
;

501 i‡(
node_id
 < ()
ba£_±r
->
id
)

504 (
g≠
>0Ë&& (
node_±r
!=
NULL
))

506 
node_±r
 =Çode_±r->
¥e_node
;

507 --
g≠
;

515 i‡(
node_±r
 !
NULL
)

517 
hód_±r
->
ˇche_node_±r
 = 
node_±r
;

518 
hód_±r
->
ˇche_node_subs¸ùt
 = 
node_id
;

521  
node_±r
;

524 
ölöe
 

525 
d¨øy_exãnd_node
(
d¨øy_comm⁄_hód
 *
hód_±r
, 
size_t
 
sizeof_node
)

527 
d¨øy_comm⁄_node
 *
œ°_node
, *
√w_node
;

529 
œ°_node
 = 
hód_±r
->
œ°_node_±r
;

530 
DEBUG_PUTS
("exãnd size: %zu\n", 
sizeof_node
);

531 
√w_node
 = (
d¨øy_comm⁄_node
 *)
mem_Æloc
(
sizeof_node
);

532 
bzîo
(
√w_node
, (
d¨øy_comm⁄_node
));

533 
hód_±r
->
œ°_node_±r
 = 
√w_node
;

534 
œ°_node
->
√xt_node
 = 
√w_node
;

535 
hód_±r
->
node_cou¡
++;

536 
hód_±r
->
ˇ∑côy
 +hód_±r->
node_size
;

537 
√w_node
->
¥e_node
 = 
œ°_node
;

538 
√w_node
->
√xt_node
 = 
NULL
;

539 
√w_node
->
id
 = 
œ°_node
->id + 1;

540 
√w_node
->
off£t
 = 
œ°_node
->off£à+ 
hód_±r
->
node_size
;

541 
hód_±r
->
ˇche_node_subs¸ùt
 = 
√w_node
->
id
;

542 
hód_±r
->
ˇche_node_±r
 = 
√w_node
;

547 
ölöe
 

548 
di•œy_d¨øy
(
d¨øy_comm⁄_hód
 *
hód_±r
)

550 
d¨øy_comm⁄_node
 *
node_±r
;

551 
puts
("================================================================================");

552 
puts
("\t----- head info -----");

553 
¥ötf
("\tnode_count: %d\tcapacity: %d\tnode_size: %d\tsetsize: %d\n",

554 
hód_±r
->
node_cou¡
, hód_±r->
ˇ∑côy
, hód_±r->
node_size
, hód_±r->
£tsize
);

555 
¥ötf
("\tˇche_node_subs¸ùt: %d\tˇche_ôem_subs¸ùt: %d\n", 
hód_±r
->
ˇche_node_subs¸ùt
, hód_±r->
ˇche_ôem_subs¸ùt
);

556 
¥ötf
("\tfirst_node_ptr: %p\tlast_node_ptr: %p\tcache_node_ptr: %p\tcache_item_ptr: %p\n",

557 
hód_±r
->
fú°_node_±r
, hód_±r->
œ°_node_±r
, hód_±r->
ˇche_node_±r
, hód_±r->
ˇche_ôem_±r
);

558 
puts
("\t-----Çode info -----");

559 
node_±r
 = 
hód_±r
->
fú°_node_±r
;

560 
node_±r
 !
NULL
)

562 
¥ötf
("\tid: %u\toffset: %u\tthis: %p\tpre_node: %p\tnext_node: %p\n",

563 
node_±r
->
id
,Çode_±r->
off£t
,Çode_±r,Çode_±r->
¥e_node
,Çode_±r->
√xt_node
);

564 
node_±r
 =Çode_±r->
√xt_node
;

566 
puts
("================================================================================");

571 #ifde‡
__˝lu•lus


	@libs/include/rock/jhash.h

11 #i‚de‡
_JHASH_H_


12 
	#_JHASH_H_


	)

14 
	~<°döt.h
>

24 
ölöe
 
uöt32_t
 
	$jhash
(c⁄° *
key
, 
size_t
 
key_Àn
)

27 
uöt32_t
 
hash
 = 0;

28 
size_t
 
i
;

29 c⁄° *
k
 = 
key
;

31 
i
 = 0; i < 
key_Àn
; i++)

33 
hash
 +
k
[
i
];

34 
hash
 += (hash << 10);

35 
hash
 ^= (hash >> 6);

37 
hash
 += (hash << 3);

38 
hash
 ^= (hash >> 11);

39 
hash
 += (hash << 15);

41  
hash
;

42 
	}
}

	@libs/include/rock/json.h

11 #i‚de‡
_JSON_H_


12 
	#_JSON_H_


	)

14 
	~<°dboﬁ.h
>

15 
	~"cjs⁄.h
"

17 #ifde‡
__˝lu•lus


21 
cJSON
 
	tjs⁄_°ru˘
;

22 
cJSON_Hooks
 
	tjs⁄_hooks
;

29 
js⁄_öô_hooks
(
js⁄_hooks
 * 
hooks
);

38 
js⁄_°ru˘
 *
js⁄_∑r£
(c⁄° *
vÆue
);

47 *
js⁄_¥öt
(
js⁄_°ru˘
 * 
ôem
);

56 *
js⁄_¥öt_unf‹m©ãd
(
js⁄_°ru˘
 * 
ôem
);

65 
js⁄_dñëe
(
js⁄_°ru˘
 * 
c
);

74 
js⁄_gë_¨øy_size
(
js⁄_°ru˘
 * 
¨øy
);

84 
js⁄_°ru˘
 *
js⁄_gë_¨øy_ôem
(js⁄_°ru˘ * 
¨øy
, 
ôem
);

94 
js⁄_°ru˘
 *
js⁄_gë_obje˘_ôem
(js⁄_°ru˘ * 
obje˘
,

95 c⁄° *
°rög
);

105 
js⁄_gë_nuŒ_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

106 c⁄° *
°rög
);

116 
js⁄_gë_åue_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

117 c⁄° *
°rög
);

127 
js⁄_gë_Ál£_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

128 c⁄° *
°rög
);

139 
js⁄_gë_öt_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

140 c⁄° *
°rög
, *
ªtVÆ
);

150 
js⁄_gë_doubÀ_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

151 c⁄° *
°rög
, *
ªtVÆ
);

162 
js⁄_gë_°rög_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

163 c⁄° *
°rög
, **
ªtVÆ
);

173 
js⁄_gë_«me_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
, **
ªtVÆ
);

182 
js⁄_gë_nuŒ_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
);

191 
js⁄_gë_åue_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
);

200 
js⁄_gë_Ál£_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
);

210 
js⁄_gë_öt_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
, *
ªtVÆ
);

220 
js⁄_gë_doubÀ_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
, *
ªtVÆ
);

230 
js⁄_gë_°rög_‰om_ôem
(
js⁄_°ru˘
 * 
ôem
, **
ªtVÆ
);

237 c⁄° *
js⁄_gë_îr‹_±r
();

244 
js⁄_°ru˘
 *
js⁄_¸óã_nuŒ
();

251 
js⁄_°ru˘
 *
js⁄_¸óã_åue
();

258 
js⁄_°ru˘
 *
js⁄_¸óã_Ál£
();

265 
js⁄_°ru˘
 *
js⁄_¸óã_boﬁ
(
b
);

272 
js⁄_°ru˘
 *
js⁄_¸óã_öt
(
b
);

279 
js⁄_°ru˘
 *
js⁄_¸óã_doubÀ
(
b
);

286 
js⁄_°ru˘
 *
js⁄_¸óã_°rög
(c⁄° *
°rög
);

293 
js⁄_°ru˘
 *
js⁄_¸óã_¨øy
();

300 
js⁄_°ru˘
 *
js⁄_¸óã_obje˘
();

312 
js⁄_°ru˘
 *
js⁄_¸óã_öt_¨øy
(c⁄° *
numbîs
, 
cou¡
);

322 
js⁄_°ru˘
 *
js⁄_¸óã_Êﬂt_¨øy
(c⁄° *
numbîs
,

323 
cou¡
);

333 
js⁄_°ru˘
 *
js⁄_¸óã_doubÀ_¨øy
(c⁄° *
numbîs
,

334 
cou¡
);

343 
js⁄_°ru˘
 *
js⁄_¸óã_°rög_¨øy
(c⁄° **
°rögs
,

344 
cou¡
);

355 
js⁄_add_ôem_to_¨øy
(
js⁄_°ru˘
 * 
¨øy
, js⁄_°ru˘ * 
ôem
);

366 
js⁄_add_ôem_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

367 c⁄° *
°rög
, 
js⁄_°ru˘
 * 
ôem
);

377 
js⁄_add_ôem_ª„ªn˚_to_¨øy
(
js⁄_°ru˘
 * 
¨øy
,

378 
js⁄_°ru˘
 * 
ôem
);

379 
js⁄_add_ôem_ª„ªn˚_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

380 c⁄° *
°rög
,

381 
js⁄_°ru˘
 * 
ôem
);

391 
js⁄_°ru˘
 *
js⁄_dëach_ôem_‰om_¨øy
(js⁄_°ru˘ * 
¨øy
,

392 
which
);

393 
js⁄_dñëe_ôem_‰om_¨øy
(
js⁄_°ru˘
 * 
¨øy
, 
which
);

394 
js⁄_°ru˘
 *
js⁄_dëach_ôem_‰om_obje˘
(js⁄_°ru˘ * 
obje˘
,

395 c⁄° *
°rög
);

396 
js⁄_dñëe_ôem_‰om_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

397 c⁄° *
°rög
);

408 
js⁄_ª∂a˚_ôem_ö_¨øy
(
js⁄_°ru˘
 * 
¨øy
, 
which
,

409 
js⁄_°ru˘
 * 
√wôem
);

410 
js⁄_ª∂a˚_ôem_ö_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

411 c⁄° *
°rög
,

412 
js⁄_°ru˘
 * 
√wôem
);

427 
js⁄_°ru˘
 *
js⁄_du∂iˇã
(js⁄_°ru˘ * 
ôem
, 
ªcur£
);

438 
js⁄_°ru˘
 *
js⁄_∑r£_wôh_›ts
(c⁄° *
vÆue
,

439 c⁄° **
ªtu∫_∑r£_íd
,

440 
ªquúe_nuŒ_ãrmö©ed
);

441 
js⁄_möify
(*
js⁄
);

451 
js⁄_add_nuŒ_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
, c⁄° *
«me
);

452 
js⁄_add_åue_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
, c⁄° *
«me
);

453 
js⁄_add_Ál£_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

454 c⁄° *
«me
);

455 
js⁄_add_boﬁ_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
, c⁄° *
«me
,

456 
boﬁ
 
b
);

457 
js⁄_add_öt_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
, c⁄° *
«me
,

458 
n
);

459 
js⁄_add_doubÀ_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

460 c⁄° *
«me
, 
d
);

461 
js⁄_add_°rög_to_obje˘
(
js⁄_°ru˘
 * 
obje˘
,

462 c⁄° *
«me
, c⁄° *
s
);

464 #ifde‡
__˝lu•lus


	@libs/include/rock/log.h

10 #i‚de‡
_LOG_H_


11 
	#_LOG_H_


	)

14 #ifde‡
__˝lu•lus


19 
	#LOG_LEVEL_DEBUG
 0x1

	)

20 
	#LOG_LEVEL_WARN
 0x2

	)

21 
	#LOG_LEVEL_ERROR
 0x4

	)

22 
	#LOG_LEVEL_NOTICE
 0x8

	)

24 
log_fûe
 
	tlog_fûe_t
;

26 
log_fûe_t
 *
gë_globÆ_log
();

28 
	#log_debug
(
fmt
, ...Ë
	`comm⁄_log_mesg
(
	`gë_globÆ_log
(), 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_DEBUG
, fmt, ##
__VA_ARGS__
)

	)

29 
	#log_nŸi˚
(
fmt
, ...Ë
	`comm⁄_log_mesg
(
	`gë_globÆ_log
(), 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_NOTICE
, fmt, ##
__VA_ARGS__
)

	)

30 
	#log_w¨n
(
fmt
, ...Ë
	`comm⁄_log_mesg
(
	`gë_globÆ_log
(), 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_WARN
, fmt, ##
__VA_ARGS__
)

	)

31 
	#log_îr‹
(
fmt
, ...Ë
	`comm⁄_log_mesg
(
	`gë_globÆ_log
(), 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_ERROR
, fmt, ##
__VA_ARGS__
)

	)

32 
	#log_˛o£
(Ë
	`comm⁄_log_˛o£
(
	`gë_globÆ_log
())

	)

34 
	#u£r_log_›í
(
log_∑th
Ë
	`comm⁄_log_›í
÷og_∑th)

	)

35 
	#u£r_log_debug
(
p_log_fûe
, 
fmt
, ...Ë
	`comm⁄_log_mesg
’_log_fûe, 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_DEBUG
, fmt, ##
__VA_ARGS__
)

	)

36 
	#u£r_log_nŸi˚
(
p_log_fûe
, 
fmt
, ...Ë
	`comm⁄_log_mesg
’_log_fûe, 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_NOTICE
, fmt, ##
__VA_ARGS__
)

	)

37 
	#u£r_log_w¨n
(
p_log_fûe
, 
fmt
, ...Ë
	`comm⁄_log_mesg
’_log_fûe, 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_WARN
, fmt, ##
__VA_ARGS__
)

	)

38 
	#u£r_log_îr‹
(
p_log_fûe
, 
fmt
, ...Ë
	`comm⁄_log_mesg
’_log_fûe, 
__FILE__
, 
__LINE__
, 
LOG_LEVEL_ERROR
, fmt, ##
__VA_ARGS__
)

	)

39 
	#u£r_log_˛o£
(
p_log_fûe
Ë
	`comm⁄_log_˛o£
’_log_fûe)

	)

41 
log_fûe_t
 *
comm⁄_log_›í
(c⁄° *
log_∑th
);

42 
log_›í
(c⁄° *
log_∑th
);

43 
comm⁄_log_mesg
(
log_fûe_t
 *
fûe
, c⁄° *
codefûe
, 
löíum
, 
uöt32_t
 
mesg_Àvñ
, c⁄° *
fmt
, ...Ë
__©åibuã__
 ((
f‹m©
 (
¥ötf
, 5, 6)));

44 
comm⁄_log_˛o£
(
log_fûe_t
 *
fûe
);

48 #ifde‡
__˝lu•lus


	@libs/include/rock/md5.h

11 #i‚de‡
_MD5_H_


12 
	#_MD5_H_


	)

14 
	~<°döt.h
>

21 
	mtŸÆ
[2];

22 
	m°©e
[4];

23 
	mbuf„r
[64];

25 
	mùad
[64];

26 
	m›ad
[64];

27 }
	tmd5_c⁄ãxt
;

29 #ifde‡
__˝lu•lus


38 
md5_°¨ts
(
md5_c⁄ãxt
 *
˘x
);

47 
md5_upd©e
(
md5_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
uöt32_t
 
ûí
);

55 
md5_föish
(
md5_c⁄ãxt
 *
˘x
, 
ouçut
[16]);

64 
md5_d©a
(c⁄° *
öput
, 
uöt32_t
 
ûí
, 
ouçut
[16]);

75 
uöt32_t
 
md5_fûe
(c⁄° *
∑th
, 
ouçut
[16]);

84 
md5_hmac_°¨ts
(
md5_c⁄ãxt
 *
˘x
, c⁄° *
key
, 
uöt32_t
 
keyÀn
);

93 
md5_hmac_upd©e
(
md5_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
uöt32_t
 
ûí
);

101 
md5_hmac_föish
(
md5_c⁄ãxt
 *
˘x
, 
ouçut
[16]);

112 
md5_hmac_d©a
(c⁄° *
key
, 
uöt32_t
 
keyÀn
,

113 c⁄° *
öput
, 
uöt32_t
 
ûí
,

114 
ouçut
[16]);

116 #ifde‡
__˝lu•lus


	@libs/include/rock/queue.h

18 #i‚de‡
_BSDQUEUE_H_


19 
	#_BSDQUEUE_H_


	)

21 
	~<f˙é.h
>

22 
	~<uni°d.h
>

23 
	~<sys/cdefs.h
>

24 
	~<sys/ty≥s.h
>

25 
	~<sys/uio.h
>

26 
	~<sys/°©.h
>

27 
	~<±hªad.h
>

29 #i‚de‡
__off£t_of


30 
	#__off£t_of
(
ty≥
, 
fõld
Ë((
size_t
)(&(—y≥ *)0)->fõld))

	)

33 #i‚de‡
mem_ˇŒoc


34 #ifde‡
SLAB_CALLOC


35 
	#mem_ˇŒoc
 
¶ab_ˇŒoc


	)

37 
	#mem_ˇŒoc
 
mÆloc


	)

41 #i‚de‡
mem_Æloc


42 #ifde‡
SLAB_ALLOC


43 
	#mem_Æloc
 
¶ab_Æloc


	)

45 
	#mem_Æloc
 
mÆloc


	)

49 #i‚de‡
mem_‰ì


50 #ifde‡
SLAB_FREE


51 
	#mem_‰ì
 
¶ab_‰ì


	)

53 
	#mem_‰ì
 
‰ì


	)

60 
	#li°_hód_«me
(
«me
Ë«me##
_Hód_S


	)

61 
	#li°_ôem_«me
(
«me
Ë«me##
_Iãm_S


	)

63 
	#li°_hód_±r
(
li°«me
Ë
	`li°_hód_«me
÷i°«meË*

	)

64 
	#li°_ôem_±r
(
li°«me
Ë
	`li°_ôem_«me
÷i°«meË*

	)

65 
	#li°_√xt_±r
(
li°«me
Ë
	`STAILQ_ENTRY
(
	`li°_ôem_«me
÷i°«me)Ë
LINK_NEXT_PTR


	)

67 
	#li°_def
(
li°«me
) \

68 
	`STAILQ_HEAD
(
	`li°_hód_«me
(
li°«me
), 
	`li°_ôem_«me
÷i°«me));

	)

70 
	#li°_√w
(
li°«me
, 
hód_±r
) \

71 
	`li°_hód_«me
(
li°«me
Ë*
hód_±r
 = 
	`mem_ˇŒoc
((list_head_name(listname))); \

72 
	`STAILQ_INIT
(
hód_±r
)

	)

74 
	#li°_ôem_√w
(
li°«me
, 
ôem_±r
) \

75 
	`li°_ôem_«me
(
li°«me
Ë*
ôem_±r
 = 
	`mem_Æloc
((li°_ôem_«me÷i°«me)));

	)

77 
	#li°_ôem_öô
(
li°«me
, 
ôem_±r
) \

78 
ôem_±r
 = 
	`mem_Æloc
((
	`li°_ôem_«me
(
li°«me
)));

	)

80 
	#li°_ôem_de°‹y
(
ôem_±r
) do{ \

81 if(
NULL
 !
ôem_±r
) { \

82 
	`mem_‰ì
(
ôem_±r
); \

84 }0)

	)

86 
	#li°_lock
(
hód_±r
Ëdÿ{ 
	`±hªad_muãx_lock
(&((hód_±r)->
lock
)); } 0)

	)

87 
	#li°_u∆ock
(
hód_±r
Ëdÿ{ 
	`±hªad_muãx_u∆ock
(&((hód_±r)->
lock
)); } 0)

	)

89 
	#li°_size
(
hód_±r
Ë((*(hód_±r)).
size
)

	)

91 
	#li°_push
(
hód_±r
, 
ôem_±r
Ë
	`STAILQ_INSERT_TAIL
(hód_±r, iãm_±r, 
LINK_NEXT_PTR
)

	)

92 
	#li°_unshi·
(
hód_±r
, 
ôem_±r
Ë
	`STAILQ_INSERT_HEAD
(hód_±r, iãm_±r, 
LINK_NEXT_PTR
)

	)

93 
	#li°_ö£π
(
hód_±r
, 
pos_±r
, 
ôem_±r
Ë
	`STAILQ_INSERT_AFTER
(hód_±r,Öos_±r, iãm_±r, 
LINK_NEXT_PTR
)

	)

94 
	#li°_shi·
(
hód_±r
, 
ôem_±r
) do { \

95 
ôem_±r
 = 
	`li°_fú°
(
hód_±r
); \

96 
	`li°_ªmove_hód
(
hód_±r
); \

97 } 0)

	)

99 
	#li°_p›
(
hód_±r
, 
ôem_±r
) do { \

100 
ôem_±r
 = 
	`li°_œ°
(
hód_±r
); \

101 
	`li°_ªmove
(
hód_±r
, 
ôem_±r
); \

102 } 0)

	)

104 
	#li°_fú°
(
hód_±r
Ë
	`STAILQ_FIRST
(hód_±r)

	)

105 
	#li°_œ°
(
hód_±r
Ë
	`STAILQ_LAST
(hód_±r, 
LINK_NEXT_PTR
)

	)

107 
	#li°_f‹óch
(
hód_±r
, 
ôem_±r
Ë
	`STAILQ_FOREACH
(ôem_±r, hód_±r, 
LINK_NEXT_PTR
)

	)

108 
	#li°_f‹óch_ß„
(
hód_±r
, 
ôem_±r
, 
ãmp_±r
Ë
	`STAILQ_FOREACH_SAFE
(ôem_±r, hód_±r, 
LINK_NEXT_PTR
,Åemp_±r)

	)

109 
	#li°_√xt
(
ôem_±r
Ë
	`STAILQ_NEXT
(ôem_±r, 
LINK_NEXT_PTR
)

	)

110 
	#li°_addr
(
hód_±r
, 
n
, 
ôem_±r
) do { \

111 
m
 = ()(
n
); \

112 i‡(
m
 >()
	`li°_size
(
hód_±r
)) { \

113 
ôem_±r
 = 
NULL
; ; \

115 
ôem_±r
 = 
	`li°_fú°
(
hód_±r
); \

116 --
m
 >= 0) { \

117 
ôem_±r
 = 
	`li°_√xt
(item_ptr); \

119 } 0)

	)

121 
	#li°_em±y
(
hód_±r
Ë
	`STAILQ_EMPTY
(hód_±r)

	)

123 
	#li°_ˇt
(
hód1
, 
hód2
Ë
	`STAILQ_CONCAT
(hód1, hód2)

	)

125 
	#li°_ªmove
(
hód_±r
, 
ôem_±r
Ë
	`STAILQ_REMOVE
(hód_±r, iãm_±r, 
LINK_NEXT_PTR
)

	)

126 
	#li°_ªmove_hód
(
hód_±r
Ë
	`STAILQ_REMOVE_HEAD
(hód_±r, 
LINK_NEXT_PTR
)

	)

128 
	#li°_dñëe
(
hód_±r
, 
ôem_±r
) do { \

129 
	`li°_ªmove
(
hód_±r
, 
ôem_±r
); \

130 
	`mem_‰ì
(
ôem_±r
); \

131 } 0)

	)

133 
	#li°_dñëe_hód
(
hód_±r
) do{ \

134 *
fú°_±r
 = (*)
	`li°_fú°
(
hód_±r
); \

135 
	`li°_ªmove_hód
(
hód_±r
); \

136 
	`mem_‰ì
(
fú°_±r
); \

137 } 0)

	)

139 
	#li°_de°roy
(
hód_±r
) do { \

140 
	`li°_fú°
(
hód_±r
Ë!
NULL
) { \

141 
	`li°_dñëe_hód
(
hód_±r
); \

143 
	`±hªad_muãx_de°roy
(&((
hód_±r
)->
lock
)); \

144 
	`mem_‰ì
(
hód_±r
); \

145 } 0)

	)

147 
	#li°_˛ór
(
hód_±r
) do { \

148 
	`li°_fú°
(
hód_±r
Ë!
NULL
) { \

149 
	`li°_dñëe_hód
(
hód_±r
); \

151 } 0)

	)

153 
	#queue_hód_«me
(
li°«me
) \

154 
	`li°_hód_«me
(
li°«me
)

	)

156 
	#queue_ôem_«me
(
li°«me
) \

157 
	`li°_ôem_«me
(
li°«me
)

	)

159 
	#queue_hód_±r
(
li°«me
) \

160 
	`li°_hód_±r
(
li°«me
)

	)

162 
	#queue_ôem_±r
(
li°«me
) \

163 
	`li°_ôem_±r
(
li°«me
)

	)

165 
	#queue_√xt_±r
(
li°«me
) \

166 
	`li°_√xt_±r
(
li°«me
)

	)

168 
	#queue_def
(
li°«me
) \

169 
	`li°_def
(
li°«me
)

	)

171 
	#queue_√w
(
li°«me
, 
hód_±r
) \

172 
	`li°_√w
(
li°«me
, 
hód_±r
)

	)

174 
	#queue_ôem_√w
(
li°«me
, 
ôem_±r
) \

175 
	`li°_ôem_√w
(
li°«me
, 
ôem_±r
)

	)

177 
	#queue_ôem_de°roy
(
ôem_±r
) \

178 
	`li°_ôem_de°‹y
(
ôem_±r
)

	)

180 
	#queue_lock
(
hód_±r
) \

181 
	`li°_lock
(
hód_±r
)

	)

183 
	#queue_u∆ock
(
hód_±r
) \

184 
	`li°_u∆ock
(
hód_±r
)

	)

186 
	#queue_em±y
(
hód_±r
) \

187 
	`li°_em±y
(
hód_±r
)

	)

189 
	#queue_size
(
hód_±r
) \

190 
	`li°_size
(
hód_±r
)

	)

192 
	#queue_‰⁄t
(
hód_±r
) \

193 
	`li°_fú°
(
hód_±r
)

	)

195 
	#queue_back
(
hód_±r
) \

196 
	`li°_œ°
(
hód_±r
)

	)

198 
	#queue_push
(
hód_±r
, 
ôem_±r
) \

199 
	`li°_push
(
hód_±r
, 
ôem_±r
)

	)

201 
	#queue_p›
(
hód_±r
, 
ôem_±r
) \

202 
	`li°_shi·
(
hód_±r
, 
ôem_±r
)

	)

204 
	#queue_de°roy
(
ôem_±r
) \

205 
	`li°_de°roy
(
ôem_±r
)

	)

212 
	#STAILQ_HEAD
(
«me
, 
ty≥
) \

213 
	s«me
 { \

214 
ty≥
 *
°qh_fú°
; \

215 
ty≥
 **
°qh_œ°
; \

216 
±hªad_muãx_t
 
lock
; \

217 
size
; \

218 }

	)

220 
	#STAILQ_HEAD_INITIALIZER
(
hód
) \

221 { 
NULL
, &(
hód
).
°qh_fú°
, 
PTHREAD_MUTEX_INITIALIZER
, 0,}

	)

223 
	#STAILQ_ENTRY
(
ty≥
) \

225 
ty≥
 *
°qe_√xt
; \

226 }

	)

231 
	#STAILQ_CONCAT
(
hód1
, 
hód2
) do { \

232 i‡(!
	`STAILQ_EMPTY
((
hód2
))) { \

233 *(
hód1
)->
°qh_œ°
 = (
hód2
)->
°qh_fú°
; \

234 (
hód1
)->
°qh_œ°
 = (
hód2
)->stqh_last; \

235 (
hód1
)->
size
 +(
hód2
)->size; \

236 
	`STAILQ_INIT
((
hód2
)); \

238 } 0)

	)

240 
	#STAILQ_EMPTY
(
hód
Ë((hód)->
°qh_fú°
 =
NULL
)

	)

242 
	#STAILQ_FIRST
(
hód
Ë((hód)->
°qh_fú°
)

	)

244 
	#STAILQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

245 (
v¨
Ë
	`STAILQ_FIRST
((
hód
)); \

246 (
v¨
); \

247 (
v¨
Ë
	`STAILQ_NEXT
((v¨), 
fõld
))

	)

250 
	#STAILQ_FOREACH_SAFE
(
v¨
, 
hód
, 
fõld
, 
tv¨
) \

251 (
v¨
Ë
	`STAILQ_FIRST
((
hód
)); \

252 (
v¨
Ë&& ((
tv¨
Ë
	`STAILQ_NEXT
((v¨), 
fõld
), 1); \

253 (
v¨
Ë(
tv¨
))

	)

255 
	#STAILQ_INIT
(
hód
) do { \

256 
	`STAILQ_FIRST
((
hód
)Ë
NULL
; \

257 (
hód
)->
°qh_œ°
 = &
	`STAILQ_FIRST
((head)); \

258 
	`±hªad_muãx_öô
(&(
hód
)->
lock
, 
NULL
); \

259 (
hód
)->
size
 = 0; \

260 } 0)

	)

262 
	#STAILQ_INSERT_AFTER
(
hód
, 
tqñm
, 
ñm
, 
fõld
) do { \

263 i‡((
	`STAILQ_NEXT
((
ñm
), 
fõld
ËSTAILQ_NEXT((
tqñm
), fõld)Ë=
NULL
)\

264 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

265 
	`STAILQ_NEXT
((
tqñm
), 
fõld
Ë(
ñm
); \

266 (
hód
)->
size
 ++; \

267 } 0)

	)

269 
	#STAILQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

270 i‡((
	`STAILQ_NEXT
((
ñm
), 
fõld
Ë
	`STAILQ_FIRST
((
hód
))Ë=
NULL
) \

271 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

272 
	`STAILQ_FIRST
((
hód
)Ë(
ñm
); \

273 (
hód
)->
size
 ++; \

274 } 0)

	)

276 
	#STAILQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

277 
	`STAILQ_NEXT
((
ñm
), 
fõld
Ë
NULL
; \

278 *(
hód
)->
°qh_œ°
 = (
ñm
); \

279 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

280 (
hód
)->
size
 ++; \

281 } 0)

	)

283 
	#STAILQ_LAST
(
hód
, 
fõld
) \

284 (
	`STAILQ_EMPTY
((
hód
)) ? \

285 
NULL
 : \

286 ((
	`__ty≥of__
(
hód
->
°qh_fú°
)) \

287 ((*)((
hód
)->
°qh_œ°
Ë- 
	`__off£t_of
(
	`__ty≥of__
(*(hód->
°qh_fú°
)), 
fõld
))))

	)

289 
	#STAILQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
°qe_√xt
)

	)

291 
	#STAILQ_REMOVE
(
hód
, 
ñm
, 
fõld
) do { \

292 i‡(
	`STAILQ_FIRST
((
hód
)Ë=(
ñm
)) { \

293 
	`STAILQ_REMOVE_HEAD
((
hód
), 
fõld
); \

296 
	`__ty≥of__
(
hód
->
°qh_fú°
Ë
cuªlm
 = 
	`STAILQ_FIRST
((head)); \

297 
	`STAILQ_NEXT
(
cuªlm
, 
fõld
Ë!(
ñm
)) \

298 
cuªlm
 = 
	`STAILQ_NEXT
(cuªlm, 
fõld
); \

299 i‡((
	`STAILQ_NEXT
(
cuªlm
, 
fõld
) = \

300 
	`STAILQ_NEXT
(STAILQ_NEXT(
cuªlm
, 
fõld
), fõld)Ë=
NULL
)\

301 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
cuªlm
), 
fõld
);\

302 (
hód
)->
size
 --; \

304 } 0)

	)

306 
	#STAILQ_REMOVE_HEAD
(
hód
, 
fõld
) do { \

307 i‡((
	`STAILQ_FIRST
((
hód
)) = \

308 
	`STAILQ_NEXT
(
	`STAILQ_FIRST
((
hód
)), 
fõld
)Ë=
NULL
) \

309 (
hód
)->
°qh_œ°
 = &
	`STAILQ_FIRST
((head)); \

310 (
hód
)->
size
 --; \

311 } 0)

	)

313 
	#STAILQ_REMOVE_HEAD_UNTIL
(
hód
, 
ñm
, 
fõld
) do { \

314 i‡((
	`STAILQ_FIRST
((
hód
)Ë
	`STAILQ_NEXT
((
ñm
), 
fõld
)Ë=
NULL
) \

315 (
hód
)->
°qh_œ°
 = &
	`STAILQ_FIRST
((head)); \

316 } 0)

	)

	@libs/include/rock/rock_hash.h

22 #i‚de‡
_ROCK_HASH_H_


23 
	#_ROCK_HASH_H_


	)

25 
	~"uthash.h
"

44 
	#hash_add_öt
(
hód
, 
keyfõld_«me
, 
ôem_±r
) \

45 
	`HASH_ADD_INT
(
hód
, 
keyfõld_«me
, 
ôem_±r
)

	)

47 
	#hash_ª∂a˚_öt
(
hód
, 
keyfõld_«me
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
) \

48 
	`HASH_REPLACE_INT
(
hód
, 
keyfõld_«me
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
)

	)

50 
	#hash_föd_öt
(
hód
, 
key_±r
, 
ôem_±r
) \

51 
	`HASH_FIND_INT
(
hód
, 
key_±r
, 
ôem_±r
)

	)

61 
	#hash_add_°r
(
hód
, 
keyfõld_«me
, 
ôem_±r
) \

62 
	`HASH_ADD_STR
(
hód
, 
keyfõld_«me
, 
ôem_±r
)

	)

64 
	#hash_ª∂a˚_°r
(
hód
, 
keyfõld_«me
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
) \

65 
	`HASH_REPLACE_STR
(
hód
,
keyfõld_«me
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
)

	)

67 
	#hash_föd_°r
(
hód
, 
key_±r
, 
ôem_±r
) \

68 
	`HASH_FIND_STR
(
hód
, 
key_±r
, 
ôem_±r
)

	)

77 
	#hash_add_±r
(
hód
, 
keyfõld_«me
, 
ôem_±r
) \

78 
	`HASH_ADD_PTR
(
hód
, 
keyfõld_«me
, 
ôem_±r
)

	)

80 
	#hash_ª∂a˚_±r
(
hód
, 
keyfõld_«me
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
) \

81 
	`HASH_REPLACE_PTR
(
hód
, 
keyfõld_«me
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
)

	)

83 
	#hash_föd_±r
(
hód
, 
key_±r
, 
ôem_±r
) \

84 
	`HASH_FIND_PTR
(
hód
, 
key_±r
, 
ôem_±r
)

	)

86 
	#hash_dñ
(
hód
, 
ôem_±r
) \

87 
	`HASH_DEL
(
hód
, 
ôem_±r
)

	)

89 
	#hash_s‹t
(
hód
, 
cmp
) \

90 
	`HASH_SORT
(
hód
, 
cmp
)

	)

92 
	#hash_cou¡
(
hód
) \

93 
	`HASH_COUNT
(
hód
)

	)

104 
	#hash_add
(
hh_«me
, 
hód
, 
keyfõld_«me
, 
key_Àn
, 
ôem_±r
) \

105 
	`HASH_ADD
(
hh_«me
, 
hód
, 
keyfõld_«me
, 
key_Àn
, 
ôem_±r
)

	)

114 
	#hash_add_key±r
(
hh_«me
, 
hód
, 
key_±r
, 
key_Àn
, 
ôem_±r
) \

115 
	`HASH_ADD_KEYPTR
(
hh_«me
, 
hód
, 
key_±r
, 
key_Àn
, 
ôem_±r
)

	)

117 
	#hash_ª∂a˚
(
hh_«me
, 
hód
, 
keyfõld_«me
, 
key_Àn
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
) \

118 
	`HASH_REPLACE
(
hh_«me
, 
hód
, 
keyfõld_«me
, 
key_Àn
, 
ôem_±r
, 
ª∂a˚d_ôem_±r
)

	)

120 
	#hash_föd
(
hh_«me
, 
hód
, 
key_±r
, 
key_Àn
, 
ôem_±r
) \

121 
	`HASH_FIND
(
hh_«me
, 
hód
, 
key_±r
, 
key_Àn
, 
ôem_±r
)

	)

123 
	#hash_dñëe
(
hh_«me
, 
hód
, 
ôem_±r
) \

124 
	`HASH_DELETE
(
hh_«me
, 
hód
, 
ôem_±r
)

	)

126 
	#hash_§t
(
hh_«me
, 
hód
, 
cmp
) \

127 
	`HASH_SRT
(
hh_«me
, 
hód
, 
cmp
)

	)

129 
	#hash_˙t
(
hh_«me
, 
hód
) \

130 
	`HASH_CNT
(
hh_«me
, 
hód
)

	)

132 
	#hash_˛ór
(
hh_«me
, 
hód
) \

133 
	`HASH_CLEAR
(
hh_«me
, 
hód
)

	)

135 
	#hash_£À˘
(
d°_hh_«me
, 
d°_hód
, 
§c_hh_«me
, 
§c_hód
, 
c⁄dôi⁄
) \

136 
	`HASH_SELECT
(
d°_hh_«me
, 
d°_hód
, 
§c_hh_«me
, 
§c_hód
, 
c⁄dôi⁄
)

	)

138 
	#hash_ôî
(
hh_«me
, 
hód
, 
ôem_±r
, 
tmp_ôem_±r
) \

139 
	`HASH_ITER
(
hh_«me
, 
hód
, 
ôem_±r
, 
tmp_ôem_±r
)

	)

141 
	#hash_ovîhód
(
hh_«me
, 
hód
) \

142 
	`HASH_OVERHEAD
(
hh_«me
, 
hód
)

	)

	@libs/include/rock/sha1.h

10 #i‚de‡
_SHA1_H_


11 
	#_SHA1_H_


	)

13 
	~<°döt.h
>

14 
uöt32_t
 
	tuöt32
;

21 
	mtŸÆ
[2];

22 
	m°©e
[5];

23 
	mbuf„r
[64];

25 
	mùad
[64];

26 
	m›ad
[64];

27 } 
	tsha1_c⁄ãxt
;

29 #ifde‡
__˝lu•lus


38 
sha1_°¨ts
(
sha1_c⁄ãxt
 *
˘x
);

47 
sha1_upd©e
(
sha1_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
uöt32
 
ûí
);

55 
sha1_föish
(
sha1_c⁄ãxt
 *
˘x
, 
ouçut
[20]);

64 
sha1_d©a
(c⁄° *
öput
, 
uöt32
 
ûí
, 
ouçut
[20]);

75 
uöt32
 
sha1_fûe
(c⁄° *
∑th
, 
ouçut
[20]);

84 
sha1_hmac_°¨ts
(
sha1_c⁄ãxt
 *
˘x
, c⁄° *
key
, 
uöt32
 
keyÀn
);

93 
sha1_hmac_upd©e
(
sha1_c⁄ãxt
 *
˘x
, c⁄° *
öput
, 
uöt32
 
ûí
);

101 
sha1_hmac_föish
(
sha1_c⁄ãxt
 *
˘x
, 
ouçut
[20]);

112 
sha1_hmac_d©a
(c⁄° *
key
, 
uöt32
 
keyÀn
,

113 c⁄° *
öput
, 
uöt32
 
ûí
,

114 
ouçut
[20]);

116 #ifde‡
__˝lu•lus


	@libs/include/rock/slab.h

11 #i‚de‡
_SLAB_H_


12 
	#_SLAB_H_


	)

14 
	~<sys/sig«l.h
>

15 
	~<sys/ªsour˚.h
>

16 
	~<î∫o.h
>

17 
	~<°dlib.h
>

18 
	~<°dio.h
>

19 
	~<as£π.h
>

20 
	~<°döt.h
>

21 
	~<°rög.h
>

22 
	~<±hªad.h
>

23 
	~<uni°d.h
>

24 
	~<°dboﬁ.h
>

25 
	~<limôs.h
>

27 #ifde‡
__˝lu•lus


32 
	#POWER_SMALLEST
 1

	)

33 
	#POWER_LARGEST
 200

	)

34 
	#POWER_BLOCK
 (1024*1024*4)

	)

35 
	#CHUNK_ALIGN_BYTES
 ((*))

	)

36 
	#TINY_SIZE
 16

	)

38 #ifde‡
TESTMODE


39 
	#NEED_DEBUG
 1

	)

42 #ifde‡
NEED_DEBUG


43 
	#NEED_DEBUG
 1

	)

45 
	#NEED_DEBUG
 0

	)

48 
	#PRINT_TO_FILE
 0

	)

49 
	#USE_VALLOC


	)

50 
	#BSEARCH_BLOCK


	)

51 
	#USE_FIXED_BLOCK


	)

52 
	#DETECT_MEMORY_OVERRUN


	)

61 
¶ab_öô
(c⁄° 
size_t
 
limô
, c⁄° 
Á˘‹
);

67 
¶ab_˛sid
(c⁄° 
size_t
 
size
);

69 #ifde‡
TRACE_MEM_ALLOC


70 
	#¶ab_Æloc
(
_size
Ë({
size_t
 
__size
=(_size); *
_ªt_±r_
=
	`_¶ab_Æloc
(__size); 
	`¥ötf
("%†[%s:%d]%p=¶ab_Æloc(%u)\n", 
__func__
, 
__FILE__
, 
__LINE__
, _ªt_±r_, ()(__size)); _ªt_±r_;})

	)

72 
	#¶ab_Æloc
(
_size
Ë({*
_ªt_±r_
=
	`_¶ab_Æloc
(_size); _ªt_±r_;})

	)

75 *
_¶ab_Æloc
(
size_t
 
size
Ë
__©åibuã__
 ((
mÆloc
));

77 #ifde‡
TRACE_MEM_ALLOC


78 
	#¶ab_ªÆloc
(
_±r
, 
_size
Ë({* 
__±r
=_±r; 
size_t
 
__size
=(_size); *
_ªt_±r_
=
	`_¶ab_ªÆloc
(__±r, __size); 
	`¥ötf
("%†[%s:%d]%p=¶ab_ªÆloc(%p, %u)\n", 
__func__
, 
__FILE__
, 
__LINE__
, _ªt_±r_, __±r, ()(__size)); _ªt_±r_;})

	)

80 
	#¶ab_ªÆloc
(
_±r
, 
_size
Ë({*
_ªt_±r_
=
	`_¶ab_ªÆloc
(_±r, _size); _ªt_±r_;})

	)

83 *
_¶ab_ªÆloc
(*
±r
, c⁄° 
size_t
 
size
Ë
__©åibuã__
 ((
mÆloc
));

85 #ifde‡
TRACE_MEM_ALLOC


86 
	#¶ab_‰ì
(
_±r
Ë({* 
__±r
=(_±r); 
	`¥ötf
("%†[%s:%d]¶ab_‰ì(%p)\n", 
__func__
, 
__FILE__
, 
__LINE__
, __±r); 
	`_¶ab_‰ì
(__±r);})

	)

88 
	#¶ab_‰ì
(
_±r
Ë({
	`_¶ab_‰ì
(_±r);})

	)

92 
_¶ab_‰ì
(*
±r
);

95 
¶ab_°©s
();

97 #ifde‡
TRACE_MEM_ALLOC


98 
	#¶ab_ˇŒoc
(
_size
Ë({
size_t
 
__size
=(_size); *
_±r
=
	`_¶ab_ˇŒoc
(__size); 
	`¥ötf
("%†[%s:%d]%p=¶ab_ˇŒoc(%u)\n", 
__func__
, 
__FILE__
, 
__LINE__
, _±r, ()(__size)); _±r;})

	)

100 
	#¶ab_ˇŒoc
(
_size
Ë({*
_±r
=
	`_¶ab_ˇŒoc
(_size); _±r;})

	)

110 
ölöe
 * 
_¶ab_ˇŒoc
(
size_t
 
size
Ë
__©åibuã__
 ((
Æways_ölöe
));

111 
ölöe
 * 
_¶ab_ˇŒoc
(
size_t
 
size
)

113 *
±r
;

115 i‡((
±r
=
_¶ab_Æloc
(
size
)Ë=
NULL
)

116  
NULL
;

117 
mem£t
(
±r
, 0, 
size
);

119  
±r
;

122 
boﬁ
 
is_vÆid_mem
(*
±r
);

124 #i‚de‡
USE_SYSTEM_MALLOC


125 
	#SLAB_ALLOC


	)

126 
	#SLAB_REALLOC


	)

127 
	#SLAB_FREE


	)

128 
	#SLAB_CALLOC


	)

131 #ifde‡
__˝lu•lus


	@libs/include/rock/stdint.h

22 #i‚de‡
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<„©uªs.h
>

26 
	~<bôs/wch¨.h
>

27 
	~<bôs/w‹dsize.h
>

34 #i‚de‡
__öt8_t_deföed


35 
	#__öt8_t_deföed


	)

36 sig√d 
	töt8_t
;

37 
	töt16_t
;

38 
	töt32_t
;

39 #i‡
__WORDSIZE
 == 64

40 
	töt64_t
;

42 
__exãnsi⁄__


43 
	töt64_t
;

48 
	tuöt8_t
;

49 
	tuöt16_t
;

50 #i‚de‡
__uöt32_t_deföed


51 
	tuöt32_t
;

52 
	#__uöt32_t_deföed


	)

54 #i‡
__WORDSIZE
 == 64

55 
	tuöt64_t
;

57 
__exãnsi⁄__


58 
	tuöt64_t
;

65 sig√d 
	töt_Àa°8_t
;

66 
	töt_Àa°16_t
;

67 
	töt_Àa°32_t
;

68 #i‡
__WORDSIZE
 == 64

69 
	töt_Àa°64_t
;

71 
__exãnsi⁄__


72 
	töt_Àa°64_t
;

76 
	tuöt_Àa°8_t
;

77 
	tuöt_Àa°16_t
;

78 
	tuöt_Àa°32_t
;

79 #i‡
__WORDSIZE
 == 64

80 
	tuöt_Àa°64_t
;

82 
__exãnsi⁄__


83 
	tuöt_Àa°64_t
;

90 sig√d 
	töt_Á°8_t
;

91 #i‡
__WORDSIZE
 == 64

92 
	töt_Á°16_t
;

93 
	töt_Á°32_t
;

94 
	töt_Á°64_t
;

96 
	töt_Á°16_t
;

97 
	töt_Á°32_t
;

98 
__exãnsi⁄__


99 
	töt_Á°64_t
;

103 
	tuöt_Á°8_t
;

104 #i‡
__WORDSIZE
 == 64

105 
	tuöt_Á°16_t
;

106 
	tuöt_Á°32_t
;

107 
	tuöt_Á°64_t
;

109 
	tuöt_Á°16_t
;

110 
	tuöt_Á°32_t
;

111 
__exãnsi⁄__


112 
	tuöt_Á°64_t
;

117 #i‡
__WORDSIZE
 == 64

118 #i‚de‡
__öçå_t_deföed


119 
	töçå_t
;

120 
	#__öçå_t_deföed


	)

122 
	tuöçå_t
;

124 #i‚de‡
__öçå_t_deföed


125 
	töçå_t
;

126 
	#__öçå_t_deföed


	)

128 
	tuöçå_t
;

133 #i‡
__WORDSIZE
 == 64

134 
	tötmax_t
;

135 
	tuötmax_t
;

137 
__exãnsi⁄__


138 
	tötmax_t
;

139 
__exãnsi⁄__


140 
	tuötmax_t
;

146 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_LIMIT_MACROS


148 #i‡
__WORDSIZE
 == 64

149 
	#__INT64_C
(
c
Ë¯## 
L


	)

150 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

152 
	#__INT64_C
(
c
Ë¯## 
LL


	)

153 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

159 
	#INT8_MIN
 (-128)

	)

160 
	#INT16_MIN
 (-32767-1)

	)

161 
	#INT32_MIN
 (-2147483647-1)

	)

162 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

164 
	#INT8_MAX
 (127)

	)

165 
	#INT16_MAX
 (32767)

	)

166 
	#INT32_MAX
 (2147483647)

	)

167 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

170 
	#UINT8_MAX
 (255)

	)

171 
	#UINT16_MAX
 (65535)

	)

172 
	#UINT32_MAX
 (4294967295U)

	)

173 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

177 
	#INT_LEAST8_MIN
 (-128)

	)

178 
	#INT_LEAST16_MIN
 (-32767-1)

	)

179 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

180 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

182 
	#INT_LEAST8_MAX
 (127)

	)

183 
	#INT_LEAST16_MAX
 (32767)

	)

184 
	#INT_LEAST32_MAX
 (2147483647)

	)

185 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

188 
	#UINT_LEAST8_MAX
 (255)

	)

189 
	#UINT_LEAST16_MAX
 (65535)

	)

190 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

191 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

195 
	#INT_FAST8_MIN
 (-128)

	)

196 #i‡
__WORDSIZE
 == 64

197 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

198 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

200 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

201 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

203 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

205 
	#INT_FAST8_MAX
 (127)

	)

206 #i‡
__WORDSIZE
 == 64

207 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

208 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

210 
	#INT_FAST16_MAX
 (2147483647)

	)

211 
	#INT_FAST32_MAX
 (2147483647)

	)

213 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

216 
	#UINT_FAST8_MAX
 (255)

	)

217 #i‡
__WORDSIZE
 == 64

218 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

219 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

221 
	#UINT_FAST16_MAX
 (4294967295U)

	)

222 
	#UINT_FAST32_MAX
 (4294967295U)

	)

224 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

228 #i‡
__WORDSIZE
 == 64

229 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

230 
	#INTPTR_MAX
 (9223372036854775807L)

	)

231 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

233 
	#INTPTR_MIN
 (-2147483647-1)

	)

234 
	#INTPTR_MAX
 (2147483647)

	)

235 
	#UINTPTR_MAX
 (4294967295U)

	)

240 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

242 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

245 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

251 #i‡
__WORDSIZE
 == 64

252 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

253 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

255 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

256 
	#PTRDIFF_MAX
 (2147483647)

	)

260 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

261 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

264 #i‡
__WORDSIZE
 == 64

265 
	#SIZE_MAX
 (18446744073709551615UL)

	)

267 
	#SIZE_MAX
 (4294967295U)

	)

271 #i‚de‡
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

286 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_CONSTANT_MACROS


289 
	#INT8_C
(
c
Ë
	)
c

290 
	#INT16_C
(
c
Ë
	)
c

291 
	#INT32_C
(
c
Ë
	)
c

292 #i‡
__WORDSIZE
 == 64

293 
	#INT64_C
(
c
Ë¯## 
L


	)

295 
	#INT64_C
(
c
Ë¯## 
LL


	)

299 
	#UINT8_C
(
c
Ë
	)
c

300 
	#UINT16_C
(
c
Ë
	)
c

301 
	#UINT32_C
(
c
Ë¯## 
U


	)

302 #i‡
__WORDSIZE
 == 64

303 
	#UINT64_C
(
c
Ë¯## 
UL


	)

305 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

309 #i‡
__WORDSIZE
 == 64

310 
	#INTMAX_C
(
c
Ë¯## 
L


	)

311 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

313 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

314 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@libs/include/rock/urlencode.h

10 #i‚de‡
_URLENCODE_H_


11 
	#_URLENCODE_H_


	)

20 *
uæ_ícode
(c⁄° *
öput_°rög
);

32 *
uæ_decode
(c⁄° *
öput_°rög
);

	@libs/include/rock/uthash.h

24 #i‚de‡
UTHASH_H


25 
	#UTHASH_H


	)

27 
	~<°rög.h
>

28 
	~<°ddef.h
>

29 
	~<°dlib.h
>

35 #ifde‡
_MSC_VER


36 #i‡
_MSC_VER
 >1600 && 
deföed
(
__˝lu•lus
)

37 
	#DECLTYPE
(
x
Ë(
	`de˛ty≥
(x))

	)

39 
	#NO_DECLTYPE


	)

40 
	#DECLTYPE
(
x
)

	)

43 
	#DECLTYPE
(
x
Ë(
	`__ty≥of
(x))

	)

46 #ifde‡
NO_DECLTYPE


47 
	#DECLTYPE_ASSIGN
(
d°
,
§c
) \

49 **
_da_d°
 = (**)(&(
d°
)); \

50 *
_da_d°
 = (*)(
§c
); \

51 } 0)

	)

53 
	#DECLTYPE_ASSIGN
(
d°
,
§c
) \

55 (
d°
Ë
	`DECLTYPE
(d°)(
§c
); \

56 } 0)

	)

60 #ifde‡
_MSC_VER


61 
	tuöt32_t
;

62 
	tuöt8_t
;

64 
	~<öây≥s.h
>

67 
	#UTHASH_VERSION
 1.9.8

	)

69 #i‚de‡
uthash_Áèl


70 
	#uthash_Áèl
(
msg
Ë
	`exô
(-1Ë

	)

72 #i‚de‡
uthash_mÆloc


73 
	#uthash_mÆloc
(
sz
Ë
	`mÆloc
(szË

	)

75 #i‚de‡
uthash_‰ì


76 
	#uthash_‰ì
(
±r
,
sz
Ë
	`‰ì
’åË

	)

79 #i‚de‡
uthash_n€x∑nd_fyi


80 
	#uthash_n€x∑nd_fyi
(
tbl
Ë

	)

82 #i‚de‡
uthash_ex∑nd_fyi


83 
	#uthash_ex∑nd_fyi
(
tbl
Ë

	)

87 
	#HASH_INITIAL_NUM_BUCKETS
 32

	)

88 
	#HASH_INITIAL_NUM_BUCKETS_LOG2
 5

	)

89 
	#HASH_BKT_CAPACITY_THRESH
 10

	)

92 
	#ELMT_FROM_HH
(
tbl
,
hhp
Ë((*)(((*)(hhp)Ë- (—bl)->
hho
)))

	)

94 
	#HASH_FIND
(
hh
,
hód
,
key±r
,
keyÀn
,
out
) \

96 
_hf_bkt
,
_hf_hashv
; \

97 
out
=
NULL
; \

98 i‡(
hód
) { \

99 
	`HASH_FCN
(
key±r
,
keyÀn
, (
hód
)->
hh
.
tbl
->
num_buckës
, 
_hf_hashv
, 
_hf_bkt
); \

100 i‡(
	`HASH_BLOOM_TEST
((
hód
)->
hh
.
tbl
, 
_hf_hashv
)) { \

101 
	`HASH_FIND_IN_BKT
((
hód
)->
hh
.
tbl
, hh, (hód)->hh.tbl->
buckës
[ 
_hf_bkt
 ], \

102 
key±r
,
keyÀn
,
out
); \

105 } 0)

	)

107 #ifde‡
HASH_BLOOM


108 
	#HASH_BLOOM_BITLEN
 (1ULL << 
HASH_BLOOM
)

	)

109 
	#HASH_BLOOM_BYTELEN
 (
HASH_BLOOM_BITLEN
/8Ë+ ((HASH_BLOOM_BITLEN%8Ë? 1:0)

	)

110 
	#HASH_BLOOM_MAKE
(
tbl
) \

112 (
tbl
)->
bloom_nbôs
 = 
HASH_BLOOM
; \

113 (
tbl
)->
bloom_bv
 = (
uöt8_t
*)
	`uthash_mÆloc
(
HASH_BLOOM_BYTELEN
); \

114 i‡(!((
tbl
)->
bloom_bv
)Ë{ 
	`uthash_Áèl
( "out of memory"); } \

115 
	`mem£t
((
tbl
)->
bloom_bv
, 0, 
HASH_BLOOM_BYTELEN
); \

116 (
tbl
)->
bloom_sig
 = 
HASH_BLOOM_SIGNATURE
; \

117 } 0)

	)

119 
	#HASH_BLOOM_FREE
(
tbl
) \

121 
	`uthash_‰ì
((
tbl
)->
bloom_bv
, 
HASH_BLOOM_BYTELEN
); \

122 } 0)

	)

124 
	#HASH_BLOOM_BITSET
(
bv
,
idx
Ë(bv[(idx)/8] |(1U << ((idx)%8)))

	)

125 
	#HASH_BLOOM_BITTEST
(
bv
,
idx
Ë(bv[(idx)/8] & (1U << ((idx)%8)))

	)

127 
	#HASH_BLOOM_ADD
(
tbl
,
hashv
) \

128 
	`HASH_BLOOM_BITSET
((
tbl
)->
bloom_bv
, (
hashv
 & (
uöt32_t
)((1ULL << (tbl)->
bloom_nbôs
Ë- 1)))

	)

130 
	#HASH_BLOOM_TEST
(
tbl
,
hashv
) \

131 
	`HASH_BLOOM_BITTEST
((
tbl
)->
bloom_bv
, (
hashv
 & (
uöt32_t
)((1ULL << (tbl)->
bloom_nbôs
Ë- 1)))

	)

134 
	#HASH_BLOOM_MAKE
(
tbl
)

	)

135 
	#HASH_BLOOM_FREE
(
tbl
)

	)

136 
	#HASH_BLOOM_ADD
(
tbl
,
hashv
)

	)

137 
	#HASH_BLOOM_TEST
(
tbl
,
hashv
Ë(1)

	)

138 
	#HASH_BLOOM_BYTELEN
 0

	)

141 
	#HASH_MAKE_TABLE
(
hh
,
hód
) \

143 (
hód
)->
hh
.
tbl
 = (
UT_hash_èbÀ
*)
	`uthash_mÆloc
( \

144 (
UT_hash_èbÀ
)); \

145 i‡(!((
hód
)->
hh
.
tbl
)Ë{ 
	`uthash_Áèl
( "out of memory"); } \

146 
	`mem£t
((
hód
)->
hh
.
tbl
, 0, (
UT_hash_èbÀ
)); \

147 (
hód
)->
hh
.
tbl
->
èû
 = &((head)->hh); \

148 (
hód
)->
hh
.
tbl
->
num_buckës
 = 
HASH_INITIAL_NUM_BUCKETS
; \

149 (
hód
)->
hh
.
tbl
->
log2_num_buckës
 = 
HASH_INITIAL_NUM_BUCKETS_LOG2
; \

150 (
hód
)->
hh
.
tbl
->
hho
 = (*)(&(head)->hh) - (*)(head); \

151 (
hód
)->
hh
.
tbl
->
buckës
 = (
UT_hash_buckë
*)
	`uthash_mÆloc
( \

152 
HASH_INITIAL_NUM_BUCKETS
*(
UT_hash_buckë
)); \

153 i‡(! (
hód
)->
hh
.
tbl
->
buckës
Ë{ 
	`uthash_Áèl
( "out of memory"); } \

154 
	`mem£t
((
hód
)->
hh
.
tbl
->
buckës
, 0, \

155 
HASH_INITIAL_NUM_BUCKETS
*(
UT_hash_buckë
)); \

156 
	`HASH_BLOOM_MAKE
((
hód
)->
hh
.
tbl
); \

157 (
hód
)->
hh
.
tbl
->
sig«tuª
 = 
HASH_SIGNATURE
; \

158 } 0)

	)

160 
	#HASH_ADD
(
hh
,
hód
,
fõld«me
,
keyÀn_ö
,
add
) \

161 
	`HASH_ADD_KEYPTR
(
hh
,
hód
,&((
add
)->
fõld«me
),
keyÀn_ö
,add)

	)

163 
	#HASH_REPLACE
(
hh
,
hód
,
fõld«me
,
keyÀn_ö
,
add
,
ª∂a˚d
) \

165 
ª∂a˚d
=
NULL
; \

166 
	`HASH_FIND
(
hh
,
hód
,&((
add
)->
fõld«me
),
keyÀn_ö
,
ª∂a˚d
); \

167 i‡(
ª∂a˚d
!=
NULL
) { \

168 
	`HASH_DELETE
(
hh
,
hód
,
ª∂a˚d
); \

170 
	`HASH_ADD
(
hh
,
hód
,
fõld«me
,
keyÀn_ö
,
add
); \

171 } 0)

	)

173 
	#HASH_ADD_KEYPTR
(
hh
,
hód
,
key±r
,
keyÀn_ö
,
add
) \

175 
_ha_bkt
; \

176 (
add
)->
hh
.
√xt
 = 
NULL
; \

177 (
add
)->
hh
.
key
 = (*)(
key±r
); \

178 (
add
)->
hh
.
keyÀn
 = ()(
keyÀn_ö
); \

179 i‡(!(
hód
)) { \

180 
hód
 = (
add
); \

181 (
hód
)->
hh
.
¥ev
 = 
NULL
; \

182 
	`HASH_MAKE_TABLE
(
hh
,
hód
); \

184 (
hód
)->
hh
.
tbl
->
èû
->
√xt
 = (
add
); \

185 (
add
)->
hh
.
¥ev
 = 
	`ELMT_FROM_HH
((
hód
)->hh.
tbl
, (hód)->hh.tbl->
èû
); \

186 (
hód
)->
hh
.
tbl
->
èû
 = &((
add
)->hh); \

188 (
hód
)->
hh
.
tbl
->
num_ôems
++; \

189 (
add
)->
hh
.
tbl
 = (
hód
)->hh.tbl; \

190 
	`HASH_FCN
(
key±r
,
keyÀn_ö
, (
hód
)->
hh
.
tbl
->
num_buckës
, \

191 (
add
)->
hh
.
hashv
, 
_ha_bkt
); \

192 
	`HASH_ADD_TO_BKT
((
hód
)->
hh
.
tbl
->
buckës
[
_ha_bkt
],&(
add
)->hh); \

193 
	`HASH_BLOOM_ADD
((
hód
)->
hh
.
tbl
,(
add
)->hh.
hashv
); \

194 
	`HASH_EMIT_KEY
(
hh
,
hód
,
key±r
,
keyÀn_ö
); \

195 
	`HASH_FSCK
(
hh
,
hód
); \

196 } 0)

	)

198 
	#HASH_TO_BKT
–
hashv
, 
num_bkts
, 
bkt
 ) \

200 
bkt
 = ((
hashv
Ë& ((
num_bkts
) - 1)); \

201 } 0)

	)

215 
	#HASH_DELETE
(
hh
,
hód
,
dñ±r
) \

217 
_hd_bkt
; \

218 
UT_hash_h™dÀ
 *
_hd_hh_dñ
; \

219 i‡–((
dñ±r
)->
hh
.
¥ev
 =
NULL
Ë&& ((dñ±r)->hh.
√xt
 == NULL) ) { \

220 
	`uthash_‰ì
((
hód
)->
hh
.
tbl
->
buckës
, \

221 (
hód
)->
hh
.
tbl
->
num_buckës
*(
UT_hash_buckë
) ); \

222 
	`HASH_BLOOM_FREE
((
hód
)->
hh
.
tbl
); \

223 
	`uthash_‰ì
((
hód
)->
hh
.
tbl
, (
UT_hash_èbÀ
)); \

224 
hód
 = 
NULL
; \

226 
_hd_hh_dñ
 = &((
dñ±r
)->
hh
); \

227 i‡((
dñ±r
Ë=
	`ELMT_FROM_HH
((
hód
)->
hh
.
tbl
,(hód)->hh.tbl->
èû
)) { \

228 (
hód
)->
hh
.
tbl
->
èû
 = \

229 (
UT_hash_h™dÀ
*)((
±rdiff_t
)((
dñ±r
)->
hh
.
¥ev
) + \

230 (
hód
)->
hh
.
tbl
->
hho
); \

232 i‡((
dñ±r
)->
hh
.
¥ev
) { \

233 ((
UT_hash_h™dÀ
*)((
±rdiff_t
)((
dñ±r
)->
hh
.
¥ev
) + \

234 (
hód
)->
hh
.
tbl
->
hho
))->
√xt
 = (
dñ±r
)->hh.next; \

236 
	`DECLTYPE_ASSIGN
(
hód
,(
dñ±r
)->
hh
.
√xt
); \

238 i‡(
_hd_hh_dñ
->
√xt
) { \

239 ((
UT_hash_h™dÀ
*)((
±rdiff_t
)
_hd_hh_dñ
->
√xt
 + \

240 (
hód
)->
hh
.
tbl
->
hho
))->
¥ev
 = \

241 
_hd_hh_dñ
->
¥ev
; \

243 
	`HASH_TO_BKT
–
_hd_hh_dñ
->
hashv
, (
hód
)->
hh
.
tbl
->
num_buckës
, 
_hd_bkt
); \

244 
	`HASH_DEL_IN_BKT
(
hh
,(
hód
)->hh.
tbl
->
buckës
[
_hd_bkt
], 
_hd_hh_dñ
); \

245 (
hód
)->
hh
.
tbl
->
num_ôems
--; \

247 
	`HASH_FSCK
(
hh
,
hód
); \

248 } 0)

	)

252 
	#HASH_FIND_STR
(
hód
,
föd°r
,
out
) \

253 
	`HASH_FIND
(
hh
,
hód
,
föd°r
,
	`°æí
(föd°r),
out
)

	)

254 
	#HASH_ADD_STR
(
hód
,
°rfõld
,
add
) \

255 
	`HASH_ADD
(
hh
,
hód
,
°rfõld
,
	`°æí
(
add
->°rfõld),add)

	)

256 
	#HASH_REPLACE_STR
(
hód
,
°rfõld
,
add
,
ª∂a˚d
) \

257 
	`HASH_REPLACE
(
hh
,
hód
,
°rfõld
,
	`°æí
(
add
->°rfõld),add,
ª∂a˚d
)

	)

258 
	#HASH_FIND_INT
(
hód
,
födöt
,
out
) \

259 
	`HASH_FIND
(
hh
,
hód
,
födöt
,(),
out
)

	)

260 
	#HASH_ADD_INT
(
hód
,
ötfõld
,
add
) \

261 
	`HASH_ADD
(
hh
,
hód
,
ötfõld
,(),
add
)

	)

262 
	#HASH_REPLACE_INT
(
hód
,
ötfõld
,
add
,
ª∂a˚d
) \

263 
	`HASH_REPLACE
(
hh
,
hód
,
ötfõld
,(),
add
,
ª∂a˚d
)

	)

264 
	#HASH_FIND_PTR
(
hód
,
föd±r
,
out
) \

265 
	`HASH_FIND
(
hh
,
hód
,
föd±r
,(*),
out
)

	)

266 
	#HASH_ADD_PTR
(
hód
,
±rfõld
,
add
) \

267 
	`HASH_ADD
(
hh
,
hód
,
±rfõld
,(*),
add
)

	)

268 
	#HASH_REPLACE_PTR
(
hód
,
±rfõld
,
add
) \

269 
	`HASH_REPLACE
(
hh
,
hód
,
±rfõld
,(*),
add
,
ª∂a˚d
)

	)

270 
	#HASH_DEL
(
hód
,
dñ±r
) \

271 
	`HASH_DELETE
(
hh
,
hód
,
dñ±r
)

	)

276 #ifde‡
HASH_DEBUG


277 
	#HASH_OOPS
(...Ëdÿ{ 
	`Ârötf
(
°dîr
,
__VA_ARGS__
); 
	`exô
(-1); } 0)

	)

278 
	#HASH_FSCK
(
hh
,
hód
) \

280 
_bkt_i
; \

281 
_cou¡
, 
_bkt_cou¡
; \

282 *
_¥ev
; \

283 
UT_hash_h™dÀ
 *
_thh
; \

284 i‡(
hód
) { \

285 
_cou¡
 = 0; \

286  
_bkt_i
 = 0; _bkt_ò< (
hód
)->
hh
.
tbl
->
num_buckës
; _bkt_i++) { \

287 
_bkt_cou¡
 = 0; \

288 
_thh
 = (
hód
)->
hh
.
tbl
->
buckës
[
_bkt_i
].
hh_hód
; \

289 
_¥ev
 = 
NULL
; \

290 
_thh
) { \

291 i‡(
_¥ev
 !(*)(
_thh
->
hh_¥ev
)) { \

292 
	`HASH_OOPS
("invalid hh_prev %p,áctual %p\n", \

293 
_thh
->
hh_¥ev
, 
_¥ev
 ); \

295 
_bkt_cou¡
++; \

296 
_¥ev
 = (*)(
_thh
); \

297 
_thh
 = _thh->
hh_√xt
; \

299 
_cou¡
 +
_bkt_cou¡
; \

300 i‡((
hód
)->
hh
.
tbl
->
buckës
[
_bkt_i
].
cou¡
 !
_bkt_cou¡
) { \

301 
	`HASH_OOPS
("invalid bucket count %d,áctual %d\n", \

302 (
hód
)->
hh
.
tbl
->
buckës
[
_bkt_i
].
cou¡
, 
_bkt_cou¡
); \

305 i‡(
_cou¡
 !(
hód
)->
hh
.
tbl
->
num_ôems
) { \

306 
	`HASH_OOPS
("invalid hh item count %d,áctual %d\n", \

307 (
hód
)->
hh
.
tbl
->
num_ôems
, 
_cou¡
 ); \

310 
_cou¡
 = 0; \

311 
_¥ev
 = 
NULL
; \

312 
_thh
 = &(
hód
)->
hh
; \

313 
_thh
) { \

314 
_cou¡
++; \

315 i‡(
_¥ev
 !=(*)(
_thh
->
¥ev
)) { \

316 
	`HASH_OOPS
("invalidÖrev %p,áctual %p\n", \

317 
_thh
->
¥ev
, 
_¥ev
 ); \

319 
_¥ev
 = (*)
	`ELMT_FROM_HH
((
hód
)->
hh
.
tbl
, 
_thh
); \

320 
_thh
 = ( _thh->
√xt
 ? (
UT_hash_h™dÀ
*)((*)(_thh->next) + \

321 (
hód
)->
hh
.
tbl
->
hho
Ë: 
NULL
 ); \

323 i‡(
_cou¡
 !(
hód
)->
hh
.
tbl
->
num_ôems
) { \

324 
	`HASH_OOPS
("invalidápp item count %d,áctual %d\n", \

325 (
hód
)->
hh
.
tbl
->
num_ôems
, 
_cou¡
 ); \

328 } 0)

	)

330 
	#HASH_FSCK
(
hh
,
hód
)

	)

336 #ifde‡
HASH_EMIT_KEYS


337 
	#HASH_EMIT_KEY
(
hh
,
hód
,
key±r
,
fõldÀn
) \

339 
_kÀn
 = 
fõldÀn
; \

340 
	`wrôe
(
HASH_EMIT_KEYS
, &
_kÀn
, (_klen)); \

341 
	`wrôe
(
HASH_EMIT_KEYS
, 
key±r
, 
fõldÀn
); \

342 } 0)

	)

344 
	#HASH_EMIT_KEY
(
hh
,
hód
,
key±r
,
fõldÀn
)

	)

348 #ifde‡
HASH_FUNCTION


349 
	#HASH_FCN
 
HASH_FUNCTION


	)

351 
	#HASH_FCN
 
HASH_JEN


	)

355 
	#HASH_BER
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

357 
_hb_keyÀn
=
keyÀn
; \

358 *
_hb_key
=(*)(
key
); \

359 (
hashv
) = 0; \

360 
_hb_keyÀn
--Ë{ (
hashv
Ë((hashvË* 33Ë+ *
_hb_key
++; } \

361 
bkt
 = (
hashv
Ë& (
num_bkts
-1); \

362 } 0)

	)

367 
	#HASH_SAX
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

369 
_sx_i
; \

370 *
_hs_key
=(*)(
key
); \

371 
hashv
 = 0; \

372 
_sx_i
=0; _sx_ò< 
keyÀn
; _sx_i++) \

373 
hashv
 ^(hashv << 5Ë+ (hashv >> 2Ë+ 
_hs_key
[
_sx_i
]; \

374 
bkt
 = 
hashv
 & (
num_bkts
-1); \

375 } 0)

	)

377 
	#HASH_FNV
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

379 
_‚_i
; \

380 *
_hf_key
=(*)(
key
); \

381 
hashv
 = 2166136261UL; \

382 
_‚_i
=0; _‚_ò< 
keyÀn
; _fn_i++) \

383 
hashv
 = (hashv * 16777619Ë^ 
_hf_key
[
_‚_i
]; \

384 
bkt
 = 
hashv
 & (
num_bkts
-1); \

385 } 0)

	)

387 
	#HASH_OAT
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

389 
_ho_i
; \

390 *
_ho_key
=(*)(
key
); \

391 
hashv
 = 0; \

392 
_ho_i
=0; _ho_ò< 
keyÀn
; _ho_i++) { \

393 
hashv
 +
_ho_key
[
_ho_i
]; \

394 
hashv
 += (hashv << 10); \

395 
hashv
 ^= (hashv >> 6); \

397 
hashv
 += (hashv << 3); \

398 
hashv
 ^= (hashv >> 11); \

399 
hashv
 += (hashv << 15); \

400 
bkt
 = 
hashv
 & (
num_bkts
-1); \

401 } 0)

	)

403 
	#HASH_JEN_MIX
(
a
,
b
,
c
) \

405 
a
 -
b
;á -
c
;á ^= ( c >> 13 ); \

406 
b
 -
c
; b -
a
; b ^= (á << 8 ); \

407 
c
 -
a
; c -
b
; c ^= ( b >> 13 ); \

408 
a
 -
b
;á -
c
;á ^= ( c >> 12 ); \

409 
b
 -
c
; b -
a
; b ^= (á << 16 ); \

410 
c
 -
a
; c -
b
; c ^= ( b >> 5 ); \

411 
a
 -
b
;á -
c
;á ^= ( c >> 3 ); \

412 
b
 -
c
; b -
a
; b ^= (á << 10 ); \

413 
c
 -
a
; c -
b
; c ^= ( b >> 15 ); \

414 } 0)

	)

416 
	#HASH_JEN
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

418 
_hj_i
,
_hj_j
,
_hj_k
; \

419 *
_hj_key
=(*)(
key
); \

420 
hashv
 = 0xfeedbeef; \

421 
_hj_i
 = 
_hj_j
 = 0x9e3779b9; \

422 
_hj_k
 = ()(
keyÀn
); \

423 
_hj_k
 >= 12) { \

424 
_hj_i
 +(
_hj_key
[0] + ( ()_hj_key[1] << 8 ) \

425 + ( ()
_hj_key
[2] << 16 ) \

426 + ( ()
_hj_key
[3] << 24 ) ); \

427 
_hj_j
 +(
_hj_key
[4] + ( ()_hj_key[5] << 8 ) \

428 + ( ()
_hj_key
[6] << 16 ) \

429 + ( ()
_hj_key
[7] << 24 ) ); \

430 
hashv
 +(
_hj_key
[8] + ( ()_hj_key[9] << 8 ) \

431 + ( ()
_hj_key
[10] << 16 ) \

432 + ( ()
_hj_key
[11] << 24 ) ); \

434 
	`HASH_JEN_MIX
(
_hj_i
, 
_hj_j
, 
hashv
); \

436 
_hj_key
 += 12; \

437 
_hj_k
 -= 12; \

439 
hashv
 +
keyÀn
; \

440  
_hj_k
 ) { \

441 11: 
hashv
 +–()
_hj_key
[10] << 24 ); \

442 10: 
hashv
 +–()
_hj_key
[9] << 16 ); \

443 9: 
hashv
 +–()
_hj_key
[8] << 8 ); \

444 8: 
_hj_j
 +–()
_hj_key
[7] << 24 ); \

445 7: 
_hj_j
 +–()
_hj_key
[6] << 16 ); \

446 6: 
_hj_j
 +–()
_hj_key
[5] << 8 ); \

447 5: 
_hj_j
 +
_hj_key
[4]; \

448 4: 
_hj_i
 +–()
_hj_key
[3] << 24 ); \

449 3: 
_hj_i
 +–()
_hj_key
[2] << 16 ); \

450 2: 
_hj_i
 +–()
_hj_key
[1] << 8 ); \

451 1: 
_hj_i
 +
_hj_key
[0]; \

453 
	`HASH_JEN_MIX
(
_hj_i
, 
_hj_j
, 
hashv
); \

454 
bkt
 = 
hashv
 & (
num_bkts
-1); \

455 } 0)

	)

458 #unde‡
gë16bôs


459 #i‡(
deföed
(
__GNUC__
Ë&& deföed(
__i386__
)Ë|| deföed(
__WATCOMC__
) \

460 || 
deföed
(
_MSC_VER
Ë|| deföed (
__BORLANDC__
Ë|| 
	$deföed
 (
__TURBOC__
)

461 
	#gë16bôs
(
d
Ë(*((c⁄° 
uöt16_t
 *Ë(d)))

	)

464 #i‡!
	`deföed
 (
gë16bôs
)

465 
	#gë16bôs
(
d
Ë((((
uöt32_t
)(((c⁄° 
uöt8_t
 *)(d))[1])) << 8) \

466 +(
uöt32_t
)(((c⁄° 
uöt8_t
 *)(
d
))[0]Ë)

	)

468 
	#HASH_SFH
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

470 *
_sfh_key
=(*)(
key
); \

471 
uöt32_t
 
_sfh_tmp
, 
_sfh_Àn
 = 
keyÀn
; \

473 
_sfh_ªm
 = 
_sfh_Àn
 & 3; \

474 
_sfh_Àn
 >>= 2; \

475 
hashv
 = 0xcafebabe; \

478 ;
_sfh_Àn
 > 0; _sfh_len--) { \

479 
hashv
 +
	`gë16bôs
 (
_sfh_key
); \

480 
_sfh_tmp
 = (
uöt32_t
)(
	`gë16bôs
 (
_sfh_key
+2)Ë<< 11 ^ 
hashv
; \

481 
hashv
 = (hashv << 16Ë^ 
_sfh_tmp
; \

482 
_sfh_key
 +2* (
uöt16_t
); \

483 
hashv
 += hashv >> 11; \

487 
_sfh_ªm
) { \

488 3: 
hashv
 +
	`gë16bôs
 (
_sfh_key
); \

489 
hashv
 ^= hashv << 16; \

490 
hashv
 ^(
uöt32_t
)(
_sfh_key
[ (
uöt16_t
)] << 18); \

491 
hashv
 += hashv >> 11; \

493 2: 
hashv
 +
	`gë16bôs
 (
_sfh_key
); \

494 
hashv
 ^= hashv << 11; \

495 
hashv
 += hashv >> 17; \

497 1: 
hashv
 +*
_sfh_key
; \

498 
hashv
 ^= hashv << 10; \

499 
hashv
 += hashv >> 1; \

503 
hashv
 ^= hashv << 3; \

504 
hashv
 += hashv >> 5; \

505 
hashv
 ^= hashv << 4; \

506 
hashv
 += hashv >> 17; \

507 
hashv
 ^= hashv << 25; \

508 
hashv
 += hashv >> 6; \

509 
bkt
 = 
hashv
 & (
num_bkts
-1); \

510 
	}
} 0)

	)

512 #ifde‡
HASH_USING_NO_STRICT_ALIASING


522 #i‡(
deföed
(
__i386__
Ë|| deföed(
__x86_64__
Ë|| deföed(
_M_IX86
))

523 
	#MUR_GETBLOCK
(
p
,
i
Ëp[i]

	)

525 
	#MUR_PLUS0_ALIGNED
(
p
Ë(((Ì & 0x3Ë=0)

	)

526 
	#MUR_PLUS1_ALIGNED
(
p
Ë(((Ì & 0x3Ë=1)

	)

527 
	#MUR_PLUS2_ALIGNED
(
p
Ë(((Ì & 0x3Ë=2)

	)

528 
	#MUR_PLUS3_ALIGNED
(
p
Ë(((Ì & 0x3Ë=3)

	)

529 
	#WP
(
p
Ë((
uöt32_t
*)(()’Ë& ~3UL))

	)

530 #i‡(
deföed
(
__BIG_ENDIAN__
Ë|| deföed(
SPARC
Ë|| deföed(
__µc__
Ë|| deföed(
__µc64__
))

531 
	#MUR_THREE_ONE
(
p
Ë((((*
	`WP
’))&0x00ffffffË<< 8Ë| (((*(WP’)+1))&0xff000000Ë>> 24))

	)

532 
	#MUR_TWO_TWO
(
p
Ë((((*
	`WP
’))&0x0000ffffË<<16Ë| (((*(WP’)+1))&0xffff0000Ë>> 16))

	)

533 
	#MUR_ONE_THREE
(
p
Ë((((*
	`WP
’))&0x000000ffË<<24Ë| (((*(WP’)+1))&0xffffff00Ë>> 8))

	)

535 
	#MUR_THREE_ONE
(
p
Ë((((*
	`WP
’))&0xffffff00Ë>> 8Ë| (((*(WP’)+1))&0x000000ffË<< 24))

	)

536 
	#MUR_TWO_TWO
(
p
Ë((((*
	`WP
’))&0xffff0000Ë>>16Ë| (((*(WP’)+1))&0x0000ffffË<< 16))

	)

537 
	#MUR_ONE_THREE
(
p
Ë((((*
	`WP
’))&0xff000000Ë>>24Ë| (((*(WP’)+1))&0x00ffffffË<< 8))

	)

539 
	#MUR_GETBLOCK
(
p
,
i
Ë(
	`MUR_PLUS0_ALIGNED
(p) ? ((p)[i]) : \

540 (
	`MUR_PLUS1_ALIGNED
(
p
Ë? 
	`MUR_THREE_ONE
(p) : \

541 (
	`MUR_PLUS2_ALIGNED
(
p
Ë? 
	`MUR_TWO_TWO
(p) : \

542 
	`MUR_ONE_THREE
(
p
))))

	)

544 
	#MUR_ROTL32
(
x
,
r
Ë(((xË<< (r)Ë| ((xË>> (32 - (r))))

	)

545 
	#MUR_FMIX
(
_h
) \

547 
_h
 ^= _h >> 16; \

548 
_h
 *= 0x85ebca6b; \

549 
_h
 ^= _h >> 13; \

550 
_h
 *= 0xc2b2ae35l; \

551 
_h
 ^= _h >> 16; \

552 } 0)

	)

554 
	#HASH_MUR
(
key
,
keyÀn
,
num_bkts
,
hashv
,
bkt
) \

556 c⁄° 
uöt8_t
 *
_mur_d©a
 = (c⁄° uöt8_t*)(
key
); \

557 c⁄° 
_mur_nblocks
 = (
keyÀn
) / 4; \

558 
uöt32_t
 
_mur_h1
 = 0xf88D5353; \

559 
uöt32_t
 
_mur_c1
 = 0xcc9e2d51; \

560 
uöt32_t
 
_mur_c2
 = 0x1b873593; \

561 
uöt32_t
 
_mur_k1
 = 0; \

562 c⁄° 
uöt8_t
 *
_mur_èû
; \

563 c⁄° 
uöt32_t
 *
_mur_blocks
 = (c⁄° uöt32_t*)(
_mur_d©a
+
_mur_nblocks
*4); \

564 
_mur_i
; \

565 
_mur_i
 = -
_mur_nblocks
; _mur_i; _mur_i++) { \

566 
_mur_k1
 = 
	`MUR_GETBLOCK
(
_mur_blocks
,
_mur_i
); \

567 
_mur_k1
 *
_mur_c1
; \

568 
_mur_k1
 = 
	`MUR_ROTL32
(_mur_k1,15); \

569 
_mur_k1
 *
_mur_c2
; \

571 
_mur_h1
 ^
_mur_k1
; \

572 
_mur_h1
 = 
	`MUR_ROTL32
(_mur_h1,13); \

573 
_mur_h1
 = _mur_h1*5+0xe6546b64; \

575 
_mur_èû
 = (c⁄° 
uöt8_t
*)(
_mur_d©a
 + 
_mur_nblocks
*4); \

576 
_mur_k1
=0; \

577 (
keyÀn
) & 3) { \

578 3: 
_mur_k1
 ^
_mur_èû
[2] << 16; \

579 2: 
_mur_k1
 ^
_mur_èû
[1] << 8; \

580 1: 
_mur_k1
 ^
_mur_èû
[0]; \

581 
_mur_k1
 *
_mur_c1
; \

582 
_mur_k1
 = 
	`MUR_ROTL32
(_mur_k1,15); \

583 
_mur_k1
 *
_mur_c2
; \

584 
_mur_h1
 ^
_mur_k1
; \

586 
_mur_h1
 ^(
keyÀn
); \

587 
	`MUR_FMIX
(
_mur_h1
); \

588 
hashv
 = 
_mur_h1
; \

589 
bkt
 = 
hashv
 & (
num_bkts
-1); \

590 } 0)

	)

594 
	#HASH_KEYCMP
(
a
,
b
,
Àn
Ë
	`memcmp
◊,b,Àn)

	)

597 
	#HASH_FIND_IN_BKT
(
tbl
,
hh
,
hód
,
key±r
,
keyÀn_ö
,
out
) \

599 i‡(
hód
.
hh_hód
Ë
	`DECLTYPE_ASSIGN
(
out
,
	`ELMT_FROM_HH
(
tbl
,head.hh_head)); \

600 
out
=
NULL
; \

601 
out
) { \

602 i‡((
out
)->
hh
.
keyÀn
 =
keyÀn_ö
) { \

603 i‡((
	`HASH_KEYCMP
((
out
)->
hh
.
key
,
key±r
,
keyÀn_ö
)) == 0) ; \

605 i‡((
out
)->
hh
.
hh_√xt
Ë
	`DECLTYPE_ASSIGN
(out,
	`ELMT_FROM_HH
(
tbl
,(out)->hh.hh_next)); \

606 
out
 = 
NULL
; \

608 } 0)

	)

611 
	#HASH_ADD_TO_BKT
(
hód
,
addhh
) \

613 
hód
.
cou¡
++; \

614 (
addhh
)->
hh_√xt
 = 
hód
.
hh_hód
; \

615 (
addhh
)->
hh_¥ev
 = 
NULL
; \

616 i‡(
hód
.
hh_hód
Ë{ (hód).hh_hód->
hh_¥ev
 = (
addhh
); } \

617 (
hód
).
hh_hód
=
addhh
; \

618 i‡(
hód
.
cou¡
 >((hód.
ex∑nd_mu…
+1Ë* 
HASH_BKT_CAPACITY_THRESH
) \

619 && (
addhh
)->
tbl
->
n€x∑nd
 != 1) { \

620 
	`HASH_EXPAND_BUCKETS
((
addhh
)->
tbl
); \

622 } 0)

	)

625 
	#HASH_DEL_IN_BKT
(
hh
,
hód
,
hh_dñ
) \

626 (
hód
).
cou¡
--; \

627 i‡((
hód
).
hh_hód
 =
hh_dñ
) { \

628 (
hód
).
hh_hód
 = 
hh_dñ
->
hh_√xt
; \

630 i‡(
hh_dñ
->
hh_¥ev
) { \

631 
hh_dñ
->
hh_¥ev
->
hh_√xt
 = hh_del->hh_next; \

633 i‡(
hh_dñ
->
hh_√xt
) { \

634 
hh_dñ
->
hh_√xt
->
hh_¥ev
 = hh_del->hh_prev; \

635 }

	)

666 
	#HASH_EXPAND_BUCKETS
(
tbl
) \

668 
_he_bkt
; \

669 
_he_bkt_i
; \

670 
UT_hash_h™dÀ
 *
_he_thh
, *
_he_hh_nxt
; \

671 
UT_hash_buckë
 *
_he_√w_buckës
, *
_he_√wbkt
; \

672 
_he_√w_buckës
 = (
UT_hash_buckë
*)
	`uthash_mÆloc
( \

673 2 * 
tbl
->
num_buckës
 * (
UT_hash_buckë
)); \

674 i‡(!
_he_√w_buckës
Ë{ 
	`uthash_Áèl
( "out of memory"); } \

675 
	`mem£t
(
_he_√w_buckës
, 0, \

676 2 * 
tbl
->
num_buckës
 * (
UT_hash_buckë
)); \

677 
tbl
->
idól_chaö_maxÀn
 = \

678 (
tbl
->
num_ôems
 >> (tbl->
log2_num_buckës
+1)) + \

679 ((
tbl
->
num_ôems
 & (—bl->
num_buckës
*2)-1)) ? 1 : 0); \

680 
tbl
->
n⁄idól_ôems
 = 0; \

681 
_he_bkt_i
 = 0; _he_bkt_ò< 
tbl
->
num_buckës
; _he_bkt_i++) \

683 
_he_thh
 = 
tbl
->
buckës
[ 
_he_bkt_i
 ].
hh_hód
; \

684 
_he_thh
) { \

685 
_he_hh_nxt
 = 
_he_thh
->
hh_√xt
; \

686 
	`HASH_TO_BKT
–
_he_thh
->
hashv
, 
tbl
->
num_buckës
*2, 
_he_bkt
); \

687 
_he_√wbkt
 = &(
_he_√w_buckës
[ 
_he_bkt
 ]); \

688 i‡(++(
_he_√wbkt
->
cou¡
Ë> 
tbl
->
idól_chaö_maxÀn
) { \

689 
tbl
->
n⁄idól_ôems
++; \

690 
_he_√wbkt
->
ex∑nd_mu…
 = _he_√wbkt->
cou¡
 / \

691 
tbl
->
idól_chaö_maxÀn
; \

693 
_he_thh
->
hh_¥ev
 = 
NULL
; \

694 
_he_thh
->
hh_√xt
 = 
_he_√wbkt
->
hh_hód
; \

695 i‡(
_he_√wbkt
->
hh_hód
Ë_he_√wbkt->hh_hód->
hh_¥ev
 = \

696 
_he_thh
; \

697 
_he_√wbkt
->
hh_hód
 = 
_he_thh
; \

698 
_he_thh
 = 
_he_hh_nxt
; \

701 
	`uthash_‰ì
–
tbl
->
buckës
,Åbl->
num_buckës
*(
UT_hash_buckë
) ); \

702 
tbl
->
num_buckës
 *= 2; \

703 
tbl
->
log2_num_buckës
++; \

704 
tbl
->
buckës
 = 
_he_√w_buckës
; \

705 
tbl
->
öeff_ex∑nds
 = (tbl->
n⁄idól_ôems
 > (tbl->
num_ôems
 >> 1)) ? \

706 (
tbl
->
öeff_ex∑nds
+1) : 0; \

707 i‡(
tbl
->
öeff_ex∑nds
 > 1) { \

708 
tbl
->
n€x∑nd
=1; \

709 
	`uthash_n€x∑nd_fyi
(
tbl
); \

711 
	`uthash_ex∑nd_fyi
(
tbl
); \

712 } 0)

	)

718 
	#HASH_SORT
(
hód
,
cmpf˙
Ë
	`HASH_SRT
(
hh
,hód,cmpf˙)

	)

719 
	#HASH_SRT
(
hh
,
hód
,
cmpf˙
) \

721 
_hs_i
; \

722 
_hs_lo›ög
,
_hs_nmîges
,
_hs_ösize
,
_hs_psize
,
_hs_qsize
; \

723 
UT_hash_h™dÀ
 *
_hs_p
, *
_hs_q
, *
_hs_e
, *
_hs_li°
, *
_hs_èû
; \

724 i‡(
hód
) { \

725 
_hs_ösize
 = 1; \

726 
_hs_lo›ög
 = 1; \

727 
_hs_li°
 = &((
hód
)->
hh
); \

728 
_hs_lo›ög
) { \

729 
_hs_p
 = 
_hs_li°
; \

730 
_hs_li°
 = 
NULL
; \

731 
_hs_èû
 = 
NULL
; \

732 
_hs_nmîges
 = 0; \

733 
_hs_p
) { \

734 
_hs_nmîges
++; \

735 
_hs_q
 = 
_hs_p
; \

736 
_hs_psize
 = 0; \

737  
_hs_i
 = 0; _hs_ò< 
_hs_ösize
; _hs_i++ ) { \

738 
_hs_psize
++; \

739 
_hs_q
 = (
UT_hash_h™dÀ
*)((_hs_q->
√xt
) ? \

740 ((*)((*)(
_hs_q
->
√xt
) + \

741 (
hód
)->
hh
.
tbl
->
hho
)Ë: 
NULL
); \

742 i‡(! (
_hs_q
) ) ; \

744 
_hs_qsize
 = 
_hs_ösize
; \

745 (
_hs_psize
 > 0Ë|| ((
_hs_qsize
 > 0Ë&& 
_hs_q
 )) { \

746 i‡(
_hs_psize
 == 0) { \

747 
_hs_e
 = 
_hs_q
; \

748 
_hs_q
 = (
UT_hash_h™dÀ
*)((_hs_q->
√xt
) ? \

749 ((*)((*)(
_hs_q
->
√xt
) + \

750 (
hód
)->
hh
.
tbl
->
hho
)Ë: 
NULL
); \

751 
_hs_qsize
--; \

752 } i‡–(
_hs_qsize
 =0Ë|| !(
_hs_q
) ) { \

753 
_hs_e
 = 
_hs_p
; \

754 i‡(
_hs_p
){ \

755 
_hs_p
 = (
UT_hash_h™dÀ
*)((_hs_p->
√xt
) ? \

756 ((*)((*)(
_hs_p
->
√xt
) + \

757 (
hód
)->
hh
.
tbl
->
hho
)Ë: 
NULL
); \

759 
_hs_psize
--; \

761 
	`cmpf˙
(
	`DECLTYPE
(
hód
)(
	`ELMT_FROM_HH
((hód)->
hh
.
tbl
,
_hs_p
)), \

762 
	`DECLTYPE
(
hód
)(
	`ELMT_FROM_HH
((hód)->
hh
.
tbl
,
_hs_q
))) \

764 
_hs_e
 = 
_hs_p
; \

765 i‡(
_hs_p
){ \

766 
_hs_p
 = (
UT_hash_h™dÀ
*)((_hs_p->
√xt
) ? \

767 ((*)((*)(
_hs_p
->
√xt
) + \

768 (
hód
)->
hh
.
tbl
->
hho
)Ë: 
NULL
); \

770 
_hs_psize
--; \

772 
_hs_e
 = 
_hs_q
; \

773 
_hs_q
 = (
UT_hash_h™dÀ
*)((_hs_q->
√xt
) ? \

774 ((*)((*)(
_hs_q
->
√xt
) + \

775 (
hód
)->
hh
.
tbl
->
hho
)Ë: 
NULL
); \

776 
_hs_qsize
--; \

778 i‡–
_hs_èû
 ) { \

779 
_hs_èû
->
√xt
 = ((
_hs_e
) ? \

780 
	`ELMT_FROM_HH
((
hód
)->
hh
.
tbl
,
_hs_e
Ë: 
NULL
); \

782 
_hs_li°
 = 
_hs_e
; \

784 i‡(
_hs_e
) { \

785 
_hs_e
->
¥ev
 = ((
_hs_èû
) ? \

786 
	`ELMT_FROM_HH
((
hód
)->
hh
.
tbl
,
_hs_èû
Ë: 
NULL
); \

788 
_hs_èû
 = 
_hs_e
; \

790 
_hs_p
 = 
_hs_q
; \

792 i‡(
_hs_èû
){ \

793 
_hs_èû
->
√xt
 = 
NULL
; \

795 i‡–
_hs_nmîges
 <= 1 ) { \

796 
_hs_lo›ög
=0; \

797 (
hód
)->
hh
.
tbl
->
èû
 = 
_hs_èû
; \

798 
	`DECLTYPE_ASSIGN
(
hód
,
	`ELMT_FROM_HH
((hód)->
hh
.
tbl
, 
_hs_li°
)); \

800 
_hs_ösize
 *= 2; \

802 
	`HASH_FSCK
(
hh
,
hód
); \

804 } 0)

	)

811 
	#HASH_SELECT
(
hh_d°
, 
d°
, 
hh_§c
, 
§c
, 
c⁄d
) \

813 
_§c_bkt
, 
_d°_bkt
; \

814 *
_œ°_ñt
=
NULL
, *
_ñt
; \

815 
UT_hash_h™dÀ
 *
_§c_hh
, *
_d°_hh
, *
_œ°_ñt_hh
=
NULL
; \

816 
±rdiff_t
 
_d°_hho
 = ((*)(&(
d°
)->
hh_d°
) - (*)(dst)); \

817 i‡(
§c
) { \

818 
_§c_bkt
=0; _§c_bkà< (
§c
)->
hh_§c
.
tbl
->
num_buckës
; _src_bkt++) { \

819 
_§c_hh
 = (
§c
)->
hh_§c
.
tbl
->
buckës
[
_§c_bkt
].
hh_hód
; \

820 
_§c_hh
; \

821 
_§c_hh
 = _§c_hh->
hh_√xt
) { \

822 
_ñt
 = 
	`ELMT_FROM_HH
((
§c
)->
hh_§c
.
tbl
, 
_§c_hh
); \

823 i‡(
	`c⁄d
(
_ñt
)) { \

824 
_d°_hh
 = (
UT_hash_h™dÀ
*)(((*)
_ñt
Ë+ 
_d°_hho
); \

825 
_d°_hh
->
key
 = 
_§c_hh
->key; \

826 
_d°_hh
->
keyÀn
 = 
_§c_hh
->keylen; \

827 
_d°_hh
->
hashv
 = 
_§c_hh
->hashv; \

828 
_d°_hh
->
¥ev
 = 
_œ°_ñt
; \

829 
_d°_hh
->
√xt
 = 
NULL
; \

830 i‡(
_œ°_ñt_hh
Ë{ _œ°_ñt_hh->
√xt
 = 
_ñt
; } \

831 i‡(!
d°
) { \

832 
	`DECLTYPE_ASSIGN
(
d°
,
_ñt
); \

833 
	`HASH_MAKE_TABLE
(
hh_d°
,
d°
); \

835 
_d°_hh
->
tbl
 = (
d°
)->
hh_d°
.tbl; \

837 
	`HASH_TO_BKT
(
_d°_hh
->
hashv
, _d°_hh->
tbl
->
num_buckës
, 
_d°_bkt
); \

838 
	`HASH_ADD_TO_BKT
(
_d°_hh
->
tbl
->
buckës
[
_d°_bkt
],_dst_hh); \

839 (
d°
)->
hh_d°
.
tbl
->
num_ôems
++; \

840 
_œ°_ñt
 = 
_ñt
; \

841 
_œ°_ñt_hh
 = 
_d°_hh
; \

846 
	`HASH_FSCK
(
hh_d°
,
d°
); \

847 } 0)

	)

849 
	#HASH_CLEAR
(
hh
,
hód
) \

851 i‡(
hód
) { \

852 
	`uthash_‰ì
((
hód
)->
hh
.
tbl
->
buckës
, \

853 (
hód
)->
hh
.
tbl
->
num_buckës
*(
UT_hash_buckë
)); \

854 
	`HASH_BLOOM_FREE
((
hód
)->
hh
.
tbl
); \

855 
	`uthash_‰ì
((
hód
)->
hh
.
tbl
, (
UT_hash_èbÀ
)); \

856 (
hód
)=
NULL
; \

858 } 0)

	)

860 
	#HASH_OVERHEAD
(
hh
,
hód
) \

861 (
size_t
)((((
hód
)->
hh
.
tbl
->
num_ôems
 * (
UT_hash_h™dÀ
)) + \

862 ((
hód
)->
hh
.
tbl
->
num_buckës
 * (
UT_hash_buckë
)) + \

863 ((
UT_hash_èbÀ
)) + \

864 (
HASH_BLOOM_BYTELEN
)))

	)

866 #ifde‡
NO_DECLTYPE


867 
	#HASH_ITER
(
hh
,
hód
,
ñ
,
tmp
) \

868 (
ñ
)=(
hód
), (*(**)(&(
tmp
)))=(*)((hód)?(hód)->
hh
.
√xt
:
NULL
); \

869 
ñ
; (ñ)=(
tmp
),(*(**)(&—mp)))=(*)(—mp)?—mp)->
hh
.
√xt
:
NULL
))

	)

871 
	#HASH_ITER
(
hh
,
hód
,
ñ
,
tmp
) \

872 (
ñ
)=(
hód
),(
tmp
)=
	`DECLTYPE
”l)((hód)?(hód)->
hh
.
√xt
:
NULL
); \

873 
ñ
; (ñ)=(
tmp
),—mp)=
	`DECLTYPE
”l)(—mp)?—mp)->
hh
.
√xt
:
NULL
))

	)

877 
	#HASH_COUNT
(
hód
Ë
	`HASH_CNT
(
hh
,hód)

	)

878 
	#HASH_CNT
(
hh
,
hód
Ë((hód)?((hód)->hh.
tbl
->
num_ôems
):0)

	)

880 
	sUT_hash_buckë
 {

881 
UT_hash_h™dÀ
 *
	mhh_hód
;

882 
	mcou¡
;

896 
	mex∑nd_mu…
;

898 } 
	tUT_hash_buckë
;

901 
	#HASH_SIGNATURE
 0xa0111„1

	)

902 
	#HASH_BLOOM_SIGNATURE
 0xb12220f2

	)

904 
	sUT_hash_èbÀ
 {

905 
UT_hash_buckë
 *
	mbuckës
;

906 
	mnum_buckës
, 
	mlog2_num_buckës
;

907 
	mnum_ôems
;

908 
UT_hash_h™dÀ
 *
	mèû
;

909 
±rdiff_t
 
	mhho
;

913 
	midól_chaö_maxÀn
;

918 
	mn⁄idól_ôems
;

926 
	möeff_ex∑nds
, 
	mn€x∑nd
;

928 
uöt32_t
 
	msig«tuª
;

929 #ifde‡
HASH_BLOOM


930 
uöt32_t
 
	mbloom_sig
;

931 
uöt8_t
 *
	mbloom_bv
;

932 
	mbloom_nbôs
;

935 } 
	tUT_hash_èbÀ
;

937 
	sUT_hash_h™dÀ
 {

938 
UT_hash_èbÀ
 *
	mtbl
;

939 *
	m¥ev
;

940 *
	m√xt
;

941 
UT_hash_h™dÀ
 *
	mhh_¥ev
;

942 
UT_hash_h™dÀ
 *
	mhh_√xt
;

943 *
	mkey
;

944 
	mkeyÀn
;

945 
	mhashv
;

946 } 
	tUT_hash_h™dÀ
;

	@libs/libev-4.15/config.h

8 
	#HAVE_CLOCK_SYSCALL
 1

	)

11 
	#HAVE_DLFCN_H
 1

	)

14 
	#HAVE_EPOLL_CTL
 1

	)

17 
	#HAVE_EVENTFD
 1

	)

20 
	#HAVE_FLOOR
 1

	)

23 
	#HAVE_INOTIFY_INIT
 1

	)

26 
	#HAVE_INTTYPES_H
 1

	)

35 
	#HAVE_MEMORY_H
 1

	)

38 
	#HAVE_NANOSLEEP
 1

	)

41 
	#HAVE_POLL
 1

	)

44 
	#HAVE_POLL_H
 1

	)

53 
	#HAVE_SELECT
 1

	)

56 
	#HAVE_SIGNALFD
 1

	)

59 
	#HAVE_STDINT_H
 1

	)

62 
	#HAVE_STDLIB_H
 1

	)

65 
	#HAVE_STRINGS_H
 1

	)

68 
	#HAVE_STRING_H
 1

	)

71 
	#HAVE_SYS_EPOLL_H
 1

	)

74 
	#HAVE_SYS_EVENTFD_H
 1

	)

80 
	#HAVE_SYS_INOTIFY_H
 1

	)

83 
	#HAVE_SYS_SELECT_H
 1

	)

86 
	#HAVE_SYS_SIGNALFD_H
 1

	)

89 
	#HAVE_SYS_STAT_H
 1

	)

92 
	#HAVE_SYS_TYPES_H
 1

	)

95 
	#HAVE_UNISTD_H
 1

	)

99 
	#LT_OBJDIR
 ".libs/"

	)

102 
	#PACKAGE
 "libev"

	)

105 
	#PACKAGE_BUGREPORT
 ""

	)

108 
	#PACKAGE_NAME
 ""

	)

111 
	#PACKAGE_STRING
 ""

	)

114 
	#PACKAGE_TARNAME
 ""

	)

117 
	#PACKAGE_URL
 ""

	)

120 
	#PACKAGE_VERSION
 ""

	)

123 
	#STDC_HEADERS
 1

	)

126 
	#VERSION
 "4.15"

	)

	@libs/libev-4.15/ev++.h

40 #i‚de‡
EVPP_H__


41 
	#EVPP_H__


	)

43 #ifde‡
EV_H


44 #ö˛udê
EV_H


46 
	~"ev.h
"

49 #i‚de‡
EV_USE_STDEXCEPT


50 
	#EV_USE_STDEXCEPT
 1

	)

53 #i‡
EV_USE_STDEXCEPT


54 
	~<°dex˚±
>

57 
«me•a˚
 
	gev
 {

59 
ev_t°amp
 
	tt°amp
;

62 
	gUNDEF
 = 
EV_UNDEF
,

63 
	gNONE
 = 
EV_NONE
,

64 
	gREAD
 = 
EV_READ
,

65 
	gWRITE
 = 
EV_WRITE
,

66 #i‡
EV_COMPAT3


67 
	gTIMEOUT
 = 
EV_TIMEOUT
,

69 
	gTIMER
 = 
EV_TIMER
,

70 
	gPERIODIC
 = 
EV_PERIODIC
,

71 
	gSIGNAL
 = 
EV_SIGNAL
,

72 
	gCHILD
 = 
EV_CHILD
,

73 
	gSTAT
 = 
EV_STAT
,

74 
	gIDLE
 = 
EV_IDLE
,

75 
	gCHECK
 = 
EV_CHECK
,

76 
	gPREPARE
 = 
EV_PREPARE
,

77 
	gFORK
 = 
EV_FORK
,

78 
	gASYNC
 = 
EV_ASYNC
,

79 
	gEMBED
 = 
EV_EMBED
,

80 #unde‡
ERROR


81 
	gERROR
 = 
EV_ERROR


86 
	gAUTO
 = 
EVFLAG_AUTO
,

87 
	gNOENV
 = 
EVFLAG_NOENV
,

88 
	gFORKCHECK
 = 
EVFLAG_FORKCHECK
,

90 
	gSELECT
 = 
EVBACKEND_SELECT
,

91 
	gPOLL
 = 
EVBACKEND_POLL
,

92 
	gEPOLL
 = 
EVBACKEND_EPOLL
,

93 
	gKQUEUE
 = 
EVBACKEND_KQUEUE
,

94 
	gDEVPOLL
 = 
EVBACKEND_DEVPOLL
,

95 
	gPORT
 = 
EVBACKEND_PORT


100 #i‡
EV_COMPAT3


101 
	gNONBLOCK
 = 
EVLOOP_NONBLOCK
,

102 
	gONESHOT
 = 
EVLOOP_ONESHOT
,

104 
	gNOWAIT
 = 
EVRUN_NOWAIT
,

105 
	gONCE
 = 
EVRUN_ONCE


108 
	ehow_t


110 
	gONE
 = 
EVBREAK_ONE
,

111 
	gALL
 = 
EVBREAK_ALL


114 
	gbad_lo›


115 #i‡
EV_USE_STDEXCEPT


116 : 
°d
::
ru¡ime_îr‹


119 #i‡
EV_USE_STDEXCEPT


120 
bad_lo›
 ()

121 : 
°d
::
ru¡ime_îr‹
 ("libevÉventÜoop cannot be initialized, bad value of LIBEV_FLAGS?")

127 #ifde‡
EV_AX


128 #unde‡
EV_AX


131 #ifde‡
EV_AX_


132 #unde‡
EV_AX_


135 #i‡
EV_MULTIPLICITY


136 
	#EV_AX
 
øw_lo›


	)

137 
	#EV_AX_
 
øw_lo›
,

	)

139 
	#EV_AX


	)

140 
	#EV_AX_


	)

143 
	slo›_ªf


145 
lo›_ªf
 (
EV_P
Ë
throw
 ()

146 #i‡
EV_MULTIPLICITY


147 : 
EV_AX
 (
EV_A
)

152 
boﬁ
 
›î©‹
 =(c⁄° 
lo›_ªf
 &
Ÿhî
Ëc⁄° 
throw
 ()

154 #i‡
EV_MULTIPLICITY


155  
EV_AX
 =
Ÿhî
.EV_AX;

157  
	gåue
;

161 
boﬁ
 
	g›î©‹
 !(c⁄° 
lo›_ªf
 &
Ÿhî
Ëc⁄° 
throw
 ()

163 #i‡
EV_MULTIPLICITY


164  ! (*
this
 =
Ÿhî
);

166  
	gÁl£
;

170 #i‡
EV_MULTIPLICITY


171 
boﬁ
 
	g›î©‹
 =(c⁄° 
EV_P
Ëc⁄° 
throw
 ()

173  
this
->
EV_AX
 =
EV_A
;

176 
boﬁ
 
	g›î©‹
 !(c⁄° 
EV_P
Ëc⁄° 
throw
 ()

178  (*
this
 =
EV_A
);

181 
›î©‹
 
	gev_lo›
 * (Ëc⁄° 
throw
 ()

183  
	gEV_AX
;

186 
›î©‹
 c⁄° 
	gev_lo›
 * (Ëc⁄° 
throw
 ()

188  
	gEV_AX
;

191 
boﬁ
 
is_deÁu…
 (Ëc⁄° 
throw
 ()

193  
	gEV_AX
 =
ev_deÁu…_lo›
 (0);

197 #i‡
EV_COMPAT3


198 
lo›
 (
Êags
 = 0)

200 
ev_run
 (
EV_AX_
 
Êags
);

203 
u∆o›
 (
how_t
 
how
 = 
ONE
Ë
throw
 ()

205 
ev_bªak
 (
EV_AX_
 
how
);

209 
run
 (
Êags
 = 0)

211 
ev_run
 (
EV_AX_
 
Êags
);

214 
bªak_lo›
 (
how_t
 
how
 = 
ONE
Ë
throw
 ()

216 
ev_bªak
 (
EV_AX_
 
how
);

219 
po°_f‹k
 (Ë
throw
 ()

221 
ev_lo›_f‹k
 (
EV_AX
);

224 
backíd
 (Ëc⁄° 
throw
 ()

226  
ev_backíd
 (
EV_AX
);

229 
t°amp
 
now
 (Ëc⁄° 
throw
 ()

231  
ev_now
 (
EV_AX
);

234 
ªf
 (Ë
throw
 ()

236 
ev_ªf
 (
EV_AX
);

239 
uƒef
 (Ë
throw
 ()

241 
ev_uƒef
 (
EV_AX
);

244 #i‡
EV_FEATURE_API


245 
ôî©i⁄
 (Ëc⁄° 
throw
 ()

247  
ev_ôî©i⁄
 (
EV_AX
);

250 
dïth
 (Ëc⁄° 
throw
 ()

252  
ev_dïth
 (
EV_AX
);

255 
£t_io_cﬁÀ˘_öãrvÆ
 (
t°amp
 
öãrvÆ
Ë
throw
 ()

257 
ev_£t_io_cﬁÀ˘_öãrvÆ
 (
EV_AX_
 
öãrvÆ
);

260 
£t_timeout_cﬁÀ˘_öãrvÆ
 (
t°amp
 
öãrvÆ
Ë
throw
 ()

262 
ev_£t_timeout_cﬁÀ˘_öãrvÆ
 (
EV_AX_
 
öãrvÆ
);

267 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, (*
cb
)(, *), *
¨g
 = 0Ë
throw
 ()

269 
ev_⁄˚
 (
EV_AX_
 
fd
, 
evíts
, 
timeout
, 
cb
, 
¨g
);

273 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

274 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, 
K
 *
obje˘
Ë
throw
 ()

276 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
mëhod_thunk
<
K
, 
mëhod
>, 
obje˘
);

280 
	gãm∂©e
<
˛ass
 
	gK
>

281 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, 
K
 *
obje˘
Ë
throw
 ()

283 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
mëhod_thunk
<
K
, &K::
›î©‹
 ()>, 
obje˘
);

286 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

287 
mëhod_thunk
 (
ªvíts
, *
¨g
)

289 (
	g°©ic_ˇ°
<
	gK
 *>(
	g¨g
)->*
	gmëhod
)

290 (
	gªvíts
);

294 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

295 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
, 
K
 *
obje˘
Ë
throw
 ()

297 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
mëhod_nﬂrgs_thunk
<
K
, 
mëhod
>, 
obje˘
);

300 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

301 
mëhod_nﬂrgs_thunk
 (
ªvíts
, *
¨g
)

303 (
	g°©ic_ˇ°
<
	gK
 *>(
	g¨g
)->*
	gmëhod
)

308 
	gãm∂©e
<(*
	gcb
)()>

309 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
Ë
throw
 ()

311 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
sim∂î_func_thunk
<
cb
>);

314 
	gãm∂©e
<(*
	gcb
)()>

315 
sim∂î_func_thunk
 (
ªvíts
, *
¨g
)

317 (*
	gcb
)

318 (
	gªvíts
);

322 
	gãm∂©e
<(*
	gcb
)()>

323 
⁄˚
 (
fd
, 
evíts
, 
t°amp
 
timeout
Ë
throw
 ()

325 
⁄˚
 (
fd
, 
evíts
, 
timeout
, 
sim∂e°_func_thunk
<
cb
>);

328 
	gãm∂©e
<(*
	gcb
)()>

329 
sim∂e°_func_thunk
 (
ªvíts
, *
¨g
)

331 (*
	gcb
)

335 
„ed_fd_evít
 (
fd
, 
ªvíts
Ë
throw
 ()

337 
ev_„ed_fd_evít
 (
EV_AX_
 
fd
, 
ªvíts
);

340 
„ed_sig«l_evít
 (
signum
Ë
throw
 ()

342 
ev_„ed_sig«l_evít
 (
EV_AX_
 
signum
);

345 #i‡
EV_MULTIPLICITY


346 
ev_lo›
* 
	gEV_AX
;

351 #i‡
EV_MULTIPLICITY


352 
	gdy«mic_lo›
 : 
lo›_ªf


355 
dy«mic_lo›
 (
Êags
 = 
AUTO
Ë
throw
 (
bad_lo›
)

356 : 
lo›_ªf
 (
ev_lo›_√w
 (
Êags
))

358 i‡(!
EV_AX
)

359 
throw
 
bad_lo›
 ();

362 ~
dy«mic_lo›
 (Ë
throw
 ()

364 
ev_lo›_de°roy
 (
EV_AX
);

365 
	gEV_AX
 = 0;

368 
	g¥iv©e
:

370 
dy«mic_lo›
 (const dynamic_loop &);

372 
	gdy«mic_lo›
 & 
	g›î©‹
(c⁄° 
dy«mic_lo›
 &);

377 
	gdeÁu…_lo›
 : 
lo›_ªf


379 
deÁu…_lo›
 (
Êags
 = 
AUTO
Ë
throw
 (
bad_lo›
)

380 #i‡
EV_MULTIPLICITY


381 : 
lo›_ªf
 (
ev_deÁu…_lo›
 (
Êags
))

385 #i‡
EV_MULTIPLICITY


386 !
EV_AX


388 !
ev_deÁu…_lo›
 (
Êags
)

391 
throw
 
bad_lo›
 ();

394 
	g¥iv©e
:

395 
deÁu…_lo›
 (const default_loop &);

396 
	gdeÁu…_lo›
 &
	g›î©‹
 = (c⁄° 
deÁu…_lo›
 &);

399 
ölöe
 
lo›_ªf
 
gë_deÁu…_lo›
 (Ë
throw
 ()

401 #i‡
EV_MULTIPLICITY


402  
ev_deÁu…_lo›
 (0);

404  
lo›_ªf
 ();

408 #unde‡
EV_AX


409 #unde‡
EV_AX_


411 #unde‡
EV_PX


412 #unde‡
EV_PX_


413 #i‡
EV_MULTIPLICITY


414 
	#EV_PX
 
lo›_ªf
 
EV_A


	)

415 
	#EV_PX_
 
lo›_ªf
 
EV_A_


	)

417 
	#EV_PX


	)

418 
	#EV_PX_


	)

421 
	gãm∂©e
<
˛ass
 
	gev_w©chî
, cœs†
	gw©chî
>

422 
	gba£
 : 
ev_w©chî


424 #i‡
EV_MULTIPLICITY


425 
EV_PX
;

428 
£t
 (
EV_P
Ë
throw
 ()

430 
	gthis
->
	gEV_A
 = 
EV_A
;

434 
ba£
 (
EV_PX
Ë
throw
 ()

435 #i‡
EV_MULTIPLICITY


436 : 
EV_A
 (EV_A)

439 
ev_öô
 (
this
, 0);

442 
£t_
 (c⁄° *
d©a
, (*
cb
)(
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)Ë
throw
 ()

444 
	gthis
->
	gd©a
 = (*)
d©a
;

445 
ev_£t_cb
 (
°©ic_ˇ°
<
ev_w©chî
 *>(
this
), 
cb
);

449 
	gãm∂©e
<(*
	gfun˘i⁄
)(
	gw©chî
 &
	gw
, )>

450 
£t
 (*
d©a
 = 0Ë
throw
 ()

452 
£t_
 (
d©a
, 
fun˘i⁄_thunk
<
fun˘i⁄
>);

455 
	gãm∂©e
<(*
	gfun˘i⁄
)(
	gw©chî
 &
	gw
, )>

456 
fun˘i⁄_thunk
 (
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)

458 
	gfun˘i⁄


459 (*
	g°©ic_ˇ°
<
	gw©chî
 *>(
	gw
), 
	gªvíts
);

463 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)(
w©chî
 &
w
, )>

464 
£t
 (
K
 *
obje˘
Ë
throw
 ()

466 
£t_
 (
obje˘
, 
mëhod_thunk
<
K
, 
mëhod
>);

470 
	gãm∂©e
<
˛ass
 
	gK
>

471 
£t
 (
K
 *
obje˘
Ë
throw
 ()

473 
£t_
 (
obje˘
, 
mëhod_thunk
<
K
, &K::
›î©‹
 ()>);

476 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)(
w©chî
 &
w
, )>

477 
mëhod_thunk
 (
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)

479 (
	g°©ic_ˇ°
<
	gK
 *>(
	gw
->
	gd©a
)->*
	gmëhod
)

480 (*
	g°©ic_ˇ°
<
	gw©chî
 *>(
	gw
), 
	gªvíts
);

484 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

485 
£t
 (
K
 *
obje˘
Ë
throw
 ()

487 
£t_
 (
obje˘
, 
mëhod_nﬂrgs_thunk
<
K
, 
mëhod
>);

490 
	gãm∂©e
<
˛ass
 
	gK
, (K::*
mëhod
)()>

491 
mëhod_nﬂrgs_thunk
 (
EV_P_
 
ev_w©chî
 *
w
, 
ªvíts
)

493 (
	g°©ic_ˇ°
<
	gK
 *>(
	gw
->
	gd©a
)->*
	gmëhod
)

497 
›î©‹
 ()(
	gevíts
 = 
EV_UNDEF
)

500 
ev_cb
 (
°©ic_ˇ°
<
ev_w©chî
 *>(
this
))

501 (
°©ic_ˇ°
<
ev_w©chî
 *>(
this
), 
evíts
);

504 
boﬁ
 
is_a˘ive
 (Ëc⁄° 
throw
 ()

506  
ev_is_a˘ive
 (
°©ic_ˇ°
<c⁄° 
ev_w©chî
 *>(
this
));

509 
boﬁ
 
is_≥ndög
 (Ëc⁄° 
throw
 ()

511  
ev_is_≥ndög
 (
°©ic_ˇ°
<c⁄° 
ev_w©chî
 *>(
this
));

514 
„ed_evít
 (
ªvíts
Ë
throw
 ()

516 
ev_„ed_evít
 (
EV_A_
 
°©ic_ˇ°
<
ev_w©chî
 *>(
this
), 
ªvíts
);

520 
ölöe
 
t°amp
 
now
 (
EV_P
Ë
throw
 ()

522  
ev_now
 (
EV_A
);

525 
ölöe
 
dñay
 (
t°amp
 
öãrvÆ
Ë
throw
 ()

527 
ev_¶ìp
 (
öãrvÆ
);

530 
ölöe
 
vîsi⁄_maj‹
 (Ë
throw
 ()

532  
ev_vîsi⁄_maj‹
 ();

535 
ölöe
 
vîsi⁄_mö‹
 (Ë
throw
 ()

537  
ev_vîsi⁄_mö‹
 ();

540 
ölöe
 
suµ‹ãd_backíds
 (Ë
throw
 ()

542  
ev_suµ‹ãd_backíds
 ();

545 
ölöe
 
ªcommíded_backíds
 (Ë
throw
 ()

547  
ev_ªcommíded_backíds
 ();

550 
ölöe
 
embeddabÀ_backíds
 (Ë
throw
 ()

552  
ev_embeddabÀ_backíds
 ();

555 
ölöe
 
£t_Æloˇt‹
 (*(*
cb
)(*
±r
, 
size
Ë
throw
 ())Åhrow ()

557 
ev_£t_Æloˇt‹
 (
cb
);

560 
ölöe
 
£t_sy£º_cb
 ((*
cb
)(c⁄° *
msg
Ë
throw
 ())Åhrow ()

562 
ev_£t_sy£º_cb
 (
cb
);

565 #i‡
EV_MULTIPLICITY


566 
	#EV_CONSTRUCT
(
˝p°em
,
c°em
) \

567 (
EV_PX
 = 
	`gë_deÁu…_lo›
 ()Ë
	`throw
 () \

568 : 
ba£
<
ev_
 ## 
c°em
, 
˝p°em
> (
EV_A
) \

570 }

	)

572 
	#EV_CONSTRUCT
(
˝p°em
,
c°em
) \

573 (Ë
	`throw
 () \

575 }

	)

580 
	#EV_BEGIN_WATCHER
(
˝p°em
,
c°em
) \

582 
˝p°em
 : 
ba£
<
ev_
 ## 
c°em
, cppstem> \

584 
	`°¨t
 (Ë
	`throw
 () \

586 
ev_
 ## 
c°em
 ## 
	`_°¨t
 (
EV_A_
 
°©ic_ˇ°
<ev_ ## c°em *>(
this
)); \

589 
	`°›
 (Ë
	`throw
 () \

591 
ev_
 ## 
c°em
 ## 
	`_°›
 (
EV_A_
 
°©ic_ˇ°
<ev_ ## c°em *>(
this
)); \

594 
˝p°em
 
	`EV_CONSTRUCT
(˝p°em,
c°em
) \

596 ~
	`˝p°em
 (Ë
	`throw
 () \

598 
	`°›
 (); \

601 
usög
 
ba£
<
ev_
 ## 
c°em
, 
˝p°em
>::
£t
; \

603 
¥iv©e
: \

605 
	`˝p°em
 (c⁄° 
˝p°em
 &
o
); \

607 
˝p°em
 &
›î©‹
 =(c⁄° cµ°em &
o
); \

609 
public
:

	)

611 
	#EV_END_WATCHER
(
˝p°em
,
c°em
) \

612 };

	)

614 
EV_BEGIN_WATCHER
 (
io
, io)

615 
£t
 (
fd
, 
evíts
Ë
throw
 ()

617 
	ga˘ive
 = 
is_a˘ive
 ();

618 i‡(
	ga˘ive
Ë
°›
 ();

619 
ev_io_£t
 (
°©ic_ˇ°
<
ev_io
 *>(
this
), 
fd
, 
evíts
);

620 i‡(
	ga˘ive
Ë
°¨t
 ();

623 
£t
 (
evíts
Ë
throw
 ()

625 
	ga˘ive
 = 
is_a˘ive
 ();

626 i‡(
	ga˘ive
Ë
°›
 ();

627 
ev_io_£t
 (
°©ic_ˇ°
<
ev_io
 *>(
this
), 
fd
, 
evíts
);

628 i‡(
	ga˘ive
Ë
°¨t
 ();

631 
°¨t
 (
fd
, 
evíts
Ë
throw
 ()

633 
£t
 (
fd
, 
evíts
);

634 
°¨t
 ();

636 
EV_END_WATCHER
 (
io
, io)

638 
EV_BEGIN_WATCHER
 (
timî
,Åimer)

639 
£t
 (
ev_t°amp
 
a·î
,Év_t°am∞
ª≥©
 = 0.Ë
throw
 ()

641 
a˘ive
 = 
is_a˘ive
 ();

642 i‡(
	ga˘ive
Ë
°›
 ();

643 
ev_timî_£t
 (
°©ic_ˇ°
<
ev_timî
 *>(
this
), 
a·î
, 
ª≥©
);

644 i‡(
	ga˘ive
Ë
°¨t
 ();

647 
°¨t
 (
ev_t°amp
 
a·î
,Év_t°am∞
ª≥©
 = 0.Ë
throw
 ()

649 
£t
 (
a·î
, 
ª≥©
);

650 
°¨t
 ();

653 
agaö
 (Ë
throw
 ()

655 
ev_timî_agaö
 (
EV_A_
 
°©ic_ˇ°
<
ev_timî
 *>(
this
));

658 
ev_t°amp
 
ªmaöög
 ()

660  
ev_timî_ªmaöög
 (
EV_A_
 
°©ic_ˇ°
<
ev_timî
 *>(
this
));

662 
EV_END_WATCHER
 (
timî
,Åimer)

664 #i‡
EV_PERIODIC_ENABLE


665 
EV_BEGIN_WATCHER
 (
≥riodic
,Öeriodic)

666 
£t
 (
ev_t°amp
 
©
,Év_t°am∞
öãrvÆ
 = 0.Ë
throw
 ()

668 
a˘ive
 = 
is_a˘ive
 ();

669 i‡(
	ga˘ive
Ë
°›
 ();

670 
ev_≥riodic_£t
 (
°©ic_ˇ°
<
ev_≥riodic
 *>(
this
), 
©
, 
öãrvÆ
, 0);

671 i‡(
	ga˘ive
Ë
°¨t
 ();

674 
°¨t
 (
ev_t°amp
 
©
,Év_t°am∞
öãrvÆ
 = 0.Ë
throw
 ()

676 
£t
 (
©
, 
öãrvÆ
);

677 
°¨t
 ();

680 
agaö
 (Ë
throw
 ()

682 
ev_≥riodic_agaö
 (
EV_A_
 
°©ic_ˇ°
<
ev_≥riodic
 *>(
this
));

684 
EV_END_WATCHER
 (
≥riodic
,Öeriodic)

687 #i‡
EV_SIGNAL_ENABLE


688 
EV_BEGIN_WATCHER
 (
sig
, 
sig«l
)

689 
£t
 (
signum
Ë
throw
 ()

691 
	ga˘ive
 = 
is_a˘ive
 ();

692 i‡(
	ga˘ive
Ë
°›
 ();

693 
ev_sig«l_£t
 (
°©ic_ˇ°
<
ev_sig«l
 *>(
this
), 
signum
);

694 i‡(
	ga˘ive
Ë
°¨t
 ();

697 
°¨t
 (
signum
Ë
throw
 ()

699 
£t
 (
signum
);

700 
°¨t
 ();

702 
EV_END_WATCHER
 (
sig
, 
sig«l
)

705 #i‡
EV_CHILD_ENABLE


706 
EV_BEGIN_WATCHER
 (
chûd
, child)

707 
£t
 (
pid
, 
åa˚
 = 0Ë
throw
 ()

709 
a˘ive
 = 
is_a˘ive
 ();

710 i‡(
	ga˘ive
Ë
°›
 ();

711 
ev_chûd_£t
 (
°©ic_ˇ°
<
ev_chûd
 *>(
this
), 
pid
, 
åa˚
);

712 i‡(
	ga˘ive
Ë
°¨t
 ();

715 
°¨t
 (
pid
, 
åa˚
 = 0Ë
throw
 ()

717 
£t
 (
pid
, 
åa˚
);

718 
°¨t
 ();

720 
EV_END_WATCHER
 (
chûd
, child)

723 #i‡
EV_STAT_ENABLE


724 
EV_BEGIN_WATCHER
 (
°©
, stat)

725 
£t
 (c⁄° *
∑th
, 
ev_t°amp
 
öãrvÆ
 = 0.Ë
throw
 ()

727 
a˘ive
 = 
is_a˘ive
 ();

728 i‡(
	ga˘ive
Ë
°›
 ();

729 
ev_°©_£t
 (
°©ic_ˇ°
<
ev_°©
 *>(
this
), 
∑th
, 
öãrvÆ
);

730 i‡(
	ga˘ive
Ë
°¨t
 ();

733 
°¨t
 (c⁄° *
∑th
, 
ev_t°amp
 
öãrvÆ
 = 0.Ë
throw
 ()

735 
°›
 ();

736 
£t
 (
∑th
, 
öãrvÆ
);

737 
°¨t
 ();

740 
upd©e
 (Ë
throw
 ()

742 
ev_°©_°©
 (
EV_A_
 
°©ic_ˇ°
<
ev_°©
 *>(
this
));

744 
EV_END_WATCHER
 (
°©
, stat)

747 #i‡
EV_IDLE_ENABLE


748 
EV_BEGIN_WATCHER
 (
idÀ
, idle)

749 
£t
 (Ë
throw
 () { }

750 
EV_END_WATCHER
 (
idÀ
, idle)

753 #i‡
EV_PREPARE_ENABLE


754 
EV_BEGIN_WATCHER
 (
¥ï¨e
,Örepare)

755 
£t
 (Ë
throw
 () { }

756 
EV_END_WATCHER
 (
¥ï¨e
,Örepare)

759 #i‡
EV_CHECK_ENABLE


760 
EV_BEGIN_WATCHER
 (
check
, check)

761 
£t
 (Ë
throw
 () { }

762 
EV_END_WATCHER
 (
check
, check)

765 #i‡
EV_EMBED_ENABLE


766 
EV_BEGIN_WATCHER
 (
embed
,Émbed)

767 
£t_embed
 (
ev_lo›
 *
embedded_lo›
Ë
throw
 ()

769 
	ga˘ive
 = 
is_a˘ive
 ();

770 i‡(
	ga˘ive
Ë
°›
 ();

771 
ev_embed_£t
 (
°©ic_ˇ°
<
ev_embed
 *>(
this
), 
embedded_lo›
);

772 i‡(
	ga˘ive
Ë
°¨t
 ();

775 
°¨t
 (
ev_lo›
 *
embedded_lo›
Ë
throw
 ()

777 
£t
 (
embedded_lo›
);

778 
°¨t
 ();

781 
swìp
 ()

783 
ev_embed_swìp
 (
EV_A_
 
°©ic_ˇ°
<
ev_embed
 *>(
this
));

785 
EV_END_WATCHER
 (
embed
,Émbed)

788 #i‡
EV_FORK_ENABLE


789 
EV_BEGIN_WATCHER
 (
f‹k
, fork)

790 
£t
 (Ë
throw
 () { }

791 
EV_END_WATCHER
 (
f‹k
, fork)

794 #i‡
EV_ASYNC_ENABLE


795 
EV_BEGIN_WATCHER
 (
async
,ásync)

796 
£nd
 (Ë
throw
 ()

798 
ev_async_£nd
 (
EV_A_
 
°©ic_ˇ°
<
ev_async
 *>(
this
));

801 
boﬁ
 
async_≥ndög
 (Ë
throw
 ()

803  
ev_async_≥ndög
 (
°©ic_ˇ°
<
ev_async
 *>(
this
));

805 
EV_END_WATCHER
 (
async
,ásync)

808 #unde‡
EV_PX


809 #unde‡
EV_PX_


810 #unde‡
EV_CONSTRUCT


811 #unde‡
EV_BEGIN_WATCHER


812 #unde‡
EV_END_WATCHER


	@libs/libev-4.15/ev.c

41 #i‚de‡
EV_STANDALONE


42 #ifde‡
EV_CONFIG_H


43 #ö˛udê
EV_CONFIG_H


45 
	~"c⁄fig.h
"

48 #i‡
HAVE_FLOOR


49 #i‚de‡
EV_USE_FLOOR


50 
	#EV_USE_FLOOR
 1

	)

54 #i‡
HAVE_CLOCK_SYSCALL


55 #i‚de‡
EV_USE_CLOCK_SYSCALL


56 
	#EV_USE_CLOCK_SYSCALL
 1

	)

57 #i‚de‡
EV_USE_REALTIME


58 
	#EV_USE_REALTIME
 0

	)

60 #i‚de‡
EV_USE_MONOTONIC


61 
	#EV_USE_MONOTONIC
 1

	)

64 #ñi‡!
deföed
 
EV_USE_CLOCK_SYSCALL


65 
	#EV_USE_CLOCK_SYSCALL
 0

	)

68 #i‡
HAVE_CLOCK_GETTIME


69 #i‚de‡
EV_USE_MONOTONIC


70 
	#EV_USE_MONOTONIC
 1

	)

72 #i‚de‡
EV_USE_REALTIME


73 
	#EV_USE_REALTIME
 0

	)

76 #i‚de‡
EV_USE_MONOTONIC


77 
	#EV_USE_MONOTONIC
 0

	)

79 #i‚de‡
EV_USE_REALTIME


80 
	#EV_USE_REALTIME
 0

	)

84 #i‡
HAVE_NANOSLEEP


85 #i‚de‡
EV_USE_NANOSLEEP


86 
	#EV_USE_NANOSLEEP
 
EV_FEATURE_OS


	)

89 #unde‡
EV_USE_NANOSLEEP


90 
	#EV_USE_NANOSLEEP
 0

	)

93 #i‡
HAVE_SELECT
 && 
HAVE_SYS_SELECT_H


94 #i‚de‡
EV_USE_SELECT


95 
	#EV_USE_SELECT
 
EV_FEATURE_BACKENDS


	)

98 #unde‡
EV_USE_SELECT


99 
	#EV_USE_SELECT
 0

	)

102 #i‡
HAVE_POLL
 && 
HAVE_POLL_H


103 #i‚de‡
EV_USE_POLL


104 
	#EV_USE_POLL
 
EV_FEATURE_BACKENDS


	)

107 #unde‡
EV_USE_POLL


108 
	#EV_USE_POLL
 0

	)

111 #i‡
HAVE_EPOLL_CTL
 && 
HAVE_SYS_EPOLL_H


112 #i‚de‡
EV_USE_EPOLL


113 
	#EV_USE_EPOLL
 
EV_FEATURE_BACKENDS


	)

116 #unde‡
EV_USE_EPOLL


117 
	#EV_USE_EPOLL
 0

	)

120 #i‡
HAVE_KQUEUE
 && 
HAVE_SYS_EVENT_H


121 #i‚de‡
EV_USE_KQUEUE


122 
	#EV_USE_KQUEUE
 
EV_FEATURE_BACKENDS


	)

125 #unde‡
EV_USE_KQUEUE


126 
	#EV_USE_KQUEUE
 0

	)

129 #i‡
HAVE_PORT_H
 && 
HAVE_PORT_CREATE


130 #i‚de‡
EV_USE_PORT


131 
	#EV_USE_PORT
 
EV_FEATURE_BACKENDS


	)

134 #unde‡
EV_USE_PORT


135 
	#EV_USE_PORT
 0

	)

138 #i‡
HAVE_INOTIFY_INIT
 && 
HAVE_SYS_INOTIFY_H


139 #i‚de‡
EV_USE_INOTIFY


140 
	#EV_USE_INOTIFY
 
EV_FEATURE_OS


	)

143 #unde‡
EV_USE_INOTIFY


144 
	#EV_USE_INOTIFY
 0

	)

147 #i‡
HAVE_SIGNALFD
 && 
HAVE_SYS_SIGNALFD_H


148 #i‚de‡
EV_USE_SIGNALFD


149 
	#EV_USE_SIGNALFD
 
EV_FEATURE_OS


	)

152 #unde‡
EV_USE_SIGNALFD


153 
	#EV_USE_SIGNALFD
 0

	)

156 #i‡
HAVE_EVENTFD


157 #i‚de‡
EV_USE_EVENTFD


158 
	#EV_USE_EVENTFD
 
EV_FEATURE_OS


	)

161 #unde‡
EV_USE_EVENTFD


162 
	#EV_USE_EVENTFD
 0

	)

167 
	~<°dlib.h
>

168 
	~<°rög.h
>

169 
	~<f˙é.h
>

170 
	~<°ddef.h
>

172 
	~<°dio.h
>

174 
	~<as£π.h
>

175 
	~<î∫o.h
>

176 
	~<sys/ty≥s.h
>

177 
	~<time.h
>

178 
	~<limôs.h
>

180 
	~<sig«l.h
>

182 #ifde‡
EV_H


183 #ö˛udê
EV_H


185 
	~"ev.h
"

188 #i‡
EV_NO_THREADS


189 #unde‡
EV_NO_SMP


190 
	#EV_NO_SMP
 1

	)

191 #unde‡
ECB_NO_THREADS


192 
	#ECB_NO_THREADS
 1

	)

194 #i‡
EV_NO_SMP


195 #unde‡
EV_NO_SMP


196 
	#ECB_NO_SMP
 1

	)

199 #i‚de‡
_WIN32


200 
	~<sys/time.h
>

201 
	~<sys/waô.h
>

202 
	~<uni°d.h
>

204 
	~<io.h
>

205 
	#WIN32_LEAN_AND_MEAN


	)

206 
	~<wösock2.h
>

207 
	~<wödows.h
>

208 #i‚de‡
EV_SELECT_IS_WINSOCKET


209 
	#EV_SELECT_IS_WINSOCKET
 1

	)

211 #unde‡
EV_AVOID_STDIO


220 
	#_DARWIN_UNLIMITED_SELECT
 1

	)

225 #i‡
deföed
 
EV_NSIG


227 #ñi‡
deföed
 
NSIG


228 
	#EV_NSIG
 (
NSIG
)

	)

229 #ñi‡
deföed
 
_NSIG


230 
	#EV_NSIG
 (
_NSIG
)

	)

231 #ñi‡
deföed
 
SIGMAX


232 
	#EV_NSIG
 (
SIGMAX
+1)

	)

233 #ñi‡
deföed
 
SIG_MAX


234 
	#EV_NSIG
 (
SIG_MAX
+1)

	)

235 #ñi‡
deföed
 
_SIG_MAX


236 
	#EV_NSIG
 (
_SIG_MAX
+1)

	)

237 #ñi‡
deföed
 
MAXSIG


238 
	#EV_NSIG
 (
MAXSIG
+1)

	)

239 #ñi‡
deföed
 
MAX_SIG


240 
	#EV_NSIG
 (
MAX_SIG
+1)

	)

241 #ñi‡
deföed
 
SIGARRAYSIZE


242 
	#EV_NSIG
 (
SIGARRAYSIZE
Ë

	)

243 #ñi‡
deföed
 
_sys_nsig


244 
	#EV_NSIG
 (
_sys_nsig
Ë

	)

249 
	#EV_NSIG
 65

	)

252 #i‚de‡
EV_USE_FLOOR


253 
	#EV_USE_FLOOR
 0

	)

256 #i‚de‡
EV_USE_CLOCK_SYSCALL


257 #i‡
__löux
 && 
__GLIBC__
 >= 2

258 
	#EV_USE_CLOCK_SYSCALL
 
EV_FEATURE_OS


	)

260 
	#EV_USE_CLOCK_SYSCALL
 0

	)

264 #i‚de‡
EV_USE_MONOTONIC


265 #i‡
deföed
 
_POSIX_MONOTONIC_CLOCK
 && _POSIX_MONOTONIC_CLOCK >= 0

266 
	#EV_USE_MONOTONIC
 
EV_FEATURE_OS


	)

268 
	#EV_USE_MONOTONIC
 0

	)

272 #i‚de‡
EV_USE_REALTIME


273 
	#EV_USE_REALTIME
 !
EV_USE_CLOCK_SYSCALL


	)

276 #i‚de‡
EV_USE_NANOSLEEP


277 #i‡
_POSIX_C_SOURCE
 >= 199309L

278 
	#EV_USE_NANOSLEEP
 
EV_FEATURE_OS


	)

280 
	#EV_USE_NANOSLEEP
 0

	)

284 #i‚de‡
EV_USE_SELECT


285 
	#EV_USE_SELECT
 
EV_FEATURE_BACKENDS


	)

288 #i‚de‡
EV_USE_POLL


289 #ifde‡
_WIN32


290 
	#EV_USE_POLL
 0

	)

292 
	#EV_USE_POLL
 
EV_FEATURE_BACKENDS


	)

296 #i‚de‡
EV_USE_EPOLL


297 #i‡
__löux
 && (
__GLIBC__
 > 2 || (__GLIBC__ =2 && 
__GLIBC_MINOR__
 >= 4))

298 
	#EV_USE_EPOLL
 
EV_FEATURE_BACKENDS


	)

300 
	#EV_USE_EPOLL
 0

	)

304 #i‚de‡
EV_USE_KQUEUE


305 
	#EV_USE_KQUEUE
 0

	)

308 #i‚de‡
EV_USE_PORT


309 
	#EV_USE_PORT
 0

	)

312 #i‚de‡
EV_USE_INOTIFY


313 #i‡
__löux
 && (
__GLIBC__
 > 2 || (__GLIBC__ =2 && 
__GLIBC_MINOR__
 >= 4))

314 
	#EV_USE_INOTIFY
 
EV_FEATURE_OS


	)

316 
	#EV_USE_INOTIFY
 0

	)

320 #i‚de‡
EV_PID_HASHSIZE


321 
	#EV_PID_HASHSIZE
 
EV_FEATURE_DATA
 ? 16 : 1

	)

324 #i‚de‡
EV_INOTIFY_HASHSIZE


325 
	#EV_INOTIFY_HASHSIZE
 
EV_FEATURE_DATA
 ? 16 : 1

	)

328 #i‚de‡
EV_USE_EVENTFD


329 #i‡
__löux
 && (
__GLIBC__
 > 2 || (__GLIBC__ =2 && 
__GLIBC_MINOR__
 >= 7))

330 
	#EV_USE_EVENTFD
 
EV_FEATURE_OS


	)

332 
	#EV_USE_EVENTFD
 0

	)

336 #i‚de‡
EV_USE_SIGNALFD


337 #i‡
__löux
 && (
__GLIBC__
 > 2 || (__GLIBC__ =2 && 
__GLIBC_MINOR__
 >= 7))

338 
	#EV_USE_SIGNALFD
 
EV_FEATURE_OS


	)

340 
	#EV_USE_SIGNALFD
 0

	)

345 
	#EV_VERIFY
 3

	)

346 
	#EV_USE_4HEAP
 1

	)

347 
	#EV_HEAP_CACHE_AT
 1

	)

350 #i‚de‡
EV_VERIFY


351 
	#EV_VERIFY
 (
EV_FEATURE_API
 ? 1 : 0)

	)

354 #i‚de‡
EV_USE_4HEAP


355 
	#EV_USE_4HEAP
 
EV_FEATURE_DATA


	)

358 #i‚de‡
EV_HEAP_CACHE_AT


359 
	#EV_HEAP_CACHE_AT
 
EV_FEATURE_DATA


	)

362 #ifde‡
ANDROID


364 #unde‡
EV_USE_SELECT


365 
	#EV_USE_SELECT
 0

	)

367 #unde‡
EV_USE_CLOCK_SYSCALL


368 
	#EV_USE_CLOCK_SYSCALL
 0

	)

372 #ifde‡
_AIX


374 #unde‡
EV_USE_POLL


375 
	#EV_USE_POLL
 0

	)

380 #i‡
EV_USE_CLOCK_SYSCALL


381 
	~<sys/sysˇŒ.h
>

382 #ifde‡
SYS_˛ock_gëtime


383 
	#˛ock_gëtime
(
id
, 
ts
Ë
	`sysˇŒ
 (
SYS_˛ock_gëtime
, (id), (ts))

	)

384 #unde‡
EV_USE_MONOTONIC


385 
	#EV_USE_MONOTONIC
 1

	)

387 #unde‡
EV_USE_CLOCK_SYSCALL


388 
	#EV_USE_CLOCK_SYSCALL
 0

	)

394 #i‚de‡
CLOCK_MONOTONIC


395 #unde‡
EV_USE_MONOTONIC


396 
	#EV_USE_MONOTONIC
 0

	)

399 #i‚de‡
CLOCK_REALTIME


400 #unde‡
EV_USE_REALTIME


401 
	#EV_USE_REALTIME
 0

	)

404 #i‡!
EV_STAT_ENABLE


405 #unde‡
EV_USE_INOTIFY


406 
	#EV_USE_INOTIFY
 0

	)

409 #i‡!
EV_USE_NANOSLEEP


411 #i‡!
deföed
 
_WIN32
 && !deföed 
__hpux


412 
	~<sys/£À˘.h
>

416 #i‡
EV_USE_INOTIFY


417 
	~<sys/°©fs.h
>

418 
	~<sys/öŸify.h
>

420 #i‚de‡
IN_DONT_FOLLOW


421 #unde‡
EV_USE_INOTIFY


422 
	#EV_USE_INOTIFY
 0

	)

426 #i‡
EV_USE_EVENTFD


428 
	~<°döt.h
>

429 #i‚de‡
EFD_NONBLOCK


430 
	#EFD_NONBLOCK
 
O_NONBLOCK


	)

432 #i‚de‡
EFD_CLOEXEC


433 #ifde‡
O_CLOEXEC


434 
	#EFD_CLOEXEC
 
O_CLOEXEC


	)

436 
	#EFD_CLOEXEC
 02000000

	)

439 
EV_CPP
("C"Ë(
evítfd
Ë(
öôvÆ
, 
Êags
);

442 #i‡
EV_USE_SIGNALFD


444 
	~<°döt.h
>

445 #i‚de‡
SFD_NONBLOCK


446 
	#SFD_NONBLOCK
 
O_NONBLOCK


	)

448 #i‚de‡
SFD_CLOEXEC


449 #ifde‡
O_CLOEXEC


450 
	#SFD_CLOEXEC
 
O_CLOEXEC


	)

452 
	#SFD_CLOEXEC
 02000000

	)

455 
	`EV_CPP
 ("C"Ë
	`sig«lfd
 (
fd
, c⁄° 
sig£t_t
 *
mask
, 
Êags
);

457 
	ssig«lfd_sigöfo


459 
uöt32_t
 
ssi_signo
;

460 
∑d
[128 -  (
uöt32_t
)];

466 #i‡
EV_VERIFY
 >= 3

467 
	#EV_FREQUENT_CHECK
 
	`ev_vîify
 (
EV_A
)

	)

469 
	#EV_FREQUENT_CHECK
 dÿ{ 
	}
} 0)

	)

476 
	#MIN_INTERVAL
 0.0001220703125

	)

479 
	#MIN_TIMEJUMP
 1.

	)

480 
	#MAX_BLOCKTIME
 59.743

	)

482 
	#EV_TV_SET
(
tv
,
t
Ëdÿ{Åv.
tv_£c
 = (È;Åv.
tv_u£c
 = ()(— -Åv.tv_£cË* 1e6); } 0)

	)

483 
	#EV_TS_SET
(
ts
,
t
Ëdÿ{Ås.
tv_£c
 = (È;Ås.
tv_n£c
 = ()(— -Ås.tv_£cË* 1e9); } 0)

	)

516 #i‚de‡
ECB_H


517 
	#ECB_H


	)

520 
	#ECB_VERSION
 0x00010003

	)

522 #ifde‡
_WIN32


523 sig√d 
	töt8_t
;

524 
	tuöt8_t
;

525 sig√d 
	töt16_t
;

526 
	tuöt16_t
;

527 sig√d 
	töt32_t
;

528 
	tuöt32_t
;

529 #i‡
__GNUC__


530 sig√d 
	töt64_t
;

531 
	tuöt64_t
;

533 sig√d 
	t__öt64
 
	töt64_t
;

534 
	t__öt64
 
	tuöt64_t
;

536 #ifde‡
_WIN64


537 
	#ECB_PTRSIZE
 8

	)

538 
uöt64_t
 
	tuöçå_t
;

539 
öt64_t
 
	töçå_t
;

541 
	#ECB_PTRSIZE
 4

	)

542 
uöt32_t
 
	tuöçå_t
;

543 
öt32_t
 
	töçå_t
;

546 
	~<öây≥s.h
>

547 #i‡
UINTMAX_MAX
 > 0xffffffffU

548 
	#ECB_PTRSIZE
 8

	)

550 
	#ECB_PTRSIZE
 4

	)

555 #i‡
__x86_64
 || 
_M_AMD64


556 #i‡
__ILP32


557 
	#ECB_AMD64_X32
 1

	)

559 
	#ECB_AMD64
 1

	)

570 #i‚de‡
ECB_GCC_VERSION


571 #i‡!
deföed
 
__GNUC_MINOR__
 || deföed 
__INTEL_COMPILER
 || deföed 
__SUNPRO_C
 || deföed 
__SUNPRO_CC
 || deföed 
__Œvm__
 || deföed 
__˛™g__


572 
	#ECB_GCC_VERSION
(
maj‹
,
mö‹
Ë0

	)

574 
	#ECB_GCC_VERSION
(
maj‹
,
mö‹
Ë(
__GNUC__
 > (maj‹Ë|| (__GNUC__ =(maj‹Ë&& 
__GNUC_MINOR__
 >(mö‹)))

	)

578 
	#ECB_C
 (
__STDC__
+0Ë

	)

579 
	#ECB_C99
 (
__STDC_VERSION__
 >199901L)

	)

580 
	#ECB_C11
 (
__STDC_VERSION__
 >201112L)

	)

581 
	#ECB_CPP
 (
__˝lu•lus
+0)

	)

582 
	#ECB_CPP11
 (
__˝lu•lus
 >201103L)

	)

584 #i‡
ECB_CPP


585 
	#ECB_EXTERN_C
 "C"

	)

586 
	#ECB_EXTERN_C_BEG
 
ECB_EXTERN_C
 {

	)

587 
	#ECB_EXTERN_C_END
 }

	)

589 
	#ECB_EXTERN_C
 

	)

590 
	#ECB_EXTERN_C_BEG


	)

591 
	#ECB_EXTERN_C_END


	)

599 #i‡
ECB_NO_THREADS


600 
	#ECB_NO_SMP
 1

	)

603 #i‡
ECB_NO_SMP


604 
	#ECB_MEMORY_FENCE
 dÿ{ } 0)

	)

607 #i‚de‡
ECB_MEMORY_FENCE


608 #i‡
ECB_GCC_VERSION
(2,5Ë|| 
deföed
 
__INTEL_COMPILER
 || (
__Œvm__
 && 
__GNUC__
Ë|| 
__SUNPRO_C
 >0x5110 || 
__SUNPRO_CC
 >= 0x5110

609 #i‡
__i386
 || 
__i386__


610 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("lock; orb $0, -1(%%e•)" : : : "mem‹y")

	)

611 
	#ECB_MEMORY_FENCE_ACQUIRE
 
__asm__
 
	`__vﬁ©ûe__
 ("" : : : "mem‹y")

	)

612 
	#ECB_MEMORY_FENCE_RELEASE
 
__asm__
 
	`__vﬁ©ûe__
 ("")

	)

613 #ñi‡
__amd64
 || 
__amd64__
 || 
__x86_64
 || 
__x86_64__


614 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("m„n˚" : : : "mem‹y")

	)

615 
	#ECB_MEMORY_FENCE_ACQUIRE
 
__asm__
 
	`__vﬁ©ûe__
 ("" : : : "mem‹y")

	)

616 
	#ECB_MEMORY_FENCE_RELEASE
 
__asm__
 
	`__vﬁ©ûe__
 ("")

	)

617 #ñi‡
__powîpc__
 || 
__µc__
 || 
__powîpc64__
 || 
__µc64__


618 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("sync" : : : "mem‹y")

	)

619 #ñi‡
deföed
 
__ARM_ARCH_6__
 || deföed 
__ARM_ARCH_6J__
 \

620 || 
deföed
 
__ARM_ARCH_6K__
 || deföed 
__ARM_ARCH_6ZK__


621 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("m¸Ö15,0,%0,c7,c10,5" : : "r" (0Ë: "mem‹y")

	)

622 #ñi‡
deföed
 
__ARM_ARCH_7__
 || deföed 
__ARM_ARCH_7A__
 \

623 || 
deföed
 
__ARM_ARCH_7M__
 || deföed 
__ARM_ARCH_7R__


624 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("dmb" : : : "mem‹y")

	)

625 #ñi‡
__•¨c
 || 
__•¨c__


626 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("memb¨ #LﬂdSt‹ê| #LﬂdLﬂd | #St‹eSt‹ê| #St‹eLﬂd" : : : "mem‹y")

	)

627 
	#ECB_MEMORY_FENCE_ACQUIRE
 
__asm__
 
	`__vﬁ©ûe__
 ("memb¨ #LﬂdSt‹ê| #LﬂdLﬂd" : : : "mem‹y")

	)

628 
	#ECB_MEMORY_FENCE_RELEASE
 
__asm__
 
	`__vﬁ©ûe__
 ("memb¨ #LﬂdSt‹ê | #St‹eSt‹e")

	)

629 #ñi‡
deföed
 
__s390__
 || deföed 
__s390x__


630 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("b¸ 15,0" : : : "mem‹y")

	)

631 #ñi‡
deföed
 
__mùs__


632 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("sync" : : : "mem‹y")

	)

633 #ñi‡
deföed
 
__Æpha__


634 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("mb" : : : "mem‹y")

	)

635 #ñi‡
deföed
 
__hµa__


636 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("" : : : "mem‹y")

	)

637 
	#ECB_MEMORY_FENCE_RELEASE
 
__asm__
 
	`__vﬁ©ûe__
 ("")

	)

638 #ñi‡
deföed
 
__ü64__


639 
	#ECB_MEMORY_FENCE
 
__asm__
 
	`__vﬁ©ûe__
 ("mf" : : : "mem‹y")

	)

644 #i‚de‡
ECB_MEMORY_FENCE


645 #i‡
ECB_GCC_VERSION
(4,7)

647 
	#ECB_MEMORY_FENCE
 
	`__©omic_thªad_„n˚
 (
__ATOMIC_SEQ_CST
)

	)

658 #ñi‡
ECB_GCC_VERSION
(4,4Ë|| 
deföed
 
__INTEL_COMPILER
 || deföed 
__˛™g__


659 
	#ECB_MEMORY_FENCE
 
	`__sync_synchr⁄ize
 ()

	)

660 #ñi‡
_MSC_VER
 >= 1400

661 #¥agm®
öåösic
(
_RódB¨rõr
,
_WrôeB¨rõr
,
_RódWrôeB¨rõr
)

662 
	#ECB_MEMORY_FENCE
 
	`_RódWrôeB¨rõr
 ()

	)

663 
	#ECB_MEMORY_FENCE_ACQUIRE
 
	`_RódWrôeB¨rõr
 (Ë

	)

664 
	#ECB_MEMORY_FENCE_RELEASE
 
	`_WrôeB¨rõr
 ()

	)

665 #ñi‡
deföed
 
_WIN32


666 
	~<WöNT.h
>

667 
	#ECB_MEMORY_FENCE
 
	`Mem‹yB¨rõr
 (Ë

	)

668 #ñi‡
__SUNPRO_C
 >0x5110 || 
__SUNPRO_CC
 >= 0x5110

669 
	~<mb¨rõr.h
>

670 
	#ECB_MEMORY_FENCE
 
	`__machöe_rw_b¨rõr
 ()

	)

671 
	#ECB_MEMORY_FENCE_ACQUIRE
 
	`__machöe_r_b¨rõr
 ()

	)

672 
	#ECB_MEMORY_FENCE_RELEASE
 
	`__machöe_w_b¨rõr
 ()

	)

673 #ñi‡
__xlC__


674 
	#ECB_MEMORY_FENCE
 
	`__sync
 ()

	)

678 #i‚de‡
ECB_MEMORY_FENCE


679 #i‡
ECB_C11
 && !
deföed
 
__STDC_NO_ATOMICS__


682 
	~<°d©omic.h
>

689 
	#ECB_MEMORY_FENCE
 
	`©omic_thªad_„n˚
 (
mem‹y_‹dî_£q_c°
)

	)

693 #i‚de‡
ECB_MEMORY_FENCE


694 #i‡!
ECB_AVOID_PTHREADS


702 
	~<±hªad.h
>

703 
	#ECB_NEEDS_PTHREADS
 1

	)

704 
	#ECB_MEMORY_FENCE_NEEDS_PTHREADS
 1

	)

706 
±hªad_muãx_t
 
ecb_mf_lock
 = 
PTHREAD_MUTEX_INITIALIZER
;

707 
	#ECB_MEMORY_FENCE
 dÿ{ 
	`±hªad_muãx_lock
 (&
ecb_mf_lock
); 
	`±hªad_muãx_u∆ock
 (&ecb_mf_lock); } 0)

	)

711 #i‡!
deföed
 
ECB_MEMORY_FENCE_ACQUIRE
 && deföed 
ECB_MEMORY_FENCE


712 
	#ECB_MEMORY_FENCE_ACQUIRE
 
ECB_MEMORY_FENCE


	)

715 #i‡!
deföed
 
ECB_MEMORY_FENCE_RELEASE
 && deföed 
ECB_MEMORY_FENCE


716 
	#ECB_MEMORY_FENCE_RELEASE
 
ECB_MEMORY_FENCE


	)

721 #i‡
__˝lu•lus


722 
	#ecb_ölöe
 
ölöe


	)

723 #ñi‡
ECB_GCC_VERSION
(2,5)

724 
	#ecb_ölöe
 
__ölöe__


	)

725 #ñi‡
ECB_C99


726 
	#ecb_ölöe
 
ölöe


	)

728 
	#ecb_ölöe
 

	)

731 #i‡
ECB_GCC_VERSION
(3,3)

732 
	#ecb_ª°ri˘
 
__ª°ri˘__


	)

733 #ñi‡
ECB_C99


734 
	#ecb_ª°ri˘
 
ª°ri˘


	)

736 
	#ecb_ª°ri˘


	)

739 
	tecb_boﬁ
;

741 
	#ECB_CONCAT_
(
a
, 
b
Ë®## 
	)
b

742 
	#ECB_CONCAT
(
a
, 
b
Ë
	`ECB_CONCAT_
◊, b)

	)

743 
	#ECB_STRINGIFY_
(
a
Ë#a

	)

744 
	#ECB_STRINGIFY
(
a
Ë
	`ECB_STRINGIFY_
◊)

	)

746 
	#ecb_fun˘i⁄_
 
ecb_ölöe


	)

748 #i‡
ECB_GCC_VERSION
(3,1)

749 
	#ecb_©åibuã
(
©åli°
Ë
	`__©åibuã__
◊âæi°)

	)

750 
	#ecb_is_c⁄°™t
(
ex¥
Ë
	`__buûtö_c⁄°™t_p
 (ex¥)

	)

751 
	#ecb_ex≥˘
(
ex¥
,
vÆue
Ë
	`__buûtö_ex≥˘
 (”x¥),(vÆue))

	)

752 
	#ecb_¥e„tch
(
addr
,
rw
,
loˇlôy
Ë
	`__buûtö_¥e„tch
 (addr,Ñw,Üoˇlôy)

	)

754 
	#ecb_©åibuã
(
©åli°
)

	)

755 
	#ecb_is_c⁄°™t
(
ex¥
Ë0

	)

756 
	#ecb_ex≥˘
(
ex¥
,
vÆue
Ë”x¥)

	)

757 
	#ecb_¥e„tch
(
addr
,
rw
,
loˇlôy
)

	)

761 #i‡
ECB_GCC_VERSION
(4,5)

762 
	#ecb_de˛ty≥
(
x
Ë
	`__de˛ty≥
(x)

	)

763 #ñi‡
ECB_GCC_VERSION
(3,0)

764 
	#ecb_de˛ty≥
(
x
Ë
	`__ty≥of
(x)

	)

767 
	#ecb_noölöe
 
	`ecb_©åibuã
 ((
__noölöe__
))

	)

768 
	#ecb_unu£d
 
	`ecb_©åibuã
 ((
__unu£d__
))

	)

769 
	#ecb_c⁄°
 
	`ecb_©åibuã
 ((
__c⁄°__
))

	)

770 
	#ecb_puª
 
	`ecb_©åibuã
 ((
__puª__
))

	)

772 #i‡
ECB_C11


773 
	#ecb_n‹ëu∫
 
_N‹ëu∫


	)

775 
	#ecb_n‹ëu∫
 
	`ecb_©åibuã
 ((
__n‹ëu∫__
))

	)

778 #i‡
ECB_GCC_VERSION
(4,3)

779 
	#ecb_¨tificül
 
	`ecb_©åibuã
 ((
__¨tificül__
))

	)

780 
	#ecb_hŸ
 
	`ecb_©åibuã
 ((
__hŸ__
))

	)

781 
	#ecb_cﬁd
 
	`ecb_©åibuã
 ((
__cﬁd__
))

	)

783 
	#ecb_¨tificül


	)

784 
	#ecb_hŸ


	)

785 
	#ecb_cﬁd


	)

791 
	#ecb_ex≥˘_Ál£
(
ex¥
Ë
	`ecb_ex≥˘
 (!!”x¥), 0)

	)

792 
	#ecb_ex≥˘_åue
(
ex¥
Ë
	`ecb_ex≥˘
 (!!”x¥), 1)

	)

794 
	#ecb_likñy
(
ex¥
Ë
	`ecb_ex≥˘_åue
 (ex¥)

	)

795 
	#ecb_u∆ikñy
(
ex¥
Ë
	`ecb_ex≥˘_Ál£
 (ex¥)

	)

798 #i‡
ECB_GCC_VERSION
(3,4)

800 
	#ecb_ld32
(
x
Ë(
	`__buûtö_˛z
 (xË^ 31)

	)

801 
	#ecb_ld64
(
x
Ë(
	`__buûtö_˛zŒ
 (xË^ 63)

	)

802 
	#ecb_˘z32
(
x
Ë
	`__buûtö_˘z
 (x)

	)

803 
	#ecb_˘z64
(
x
Ë
	`__buûtö_˘zŒ
 (x)

	)

804 
	#ecb_p›cou¡32
(
x
Ë
	`__buûtö_p›cou¡
 (x)

	)

807 
ecb_fun˘i⁄_
 
	$ecb_˘z32
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

808 
ecb_fun˘i⁄_
 

809 
	$ecb_˘z32
 (
uöt32_t
 
x
)

811 
r
 = 0;

813 
x
 &= ~x + 1;

815 #i‡
ECB_bønchÀss_⁄_i386


816 
r
 +!!(
x
 & 0xaaaaaaaa) << 0;

817 
r
 +!!(
x
 & 0xcccccccc) << 1;

818 
r
 +!!(
x
 & 0xf0f0f0f0) << 2;

819 
r
 +!!(
x
 & 0xff00ff00) << 3;

820 
r
 +!!(
x
 & 0xffff0000) << 4;

822 i‡(
x
 & 0xØØØØË
r
 += 1;

823 i‡(
x
 & 0xccccccccË
r
 += 2;

824 i‡(
x
 & 0xf0f0f0f0Ë
r
 += 4;

825 i‡(
x
 & 0xff00ff00Ë
r
 += 8;

826 i‡(
x
 & 0xffff0000Ë
r
 += 16;

829  
r
;

830 
	}
}

832 
ecb_fun˘i⁄_
 
	$ecb_˘z64
 (
uöt64_t
 
x
Ë
ecb_c⁄°
;

833 
ecb_fun˘i⁄_
 

834 
	$ecb_˘z64
 (
uöt64_t
 
x
)

836 
shi·
 = 
x
 & 0xffffffffU ? 0 : 32;

837  
	`ecb_˘z32
 (
x
 >> 
shi·
) + shift;

838 
	}
}

840 
ecb_fun˘i⁄_
 
	$ecb_p›cou¡32
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

841 
ecb_fun˘i⁄_
 

842 
	$ecb_p›cou¡32
 (
uöt32_t
 
x
)

844 
x
 -= (x >> 1) & 0x55555555;

845 
x
 = ((x >> 2) & 0x33333333) + (x & 0x33333333);

846 
x
 = ((x >> 4) + x) & 0x0f0f0f0f;

847 
x
 *= 0x01010101;

849  
x
 >> 24;

850 
	}
}

852 
ecb_fun˘i⁄_
 
	$ecb_ld32
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

853 
ecb_fun˘i⁄_
 
	$ecb_ld32
 (
uöt32_t
 
x
)

855 
r
 = 0;

857 i‡(
x
 >> 16Ë{ x >>16; 
r
 += 16; }

858 i‡(
x
 >> 8Ë{ x >>8; 
r
 += 8; }

859 i‡(
x
 >> 4Ë{ x >>4; 
r
 += 4; }

860 i‡(
x
 >> 2Ë{ x >>2; 
r
 += 2; }

861 i‡(
x
 >> 1Ë{ 
r
 += 1; }

863  
r
;

864 
	}
}

866 
ecb_fun˘i⁄_
 
	$ecb_ld64
 (
uöt64_t
 
x
Ë
ecb_c⁄°
;

867 
ecb_fun˘i⁄_
 
	$ecb_ld64
 (
uöt64_t
 
x
)

869 
r
 = 0;

871 i‡(
x
 >> 32Ë{ x >>32; 
r
 += 32; }

873  
r
 + 
	`ecb_ld32
 (
x
);

874 
	}
}

877 
ecb_fun˘i⁄_
 
ecb_boﬁ
 
	$ecb_is_pŸ32
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

878 
ecb_fun˘i⁄_
 
ecb_boﬁ
 
	$ecb_is_pŸ32
 (
uöt32_t
 
x
Ë{  !(x & (x - 1)); 
	}
}

879 
ecb_fun˘i⁄_
 
ecb_boﬁ
 
	$ecb_is_pŸ64
 (
uöt64_t
 
x
Ë
ecb_c⁄°
;

880 
ecb_fun˘i⁄_
 
ecb_boﬁ
 
	$ecb_is_pŸ64
 (
uöt64_t
 
x
Ë{  !(x & (x - 1)); 
	}
}

882 
ecb_fun˘i⁄_
 
uöt8_t
 
	$ecb_bôªv8
 (
uöt8_t
 
x
Ë
ecb_c⁄°
;

883 
ecb_fun˘i⁄_
 
uöt8_t
 
	$ecb_bôªv8
 (
uöt8_t
 
x
)

885  ( (
x
 * 0x0802U & 0x22110U)

886 | (
x
 * 0x8020U & 0x88440U)) * 0x10101U >> 16;

887 
	}
}

889 
ecb_fun˘i⁄_
 
uöt16_t
 
	$ecb_bôªv16
 (
uöt16_t
 
x
Ë
ecb_c⁄°
;

890 
ecb_fun˘i⁄_
 
uöt16_t
 
	$ecb_bôªv16
 (
uöt16_t
 
x
)

892 
x
 = ((x >> 1) & 0x5555) | ((x & 0x5555) << 1);

893 
x
 = ((x >> 2) & 0x3333) | ((x & 0x3333) << 2);

894 
x
 = ((x >> 4) & 0x0f0f) | ((x & 0x0f0f) << 4);

895 
x
 = ( x >> 8 ) | ( x << 8);

897  
x
;

898 
	}
}

900 
ecb_fun˘i⁄_
 
uöt32_t
 
	$ecb_bôªv32
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

901 
ecb_fun˘i⁄_
 
uöt32_t
 
	$ecb_bôªv32
 (
uöt32_t
 
x
)

903 
x
 = ((x >> 1) & 0x55555555) | ((x & 0x55555555) << 1);

904 
x
 = ((x >> 2) & 0x33333333) | ((x & 0x33333333) << 2);

905 
x
 = ((x >> 4) & 0x0f0f0f0f) | ((x & 0x0f0f0f0f) << 4);

906 
x
 = ((x >> 8) & 0x00ff00ff) | ((x & 0x00ff00ff) << 8);

907 
x
 = ( x >> 16 ) | ( x << 16);

909  
x
;

910 
	}
}

914 
ecb_fun˘i⁄_
 
	$ecb_p›cou¡64
 (
uöt64_t
 
x
Ë
ecb_c⁄°
;

915 
ecb_fun˘i⁄_
 

916 
	$ecb_p›cou¡64
 (
uöt64_t
 
x
)

918  
	`ecb_p›cou¡32
 (
x
) +Écb_popcount32 (x >> 32);

919 
	}
}

921 
ecb_ölöe
 
uöt8_t
 
	$ecb_rŸl8
 (
uöt8_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

922 
ecb_ölöe
 
uöt8_t
 
	$ecb_rŸr8
 (
uöt8_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

923 
ecb_ölöe
 
uöt16_t
 
	$ecb_rŸl16
 (
uöt16_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

924 
ecb_ölöe
 
uöt16_t
 
	$ecb_rŸr16
 (
uöt16_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

925 
ecb_ölöe
 
uöt32_t
 
	$ecb_rŸl32
 (
uöt32_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

926 
ecb_ölöe
 
uöt32_t
 
	$ecb_rŸr32
 (
uöt32_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

927 
ecb_ölöe
 
uöt64_t
 
	$ecb_rŸl64
 (
uöt64_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

928 
ecb_ölöe
 
uöt64_t
 
	$ecb_rŸr64
 (
uöt64_t
 
x
, 
cou¡
Ë
ecb_c⁄°
;

930 
ecb_ölöe
 
uöt8_t
 
	$ecb_rŸl8
 (
uöt8_t
 
x
, 
cou¡
Ë{  (x >> ( 8 - cou¡)Ë| (x << cou¡); 
	}
}

931 
ecb_ölöe
 
uöt8_t
 
	$ecb_rŸr8
 (
uöt8_t
 
x
, 
cou¡
Ë{  (x << ( 8 - cou¡)Ë| (x >> cou¡); 
	}
}

932 
ecb_ölöe
 
uöt16_t
 
	$ecb_rŸl16
 (
uöt16_t
 
x
, 
cou¡
Ë{  (x >> (16 - cou¡)Ë| (x << cou¡); 
	}
}

933 
ecb_ölöe
 
uöt16_t
 
	$ecb_rŸr16
 (
uöt16_t
 
x
, 
cou¡
Ë{  (x << (16 - cou¡)Ë| (x >> cou¡); 
	}
}

934 
ecb_ölöe
 
uöt32_t
 
	$ecb_rŸl32
 (
uöt32_t
 
x
, 
cou¡
Ë{  (x >> (32 - cou¡)Ë| (x << cou¡); 
	}
}

935 
ecb_ölöe
 
uöt32_t
 
	$ecb_rŸr32
 (
uöt32_t
 
x
, 
cou¡
Ë{  (x << (32 - cou¡)Ë| (x >> cou¡); 
	}
}

936 
ecb_ölöe
 
uöt64_t
 
	$ecb_rŸl64
 (
uöt64_t
 
x
, 
cou¡
Ë{  (x >> (64 - cou¡)Ë| (x << cou¡); 
	}
}

937 
ecb_ölöe
 
uöt64_t
 
	$ecb_rŸr64
 (
uöt64_t
 
x
, 
cou¡
Ë{  (x << (64 - cou¡)Ë| (x >> cou¡); 
	}
}

939 #i‡
ECB_GCC_VERSION
(4,3)

940 
	#ecb_bsw≠16
(
x
Ë(
	`__buûtö_bsw≠32
 (xË>> 16)

	)

941 
	#ecb_bsw≠32
(
x
Ë
	`__buûtö_bsw≠32
 (x)

	)

942 
	#ecb_bsw≠64
(
x
Ë
	`__buûtö_bsw≠64
 (x)

	)

944 
ecb_fun˘i⁄_
 
uöt16_t
 
	$ecb_bsw≠16
 (
uöt16_t
 
x
Ë
ecb_c⁄°
;

945 
ecb_fun˘i⁄_
 
uöt16_t


946 
	$ecb_bsw≠16
 (
uöt16_t
 
x
)

948  
	`ecb_rŸl16
 (
x
, 8);

949 
	}
}

951 
ecb_fun˘i⁄_
 
uöt32_t
 
	$ecb_bsw≠32
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

952 
ecb_fun˘i⁄_
 
uöt32_t


953 
	$ecb_bsw≠32
 (
uöt32_t
 
x
)

955  (((
uöt32_t
)
	`ecb_bsw≠16
 (
x
)) << 16) |Écb_bswap16 (x >> 16);

956 
	}
}

958 
ecb_fun˘i⁄_
 
uöt64_t
 
	$ecb_bsw≠64
 (
uöt64_t
 
x
Ë
ecb_c⁄°
;

959 
ecb_fun˘i⁄_
 
uöt64_t


960 
	$ecb_bsw≠64
 (
uöt64_t
 
x
)

962  (((
uöt64_t
)
	`ecb_bsw≠32
 (
x
)) << 32) |Écb_bswap32 (x >> 32);

963 
	}
}

966 #i‡
ECB_GCC_VERSION
(4,5)

967 
	#ecb_uƒóchabÀ
(Ë
	`__buûtö_uƒóchabÀ
 ()

	)

970 
ecb_ölöe
 
	$ecb_uƒóchabÀ
 (Ë
ecb_n‹ëu∫
;

971 
ecb_ölöe
 
	$ecb_uƒóchabÀ
 (Ë{ 
	}
}

975 
	#ecb_assume
(
c⁄d
Ëi‡(!(c⁄d)Ë
	`ecb_uƒóchabÀ
 (); 0

	)

977 
ecb_ölöe
 
	$ecb_byã‹dî_hñ≥r
 (Ë
ecb_c⁄°
;

978 
ecb_ölöe
 

979 
	$ecb_byã‹dî_hñ≥r
 ()

987 #i‡
__i386
 || 
__i386__
 || 
_M_X86
 || 
__amd64
 || 
__amd64__
 || 
_M_X64


989 #ñi‡
__BYTE_ORDER__
 && __BYTE_ORDER__ =
__ORDER_LITTLE_ENDIAN__


991 #ñi‡
__BYTE_ORDER__
 && __BYTE_ORDER__ =
__ORDER_BIG_ENDIAN__


996 
uöt32_t
 
i
;

997 
uöt8_t
 
c
;

998 } 
u
 = { 0x11223344 };

999  
u
.
c
;

1001 
	}
}

1003 
ecb_ölöe
 
ecb_boﬁ
 
	$ecb_big_ídün
 (Ë
ecb_c⁄°
;

1004 
ecb_ölöe
 
ecb_boﬁ
 
	$ecb_big_ídün
 (Ë{  
	`ecb_byã‹dî_hñ≥r
 (Ë=0x11; 
	}
}

1005 
ecb_ölöe
 
ecb_boﬁ
 
	$ecb_lôée_ídün
 (Ë
ecb_c⁄°
;

1006 
ecb_ölöe
 
ecb_boﬁ
 
	$ecb_lôée_ídün
 (Ë{  
	`ecb_byã‹dî_hñ≥r
 (Ë=0x44; 
	}
}

1008 #i‡
ECB_GCC_VERSION
(3,0Ë|| 
ECB_C99


1009 
	#ecb_mod
(
m
,
n
Ë((mË% (nË+ ((mË% (nË< 0 ? (nË: 0))

	)

1011 
	#ecb_mod
(
m
,
n
Ë((mË< 0 ? (“Ë- 1 - ((-1 - (m)Ë% (n))Ë: ((mË% (n)))

	)

1014 #i‡
__˝lu•lus


1015 
	gãm∂©e
<
ty≥«me
 
	gT
>

1016 
ölöe
 
T
 
	$ecb_div_rd
 (
T
 
vÆ
, T 
div
)

1018  
vÆ
 < 0 ? - ((-vÆ + 
div
 - 1) / div) : (val ) / div;

1019 
	}
}

1020 
	gãm∂©e
<
ty≥«me
 
	gT
>

1021 
ölöe
 
T
 
	$ecb_div_ru
 (
T
 
vÆ
, T 
div
)

1023  
vÆ
 < 0 ? - ((-vÆ ) / 
div
) : (val + div - 1) / div;

1024 
	}
}

1026 
	#ecb_div_rd
(
vÆ
,
div
Ë((vÆË< 0 ? - ((-(vÆË+ (divË- 1Ë/ (div)Ë: ((vÆËË/ (div))

	)

1027 
	#ecb_div_ru
(
vÆ
,
div
Ë((vÆË< 0 ? - ((-(vÆËË/ (div)Ë: ((vÆË+ (divË- 1Ë/ (div))

	)

1030 #i‡
ecb_˝lu•lus_d€s_nŸ_suck


1032 
	gãm∂©e
<
ty≥«me
 
	gT
, 
	gN
>

1033 
ölöe
 
ecb_¨øy_Àngth
 (c⁄° 
T
 (&
¨r
)[
N
])

1035  
	gN
;

1038 
	#ecb_¨øy_Àngth
(
«me
Ë( («meË/  («mê[0]))

	)

1047 || 
	g__i386
 || 
	g__i386__
 \

1048 || 
	g__amd64
 || 
	g__amd64__
 || 
	g__x86_64
 || 
	g__x86_64__
 \

1049 || 
	g__powîpc__
 || 
	g__µc__
 || 
	g__powîpc64__
 || 
	g__µc64__
 \

1050 || 
deföed
 
	g__¨m__
 && deföed 
	g__ARM_EABI__
 \

1051 || 
deföed
 
	g__s390__
 || deföed 
	g__s390x__
 \

1052 || 
deföed
 
	g__mùs__
 \

1053 || 
deföed
 
	g__Æpha__
 \

1054 || 
deföed
 
	g__hµa__
 \

1055 || 
deföed
 
	g__ü64__
 \

1056 || 
deföed
 
	g_M_IX86
 || deföed 
	g_M_AMD64
 || deföed 
	g_M_IA64


1057 
	#ECB_STDFP
 1

	)

1058 
	~<°rög.h
>

1060 
	#ECB_STDFP
 0

	)

1061 
	~<m©h.h
>

1064 #i‚de‡
ECB_NO_LIBM


1067 
ecb_fun˘i⁄_
 
uöt32_t
 
	$ecb_Êﬂt_to_bö¨y32
 (
x
Ë
ecb_c⁄°
;

1068 
ecb_fun˘i⁄_
 
uöt32_t


1069 
	$ecb_Êﬂt_to_bö¨y32
 (
x
)

1071 
uöt32_t
 
r
;

1073 #i‡
ECB_STDFP


1074 
	`mem˝y
 (&
r
, &
x
, 4);

1077 
uöt32_t
 
m
;

1078 
e
;

1080 i‡(
x
 == 0e0f )  0x00000000U;

1081 i‡(
x
 > +3.40282346638528860e+38f)  0x7f800000U;

1082 i‡(
x
 < -3.40282346638528860e+38f)  0xff800000U;

1083 i‡(
x
 != x )  0x7fbfffffU;

1085 
m
 = 
	`‰expf
 (
x
, &
e
) * 0x1000000U;

1087 
r
 = 
m
 & 0x80000000U;

1089 i‡(
r
)

1090 
m
 = -m;

1092 i‡(
e
 <= -126)

1094 
m
 &= 0xffffffU;

1095 
m
 >>(-125 - 
e
);

1096 
e
 = -126;

1099 
r
 |(
e
 + 126) << 23;

1100 
r
 |
m
 & 0x7fffffU;

1103  
r
;

1104 
	}
}

1107 
ecb_fun˘i⁄_
 
	$ecb_bö¨y32_to_Êﬂt
 (
uöt32_t
 
x
Ë
ecb_c⁄°
;

1108 
ecb_fun˘i⁄_
 

1109 
	$ecb_bö¨y32_to_Êﬂt
 (
uöt32_t
 
x
)

1111 
r
;

1113 #i‡
ECB_STDFP


1114 
	`mem˝y
 (&
r
, &
x
, 4);

1117 
√g
 = 
x
 >> 31;

1118 
e
 = (
x
 >> 23) & 0xffU;

1120 
x
 &= 0x7fffffU;

1122 i‡(
e
)

1123 
x
 |= 0x800000U;

1125 
e
 = 1;

1128 
r
 = 
	`ldexpf
 (
x
 * (0.5‡/ 0x800000U), 
e
 - 126);

1130 
r
 = 
√g
 ? -r :Ñ;

1133  
r
;

1134 
	}
}

1137 
ecb_fun˘i⁄_
 
uöt64_t
 
	$ecb_doubÀ_to_bö¨y64
 (
x
Ë
ecb_c⁄°
;

1138 
ecb_fun˘i⁄_
 
uöt64_t


1139 
	$ecb_doubÀ_to_bö¨y64
 (
x
)

1141 
uöt64_t
 
r
;

1143 #i‡
ECB_STDFP


1144 
	`mem˝y
 (&
r
, &
x
, 8);

1147 
uöt64_t
 
m
;

1148 
e
;

1150 i‡(
x
 == 0e0 )  0x0000000000000000U;

1151 i‡(
x
 > +1.79769313486231470e+308)  0x7ff0000000000000U;

1152 i‡(
x
 < -1.79769313486231470e+308)  0xfff0000000000000U;

1153 i‡(
x
 != x )  0X7ff7ffffffffffffU;

1155 
m
 = 
	`‰exp
 (
x
, &
e
) * 0x20000000000000U;

1157 
r
 = 
m
 & 0x8000000000000000;;

1159 i‡(
r
)

1160 
m
 = -m;

1162 i‡(
e
 <= -1022)

1164 
m
 &= 0x1fffffffffffffU;

1165 
m
 >>(-1021 - 
e
);

1166 
e
 = -1022;

1169 
r
 |((
uöt64_t
)(
e
 + 1022)) << 52;

1170 
r
 |
m
 & 0xfffffffffffffU;

1173  
r
;

1174 
	}
}

1177 
ecb_fun˘i⁄_
 
	$ecb_bö¨y64_to_doubÀ
 (
uöt64_t
 
x
Ë
ecb_c⁄°
;

1178 
ecb_fun˘i⁄_
 

1179 
	$ecb_bö¨y64_to_doubÀ
 (
uöt64_t
 
x
)

1181 
r
;

1183 #i‡
ECB_STDFP


1184 
	`mem˝y
 (&
r
, &
x
, 8);

1187 
√g
 = 
x
 >> 63;

1188 
e
 = (
x
 >> 52) & 0x7ffU;

1190 
x
 &= 0xfffffffffffffU;

1192 i‡(
e
)

1193 
x
 |= 0x10000000000000U;

1195 
e
 = 1;

1198 
r
 = 
	`ldexp
 (
x
 * (0.5 / 0x10000000000000U), 
e
 - 1022);

1200 
r
 = 
√g
 ? -r :Ñ;

1203  
r
;

1204 
	}
}

1212 #i‡
ECB_MEMORY_FENCE_NEEDS_PTHREADS


1223 #i‚de‡
ECB_MEMORY_FENCE


1224 
	#ECB_MEMORY_FENCE
 dÿ{ } 0)

	)

1225 
	#ECB_MEMORY_FENCE_ACQUIRE
 
ECB_MEMORY_FENCE


	)

1226 
	#ECB_MEMORY_FENCE_RELEASE
 
ECB_MEMORY_FENCE


	)

1229 
	#ex≥˘_Ál£
(
c⁄d
Ë
	`ecb_ex≥˘_Ál£
 (c⁄d)

	)

1230 
	#ex≥˘_åue
(
c⁄d
Ë
	`ecb_ex≥˘_åue
 (c⁄d)

	)

1231 
	#noölöe
 
ecb_noölöe


	)

1233 
	#ölöe_size
 
ecb_ölöe


	)

1235 #i‡
EV_FEATURE_CODE


1236 
	#ölöe_•ìd
 
ecb_ölöe


	)

1238 
	#ölöe_•ìd
 
noölöe


	)

1241 
	#NUMPRI
 (
EV_MAXPRI
 - 
EV_MINPRI
 + 1)

	)

1243 #i‡
EV_MINPRI
 =
EV_MAXPRI


1244 
	#ABSPRI
(
w
Ë(((
W
)w), 0)

	)

1246 
	#ABSPRI
(
w
Ë(((
W
)w)->
¥i‹ôy
 - 
EV_MINPRI
)

	)

1249 
	#EMPTY


	)

1250 
	#EMPTY2
(
a
,
b
Ë

	)

1252 
ev_w©chî
 *
	tW
;

1253 
ev_w©chî_li°
 *
	tWL
;

1254 
ev_w©chî_time
 *
	tWT
;

1256 
	#ev_a˘ive
(
w
Ë((
W
)(w))->
a˘ive


	)

1257 
	#ev_©
(
w
Ë((
WT
)(w))->
©


	)

1259 #i‡
EV_USE_REALTIME


1262 
EV_ATOMIC_T
 
	ghave_ªÆtime
;

1265 #i‡
EV_USE_MONOTONIC


1266 
EV_ATOMIC_T
 
	ghave_m⁄Ÿ⁄ic
;

1269 #i‚de‡
EV_FD_TO_WIN32_HANDLE


1270 
	#EV_FD_TO_WIN32_HANDLE
(
fd
Ë
	`_gë_osfh™dÀ
 (fd)

	)

1272 #i‚de‡
EV_WIN32_HANDLE_TO_FD


1273 
	#EV_WIN32_HANDLE_TO_FD
(
h™dÀ
Ë
	`_›í_osfh™dÀ
 (h™dÀ, 0)

	)

1275 #i‚de‡
EV_WIN32_CLOSE_FD


1276 
	#EV_WIN32_CLOSE_FD
(
fd
Ë
	`˛o£
 (fd)

	)

1279 #ifde‡
_WIN32


1280 
	~"ev_wö32.c
"

1287 #i‡
EV_USE_FLOOR


1288 
	~<m©h.h
>

1289 
	#ev_Êo‹
(
v
Ë
	`Êo‹
 (v)

	)

1292 
	~<Êﬂt.h
>

1295 
ev_t°amp
 
noölöe


1296 
	$ev_Êo‹
 (
ev_t°amp
 
v
)

1299 #i‡
FLT_RADIX
 != 2

1300 c⁄° 
ev_t°amp
 
shi·
 =  () >= 8 ? 10000000000000000000. : 1000000000.;

1302 c⁄° 
ev_t°amp
 
shi·
 =  () >= 8 ? 18446744073709551616. : 4294967296.;

1306 i‡(
	`ex≥˘_Ál£
 (
v
 >
shi·
))

1308 
ev_t°amp
 
f
;

1310 i‡(
v
 == v - 1.)

1311  
v
;

1313 
f
 = 
shi·
 * 
	`ev_Êo‹
 (
v
 * (1. / shift));

1314  
f
 + 
	`ev_Êo‹
 (
v
 - f);

1318 i‡(
	`ex≥˘_Ál£
 (
v
 < 0.))

1320 
ev_t°amp
 
f
 = -
	`ev_Êo‹
 (-
v
);

1322  
f
 - (‡=
v
 ? 0 : 1);

1326  ()
v
;

1327 
	}
}

1333 #ifde‡
__löux


1334 
	~<sys/ut¢ame.h
>

1337 
noölöe
 
ecb_cﬁd


1338 
	$ev_löux_vîsi⁄
 ()

1340 #ifde‡
__löux


1341 
v
 = 0;

1342 
ut¢ame
 
buf
;

1343 
i
;

1344 *
p
 = 
buf
.
ªÀa£
;

1346 i‡(
	`u«me
 (&
buf
))

1349 
i
 = 3+1; --i; )

1351 
c
 = 0;

1355 i‡(*
p
 >= '0' && *p <= '9')

1356 
c
 = c * 10 + *
p
++ - '0';

1359 
p
 += *p == '.';

1364 
v
 = (v << 8Ë| 
c
;

1367  
v
;

1371 
	}
}

1375 #i‡
EV_AVOID_STDIO


1376 
noölöe
 
ecb_cﬁd


1377 
	$ev_¥öãº
 (c⁄° *
msg
)

1379 
	`wrôe
 (
STDERR_FILENO
, 
msg
, 
	`°æí
 (msg));

1380 
	}
}

1383 (*
sy£º_cb
)(c⁄° *
msg
Ë
EV_THROW
;

1385 
ecb_cﬁd


1386 
	`ev_£t_sy£º_cb
 ((*
cb
)(c⁄° *
msg
Ë
EV_THROW
) EV_THROW

1388 
sy£º_cb
 = 
cb
;

1389 
	}
}

1391 
noölöe
 
ecb_cﬁd


1392 
	$ev_sy£º
 (c⁄° *
msg
)

1394 i‡(!
msg
)

1395 
msg
 = "(libev) systemÉrror";

1397 i‡(
sy£º_cb
)

1398 
	`sy£º_cb
 (
msg
);

1401 #i‡
EV_AVOID_STDIO


1402 
	`ev_¥öãº
 (
msg
);

1403 
	`ev_¥öãº
 (": ");

1404 
	`ev_¥öãº
 (
	`°ªº‹
 (
î∫o
));

1405 
	`ev_¥öãº
 ("\n");

1407 
	`≥º‹
 (
msg
);

1409 
	`ab‹t
 ();

1411 
	}
}

1414 
	$ev_ªÆloc_emul
 (*
±r
, 
size
Ë
EV_THROW


1423 i‡(
size
)

1424  
	`ªÆloc
 (
±r
, 
size
);

1426 
	`‰ì
 (
±r
);

1428 
	}
}

1430 *(*
	gÆloc
)(*
	g±r
, 
	gsize
Ë
	gEV_THROW
 = 
ev_ªÆloc_emul
;

1432 
ecb_cﬁd


1433 
ev_£t_Æloˇt‹
 (*(*
cb
)(*
±r
, 
size
Ë
EV_THROW
Ë
	gEV_THROW


1435 
	gÆloc
 = 
cb
;

1438 
ölöe_•ìd
 *

1439 
	$ev_ªÆloc
 (*
±r
, 
size
)

1441 
±r
 = 
	`Æloc
 (±r, 
size
);

1443 i‡(!
±r
 && 
size
)

1445 #i‡
EV_AVOID_STDIO


1446 
	`ev_¥öãº
 ("(libev) memoryállocation failed,áborting.\n");

1448 
	`Ârötf
 (
°dîr
, "÷ibevËˇ¬ŸáŒoˇã %ld byãs,áb‹tög.", 
size
);

1450 
	`ab‹t
 ();

1453  
±r
;

1454 
	}
}

1456 
	#ev_mÆloc
(
size
Ë
	`ev_ªÆloc
 (0, (size))

	)

1457 
	#ev_‰ì
(
±r
Ë
	`ev_ªÆloc
 (’å), 0)

	)

1462 
	#EV_ANFD_REIFY
 1

	)

1467 
WL
 
	mhód
;

1468 
	mevíts
;

1469 
	mªify
;

1470 
	memask
;

1471 
	munu£d
;

1472 #i‡
EV_USE_EPOLL


1473 
	megí
;

1475 #i‡
EV_SELECT_IS_WINSOCKET
 || 
EV_USE_IOCP


1476 
SOCKET
 
	mh™dÀ
;

1478 #i‡
EV_USE_IOCP


1479 
OVERLAPPED
 
	m‹
, 
	mow
;

1481 } 
	tANFD
;

1486 
W
 
	mw
;

1487 
	mevíts
;

1488 } 
	tANPENDING
;

1490 #i‡
EV_USE_INOTIFY


1494 
WL
 
	mhód
;

1495 } 
	tANFS
;

1499 #i‡
EV_HEAP_CACHE_AT


1502 
ev_t°amp
 
	m©
;

1503 
WT
 
	mw
;

1504 } 
	tANHE
;

1506 
	#ANHE_w
(
he
Ë(he).
w


	)

1507 
	#ANHE_©
(
he
Ë(he).
©


	)

1508 
	#ANHE_©_ˇche
(
he
Ë(he).
©
 = (he).
w
->©

	)

1511 
WT
 
	tANHE
;

1513 
	#ANHE_w
(
he
Ë(he)

	)

1514 
	#ANHE_©
(
he
Ë(he)->
©


	)

1515 
	#ANHE_©_ˇche
(
he
)

	)

1518 #i‡
EV_MULTIPLICITY


1520 
	sev_lo›


1522 
ev_t°amp
 
	mev_π_now
;

1523 
	#ev_π_now
 ((
lo›
)->
ev_π_now
)

	)

1524 
	#VAR
(
«me
,
de˛
Ëde˛;

	)

1525 
	~"ev_v¨s.h
"

1526 #unde‡
VAR


1528 
	~"ev_wøp.h
"

1530 
ev_lo›
 
	gdeÁu…_lo›_°ru˘
;

1531 
EV_API_DECL
 
ev_lo›
 *
	gev_deÁu…_lo›_±r
 = 0;

1535 
EV_API_DECL
 
ev_t°amp
 
	gev_π_now
 = 0;

1536 
	#VAR
(
«me
,
de˛
Ëde˛;

	)

1537 
	~"ev_v¨s.h
"

1538 #unde‡
VAR


1540 
	gev_deÁu…_lo›_±r
;

1544 #i‡
EV_FEATURE_API


1545 
	#EV_RELEASE_CB
 i‡(
	`ex≥˘_Ál£
 (
ªÀa£_cb
)Ë
	`ªÀa£_cb
 (
EV_A
)

	)

1546 
	#EV_ACQUIRE_CB
 i‡(
	`ex≥˘_Ál£
 (
acquúe_cb
)Ë
	`acquúe_cb
 (
EV_A
)

	)

1547 
	#EV_INVOKE_PENDING
 
	`övoke_cb
 (
EV_A
)

	)

1549 
	#EV_RELEASE_CB
 ()0

	)

1550 
	#EV_ACQUIRE_CB
 ()0

	)

1551 
	#EV_INVOKE_PENDING
 
	`ev_övoke_≥ndög
 (
EV_A
)

	)

1554 
	#EVBREAK_RECURSE
 0x80

	)

1558 #i‚de‡
EV_HAVE_EV_TIME


1559 
ev_t°amp


1560 
	$ev_time
 (Ë
EV_THROW


1562 #i‡
EV_USE_REALTIME


1563 i‡(
	`ex≥˘_åue
 (
have_ªÆtime
))

1565 
time•ec
 
ts
;

1566 
	`˛ock_gëtime
 (
CLOCK_REALTIME
, &
ts
);

1567  
ts
.
tv_£c
 +Ås.
tv_n£c
 * 1e-9;

1571 
timevÆ
 
tv
;

1572 
	`gëtimeofday
 (&
tv
, 0);

1573  
tv
.
tv_£c
 +Åv.
tv_u£c
 * 1e-6;

1574 
	}
}

1577 
ölöe_size
 
ev_t°amp


1578 
	$gë_˛ock
 ()

1580 #i‡
EV_USE_MONOTONIC


1581 i‡(
	`ex≥˘_åue
 (
have_m⁄Ÿ⁄ic
))

1583 
time•ec
 
ts
;

1584 
	`˛ock_gëtime
 (
CLOCK_MONOTONIC
, &
ts
);

1585  
ts
.
tv_£c
 +Ås.
tv_n£c
 * 1e-9;

1589  
	`ev_time
 ();

1590 
	}
}

1592 #i‡
EV_MULTIPLICITY


1593 
ev_t°amp


1594 
	$ev_now
 (
EV_P
Ë
EV_THROW


1596  
ev_π_now
;

1597 
	}
}

1601 
	$ev_¶ìp
 (
ev_t°amp
 
dñay
Ë
EV_THROW


1603 i‡(
dñay
 > 0.)

1605 #i‡
EV_USE_NANOSLEEP


1606 
time•ec
 
ts
;

1608 
	`EV_TS_SET
 (
ts
, 
dñay
);

1609 
	`«no¶ìp
 (&
ts
, 0);

1610 #ñi‡
deföed
 
_WIN32


1611 
	`SÀï
 (()(
dñay
 * 1e3));

1613 
timevÆ
 
tv
;

1618 
	`EV_TV_SET
 (
tv
, 
dñay
);

1619 
	`£À˘
 (0, 0, 0, 0, &
tv
);

1622 
	}
}

1626 
	#MALLOC_ROUND
 4096

	)

1630 
ölöe_size
 

1631 
	$¨øy_√xtsize
 (
ñem
, 
cur
, 
˙t
)

1633 
ncur
 = 
cur
 + 1;

1636 
ncur
 <<= 1;

1637 
˙t
 > 
ncur
);

1640 i‡(
ñem
 * 
ncur
 > 
MALLOC_ROUND
 -  (*) * 4)

1642 
ncur
 *
ñem
;

1643 
ncur
 = (ncu∏+ 
ñem
 + (
MALLOC_ROUND
 - 1) +  (*) * 4) & ~(MALLOC_ROUND - 1);

1644 
ncur
 =Çcur -  (*) * 4;

1645 
ncur
 /
ñem
;

1648  
ncur
;

1649 
	}
}

1651 * 
noölöe
 
ecb_cﬁd


1652 
	$¨øy_ªÆloc
 (
ñem
, *
ba£
, *
cur
, 
˙t
)

1654 *
cur
 = 
	`¨øy_√xtsize
 (
ñem
, *cur, 
˙t
);

1655  
	`ev_ªÆloc
 (
ba£
, 
ñem
 * *
cur
);

1656 
	}
}

1658 
	#¨øy_öô_zîo
(
ba£
,
cou¡
) \

1659 
	`mem£t
 ((*)(
ba£
), 0,  (*(ba£)Ë* (
cou¡
))

	)

1661 
	#¨øy_√edsize
(
ty≥
,
ba£
,
cur
,
˙t
,
öô
) \

1662 i‡(
	`ex≥˘_Ál£
 ((
˙t
Ë> (
cur
))) \

1664 
ecb_unu£d
 
ocur_
 = (
cur
); \

1665 (
ba£
Ë(
ty≥
 *)
¨øy_ªÆloc
 \

1666 ( (
ty≥
), (
ba£
), &(
cur
), (
˙t
)); \

1667 
	`öô
 ((
ba£
Ë+ (
ocur_
), (
cur
) - ocur_); \

1668 }

	)

1671 
	#¨øy_¶im
(
ty≥
,
°em
) \

1672 i‡(
°em
 ## 
max
 < 
	`¨øy_roundsize
 (°em ## 
˙t
 >> 2)) \

1674 
°em
 ## 
max
 = 
	`¨øy_roundsize
 (°em ## 
˙t
 >> 1); \

1675 
ba£
 = (
ty≥
 *)
	`ev_ªÆloc
 (ba£,  (ty≥Ë* (
°em
 ## 
max
));\

1676 
	`Ârötf
 (
°dîr
, "¶immed dow¿" #°em "Åÿ%d\n", 
°em
 ## 
max
); \

1677 }

	)

1680 
	#¨øy_‰ì
(
°em
, 
idx
) \

1681 
	`ev_‰ì
 (
°em
 ## 
s
 
idx
); sãm ## 
˙t
 idx = sãm ## 
max
 idx = 0; sãm ## s idx = 0

	)

1686 
noölöe


1687 
	$≥ndögcb
 (
EV_P_
 
ev_¥ï¨e
 *
w
, 
ªvíts
)

1689 
	}
}

1691 
noölöe


1692 
	$ev_„ed_evít
 (
EV_P_
 *
w
, 
ªvíts
Ë
EV_THROW


1694 
W
 
w_
 = (W)
w
;

1695 
¥i
 = 
	`ABSPRI
 (
w_
);

1697 i‡(
	`ex≥˘_Ál£
 (
w_
->
≥ndög
))

1698 
≥ndögs
 [
¥i
][
w_
->
≥ndög
 - 1].
evíts
 |
ªvíts
;

1701 
w_
->
≥ndög
 = ++
≥ndög˙t
 [
¥i
];

1702 
	`¨øy_√edsize
 (
ANPENDING
, 
≥ndögs
 [
¥i
], 
≥ndögmax
 [¥i], 
w_
->
≥ndög
, 
EMPTY2
);

1703 
≥ndögs
 [
¥i
][
w_
->
≥ndög
 - 1].
w
 = w_;

1704 
≥ndögs
 [
¥i
][
w_
->
≥ndög
 - 1].
evíts
 = 
ªvíts
;

1707 
≥ndög¥i
 = 
NUMPRI
 - 1;

1708 
	}
}

1710 
ölöe_•ìd
 

1711 
	$„ed_ªvî£
 (
EV_P_
 
W
 
w
)

1713 
	`¨øy_√edsize
 (
W
, 
r„eds
, 
r„edmax
, 
r„ed˙t
 + 1, 
EMPTY2
);

1714 
r„eds
 [
r„ed˙t
++] = 
w
;

1715 
	}
}

1717 
ölöe_size
 

1718 
	$„ed_ªvî£_d⁄e
 (
EV_P_
 
ªvíts
)

1721 
	`ev_„ed_evít
 (
EV_A_
 
r„eds
 [--
r„ed˙t
], 
ªvíts
);

1722 
r„ed˙t
);

1723 
	}
}

1725 
ölöe_•ìd
 

1726 
	$queue_evíts
 (
EV_P_
 
W
 *
evíts
, 
evít˙t
, 
ty≥
)

1728 
i
;

1730 
i
 = 0; i < 
evít˙t
; ++i)

1731 
	`ev_„ed_evít
 (
EV_A_
 
evíts
 [
i
], 
ty≥
);

1732 
	}
}

1736 
ölöe_•ìd
 

1737 
	$fd_evít_nocheck
 (
EV_P_
 
fd
, 
ªvíts
)

1739 
ANFD
 *
™fd
 = 
™fds
 + 
fd
;

1740 
ev_io
 *
w
;

1742 
w
 = (
ev_io
 *)
™fd
->
hód
; w; w = (ev_iÿ*)((
WL
)w)->
√xt
)

1744 
ev
 = 
w
->
evíts
 & 
ªvíts
;

1746 i‡(
ev
)

1747 
	`ev_„ed_evít
 (
	`EV_A_
 (
W
)
w
, 
ev
);

1749 
	}
}

1753 
ölöe_•ìd
 

1754 
	$fd_evít
 (
EV_P_
 
fd
, 
ªvíts
)

1756 
ANFD
 *
™fd
 = 
™fds
 + 
fd
;

1758 i‡(
	`ex≥˘_åue
 (!
™fd
->
ªify
))

1759 
	`fd_evít_nocheck
 (
EV_A_
 
fd
, 
ªvíts
);

1760 
	}
}

1763 
	$ev_„ed_fd_evít
 (
EV_P_
 
fd
, 
ªvíts
Ë
EV_THROW


1765 i‡(
fd
 >0 && fd < 
™fdmax
)

1766 
	`fd_evít_nocheck
 (
EV_A_
 
fd
, 
ªvíts
);

1767 
	}
}

1771 
ölöe_size
 

1772 
	$fd_ªify
 (
EV_P
)

1774 
i
;

1776 #i‡
EV_SELECT_IS_WINSOCKET
 || 
EV_USE_IOCP


1777 
i
 = 0; i < 
fdch™ge˙t
; ++i)

1779 
fd
 = 
fdch™ges
 [
i
];

1780 
ANFD
 *
™fd
 = 
™fds
 + 
fd
;

1782 i‡(
™fd
->
ªify
 & 
EV__IOFDSET
 &&ánfd->
hód
)

1784 
SOCKET
 
h™dÀ
 = 
	`EV_FD_TO_WIN32_HANDLE
 (
fd
);

1786 i‡(
h™dÀ
 !
™fd
->handle)

1788 
¨g
;

1790 
	`as£π
 (("libev: o∆y sockë fd†suµ‹ãd i¿thi†c⁄figuøti⁄", 
	`io˘lsockë
 (
h™dÀ
, 
FIONREAD
, &
¨g
) == 0));

1793 
	`backíd_modify
 (
EV_A_
 
fd
, 
™fd
->
evíts
, 0);

1794 
™fd
->
evíts
 = 0;

1795 
™fd
->
h™dÀ
 = handle;

1801 
i
 = 0; i < 
fdch™ge˙t
; ++i)

1803 
fd
 = 
fdch™ges
 [
i
];

1804 
ANFD
 *
™fd
 = 
™fds
 + 
fd
;

1805 
ev_io
 *
w
;

1807 
o_evíts
 = 
™fd
->
evíts
;

1808 
o_ªify
 = 
™fd
->
ªify
;

1810 
™fd
->
ªify
 = 0;

1814 
™fd
->
evíts
 = 0;

1816 
w
 = (
ev_io
 *)
™fd
->
hód
; w; w = (ev_iÿ*)((
WL
)w)->
√xt
)

1817 
™fd
->
evíts
 |()
w
->events;

1819 i‡(
o_evíts
 !
™fd
->
evíts
)

1820 
o_ªify
 = 
EV__IOFDSET
;

1823 i‡(
o_ªify
 & 
EV__IOFDSET
)

1824 
	`backíd_modify
 (
EV_A_
 
fd
, 
o_evíts
, 
™fd
->
evíts
);

1827 
fdch™ge˙t
 = 0;

1828 
	}
}

1831 
ölöe_size
 

1832 
	$fd_ch™ge
 (
EV_P_
 
fd
, 
Êags
)

1834 
ªify
 = 
™fds
 [
fd
].reify;

1835 
™fds
 [
fd
].
ªify
 |
Êags
;

1837 i‡(
	`ex≥˘_åue
 (!
ªify
))

1839 ++
fdch™ge˙t
;

1840 
	`¨øy_√edsize
 (, 
fdch™ges
, 
fdch™gemax
, 
fdch™ge˙t
, 
EMPTY2
);

1841 
fdch™ges
 [
fdch™ge˙t
 - 1] = 
fd
;

1843 
	}
}

1846 
ölöe_•ìd
 
ecb_cﬁd


1847 
	$fd_kûl
 (
EV_P_
 
fd
)

1849 
ev_io
 *
w
;

1851 (
w
 = (
ev_io
 *)
™fds
 [
fd
].
hód
))

1853 
	`ev_io_°›
 (
EV_A_
 
w
);

1854 
	`ev_„ed_evít
 (
	`EV_A_
 (
W
)
w
, 
EV_ERROR
 | 
EV_READ
 | 
EV_WRITE
);

1856 
	}
}

1859 
ölöe_size
 
ecb_cﬁd


1860 
	$fd_vÆid
 (
fd
)

1862 #ifde‡
_WIN32


1863  
	`EV_FD_TO_WIN32_HANDLE
 (
fd
) != -1;

1865  
	`f˙é
 (
fd
, 
F_GETFD
) != -1;

1867 
	}
}

1870 
noölöe
 
ecb_cﬁd


1871 
	$fd_ebadf
 (
EV_P
)

1873 
fd
;

1875 
fd
 = 0; fd < 
™fdmax
; ++fd)

1876 i‡(
™fds
 [
fd
].
evíts
)

1877 i‡(!
	`fd_vÆid
 (
fd
Ë&& 
î∫o
 =
EBADF
)

1878 
	`fd_kûl
 (
EV_A_
 
fd
);

1879 
	}
}

1882 
noölöe
 
ecb_cﬁd


1883 
	$fd_íomem
 (
EV_P
)

1885 
fd
;

1887 
fd
 = 
™fdmax
; fd--; )

1888 i‡(
™fds
 [
fd
].
evíts
)

1890 
	`fd_kûl
 (
EV_A_
 
fd
);

1893 
	}
}

1896 
noölöe


1897 
	$fd_ª¨m_Æl
 (
EV_P
)

1899 
fd
;

1901 
fd
 = 0; fd < 
™fdmax
; ++fd)

1902 i‡(
™fds
 [
fd
].
evíts
)

1904 
™fds
 [
fd
].
evíts
 = 0;

1905 
™fds
 [
fd
].
emask
 = 0;

1906 
	`fd_ch™ge
 (
EV_A_
 
fd
, 
EV__IOFDSET
 | 
EV_ANFD_REIFY
);

1908 
	}
}

1912 
ölöe_•ìd
 

1913 
	$fd_öã∫
 (
fd
)

1915 #ifde‡
_WIN32


1916 
¨g
 = 1;

1917 
	`io˘lsockë
 (
	`EV_FD_TO_WIN32_HANDLE
 (
fd
), 
FIONBIO
, &
¨g
);

1919 
	`f˙é
 (
fd
, 
F_SETFD
, 
FD_CLOEXEC
);

1920 
	`f˙é
 (
fd
, 
F_SETFL
, 
O_NONBLOCK
);

1922 
	}
}

1938 #i‡
EV_USE_4HEAP


1940 
	#DHEAP
 4

	)

1941 
	#HEAP0
 (
DHEAP
 - 1Ë

	)

1942 
	#HPARENT
(
k
Ë((((kË- 
HEAP0
 - 1Ë/ 
DHEAP
Ë+ HEAP0)

	)

1943 
	#UPHEAP_DONE
(
p
,
k
Ë(’Ë=(k))

	)

1946 
ölöe_•ìd
 

1947 
	$downhóp
 (
ANHE
 *
hóp
, 
N
, 
k
)

1949 
ANHE
 
he
 = 
hóp
 [
k
];

1950 
ANHE
 *
E
 = 
hóp
 + 
N
 + 
HEAP0
;

1954 
ev_t°amp
 
mö©
;

1955 
ANHE
 *
möpos
;

1956 
ANHE
 *
pos
 = 
hóp
 + 
DHEAP
 * (
k
 - 
HEAP0
) + HEAP0 + 1;

1959 i‡(
	`ex≥˘_åue
 (
pos
 + 
DHEAP
 - 1 < 
E
))

1961  (
möpos
 = 
pos
 + 0), (
mö©
 = 
	`ANHE_©
 (*minpos));

1962 i‡–
	`ANHE_©
 (
pos
 [1]Ë< 
mö©
Ë(
möpos
 =Öos + 1), (minat = ANHE_at (*minpos));

1963 i‡–
	`ANHE_©
 (
pos
 [2]Ë< 
mö©
Ë(
möpos
 =Öos + 2), (minat = ANHE_at (*minpos));

1964 i‡–
	`ANHE_©
 (
pos
 [3]Ë< 
mö©
Ë(
möpos
 =Öos + 3), (minat = ANHE_at (*minpos));

1966 i‡(
pos
 < 
E
)

1968  (
möpos
 = 
pos
 + 0), (
mö©
 = 
	`ANHE_©
 (*minpos));

1969 i‡(
pos
 + 1 < 
E
 && 
	`ANHE_©
 (po†[1]Ë< 
mö©
Ë(
möpos
 =Öos + 1), (minat = ANHE_at (*minpos));

1970 i‡(
pos
 + 2 < 
E
 && 
	`ANHE_©
 (po†[2]Ë< 
mö©
Ë(
möpos
 =Öos + 2), (minat = ANHE_at (*minpos));

1971 i‡(
pos
 + 3 < 
E
 && 
	`ANHE_©
 (po†[3]Ë< 
mö©
Ë(
möpos
 =Öos + 3), (minat = ANHE_at (*minpos));

1976 i‡(
	`ANHE_©
 (
he
Ë<
mö©
)

1979 
hóp
 [
k
] = *
möpos
;

1980 
	`ev_a˘ive
 (
	`ANHE_w
 (*
möpos
)Ë
k
;

1982 
k
 = 
möpos
 - 
hóp
;

1985 
hóp
 [
k
] = 
he
;

1986 
	`ev_a˘ive
 (
	`ANHE_w
 (
he
)Ë
k
;

1987 
	}
}

1991 
	#HEAP0
 1

	)

1992 
	#HPARENT
(
k
Ë((kË>> 1)

	)

1993 
	#UPHEAP_DONE
(
p
,
k
Ë(!’))

	)

1996 
ölöe_•ìd
 

1997 
	$downhóp
 (
ANHE
 *
hóp
, 
N
, 
k
)

1999 
ANHE
 
he
 = 
hóp
 [
k
];

2003 
c
 = 
k
 << 1;

2005 i‡(
c
 >
N
 + 
HEAP0
)

2008 
c
 +¯+ 1 < 
N
 + 
HEAP0
 && 
	`ANHE_©
 (
hóp
 [c]) > ANHE_at (heap [c + 1])

2011 i‡(
	`ANHE_©
 (
he
Ë<ANHE_© (
hóp
 [
c
]))

2014 
hóp
 [
k
] = hó∞[
c
];

2015 
	`ev_a˘ive
 (
	`ANHE_w
 (
hóp
 [
k
])) = k;

2017 
k
 = 
c
;

2020 
hóp
 [
k
] = 
he
;

2021 
	`ev_a˘ive
 (
	`ANHE_w
 (
he
)Ë
k
;

2022 
	}
}

2026 
ölöe_•ìd
 

2027 
	$uphóp
 (
ANHE
 *
hóp
, 
k
)

2029 
ANHE
 
he
 = 
hóp
 [
k
];

2033 
p
 = 
	`HPARENT
 (
k
);

2035 i‡(
	`UPHEAP_DONE
 (
p
, 
k
Ë|| 
	`ANHE_©
 (
hóp
 [p]Ë<ANHE_© (
he
))

2038 
hóp
 [
k
] = hó∞[
p
];

2039 
	`ev_a˘ive
 (
	`ANHE_w
 (
hóp
 [
k
])) = k;

2040 
k
 = 
p
;

2043 
hóp
 [
k
] = 
he
;

2044 
	`ev_a˘ive
 (
	`ANHE_w
 (
he
)Ë
k
;

2045 
	}
}

2048 
ölöe_size
 

2049 
	$adju°hóp
 (
ANHE
 *
hóp
, 
N
, 
k
)

2051 i‡(
k
 > 
HEAP0
 && 
	`ANHE_©
 (
hóp
 [k]Ë<ANHE_© (hó∞[
	`HPARENT
 (k)]))

2052 
	`uphóp
 (
hóp
, 
k
);

2054 
	`downhóp
 (
hóp
, 
N
, 
k
);

2055 
	}
}

2058 
ölöe_size
 

2059 
	$ªhóp
 (
ANHE
 *
hóp
, 
N
)

2061 
i
;

2065 
i
 = 0; i < 
N
; ++i)

2066 
	`uphóp
 (
hóp
, 
i
 + 
HEAP0
);

2067 
	}
}

2074 
EV_ATOMIC_T
 
	m≥ndög
;

2075 #i‡
EV_MULTIPLICITY


2076 
	mEV_P
;

2078 
WL
 
	mhód
;

2079 } 
	tANSIG
;

2081 
ANSIG
 
	gsig«ls
 [
EV_NSIG
 - 1];

2085 #i‡
EV_SIGNAL_ENABLE
 || 
EV_ASYNC_ENABLE


2087 
noölöe
 
ecb_cﬁd


2088 
	$evpùe_öô
 (
EV_P
)

2090 i‡(!
	`ev_is_a˘ive
 (&
pùe_w
))

2092 
fds
 [2];

2094 #i‡
EV_USE_EVENTFD


2095 
fds
 [0] = -1;

2096 
fds
 [1] = 
	`evítfd
 (0, 
EFD_NONBLOCK
 | 
EFD_CLOEXEC
);

2097 i‡(
fds
 [1] < 0 && 
î∫o
 =
EINVAL
)

2098 
fds
 [1] = 
	`evítfd
 (0, 0);

2100 i‡(
fds
 [1] < 0)

2103 
	`pùe
 (
fds
))

2104 
	`ev_sy£º
 ("(libev)Érror creating signal/asyncÖipe");

2106 
	`fd_öã∫
 (
fds
 [0]);

2109 
	`fd_öã∫
 (
fds
 [1]);

2111 
evpùe
 [0] = 
fds
 [0];

2113 i‡(
evpùe
 [1] < 0)

2114 
evpùe
 [1] = 
fds
 [1];

2122 
	`dup2
 (
fds
 [1], 
evpùe
 [1]);

2123 
	`˛o£
 (
fds
 [1]);

2126 
	`ev_io_£t
 (&
pùe_w
, 
evpùe
 [0] < 0 ?Évpùê[1] :Évpùê[0], 
EV_READ
);

2127 
	`ev_io_°¨t
 (
EV_A_
 &
pùe_w
);

2128 
	`ev_uƒef
 (
EV_A
);

2130 
	}
}

2132 
ölöe_•ìd
 

2133 
	$evpùe_wrôe
 (
EV_P_
 
EV_ATOMIC_T
 *
Êag
)

2135 
ECB_MEMORY_FENCE
;

2137 i‡(
	`ex≥˘_åue
 (*
Êag
))

2140 *
Êag
 = 1;

2141 
ECB_MEMORY_FENCE_RELEASE
;

2143 
pùe_wrôe_skù≥d
 = 1;

2145 
ECB_MEMORY_FENCE
;

2147 i‡(
pùe_wrôe_w™ãd
)

2149 
ﬁd_î∫o
;

2151 
pùe_wrôe_skù≥d
 = 0;

2152 
ECB_MEMORY_FENCE_RELEASE
;

2154 
ﬁd_î∫o
 = 
î∫o
;

2156 #i‡
EV_USE_EVENTFD


2157 i‡(
evpùe
 [0] < 0)

2159 
uöt64_t
 
cou¡î
 = 1;

2160 
	`wrôe
 (
evpùe
 [1], &
cou¡î
,  (
uöt64_t
));

2165 #ifde‡
_WIN32


2166 
WSABUF
 
buf
;

2167 
DWORD
 
£¡
;

2168 
buf
.buf = &buf;

2169 
buf
.
Àn
 = 1;

2170 
	`WSASíd
 (
	`EV_FD_TO_WIN32_HANDLE
 (
evpùe
 [1]), &
buf
, 1, &
£¡
, 0, 0, 0);

2172 
	`wrôe
 (
evpùe
 [1], &(evpipe [1]), 1);

2176 
î∫o
 = 
ﬁd_î∫o
;

2178 
	}
}

2183 
	$pùecb
 (
EV_P_
 
ev_io
 *
iow
, 
ªvíts
)

2185 
i
;

2187 i‡(
ªvíts
 & 
EV_READ
)

2189 #i‡
EV_USE_EVENTFD


2190 i‡(
evpùe
 [0] < 0)

2192 
uöt64_t
 
cou¡î
;

2193 
	`ªad
 (
evpùe
 [1], &
cou¡î
,  (
uöt64_t
));

2198 
dummy
[4];

2199 #ifde‡
_WIN32


2200 
WSABUF
 
buf
;

2201 
DWORD
 
ªcvd
;

2202 
DWORD
 
Êags
 = 0;

2203 
buf
.bu‡
dummy
;

2204 
buf
.
Àn
 =  (
dummy
);

2205 
	`WSARecv
 (
	`EV_FD_TO_WIN32_HANDLE
 (
evpùe
 [0]), &
buf
, 1, &
ªcvd
, &
Êags
, 0, 0);

2207 
	`ªad
 (
evpùe
 [0], &
dummy
,  (dummy));

2212 
pùe_wrôe_skù≥d
 = 0;

2214 
ECB_MEMORY_FENCE
;

2216 #i‡
EV_SIGNAL_ENABLE


2217 i‡(
sig_≥ndög
)

2219 
sig_≥ndög
 = 0;

2221 
ECB_MEMORY_FENCE
;

2223 
i
 = 
EV_NSIG
 - 1; i--; )

2224 i‡(
	`ex≥˘_Ál£
 (
sig«ls
 [
i
].
≥ndög
))

2225 
	`ev_„ed_sig«l_evít
 (
EV_A_
 
i
 + 1);

2229 #i‡
EV_ASYNC_ENABLE


2230 i‡(
async_≥ndög
)

2232 
async_≥ndög
 = 0;

2234 
ECB_MEMORY_FENCE
;

2236 
i
 = 
async˙t
; i--; )

2237 i‡(
asyncs
 [
i
]->
£¡
)

2239 
asyncs
 [
i
]->
£¡
 = 0;

2240 
ECB_MEMORY_FENCE_RELEASE
;

2241 
	`ev_„ed_evít
 (
EV_A_
 
asyncs
 [
i
], 
EV_ASYNC
);

2245 
	}
}

2250 
	$ev_„ed_sig«l
 (
signum
Ë
EV_THROW


2252 #i‡
EV_MULTIPLICITY


2253 
EV_P
;

2254 
ECB_MEMORY_FENCE_ACQUIRE
;

2255 
EV_A
 = 
sig«ls
 [
signum
 - 1].
lo›
;

2257 i‡(!
EV_A
)

2261 
sig«ls
 [
signum
 - 1].
≥ndög
 = 1;

2262 
	`evpùe_wrôe
 (
EV_A_
 &
sig_≥ndög
);

2263 
	}
}

2266 
	$ev_sigh™dÀr
 (
signum
)

2268 #ifde‡
_WIN32


2269 
	`sig«l
 (
signum
, 
ev_sigh™dÀr
);

2272 
	`ev_„ed_sig«l
 (
signum
);

2273 
	}
}

2275 
noölöe


2276 
	$ev_„ed_sig«l_evít
 (
EV_P_
 
signum
Ë
EV_THROW


2278 
WL
 
w
;

2280 i‡(
	`ex≥˘_Ál£
 (
signum
 <0 || signum >
EV_NSIG
))

2283 --
signum
;

2285 #i‡
EV_MULTIPLICITY


2289 i‡(
	`ex≥˘_Ál£
 (
sig«ls
 [
signum
].
lo›
 !
EV_A
))

2293 
sig«ls
 [
signum
].
≥ndög
 = 0;

2294 
ECB_MEMORY_FENCE_RELEASE
;

2296 
w
 = 
sig«ls
 [
signum
].
hód
; w; w = w->
√xt
)

2297 
	`ev_„ed_evít
 (
	`EV_A_
 (
W
)
w
, 
EV_SIGNAL
);

2298 
	}
}

2300 #i‡
EV_USE_SIGNALFD


2302 
	$sigfdcb
 (
EV_P_
 
ev_io
 *
iow
, 
ªvíts
)

2304 
sig«lfd_sigöfo
 
si
[2], *
sù
;

2308 
ssize_t
 
ªs
 = 
	`ªad
 (
sigfd
, 
si
,  (si));

2311 
sù
 = 
si
; (*)sù < (*)sò+ 
ªs
; ++sip)

2312 
	`ev_„ed_sig«l_evít
 (
EV_A_
 
sù
->
ssi_signo
);

2314 i‡(
ªs
 < (
ssize_t
) (
si
))

2317 
	}
}

2324 #i‡
EV_CHILD_ENABLE


2325 
WL
 
	gchûds
 [
EV_PID_HASHSIZE
];

2327 
ev_sig«l
 
	gchûdev
;

2329 #i‚de‡
WIFCONTINUED


2330 
	#WIFCONTINUED
(
°©us
Ë0

	)

2334 
ölöe_•ìd
 

2335 
	$chûd_ª≠
 (
EV_P_
 
chaö
, 
pid
, 
°©us
)

2337 
ev_chûd
 *
w
;

2338 
åa˚d
 = 
	`WIFSTOPPED
 (
°©us
Ë|| 
	`WIFCONTINUED
 (status);

2340 
w
 = (
ev_chûd
 *)
chûds
 [
chaö
 & ((
EV_PID_HASHSIZE
Ë- 1)]; w; w = (ev_chûd *)((
WL
)w)->
√xt
)

2342 i‡((
w
->
pid
 ==Öid || !w->pid)

2343 && (!
åa˚d
 || (
w
->
Êags
 & 1)))

2345 
	`ev_£t_¥i‹ôy
 (
w
, 
EV_MAXPRI
);

2346 
w
->
Ωid
 = 
pid
;

2347 
w
->
r°©us
 = 
°©us
;

2348 
	`ev_„ed_evít
 (
	`EV_A_
 (
W
)
w
, 
EV_CHILD
);

2351 
	}
}

2353 #i‚de‡
WCONTINUED


2354 
	#WCONTINUED
 0

	)

2359 
	$chûdcb
 (
EV_P_
 
ev_sig«l
 *
sw
, 
ªvíts
)

2361 
pid
, 
°©us
;

2364 i‡(0 >(
pid
 = 
	`waôpid
 (-1, &
°©us
, 
WNOHANG
 | 
WUNTRACED
 | 
WCONTINUED
)))

2365 i‡(!
WCONTINUED


2366 || 
î∫o
 !
EINVAL


2367 || 0 >(
pid
 = 
	`waôpid
 (-1, &
°©us
, 
WNOHANG
 | 
WUNTRACED
)))

2372 
	`ev_„ed_evít
 (
	`EV_A_
 (
W
)
sw
, 
EV_SIGNAL
);

2374 
	`chûd_ª≠
 (
EV_A_
 
pid
,Öid, 
°©us
);

2375 i‡((
EV_PID_HASHSIZE
) > 1)

2376 
	`chûd_ª≠
 (
EV_A_
 0, 
pid
, 
°©us
);

2377 
	}
}

2383 #i‡
EV_USE_IOCP


2384 
	~"ev_io˝.c
"

2386 #i‡
EV_USE_PORT


2387 
	~"ev_p‹t.c
"

2389 #i‡
EV_USE_KQUEUE


2390 
	~"ev_kqueue.c
"

2392 #i‡
EV_USE_EPOLL


2393 
	~"ev_ïﬁl.c
"

2395 #i‡
EV_USE_POLL


2396 
	~"ev_pﬁl.c
"

2398 #i‡
EV_USE_SELECT


2399 
	~"ev_£À˘.c
"

2402 
ecb_cﬁd


2403 
	$ev_vîsi⁄_maj‹
 (Ë
EV_THROW


2405  
EV_VERSION_MAJOR
;

2406 
	}
}

2408 
ecb_cﬁd


2409 
	$ev_vîsi⁄_mö‹
 (Ë
EV_THROW


2411  
EV_VERSION_MINOR
;

2412 
	}
}

2415 
ölöe_size
 
ecb_cﬁd


2416 
	$íabÀ_£cuª
 ()

2418 #ifde‡
_WIN32


2421  
	`gëuid
 (Ë!
	`gëeuid
 ()

2422 || 
	`gëgid
 (Ë!
	`gëegid
 ();

2424 
	}
}

2426 
ecb_cﬁd


2427 
	$ev_suµ‹ãd_backíds
 (Ë
EV_THROW


2429 
Êags
 = 0;

2431 i‡(
EV_USE_PORT
 ) 
Êags
 |
EVBACKEND_PORT
;

2432 i‡(
EV_USE_KQUEUE
Ë
Êags
 |
EVBACKEND_KQUEUE
;

2433 i‡(
EV_USE_EPOLL
 ) 
Êags
 |
EVBACKEND_EPOLL
;

2434 i‡(
EV_USE_POLL
 ) 
Êags
 |
EVBACKEND_POLL
;

2435 i‡(
EV_USE_SELECT
Ë
Êags
 |
EVBACKEND_SELECT
;

2437  
Êags
;

2438 
	}
}

2440 
ecb_cﬁd


2441 
	$ev_ªcommíded_backíds
 (Ë
EV_THROW


2443 
Êags
 = 
	`ev_suµ‹ãd_backíds
 ();

2445 #i‚de‡
__NëBSD__


2448 
Êags
 &~
EVBACKEND_KQUEUE
;

2450 #ifde‡
__APPLE__


2452 
Êags
 &~
EVBACKEND_KQUEUE
;

2453 
Êags
 &~
EVBACKEND_POLL
;

2455 #ifde‡
__FªeBSD__


2456 
Êags
 &~
EVBACKEND_POLL
;

2459  
Êags
;

2460 
	}
}

2462 
ecb_cﬁd


2463 
	$ev_embeddabÀ_backíds
 (Ë
EV_THROW


2465 
Êags
 = 
EVBACKEND_EPOLL
 | 
EVBACKEND_KQUEUE
 | 
EVBACKEND_PORT
;

2468 i‡(
	`ev_löux_vîsi⁄
 () < 0x020620)

2469 
Êags
 &~
EVBACKEND_EPOLL
;

2471  
Êags
;

2472 
	}
}

2475 
	$ev_backíd
 (
EV_P
Ë
EV_THROW


2477  
backíd
;

2478 
	}
}

2480 #i‡
EV_FEATURE_API


2482 
	$ev_ôî©i⁄
 (
EV_P
Ë
EV_THROW


2484  
lo›_cou¡
;

2485 
	}
}

2488 
	$ev_dïth
 (
EV_P
Ë
EV_THROW


2490  
lo›_dïth
;

2491 
	}
}

2494 
	$ev_£t_io_cﬁÀ˘_öãrvÆ
 (
EV_P_
 
ev_t°amp
 
öãrvÆ
Ë
EV_THROW


2496 
io_blocktime
 = 
öãrvÆ
;

2497 
	}
}

2500 
	$ev_£t_timeout_cﬁÀ˘_öãrvÆ
 (
EV_P_
 
ev_t°amp
 
öãrvÆ
Ë
EV_THROW


2502 
timeout_blocktime
 = 
öãrvÆ
;

2503 
	}
}

2506 
	$ev_£t_u£rd©a
 (
EV_P_
 *
d©a
Ë
EV_THROW


2508 
u£rd©a
 = 
d©a
;

2509 
	}
}

2512 
	$ev_u£rd©a
 (
EV_P
Ë
EV_THROW


2514  
u£rd©a
;

2515 
	}
}

2518 
ev_£t_övoke_≥ndög_cb
 (
EV_P_
 (*
övoke_≥ndög_cb
)(
EV_P
)Ë
EV_THROW


2520 
övoke_cb
 = 
övoke_≥ndög_cb
;

2521 
	}
}

2524 
ev_£t_lo›_ªÀa£_cb
 (
EV_P_
 (*
ªÀa£
)(
EV_P
Ë
EV_THROW
, (*
acquúe
)(EV_P) EV_THROW) EV_THROW

2526 
ªÀa£_cb
 = 
ªÀa£
;

2527 
acquúe_cb
 = 
acquúe
;

2528 
	}
}

2532 
noölöe
 
ecb_cﬁd


2533 
	$lo›_öô
 (
EV_P_
 
Êags
Ë
EV_THROW


2535 i‡(!
backíd
)

2537 
‹igÊags
 = 
Êags
;

2539 #i‡
EV_USE_REALTIME


2540 i‡(!
have_ªÆtime
)

2542 
time•ec
 
ts
;

2544 i‡(!
	`˛ock_gëtime
 (
CLOCK_REALTIME
, &
ts
))

2545 
have_ªÆtime
 = 1;

2549 #i‡
EV_USE_MONOTONIC


2550 i‡(!
have_m⁄Ÿ⁄ic
)

2552 
time•ec
 
ts
;

2554 i‡(!
	`˛ock_gëtime
 (
CLOCK_MONOTONIC
, &
ts
))

2555 
have_m⁄Ÿ⁄ic
 = 1;

2560 #i‚de‡
_WIN32


2561 i‡(
Êags
 & 
EVFLAG_FORKCHECK
)

2562 
cuΩid
 = 
	`gëpid
 ();

2565 i‡(!(
Êags
 & 
EVFLAG_NOENV
)

2566 && !
	`íabÀ_£cuª
 ()

2567 && 
	`gëív
 ("LIBEV_FLAGS"))

2568 
Êags
 = 
	`©oi
 (
	`gëív
 ("LIBEV_FLAGS"));

2570 
ev_π_now
 = 
	`ev_time
 ();

2571 
mn_now
 = 
	`gë_˛ock
 ();

2572 
now_Êo‹
 = 
mn_now
;

2573 
πmn_diff
 = 
ev_π_now
 - 
mn_now
;

2574 #i‡
EV_FEATURE_API


2575 
övoke_cb
 = 
ev_övoke_≥ndög
;

2578 
io_blocktime
 = 0.;

2579 
timeout_blocktime
 = 0.;

2580 
backíd
 = 0;

2581 
backíd_fd
 = -1;

2582 
sig_≥ndög
 = 0;

2583 #i‡
EV_ASYNC_ENABLE


2584 
async_≥ndög
 = 0;

2586 
pùe_wrôe_skù≥d
 = 0;

2587 
pùe_wrôe_w™ãd
 = 0;

2588 
evpùe
 [0] = -1;

2589 
evpùe
 [1] = -1;

2590 #i‡
EV_USE_INOTIFY


2591 
fs_fd
 = 
Êags
 & 
EVFLAG_NOINOTIFY
 ? -1 : -2;

2593 #i‡
EV_USE_SIGNALFD


2594 
sigfd
 = 
Êags
 & 
EVFLAG_SIGNALFD
 ? -2 : -1;

2597 i‡(!(
Êags
 & 
EVBACKEND_MASK
))

2598 
Êags
 |
	`ev_ªcommíded_backíds
 ();

2600 #i‡
EV_USE_IOCP


2601 i‡(!
backíd
 && (
Êags
 & 
EVBACKEND_IOCP
 )Ëbackíd = 
	`io˝_öô
 (
EV_A_
 flags);

2603 #i‡
EV_USE_PORT


2604 i‡(!
backíd
 && (
Êags
 & 
EVBACKEND_PORT
 )Ëbackíd = 
	`p‹t_öô
 (
EV_A_
 flags);

2606 #i‡
EV_USE_KQUEUE


2607 i‡(!
backíd
 && (
Êags
 & 
EVBACKEND_KQUEUE
)Ëbackíd = 
	`kqueue_öô
 (
EV_A_
 flags);

2609 #i‡
EV_USE_EPOLL


2610 i‡(!
backíd
 && (
Êags
 & 
EVBACKEND_EPOLL
 )Ëbackíd = 
	`ïﬁl_öô
 (
EV_A_
 flags);

2612 #i‡
EV_USE_POLL


2613 i‡(!
backíd
 && (
Êags
 & 
EVBACKEND_POLL
 )Ëbackíd = 
	`pﬁl_öô
 (
EV_A_
 flags);

2615 #i‡
EV_USE_SELECT


2616 i‡(!
backíd
 && (
Êags
 & 
EVBACKEND_SELECT
)Ëbackíd = 
	`£À˘_öô
 (
EV_A_
 flags);

2619 
	`ev_¥ï¨e_öô
 (&
≥ndög_w
, 
≥ndögcb
);

2621 #i‡
EV_SIGNAL_ENABLE
 || 
EV_ASYNC_ENABLE


2622 
	`ev_öô
 (&
pùe_w
, 
pùecb
);

2623 
	`ev_£t_¥i‹ôy
 (&
pùe_w
, 
EV_MAXPRI
);

2626 
	}
}

2629 
ecb_cﬁd


2630 
	$ev_lo›_de°roy
 (
EV_P
)

2632 
i
;

2634 #i‡
EV_MULTIPLICITY


2636 i‡(!
EV_A
)

2640 #i‡
EV_CLEANUP_ENABLE


2642 i‡(
	`ex≥˘_Ál£
 (
˛ónup˙t
))

2644 
	`queue_evíts
 (
	`EV_A_
 (
W
 *)
˛ónups
, 
˛ónup˙t
, 
EV_CLEANUP
);

2645 
EV_INVOKE_PENDING
;

2649 #i‡
EV_CHILD_ENABLE


2650 i‡(
	`ev_is_deÁu…_lo›
 (
EV_A
Ë&& 
	`ev_is_a˘ive
 (&
chûdev
))

2652 
	`ev_ªf
 (
EV_A
);

2653 
	`ev_sig«l_°›
 (
EV_A_
 &
chûdev
);

2657 i‡(
	`ev_is_a˘ive
 (&
pùe_w
))

2662 i‡(
evpùe
 [0] >0Ë
	`EV_WIN32_CLOSE_FD
 (evpipe [0]);

2663 i‡(
evpùe
 [1] >0Ë
	`EV_WIN32_CLOSE_FD
 (evpipe [1]);

2666 #i‡
EV_USE_SIGNALFD


2667 i‡(
	`ev_is_a˘ive
 (&
sigfd_w
))

2668 
	`˛o£
 (
sigfd
);

2671 #i‡
EV_USE_INOTIFY


2672 i‡(
fs_fd
 >= 0)

2673 
	`˛o£
 (
fs_fd
);

2676 i‡(
backíd_fd
 >= 0)

2677 
	`˛o£
 (
backíd_fd
);

2679 #i‡
EV_USE_IOCP


2680 i‡(
backíd
 =
EVBACKEND_IOCP
 ) 
	`io˝_de°roy
 (
EV_A
);

2682 #i‡
EV_USE_PORT


2683 i‡(
backíd
 =
EVBACKEND_PORT
 ) 
	`p‹t_de°roy
 (
EV_A
);

2685 #i‡
EV_USE_KQUEUE


2686 i‡(
backíd
 =
EVBACKEND_KQUEUE
Ë
	`kqueue_de°roy
 (
EV_A
);

2688 #i‡
EV_USE_EPOLL


2689 i‡(
backíd
 =
EVBACKEND_EPOLL
 ) 
	`ïﬁl_de°roy
 (
EV_A
);

2691 #i‡
EV_USE_POLL


2692 i‡(
backíd
 =
EVBACKEND_POLL
 ) 
	`pﬁl_de°roy
 (
EV_A
);

2694 #i‡
EV_USE_SELECT


2695 i‡(
backíd
 =
EVBACKEND_SELECT
Ë
	`£À˘_de°roy
 (
EV_A
);

2698 
i
 = 
NUMPRI
; i--; )

2700 
	`¨øy_‰ì
 (
≥ndög
, [
i
]);

2701 #i‡
EV_IDLE_ENABLE


2702 
	`¨øy_‰ì
 (
idÀ
, [
i
]);

2706 
	`ev_‰ì
 (
™fds
);ánfd†0; 
™fdmax
 = 0;

2709 
	`¨øy_‰ì
 (
r„ed
, 
EMPTY
);

2710 
	`¨øy_‰ì
 (
fdch™ge
, 
EMPTY
);

2711 
	`¨øy_‰ì
 (
timî
, 
EMPTY
);

2712 #i‡
EV_PERIODIC_ENABLE


2713 
	`¨øy_‰ì
 (
≥riodic
, 
EMPTY
);

2715 #i‡
EV_FORK_ENABLE


2716 
	`¨øy_‰ì
 (
f‹k
, 
EMPTY
);

2718 #i‡
EV_CLEANUP_ENABLE


2719 
	`¨øy_‰ì
 (
˛ónup
, 
EMPTY
);

2721 
	`¨øy_‰ì
 (
¥ï¨e
, 
EMPTY
);

2722 
	`¨øy_‰ì
 (
check
, 
EMPTY
);

2723 #i‡
EV_ASYNC_ENABLE


2724 
	`¨øy_‰ì
 (
async
, 
EMPTY
);

2727 
backíd
 = 0;

2729 #i‡
EV_MULTIPLICITY


2730 i‡(
	`ev_is_deÁu…_lo›
 (
EV_A
))

2732 
ev_deÁu…_lo›_±r
 = 0;

2733 #i‡
EV_MULTIPLICITY


2735 
	`ev_‰ì
 (
EV_A
);

2737 
	}
}

2739 #i‡
EV_USE_INOTIFY


2740 
ölöe_size
 
öfy_f‹k
 (
EV_P
);

2743 
ölöe_size
 

2744 
	$lo›_f‹k
 (
EV_P
)

2746 #i‡
EV_USE_PORT


2747 i‡(
backíd
 =
EVBACKEND_PORT
 ) 
	`p‹t_f‹k
 (
EV_A
);

2749 #i‡
EV_USE_KQUEUE


2750 i‡(
backíd
 =
EVBACKEND_KQUEUE
Ë
	`kqueue_f‹k
 (
EV_A
);

2752 #i‡
EV_USE_EPOLL


2753 i‡(
backíd
 =
EVBACKEND_EPOLL
 ) 
	`ïﬁl_f‹k
 (
EV_A
);

2755 #i‡
EV_USE_INOTIFY


2756 
	`öfy_f‹k
 (
EV_A
);

2759 #i‡
EV_SIGNAL_ENABLE
 || 
EV_ASYNC_ENABLE


2760 i‡(
	`ev_is_a˘ive
 (&
pùe_w
))

2764 
	`ev_ªf
 (
EV_A
);

2765 
	`ev_io_°›
 (
EV_A_
 &
pùe_w
);

2767 i‡(
evpùe
 [0] >= 0)

2768 
	`EV_WIN32_CLOSE_FD
 (
evpùe
 [0]);

2770 
	`evpùe_öô
 (
EV_A
);

2772 
	`ev_„ed_evít
 (
EV_A_
 &
pùe_w
, 
EV_CUSTOM
);

2776 
po°f‹k
 = 0;

2777 
	}
}

2779 #i‡
EV_MULTIPLICITY


2781 
ev_lo›
 * 
ecb_cﬁd


2782 
	$ev_lo›_√w
 (
Êags
Ë
EV_THROW


2784 
EV_P
 = (
ev_lo›
 *)
	`ev_mÆloc
 ( (ev_loop));

2786 
	`mem£t
 (
EV_A
, 0,  (
ev_lo›
));

2787 
	`lo›_öô
 (
EV_A_
 
Êags
);

2789 i‡(
	`ev_backíd
 (
EV_A
))

2790  
EV_A
;

2792 
	`ev_‰ì
 (
EV_A
);

2794 
	}
}

2798 #i‡
EV_VERIFY


2799 
noölöe
 
ecb_cﬁd


2800 
	$vîify_w©chî
 (
EV_P_
 
W
 
w
)

2802 
	`as£π
 (("libev: w©chî ha†övÆidÖri‹ôy", 
	`ABSPRI
 (
w
Ë>0 && ABSPRI (wË< 
NUMPRI
));

2804 i‡(
w
->
≥ndög
)

2805 
	`as£π
 (("libev:Öídög w©chîÇŸ o¿≥ndög queue", 
≥ndögs
 [
	`ABSPRI
 (
w
)][w->
≥ndög
 - 1].w == w));

2806 
	}
}

2808 
noölöe
 
ecb_cﬁd


2809 
	$vîify_hóp
 (
EV_P_
 
ANHE
 *
hóp
, 
N
)

2811 
i
;

2813 
i
 = 
HEAP0
; i < 
N
 + HEAP0; ++i)

2815 
	`as£π
 (("libev:á˘ivêödex mism©ch i¿hóp", 
	`ev_a˘ive
 (
	`ANHE_w
 (
hóp
 [
i
])) == i));

2816 
	`as£π
 (("libev: hó∞c⁄dôi⁄ viﬁ©ed", 
i
 =
HEAP0
 || 
	`ANHE_©
 (
hóp
 [
	`HPARENT
 (i)]) <= ANHE_at (heap [i])));

2817 
	`as£π
 (("libev: hó∞© cachêmism©ch", 
	`ANHE_©
 (
hóp
 [
i
]Ë=
	`ev_©
 (
	`ANHE_w
 (heap [i]))));

2819 
	`vîify_w©chî
 (
	`EV_A_
 (
W
)
	`ANHE_w
 (
hóp
 [
i
]));

2821 
	}
}

2823 
noölöe
 
ecb_cﬁd


2824 
	$¨øy_vîify
 (
EV_P_
 
W
 *
ws
, 
˙t
)

2826 
˙t
--)

2828 
	`as£π
 (("libev:á˘ivêödex mism©ch", 
	`ev_a˘ive
 (
ws
 [
˙t
]) == cnt + 1));

2829 
	`vîify_w©chî
 (
EV_A_
 
ws
 [
˙t
]);

2831 
	}
}

2834 #i‡
EV_FEATURE_API


2835 
ecb_cﬁd


2836 
	$ev_vîify
 (
EV_P
Ë
EV_THROW


2838 #i‡
EV_VERIFY


2839 
i
;

2840 
WL
 
w
, 
w2
;

2842 
	`as£π
 (
a˘ive˙t
 >= -1);

2844 
	`as£π
 (
fdch™gemax
 >
fdch™ge˙t
);

2845 
i
 = 0; i < 
fdch™ge˙t
; ++i)

2846 
	`as£π
 (("libev:Çeg©ivêfd i¿fdch™ges", 
fdch™ges
 [
i
] >= 0));

2848 
	`as£π
 (
™fdmax
 >= 0);

2849 
i
 = 0; i < 
™fdmax
; ++i)

2851 
j
 = 0;

2853 
w
 = 
w2
 = 
™fds
 [
i
].
hód
; w; w = w->
√xt
)

2855 
	`vîify_w©chî
 (
	`EV_A_
 (
W
)
w
);

2857 i‡(
j
++ & 1)

2859 
	`as£π
 (("libev: iÿw©chîÜi° c⁄èö†®lo›", 
w
 !
w2
));

2860 
w2
 = w2->
√xt
;

2863 
	`as£π
 (("libev: i«˘ivêfd w©chî o¿™fdÜi°", 
	`ev_a˘ive
 (
w
) == 1));

2864 
	`as£π
 (("libev: fd mism©ch bëwì¿w©chîándánfd", ((
ev_io
 *)
w
)->
fd
 =
i
));

2868 
	`as£π
 (
timîmax
 >
timî˙t
);

2869 
	`vîify_hóp
 (
EV_A_
 
timîs
, 
timî˙t
);

2871 #i‡
EV_PERIODIC_ENABLE


2872 
	`as£π
 (
≥riodicmax
 >
≥riodic˙t
);

2873 
	`vîify_hóp
 (
EV_A_
 
≥riodics
, 
≥riodic˙t
);

2876 
i
 = 
NUMPRI
; i--; )

2878 
	`as£π
 (
≥ndögmax
 [
i
] >
≥ndög˙t
 [i]);

2879 #i‡
EV_IDLE_ENABLE


2880 
	`as£π
 (
idÀÆl
 >= 0);

2881 
	`as£π
 (
idÀmax
 [
i
] >
idÀ˙t
 [i]);

2882 
	`¨øy_vîify
 (
	`EV_A_
 (
W
 *)
idÀs
 [
i
], 
idÀ˙t
 [i]);

2886 #i‡
EV_FORK_ENABLE


2887 
	`as£π
 (
f‹kmax
 >
f‹k˙t
);

2888 
	`¨øy_vîify
 (
	`EV_A_
 (
W
 *)
f‹ks
, 
f‹k˙t
);

2891 #i‡
EV_CLEANUP_ENABLE


2892 
	`as£π
 (
˛ónupmax
 >
˛ónup˙t
);

2893 
	`¨øy_vîify
 (
	`EV_A_
 (
W
 *)
˛ónups
, 
˛ónup˙t
);

2896 #i‡
EV_ASYNC_ENABLE


2897 
	`as£π
 (
asyncmax
 >
async˙t
);

2898 
	`¨øy_vîify
 (
	`EV_A_
 (
W
 *)
asyncs
, 
async˙t
);

2901 #i‡
EV_PREPARE_ENABLE


2902 
	`as£π
 (
¥ï¨emax
 >
¥ï¨e˙t
);

2903 
	`¨øy_vîify
 (
	`EV_A_
 (
W
 *)
¥ï¨es
, 
¥ï¨e˙t
);

2906 #i‡
EV_CHECK_ENABLE


2907 
	`as£π
 (
checkmax
 >
check˙t
);

2908 
	`¨øy_vîify
 (
	`EV_A_
 (
W
 *)
checks
, 
check˙t
);

2912 #i‡
EV_CHILD_ENABLE


2913 
w
 = (
ev_chûd
 *)
chûds
 [
chaö
 & ((
EV_PID_HASHSIZE
Ë- 1)]; w; w = (ev_chûd *)((
WL
)w)->
√xt
)

2914 
signum
 = 
EV_NSIG
; signum--; ) i‡(
sig«ls
 [signum].
≥ndög
)

2918 
	}
}

2921 #i‡
EV_MULTIPLICITY


2922 
ev_lo›
 * 
	gecb_cﬁd


2926 
	$ev_deÁu…_lo›
 (
Êags
Ë
EV_THROW


2928 i‡(!
ev_deÁu…_lo›_±r
)

2930 #i‡
EV_MULTIPLICITY


2931 
EV_P
 = 
ev_deÁu…_lo›_±r
 = &
deÁu…_lo›_°ru˘
;

2933 
ev_deÁu…_lo›_±r
 = 1;

2936 
	`lo›_öô
 (
EV_A_
 
Êags
);

2938 i‡(
	`ev_backíd
 (
EV_A
))

2940 #i‡
EV_CHILD_ENABLE


2941 
	`ev_sig«l_öô
 (&
chûdev
, 
chûdcb
, 
SIGCHLD
);

2942 
	`ev_£t_¥i‹ôy
 (&
chûdev
, 
EV_MAXPRI
);

2943 
	`ev_sig«l_°¨t
 (
EV_A_
 &
chûdev
);

2944 
	`ev_uƒef
 (
EV_A
);

2948 
ev_deÁu…_lo›_±r
 = 0;

2951  
ev_deÁu…_lo›_±r
;

2952 
	}
}

2955 
	$ev_lo›_f‹k
 (
EV_P
Ë
EV_THROW


2957 
po°f‹k
 = 1;

2958 
	}
}

2963 
	$ev_övoke
 (
EV_P_
 *
w
, 
ªvíts
)

2965 
	`EV_CB_INVOKE
 ((
W
)
w
, 
ªvíts
);

2966 
	}
}

2969 
	$ev_≥ndög_cou¡
 (
EV_P
Ë
EV_THROW


2971 
¥i
;

2972 
cou¡
 = 0;

2974 
¥i
 = 
NUMPRI
;Öri--; )

2975 
cou¡
 +
≥ndög˙t
 [
¥i
];

2977  
cou¡
;

2978 
	}
}

2980 
noölöe


2981 
	$ev_övoke_≥ndög
 (
EV_P
)

2983 
≥ndög¥i
 = 
NUMPRI
;

2985 
≥ndög¥i
)

2987 --
≥ndög¥i
;

2989 
≥ndög˙t
 [
≥ndög¥i
])

2991 
ANPENDING
 *
p
 = 
≥ndögs
 [
≥ndög¥i
] + --
≥ndög˙t
 [pendingpri];

2993 
p
->
w
->
≥ndög
 = 0;

2994 
	`EV_CB_INVOKE
 (
p
->
w
,Ö->
evíts
);

2995 
EV_FREQUENT_CHECK
;

2998 
	}
}

3000 #i‡
EV_IDLE_ENABLE


3003 
ölöe_size
 

3004 
	$idÀ_ªify
 (
EV_P
)

3006 i‡(
	`ex≥˘_Ál£
 (
idÀÆl
))

3008 
¥i
;

3010 
¥i
 = 
NUMPRI
;Öri--; )

3012 i‡(
≥ndög˙t
 [
¥i
])

3015 i‡(
idÀ˙t
 [
¥i
])

3017 
	`queue_evíts
 (
	`EV_A_
 (
W
 *)
idÀs
 [
¥i
], 
idÀ˙t
 [¥i], 
EV_IDLE
);

3022 
	}
}

3026 
ölöe_size
 

3027 
	$timîs_ªify
 (
EV_P
)

3029 
EV_FREQUENT_CHECK
;

3031 i‡(
timî˙t
 && 
	`ANHE_©
 (
timîs
 [
HEAP0
]Ë< 
mn_now
)

3035 
ev_timî
 *
w
 = (ev_timî *)
	`ANHE_w
 (
timîs
 [
HEAP0
]);

3040 i‡(
w
->
ª≥©
)

3042 
	`ev_©
 (
w
Ë+w->
ª≥©
;

3043 i‡(
	`ev_©
 (
w
Ë< 
mn_now
)

3044 
	`ev_©
 (
w
Ë
mn_now
;

3046 
	`as£π
 (("libev:Çeg©ivêev_timîÑïóàvÆuêfound whûê¥o˚ssögÅimîs", 
w
->
ª≥©
 > 0.));

3048 
	`ANHE_©_ˇche
 (
timîs
 [
HEAP0
]);

3049 
	`downhóp
 (
timîs
, 
timî˙t
, 
HEAP0
);

3052 
	`ev_timî_°›
 (
EV_A_
 
w
);

3054 
EV_FREQUENT_CHECK
;

3055 
	`„ed_ªvî£
 (
	`EV_A_
 (
W
)
w
);

3057 
timî˙t
 && 
	`ANHE_©
 (
timîs
 [
HEAP0
]Ë< 
mn_now
);

3059 
	`„ed_ªvî£_d⁄e
 (
EV_A_
 
EV_TIMER
);

3061 
	}
}

3063 #i‡
EV_PERIODIC_ENABLE


3065 
noölöe


3066 
	$≥riodic_ªˇlc
 (
EV_P_
 
ev_≥riodic
 *
w
)

3068 
ev_t°amp
 
öãrvÆ
 = 
w
->öãrvÆ > 
MIN_INTERVAL
 ? w->interval : MIN_INTERVAL;

3069 
ev_t°amp
 
©
 = 
w
->
off£t
 + 
öãrvÆ
 * 
	`ev_Êo‹
 ((
ev_π_now
 - w->offset) / interval);

3072 
©
 <
ev_π_now
)

3074 
ev_t°amp
 
«t
 = 
©
 + 
w
->
öãrvÆ
;

3077 i‡(
	`ex≥˘_Ál£
 (
«t
 =
©
))

3079 
©
 = 
ev_π_now
;

3083 
©
 = 
«t
;

3086 
	`ev_©
 (
w
Ë
©
;

3087 
	}
}

3090 
ölöe_size
 

3091 
	$≥riodics_ªify
 (
EV_P
)

3093 
EV_FREQUENT_CHECK
;

3095 
≥riodic˙t
 && 
	`ANHE_©
 (
≥riodics
 [
HEAP0
]Ë< 
ev_π_now
)

3099 
ev_≥riodic
 *
w
 = (ev_≥riodi¯*)
	`ANHE_w
 (
≥riodics
 [
HEAP0
]);

3104 i‡(
w
->
ªscheduÀ_cb
)

3106 
	`ev_©
 (
w
Ëw->
	`ªscheduÀ_cb
 (w, 
ev_π_now
);

3108 
	`as£π
 (("libev:Év_≥riodi¯ªscheduÀ cÆlbackÑëu∫edÅimêöÅhê∑°", 
	`ev_©
 (
w
Ë>
ev_π_now
));

3110 
	`ANHE_©_ˇche
 (
≥riodics
 [
HEAP0
]);

3111 
	`downhóp
 (
≥riodics
, 
≥riodic˙t
, 
HEAP0
);

3113 i‡(
w
->
öãrvÆ
)

3115 
	`≥riodic_ªˇlc
 (
EV_A_
 
w
);

3116 
	`ANHE_©_ˇche
 (
≥riodics
 [
HEAP0
]);

3117 
	`downhóp
 (
≥riodics
, 
≥riodic˙t
, 
HEAP0
);

3120 
	`ev_≥riodic_°›
 (
EV_A_
 
w
);

3122 
EV_FREQUENT_CHECK
;

3123 
	`„ed_ªvî£
 (
	`EV_A_
 (
W
)
w
);

3125 
≥riodic˙t
 && 
	`ANHE_©
 (
≥riodics
 [
HEAP0
]Ë< 
ev_π_now
);

3127 
	`„ed_ªvî£_d⁄e
 (
EV_A_
 
EV_PERIODIC
);

3129 
	}
}

3133 
noölöe
 
ecb_cﬁd


3134 
	$≥riodics_ªscheduÀ
 (
EV_P
)

3136 
i
;

3139 
i
 = 
HEAP0
; i < 
≥riodic˙t
 + HEAP0; ++i)

3141 
ev_≥riodic
 *
w
 = (ev_≥riodi¯*)
	`ANHE_w
 (
≥riodics
 [
i
]);

3143 i‡(
w
->
ªscheduÀ_cb
)

3144 
	`ev_©
 (
w
Ëw->
	`ªscheduÀ_cb
 (w, 
ev_π_now
);

3145 i‡(
w
->
öãrvÆ
)

3146 
	`≥riodic_ªˇlc
 (
EV_A_
 
w
);

3148 
	`ANHE_©_ˇche
 (
≥riodics
 [
i
]);

3151 
	`ªhóp
 (
≥riodics
, 
≥riodic˙t
);

3152 
	}
}

3156 
noölöe
 
ecb_cﬁd


3157 
	$timîs_ªscheduÀ
 (
EV_P_
 
ev_t°amp
 
adju°
)

3159 
i
;

3161 
i
 = 0; i < 
timî˙t
; ++i)

3163 
ANHE
 *
he
 = 
timîs
 + 
i
 + 
HEAP0
;

3164 
	`ANHE_w
 (*
he
)->
©
 +
adju°
;

3165 
	`ANHE_©_ˇche
 (*
he
);

3167 
	}
}

3171 
ölöe_•ìd
 

3172 
	$time_upd©e
 (
EV_P_
 
ev_t°amp
 
max_block
)

3174 #i‡
EV_USE_MONOTONIC


3175 i‡(
	`ex≥˘_åue
 (
have_m⁄Ÿ⁄ic
))

3177 
i
;

3178 
ev_t°amp
 
odiff
 = 
πmn_diff
;

3180 
mn_now
 = 
	`gë_˛ock
 ();

3184 i‡(
	`ex≥˘_åue
 (
mn_now
 - 
now_Êo‹
 < 
MIN_TIMEJUMP
 * .5))

3186 
ev_π_now
 = 
πmn_diff
 + 
mn_now
;

3190 
now_Êo‹
 = 
mn_now
;

3191 
ev_π_now
 = 
	`ev_time
 ();

3201 
i
 = 4; --i; )

3203 
ev_t°amp
 
diff
;

3204 
πmn_diff
 = 
ev_π_now
 - 
mn_now
;

3206 
diff
 = 
odiff
 - 
πmn_diff
;

3208 i‡(
	`ex≥˘_åue
 ((
diff
 < 0. ? -dif‡: diffË< 
MIN_TIMEJUMP
))

3211 
ev_π_now
 = 
	`ev_time
 ();

3212 
mn_now
 = 
	`gë_˛ock
 ();

3213 
now_Êo‹
 = 
mn_now
;

3218 #i‡
EV_PERIODIC_ENABLE


3219 
	`≥riodics_ªscheduÀ
 (
EV_A
);

3225 
ev_π_now
 = 
	`ev_time
 ();

3227 i‡(
	`ex≥˘_Ál£
 (
mn_now
 > 
ev_π_now
 ||Év_π_now > mn_now + 
max_block
 + 
MIN_TIMEJUMP
))

3230 
	`timîs_ªscheduÀ
 (
EV_A_
 
ev_π_now
 - 
mn_now
);

3231 #i‡
EV_PERIODIC_ENABLE


3232 
	`≥riodics_ªscheduÀ
 (
EV_A
);

3236 
mn_now
 = 
ev_π_now
;

3238 
	}
}

3241 
	$ev_run
 (
EV_P_
 
Êags
)

3243 #i‡
EV_FEATURE_API


3244 ++
lo›_dïth
;

3247 
	`as£π
 (("libev:Év_lo›Ñecursi⁄ durögÑñó£ dëe˘ed", 
lo›_d⁄e
 !
EVBREAK_RECURSE
));

3249 
lo›_d⁄e
 = 
EVBREAK_CANCEL
;

3251 
EV_INVOKE_PENDING
;

3255 #i‡
EV_VERIFY
 >= 2

3256 
	`ev_vîify
 (
EV_A
);

3259 #i‚de‡
_WIN32


3260 i‡(
	`ex≥˘_Ál£
 (
cuΩid
))

3261 i‡(
	`ex≥˘_Ál£
 (
	`gëpid
 (Ë!
cuΩid
))

3263 
cuΩid
 = 
	`gëpid
 ();

3264 
po°f‹k
 = 1;

3268 #i‡
EV_FORK_ENABLE


3270 i‡(
	`ex≥˘_Ál£
 (
po°f‹k
))

3271 i‡(
f‹k˙t
)

3273 
	`queue_evíts
 (
	`EV_A_
 (
W
 *)
f‹ks
, 
f‹k˙t
, 
EV_FORK
);

3274 
EV_INVOKE_PENDING
;

3278 #i‡
EV_PREPARE_ENABLE


3280 i‡(
	`ex≥˘_Ál£
 (
¥ï¨e˙t
))

3282 
	`queue_evíts
 (
	`EV_A_
 (
W
 *)
¥ï¨es
, 
¥ï¨e˙t
, 
EV_PREPARE
);

3283 
EV_INVOKE_PENDING
;

3287 i‡(
	`ex≥˘_Ál£
 (
lo›_d⁄e
))

3291 i‡(
	`ex≥˘_Ál£
 (
po°f‹k
))

3292 
	`lo›_f‹k
 (
EV_A
);

3295 
	`fd_ªify
 (
EV_A
);

3299 
ev_t°amp
 
waôtime
 = 0.;

3300 
ev_t°amp
 
¶ì±ime
 = 0.;

3303 
ev_t°amp
 
¥ev_mn_now
 = 
mn_now
;

3306 
	`time_upd©e
 (
EV_A_
 1e100);

3309 
pùe_wrôe_w™ãd
 = 1;

3311 
ECB_MEMORY_FENCE
;

3313 i‡(
	`ex≥˘_åue
 (!(
Êags
 & 
EVRUN_NOWAIT
 || 
idÀÆl
 || !
a˘ive˙t
 || 
pùe_wrôe_skù≥d
)))

3315 
waôtime
 = 
MAX_BLOCKTIME
;

3317 i‡(
timî˙t
)

3319 
ev_t°amp
 
to
 = 
	`ANHE_©
 (
timîs
 [
HEAP0
]Ë- 
mn_now
;

3320 i‡(
waôtime
 > 
to
) waittime =Åo;

3323 #i‡
EV_PERIODIC_ENABLE


3324 i‡(
≥riodic˙t
)

3326 
ev_t°amp
 
to
 = 
	`ANHE_©
 (
≥riodics
 [
HEAP0
]Ë- 
ev_π_now
;

3327 i‡(
waôtime
 > 
to
) waittime =Åo;

3332 i‡(
	`ex≥˘_Ál£
 (
waôtime
 < 
timeout_blocktime
))

3333 
waôtime
 = 
timeout_blocktime
;

3337 i‡(
	`ex≥˘_Ál£
 (
waôtime
 < 
backíd_mötime
))

3338 
waôtime
 = 
backíd_mötime
;

3341 i‡(
	`ex≥˘_Ál£
 (
io_blocktime
))

3343 
¶ì±ime
 = 
io_blocktime
 - (
mn_now
 - 
¥ev_mn_now
);

3345 i‡(
¶ì±ime
 > 
waôtime
 - 
backíd_mötime
)

3346 
¶ì±ime
 = 
waôtime
 - 
backíd_mötime
;

3348 i‡(
	`ex≥˘_åue
 (
¶ì±ime
 > 0.))

3350 
	`ev_¶ìp
 (
¶ì±ime
);

3351 
waôtime
 -
¶ì±ime
;

3356 #i‡
EV_FEATURE_API


3357 ++
lo›_cou¡
;

3359 
	`as£π
 ((
lo›_d⁄e
 = 
EVBREAK_RECURSE
, 1));

3360 
	`backíd_pﬁl
 (
EV_A_
 
waôtime
);

3361 
	`as£π
 ((
lo›_d⁄e
 = 
EVBREAK_CANCEL
, 1));

3363 
pùe_wrôe_w™ãd
 = 0;

3365 
ECB_MEMORY_FENCE_ACQUIRE
;

3366 i‡(
pùe_wrôe_skù≥d
)

3368 
	`as£π
 (("libev:Öùe_wÇŸá˘ive, buàpùênŸ wrôãn", 
	`ev_is_a˘ive
 (&
pùe_w
)));

3369 
	`ev_„ed_evít
 (
EV_A_
 &
pùe_w
, 
EV_CUSTOM
);

3374 
	`time_upd©e
 (
EV_A_
 
waôtime
 + 
¶ì±ime
);

3378 
	`timîs_ªify
 (
EV_A
);

3379 #i‡
EV_PERIODIC_ENABLE


3380 
	`≥riodics_ªify
 (
EV_A
);

3383 #i‡
EV_IDLE_ENABLE


3385 
	`idÀ_ªify
 (
EV_A
);

3388 #i‡
EV_CHECK_ENABLE


3390 i‡(
	`ex≥˘_Ál£
 (
check˙t
))

3391 
	`queue_evíts
 (
	`EV_A_
 (
W
 *)
checks
, 
check˙t
, 
EV_CHECK
);

3394 
EV_INVOKE_PENDING
;

3396 
	`ex≥˘_åue
 (

3397 
a˘ive˙t


3398 && !
lo›_d⁄e


3399 && !(
Êags
 & (
EVRUN_ONCE
 | 
EVRUN_NOWAIT
))

3402 i‡(
lo›_d⁄e
 =
EVBREAK_ONE
)

3403 
lo›_d⁄e
 = 
EVBREAK_CANCEL
;

3405 #i‡
EV_FEATURE_API


3406 --
lo›_dïth
;

3409  
a˘ive˙t
;

3410 
	}
}

3413 
	$ev_bªak
 (
EV_P_
 
how
Ë
EV_THROW


3415 
lo›_d⁄e
 = 
how
;

3416 
	}
}

3419 
	$ev_ªf
 (
EV_P
Ë
EV_THROW


3421 ++
a˘ive˙t
;

3422 
	}
}

3425 
	$ev_uƒef
 (
EV_P
Ë
EV_THROW


3427 --
a˘ive˙t
;

3428 
	}
}

3431 
	$ev_now_upd©e
 (
EV_P
Ë
EV_THROW


3433 
	`time_upd©e
 (
EV_A_
 1e100);

3434 
	}
}

3437 
	$ev_su•íd
 (
EV_P
Ë
EV_THROW


3439 
	`ev_now_upd©e
 (
EV_A
);

3440 
	}
}

3443 
	$ev_ªsume
 (
EV_P
Ë
EV_THROW


3445 
ev_t°amp
 
mn_¥ev
 = 
mn_now
;

3447 
	`ev_now_upd©e
 (
EV_A
);

3448 
	`timîs_ªscheduÀ
 (
EV_A_
 
mn_now
 - 
mn_¥ev
);

3449 #i‡
EV_PERIODIC_ENABLE


3451 
	`≥riodics_ªscheduÀ
 (
EV_A
);

3453 
	}
}

3458 
ölöe_size
 

3459 
	$wli°_add
 (
WL
 *
hód
, WL 
ñem
)

3461 
ñem
->
√xt
 = *
hód
;

3462 *
hód
 = 
ñem
;

3463 
	}
}

3465 
ölöe_size
 

3466 
	$wli°_dñ
 (
WL
 *
hód
, WL 
ñem
)

3468 *
hód
)

3470 i‡(
	`ex≥˘_åue
 (*
hód
 =
ñem
))

3472 *
hód
 = 
ñem
->
√xt
;

3476 
hód
 = &(*hód)->
√xt
;

3478 
	}
}

3481 
ölöe_•ìd
 

3482 
	$˛ór_≥ndög
 (
EV_P_
 
W
 
w
)

3484 i‡(
w
->
≥ndög
)

3486 
≥ndögs
 [
	`ABSPRI
 (
w
)][w->
≥ndög
 - 1].w = (
W
)&
≥ndög_w
;

3487 
w
->
≥ndög
 = 0;

3489 
	}
}

3492 
	$ev_˛ór_≥ndög
 (
EV_P_
 *
w
Ë
EV_THROW


3494 
W
 
w_
 = (W)
w
;

3495 
≥ndög
 = 
w_
->pending;

3497 i‡(
	`ex≥˘_åue
 (
≥ndög
))

3499 
ANPENDING
 *
p
 = 
≥ndögs
 [
	`ABSPRI
 (
w_
)] + 
≥ndög
 - 1;

3500 
p
->
w
 = (
W
)&
≥ndög_w
;

3501 
w_
->
≥ndög
 = 0;

3502  
p
->
evíts
;

3506 
	}
}

3508 
ölöe_size
 

3509 
	$¥i_adju°
 (
EV_P_
 
W
 
w
)

3511 
¥i
 = 
	`ev_¥i‹ôy
 (
w
);

3512 
¥i
 =Örò< 
EV_MINPRI
 ? EV_MINPRI :Öri;

3513 
¥i
 =Örò> 
EV_MAXPRI
 ? EV_MAXPRI :Öri;

3514 
	`ev_£t_¥i‹ôy
 (
w
, 
¥i
);

3515 
	}
}

3517 
ölöe_•ìd
 

3518 
	$ev_°¨t
 (
EV_P_
 
W
 
w
, 
a˘ive
)

3520 
	`¥i_adju°
 (
EV_A_
 
w
);

3521 
w
->
a˘ive
 =áctive;

3522 
	`ev_ªf
 (
EV_A
);

3523 
	}
}

3525 
ölöe_size
 

3526 
	$ev_°›
 (
EV_P_
 
W
 
w
)

3528 
	`ev_uƒef
 (
EV_A
);

3529 
w
->
a˘ive
 = 0;

3530 
	}
}

3534 
noölöe


3535 
	$ev_io_°¨t
 (
EV_P_
 
ev_io
 *
w
Ë
EV_THROW


3537 
fd
 = 
w
->fd;

3539 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

3542 
	`as£π
 (("libev:Év_io_°¨àˇŒed wôhÇeg©ivêfd", 
fd
 >= 0));

3543 
	`as£π
 (("libev:Év_io_°¨àˇŒed wôh iŒegÆÉvíàmask", !(
w
->
evíts
 & ~(
EV__IOFDSET
 | 
EV_READ
 | 
EV_WRITE
))));

3545 
EV_FREQUENT_CHECK
;

3547 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 1);

3548 
	`¨øy_√edsize
 (
ANFD
, 
™fds
, 
™fdmax
, 
fd
 + 1, 
¨øy_öô_zîo
);

3549 
	`wli°_add
 (&
™fds
[
fd
].
hód
, (
WL
)
w
);

3552 
	`as£π
 (("libev:Év_io_°¨àˇŒed wôh c‹ru±ed w©chî", ((
WL
)
w
)->
√xt
 != (WL)w));

3554 
	`fd_ch™ge
 (
EV_A_
 
fd
, 
w
->
evíts
 & 
EV__IOFDSET
 | 
EV_ANFD_REIFY
);

3555 
w
->
evíts
 &~
EV__IOFDSET
;

3557 
EV_FREQUENT_CHECK
;

3558 
	}
}

3560 
noölöe


3561 
	$ev_io_°›
 (
EV_P_
 
ev_io
 *
w
Ë
EV_THROW


3563 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

3564 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

3567 
	`as£π
 (("libev:Év_io_°› cÆÀd wôh iŒegÆ fd (mu° sèy c⁄°™àa·î sèπ!)", 
w
->
fd
 >0 && w->fd < 
™fdmax
));

3569 
EV_FREQUENT_CHECK
;

3571 
	`wli°_dñ
 (&
™fds
[
w
->
fd
].
hód
, (
WL
)w);

3572 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

3574 
	`fd_ch™ge
 (
EV_A_
 
w
->
fd
, 
EV_ANFD_REIFY
);

3576 
EV_FREQUENT_CHECK
;

3577 
	}
}

3579 
noölöe


3580 
	$ev_timî_°¨t
 (
EV_P_
 
ev_timî
 *
w
Ë
EV_THROW


3582 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

3585 
	`ev_©
 (
w
Ë+
mn_now
;

3587 
	`as£π
 (("libev:Év_timî_°¨àˇŒed wôhÇeg©ivêtimîÑïóàvÆue", 
w
->
ª≥©
 >= 0.));

3589 
EV_FREQUENT_CHECK
;

3591 ++
timî˙t
;

3592 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 
timî˙t
 + 
HEAP0
 - 1);

3593 
	`¨øy_√edsize
 (
ANHE
, 
timîs
, 
timîmax
, 
	`ev_a˘ive
 (
w
Ë+ 1, 
EMPTY2
);

3594 
	`ANHE_w
 (
timîs
 [
	`ev_a˘ive
 (
w
)]Ë(
WT
)w;

3595 
	`ANHE_©_ˇche
 (
timîs
 [
	`ev_a˘ive
 (
w
)]);

3596 
	`uphóp
 (
timîs
, 
	`ev_a˘ive
 (
w
));

3598 
EV_FREQUENT_CHECK
;

3601 
	}
}

3603 
noölöe


3604 
	$ev_timî_°›
 (
EV_P_
 
ev_timî
 *
w
Ë
EV_THROW


3606 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

3607 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

3610 
EV_FREQUENT_CHECK
;

3613 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

3615 
	`as£π
 (("libev: i¡î«»timî hó∞c‹ru±i⁄", 
	`ANHE_w
 (
timîs
 [
a˘ive
]Ë=(
WT
)
w
));

3617 --
timî˙t
;

3619 i‡(
	`ex≥˘_åue
 (
a˘ive
 < 
timî˙t
 + 
HEAP0
))

3621 
timîs
 [
a˘ive
] =Åimî†[
timî˙t
 + 
HEAP0
];

3622 
	`adju°hóp
 (
timîs
, 
timî˙t
, 
a˘ive
);

3626 
	`ev_©
 (
w
Ë-
mn_now
;

3628 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

3630 
EV_FREQUENT_CHECK
;

3631 
	}
}

3633 
noölöe


3634 
	$ev_timî_agaö
 (
EV_P_
 
ev_timî
 *
w
Ë
EV_THROW


3636 
EV_FREQUENT_CHECK
;

3638 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

3640 i‡(
	`ev_is_a˘ive
 (
w
))

3642 i‡(
w
->
ª≥©
)

3644 
	`ev_©
 (
w
Ë
mn_now
 + w->
ª≥©
;

3645 
	`ANHE_©_ˇche
 (
timîs
 [
	`ev_a˘ive
 (
w
)]);

3646 
	`adju°hóp
 (
timîs
, 
timî˙t
, 
	`ev_a˘ive
 (
w
));

3649 
	`ev_timî_°›
 (
EV_A_
 
w
);

3651 i‡(
w
->
ª≥©
)

3653 
	`ev_©
 (
w
Ëw->
ª≥©
;

3654 
	`ev_timî_°¨t
 (
EV_A_
 
w
);

3657 
EV_FREQUENT_CHECK
;

3658 
	}
}

3660 
ev_t°amp


3661 
	$ev_timî_ªmaöög
 (
EV_P_
 
ev_timî
 *
w
Ë
EV_THROW


3663  
	`ev_©
 (
w
Ë- (
	`ev_is_a˘ive
 (wË? 
mn_now
 : 0.);

3664 
	}
}

3666 #i‡
EV_PERIODIC_ENABLE


3667 
noölöe


3668 
	$ev_≥riodic_°¨t
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
EV_THROW


3670 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

3673 i‡(
w
->
ªscheduÀ_cb
)

3674 
	`ev_©
 (
w
Ëw->
	`ªscheduÀ_cb
 (w, 
ev_π_now
);

3675 i‡(
w
->
öãrvÆ
)

3677 
	`as£π
 (("libev:Év_≥riodic_°¨àˇŒed wôhÇeg©ivêöãrvÆ vÆue", 
w
->
öãrvÆ
 >= 0.));

3678 
	`≥riodic_ªˇlc
 (
EV_A_
 
w
);

3681 
	`ev_©
 (
w
Ëw->
off£t
;

3683 
EV_FREQUENT_CHECK
;

3685 ++
≥riodic˙t
;

3686 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 
≥riodic˙t
 + 
HEAP0
 - 1);

3687 
	`¨øy_√edsize
 (
ANHE
, 
≥riodics
, 
≥riodicmax
, 
	`ev_a˘ive
 (
w
Ë+ 1, 
EMPTY2
);

3688 
	`ANHE_w
 (
≥riodics
 [
	`ev_a˘ive
 (
w
)]Ë(
WT
)w;

3689 
	`ANHE_©_ˇche
 (
≥riodics
 [
	`ev_a˘ive
 (
w
)]);

3690 
	`uphóp
 (
≥riodics
, 
	`ev_a˘ive
 (
w
));

3692 
EV_FREQUENT_CHECK
;

3695 
	}
}

3697 
noölöe


3698 
	$ev_≥riodic_°›
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
EV_THROW


3700 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

3701 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

3704 
EV_FREQUENT_CHECK
;

3707 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

3709 
	`as£π
 (("libev: i¡î«»≥riodi¯hó∞c‹ru±i⁄", 
	`ANHE_w
 (
≥riodics
 [
a˘ive
]Ë=(
WT
)
w
));

3711 --
≥riodic˙t
;

3713 i‡(
	`ex≥˘_åue
 (
a˘ive
 < 
≥riodic˙t
 + 
HEAP0
))

3715 
≥riodics
 [
a˘ive
] =Öîiodic†[
≥riodic˙t
 + 
HEAP0
];

3716 
	`adju°hóp
 (
≥riodics
, 
≥riodic˙t
, 
a˘ive
);

3720 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

3722 
EV_FREQUENT_CHECK
;

3723 
	}
}

3725 
noölöe


3726 
	$ev_≥riodic_agaö
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
EV_THROW


3729 
	`ev_≥riodic_°›
 (
EV_A_
 
w
);

3730 
	`ev_≥riodic_°¨t
 (
EV_A_
 
w
);

3731 
	}
}

3734 #i‚de‡
SA_RESTART


3735 
	#SA_RESTART
 0

	)

3738 #i‡
EV_SIGNAL_ENABLE


3740 
noölöe


3741 
	$ev_sig«l_°¨t
 (
EV_P_
 
ev_sig«l
 *
w
Ë
EV_THROW


3743 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

3746 
	`as£π
 (("libev:Év_sig«l_°¨àˇŒed wôh iŒegÆ sig«»numbî", 
w
->
signum
 > 0 && w->signum < 
EV_NSIG
));

3748 #i‡
EV_MULTIPLICITY


3749 
	`as£π
 (("libev:á signal mustÇot beáttachedÅoÅwo differentÜoops",

3750 !
sig«ls
 [
w
->
signum
 - 1].
lo›
 || signals [w->signum - 1].loop ==Üoop));

3752 
sig«ls
 [
w
->
signum
 - 1].
lo›
 = 
EV_A
;

3753 
ECB_MEMORY_FENCE_RELEASE
;

3756 
EV_FREQUENT_CHECK
;

3758 #i‡
EV_USE_SIGNALFD


3759 i‡(
sigfd
 == -2)

3761 
sigfd
 = 
	`sig«lfd
 (-1, &
sigfd_£t
, 
SFD_NONBLOCK
 | 
SFD_CLOEXEC
);

3762 i‡(
sigfd
 < 0 && 
î∫o
 =
EINVAL
)

3763 
sigfd
 = 
	`sig«lfd
 (-1, &
sigfd_£t
, 0);

3765 i‡(
sigfd
 >= 0)

3767 
	`fd_öã∫
 (
sigfd
);

3769 
	`sigem±y£t
 (&
sigfd_£t
);

3771 
	`ev_io_öô
 (&
sigfd_w
, 
sigfdcb
, 
sigfd
, 
EV_READ
);

3772 
	`ev_£t_¥i‹ôy
 (&
sigfd_w
, 
EV_MAXPRI
);

3773 
	`ev_io_°¨t
 (
EV_A_
 &
sigfd_w
);

3774 
	`ev_uƒef
 (
EV_A
);

3778 i‡(
sigfd
 >= 0)

3781 
	`sigadd£t
 (&
sigfd_£t
, 
w
->
signum
);

3782 
	`sig¥ocmask
 (
SIG_BLOCK
, &
sigfd_£t
, 0);

3784 
	`sig«lfd
 (
sigfd
, &
sigfd_£t
, 0);

3788 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 1);

3789 
	`wli°_add
 (&
sig«ls
 [
w
->
signum
 - 1].
hód
, (
WL
)w);

3791 i‡(!((
WL
)
w
)->
√xt
)

3792 #i‡
EV_USE_SIGNALFD


3793 i‡(
sigfd
 < 0)

3796 #ifde‡
_WIN32


3797 
	`evpùe_öô
 (
EV_A
);

3799 
	`sig«l
 (
w
->
signum
, 
ev_sigh™dÀr
);

3801 
siga˘i⁄
 
ß
;

3803 
	`evpùe_öô
 (
EV_A
);

3805 
ß
.
ß_h™dÀr
 = 
ev_sigh™dÀr
;

3806 
	`sigfûl£t
 (&
ß
.
ß_mask
);

3807 
ß
.
ß_Êags
 = 
SA_RESTART
;

3808 
	`siga˘i⁄
 (
w
->
signum
, &
ß
, 0);

3810 i‡(
‹igÊags
 & 
EVFLAG_NOSIGMASK
)

3812 
	`sigem±y£t
 (&
ß
.
ß_mask
);

3813 
	`sigadd£t
 (&
ß
.
ß_mask
, 
w
->
signum
);

3814 
	`sig¥ocmask
 (
SIG_UNBLOCK
, &
ß
.
ß_mask
, 0);

3819 
EV_FREQUENT_CHECK
;

3820 
	}
}

3822 
noölöe


3823 
	$ev_sig«l_°›
 (
EV_P_
 
ev_sig«l
 *
w
Ë
EV_THROW


3825 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

3826 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

3829 
EV_FREQUENT_CHECK
;

3831 
	`wli°_dñ
 (&
sig«ls
 [
w
->
signum
 - 1].
hód
, (
WL
)w);

3832 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

3834 i‡(!
sig«ls
 [
w
->
signum
 - 1].
hód
)

3836 #i‡
EV_MULTIPLICITY


3837 
sig«ls
 [
w
->
signum
 - 1].
lo›
 = 0;

3839 #i‡
EV_USE_SIGNALFD


3840 i‡(
sigfd
 >= 0)

3842 
sig£t_t
 
ss
;

3844 
	`sigem±y£t
 (&
ss
);

3845 
	`sigadd£t
 (&
ss
, 
w
->
signum
);

3846 
	`sigdñ£t
 (&
sigfd_£t
, 
w
->
signum
);

3848 
	`sig«lfd
 (
sigfd
, &
sigfd_£t
, 0);

3849 
	`sig¥ocmask
 (
SIG_UNBLOCK
, &
ss
, 0);

3853 
	`sig«l
 (
w
->
signum
, 
SIG_DFL
);

3856 
EV_FREQUENT_CHECK
;

3857 
	}
}

3861 #i‡
EV_CHILD_ENABLE


3864 
	$ev_chûd_°¨t
 (
EV_P_
 
ev_chûd
 *
w
Ë
EV_THROW


3866 #i‡
EV_MULTIPLICITY


3867 
	`as£π
 (("libev: chûd w©chî†¨ê⁄ly suµ‹ãd i¿thêdeÁu…Üo›", 
lo›
 =
ev_deÁu…_lo›_±r
));

3869 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

3872 
EV_FREQUENT_CHECK
;

3874 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 1);

3875 
	`wli°_add
 (&
chûds
 [
w
->
pid
 & ((
EV_PID_HASHSIZE
Ë- 1)], (
WL
)w);

3877 
EV_FREQUENT_CHECK
;

3878 
	}
}

3881 
	$ev_chûd_°›
 (
EV_P_
 
ev_chûd
 *
w
Ë
EV_THROW


3883 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

3884 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

3887 
EV_FREQUENT_CHECK
;

3889 
	`wli°_dñ
 (&
chûds
 [
w
->
pid
 & ((
EV_PID_HASHSIZE
Ë- 1)], (
WL
)w);

3890 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

3892 
EV_FREQUENT_CHECK
;

3893 
	}
}

3897 #i‡
EV_STAT_ENABLE


3899 #ifde‡
_WIN32


3900 #unde‡
l°©


3901 
	#l°©
(
a
,
b
Ë
	`_°©i64
 (a,b)

	)

3904 
	#DEF_STAT_INTERVAL
 5.0074891

	)

3905 
	#NFS_STAT_INTERVAL
 30.1074891

	)

3906 
	#MIN_STAT_INTERVAL
 0.1074891

	)

3908 
noölöe
 
°©_timî_cb
 (
EV_P_
 
ev_timî
 *
w_
, 
ªvíts
);

3910 #i‡
EV_USE_INOTIFY


3913 
	#EV_INOTIFY_BUFSIZE
 ( (
öŸify_evít
Ë* 2 + 
NAME_MAX
)

	)

3915 
noölöe


3916 
	$öfy_add
 (
EV_P_
 
ev_°©
 *
w
)

3918 
w
->
wd
 = 
	`öŸify_add_w©ch
 (
fs_fd
, w->
∑th
,

3919 
IN_ATTRIB
 | 
IN_DELETE_SELF
 | 
IN_MOVE_SELF
 | 
IN_MODIFY


3920 | 
IN_CREATE
 | 
IN_DELETE
 | 
IN_MOVED_FROM
 | 
IN_MOVED_TO


3921 | 
IN_DONT_FOLLOW
 | 
IN_MASK_ADD
);

3923 i‡(
w
->
wd
 >= 0)

3925 
°©fs
 
sfs
;

3931 i‡(!
fs_2625
)

3932 
w
->
timî
.
ª≥©
 = w->
öãrvÆ
 ? w->öãrvÆ : 
DEF_STAT_INTERVAL
;

3933 i‡(!
	`°©fs
 (
w
->
∑th
, &
sfs
)

3934 && (
sfs
.
f_ty≥
 == 0x1373

3935 || 
sfs
.
f_ty≥
 == 0x4006

3936 || 
sfs
.
f_ty≥
 == 0x4d44

3937 || 
sfs
.
f_ty≥
 == 0xEF53

3938 || 
sfs
.
f_ty≥
 == 0x72b6

3939 || 
sfs
.
f_ty≥
 == 0x858458f6

3940 || 
sfs
.
f_ty≥
 == 0x5346544e

3941 || 
sfs
.
f_ty≥
 == 0x3153464a

3942 || 
sfs
.
f_ty≥
 == 0x9123683e

3943 || 
sfs
.
f_ty≥
 == 0x52654973

3944 || 
sfs
.
f_ty≥
 == 0x01021994

3945 || 
sfs
.
f_ty≥
 == 0x58465342 ))

3946 
w
->
timî
.
ª≥©
 = 0.;

3948 
w
->
timî
.
ª≥©
 = w->
öãrvÆ
 ? w->öãrvÆ : 
NFS_STAT_INTERVAL
;

3953 
w
->
timî
.
ª≥©
 = w->
öãrvÆ
 ? w->öãrvÆ : 
DEF_STAT_INTERVAL
;

3958 i‡((
î∫o
 =
ENOENT
 ||Éºnÿ=
EACCES
Ë&& 
	`°æí
 (
w
->
∑th
) < 4096)

3960 
∑th
 [4096];

3961 
	`°r˝y
 (
∑th
, 
w
->path);

3965 
mask
 = 
IN_MASK_ADD
 | 
IN_DELETE_SELF
 | 
IN_MOVE_SELF


3966 | (
î∫o
 =
EACCES
 ? 
IN_ATTRIB
 : 
IN_CREATE
 | 
IN_MOVED_TO
);

3968 *
≥nd
 = 
	`°ºchr
 (
∑th
, '/');

3970 i‡(!
≥nd
 ||Öíd =
∑th
)

3973 *
≥nd
 = 0;

3974 
w
->
wd
 = 
	`öŸify_add_w©ch
 (
fs_fd
, 
∑th
, 
mask
);

3976 
w
->
wd
 < 0 && (
î∫o
 =
ENOENT
 ||Éºnÿ=
EACCES
));

3980 i‡(
w
->
wd
 >= 0)

3981 
	`wli°_add
 (&
fs_hash
 [
w
->
wd
 & ((
EV_INOTIFY_HASHSIZE
Ë- 1)].
hód
, (
WL
)w);

3984 i‡(
	`ev_is_a˘ive
 (&
w
->
timî
)Ë
	`ev_ªf
 (
EV_A
);

3985 
	`ev_timî_agaö
 (
EV_A_
 &
w
->
timî
);

3986 i‡(
	`ev_is_a˘ive
 (&
w
->
timî
)Ë
	`ev_uƒef
 (
EV_A
);

3987 
	}
}

3989 
noölöe


3990 
	$öfy_dñ
 (
EV_P_
 
ev_°©
 *
w
)

3992 
¶Ÿ
;

3993 
wd
 = 
w
->wd;

3995 i‡(
wd
 < 0)

3998 
w
->
wd
 = -2;

3999 
¶Ÿ
 = 
wd
 & ((
EV_INOTIFY_HASHSIZE
) - 1);

4000 
	`wli°_dñ
 (&
fs_hash
 [
¶Ÿ
].
hód
, (
WL
)
w
);

4003 
	`öŸify_rm_w©ch
 (
fs_fd
, 
wd
);

4004 
	}
}

4006 
noölöe


4007 
	$öfy_wd
 (
EV_P_
 
¶Ÿ
, 
wd
, 
öŸify_evít
 *
ev
)

4009 i‡(
¶Ÿ
 < 0)

4011 
¶Ÿ
 = 0; slŸ < (
EV_INOTIFY_HASHSIZE
); ++slot)

4012 
	`öfy_wd
 (
EV_A_
 
¶Ÿ
, 
wd
, 
ev
);

4015 
WL
 
w_
;

4017 
w_
 = 
fs_hash
 [
¶Ÿ
 & ((
EV_INOTIFY_HASHSIZE
Ë- 1)].
hód
; w_; )

4019 
ev_°©
 *
w
 = (ev_°© *)
w_
;

4020 
w_
 = w_->
√xt
;

4022 i‡(
w
->
wd
 == wd || wd == -1)

4024 i‡(
ev
->
mask
 & (
IN_IGNORED
 | 
IN_UNMOUNT
 | 
IN_DELETE_SELF
))

4026 
	`wli°_dñ
 (&
fs_hash
 [
¶Ÿ
 & ((
EV_INOTIFY_HASHSIZE
Ë- 1)].
hód
, (
WL
)
w
);

4027 
w
->
wd
 = -1;

4028 
	`öfy_add
 (
EV_A_
 
w
);

4031 
	`°©_timî_cb
 (
EV_A_
 &
w
->
timî
, 0);

4035 
	}
}

4038 
	$öfy_cb
 (
EV_P_
 
ev_io
 *
w
, 
ªvíts
)

4040 
buf
 [
EV_INOTIFY_BUFSIZE
];

4041 
ofs
;

4042 
Àn
 = 
	`ªad
 (
fs_fd
, 
buf
,  (buf));

4044 
ofs
 = 0; of†< 
Àn
; )

4046 
öŸify_evít
 *
ev
 = (öŸify_evíà*)(
buf
 + 
ofs
);

4047 
	`öfy_wd
 (
EV_A_
 
ev
->
wd
,Év->wd,Év);

4048 
ofs
 + (
öŸify_evít
Ë+ 
ev
->
Àn
;

4050 
	}
}

4052 
ölöe_size
 
ecb_cﬁd


4053 
	$ev_check_2625
 (
EV_P
)

4058 i‡(
	`ev_löux_vîsi⁄
 () < 0x020619)

4061 
fs_2625
 = 1;

4062 
	}
}

4064 
ölöe_size
 

4065 
	$öfy_√wfd
 ()

4067 #i‡
deföed
 
IN_CLOEXEC
 && deföed 
IN_NONBLOCK


4068 
fd
 = 
	`öŸify_öô1
 (
IN_CLOEXEC
 | 
IN_NONBLOCK
);

4069 i‡(
fd
 >= 0)

4070  
fd
;

4072  
	`öŸify_öô
 ();

4073 
	}
}

4075 
ölöe_size
 

4076 
	$öfy_öô
 (
EV_P
)

4078 i‡(
fs_fd
 != -2)

4081 
fs_fd
 = -1;

4083 
	`ev_check_2625
 (
EV_A
);

4085 
fs_fd
 = 
	`öfy_√wfd
 ();

4087 i‡(
fs_fd
 >= 0)

4089 
	`fd_öã∫
 (
fs_fd
);

4090 
	`ev_io_öô
 (&
fs_w
, 
öfy_cb
, 
fs_fd
, 
EV_READ
);

4091 
	`ev_£t_¥i‹ôy
 (&
fs_w
, 
EV_MAXPRI
);

4092 
	`ev_io_°¨t
 (
EV_A_
 &
fs_w
);

4093 
	`ev_uƒef
 (
EV_A
);

4095 
	}
}

4097 
ölöe_size
 

4098 
	$öfy_f‹k
 (
EV_P
)

4100 
¶Ÿ
;

4102 i‡(
fs_fd
 < 0)

4105 
	`ev_ªf
 (
EV_A
);

4106 
	`ev_io_°›
 (
EV_A_
 &
fs_w
);

4107 
	`˛o£
 (
fs_fd
);

4108 
fs_fd
 = 
	`öfy_√wfd
 ();

4110 i‡(
fs_fd
 >= 0)

4112 
	`fd_öã∫
 (
fs_fd
);

4113 
	`ev_io_£t
 (&
fs_w
, 
fs_fd
, 
EV_READ
);

4114 
	`ev_io_°¨t
 (
EV_A_
 &
fs_w
);

4115 
	`ev_uƒef
 (
EV_A
);

4118 
¶Ÿ
 = 0; slŸ < (
EV_INOTIFY_HASHSIZE
); ++slot)

4120 
WL
 
w_
 = 
fs_hash
 [
¶Ÿ
].
hód
;

4121 
fs_hash
 [
¶Ÿ
].
hód
 = 0;

4123 
w_
)

4125 
ev_°©
 *
w
 = (ev_°© *)
w_
;

4126 
w_
 = w_->
√xt
;

4128 
w
->
wd
 = -1;

4130 i‡(
fs_fd
 >= 0)

4131 
	`öfy_add
 (
EV_A_
 
w
);

4134 
w
->
timî
.
ª≥©
 = w->
öãrvÆ
 ? w->öãrvÆ : 
DEF_STAT_INTERVAL
;

4135 i‡(
	`ev_is_a˘ive
 (&
w
->
timî
)Ë
	`ev_ªf
 (
EV_A
);

4136 
	`ev_timî_agaö
 (
EV_A_
 &
w
->
timî
);

4137 i‡(
	`ev_is_a˘ive
 (&
w
->
timî
)Ë
	`ev_uƒef
 (
EV_A
);

4141 
	}
}

4145 #ifde‡
_WIN32


4146 
	#EV_LSTAT
(
p
,
b
Ë
	`_°©i64
 (p, b)

	)

4148 
	#EV_LSTAT
(
p
,
b
Ë
	`l°©
 (p, b)

	)

4152 
	$ev_°©_°©
 (
EV_P_
 
ev_°©
 *
w
Ë
EV_THROW


4154 i‡(
	`l°©
 (
w
->
∑th
, &w->
©å
) < 0)

4155 
w
->
©å
.
°_∆ök
 = 0;

4156 i‡(!
w
->
©å
.
°_∆ök
)

4157 
w
->
©å
.
°_∆ök
 = 1;

4158 
	}
}

4160 
noölöe


4161 
	$°©_timî_cb
 (
EV_P_
 
ev_timî
 *
w_
, 
ªvíts
)

4163 
ev_°©
 *
w
 = (ev_°© *)(((*)
w_
Ë- 
	`off£tof
 (ev_°©, 
timî
));

4165 
ev_°©d©a
 
¥ev
 = 
w
->
©å
;

4166 
	`ev_°©_°©
 (
EV_A_
 
w
);

4170 
¥ev
.
°_dev
 !
w
->
©å
.st_dev

4171 || 
¥ev
.
°_öo
 !
w
->
©å
.st_ino

4172 || 
¥ev
.
°_mode
 !
w
->
©å
.st_mode

4173 || 
¥ev
.
°_∆ök
 !
w
->
©å
.st_nlink

4174 || 
¥ev
.
°_uid
 !
w
->
©å
.st_uid

4175 || 
¥ev
.
°_gid
 !
w
->
©å
.st_gid

4176 || 
¥ev
.
°_rdev
 !
w
->
©å
.st_rdev

4177 || 
¥ev
.
°_size
 !
w
->
©å
.st_size

4178 || 
¥ev
.
°_©ime
 !
w
->
©å
.st_atime

4179 || 
¥ev
.
°_mtime
 !
w
->
©å
.st_mtime

4180 || 
¥ev
.
°_˘ime
 !
w
->
©å
.st_ctime

4185 
w
->
¥ev
 =Örev;

4187 #i‡
EV_USE_INOTIFY


4188 i‡(
fs_fd
 >= 0)

4190 
	`öfy_dñ
 (
EV_A_
 
w
);

4191 
	`öfy_add
 (
EV_A_
 
w
);

4192 
	`ev_°©_°©
 (
EV_A_
 
w
);

4196 
	`ev_„ed_evít
 (
EV_A_
 
w
, 
EV_STAT
);

4198 
	}
}

4201 
	$ev_°©_°¨t
 (
EV_P_
 
ev_°©
 *
w
Ë
EV_THROW


4203 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4206 
	`ev_°©_°©
 (
EV_A_
 
w
);

4208 i‡(
w
->
öãrvÆ
 < 
MIN_STAT_INTERVAL
 && w->interval)

4209 
w
->
öãrvÆ
 = 
MIN_STAT_INTERVAL
;

4211 
	`ev_timî_öô
 (&
w
->
timî
, 
°©_timî_cb
, 0., w->
öãrvÆ
 ? w->öãrvÆ : 
DEF_STAT_INTERVAL
);

4212 
	`ev_£t_¥i‹ôy
 (&
w
->
timî
, 
	`ev_¥i‹ôy
 (w));

4214 #i‡
EV_USE_INOTIFY


4215 
	`öfy_öô
 (
EV_A
);

4217 i‡(
fs_fd
 >= 0)

4218 
	`öfy_add
 (
EV_A_
 
w
);

4222 
	`ev_timî_agaö
 (
EV_A_
 &
w
->
timî
);

4223 
	`ev_uƒef
 (
EV_A
);

4226 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 1);

4228 
EV_FREQUENT_CHECK
;

4229 
	}
}

4232 
	$ev_°©_°›
 (
EV_P_
 
ev_°©
 *
w
Ë
EV_THROW


4234 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4235 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4238 
EV_FREQUENT_CHECK
;

4240 #i‡
EV_USE_INOTIFY


4241 
	`öfy_dñ
 (
EV_A_
 
w
);

4244 i‡(
	`ev_is_a˘ive
 (&
w
->
timî
))

4246 
	`ev_ªf
 (
EV_A
);

4247 
	`ev_timî_°›
 (
EV_A_
 &
w
->
timî
);

4250 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4252 
EV_FREQUENT_CHECK
;

4253 
	}
}

4256 #i‡
EV_IDLE_ENABLE


4258 
	$ev_idÀ_°¨t
 (
EV_P_
 
ev_idÀ
 *
w
Ë
EV_THROW


4260 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4263 
	`¥i_adju°
 (
	`EV_A_
 (
W
)
w
);

4265 
EV_FREQUENT_CHECK
;

4268 
a˘ive
 = ++
idÀ˙t
 [
	`ABSPRI
 (
w
)];

4270 ++
idÀÆl
;

4271 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 
a˘ive
);

4273 
	`¨øy_√edsize
 (
ev_idÀ
 *, 
idÀs
 [
	`ABSPRI
 (
w
)], 
idÀmax
 [ABSPRI (w)], 
a˘ive
, 
EMPTY2
);

4274 
idÀs
 [
	`ABSPRI
 (
w
)][
a˘ive
 - 1] = w;

4277 
EV_FREQUENT_CHECK
;

4278 
	}
}

4281 
	$ev_idÀ_°›
 (
EV_P_
 
ev_idÀ
 *
w
Ë
EV_THROW


4283 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4284 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4287 
EV_FREQUENT_CHECK
;

4290 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

4292 
idÀs
 [
	`ABSPRI
 (
w
)][
a˘ive
 - 1] = idÀ†[ABSPRI (w)][--
idÀ˙t
 [ABSPRI (w)]];

4293 
	`ev_a˘ive
 (
idÀs
 [
	`ABSPRI
 (
w
)][
a˘ive
 - 1]) =áctive;

4295 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4296 --
idÀÆl
;

4299 
EV_FREQUENT_CHECK
;

4300 
	}
}

4303 #i‡
EV_PREPARE_ENABLE


4305 
	$ev_¥ï¨e_°¨t
 (
EV_P_
 
ev_¥ï¨e
 *
w
Ë
EV_THROW


4307 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4310 
EV_FREQUENT_CHECK
;

4312 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, ++
¥ï¨e˙t
);

4313 
	`¨øy_√edsize
 (
ev_¥ï¨e
 *, 
¥ï¨es
, 
¥ï¨emax
, 
¥ï¨e˙t
, 
EMPTY2
);

4314 
¥ï¨es
 [
¥ï¨e˙t
 - 1] = 
w
;

4316 
EV_FREQUENT_CHECK
;

4317 
	}
}

4320 
	$ev_¥ï¨e_°›
 (
EV_P_
 
ev_¥ï¨e
 *
w
Ë
EV_THROW


4322 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4323 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4326 
EV_FREQUENT_CHECK
;

4329 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

4331 
¥ï¨es
 [
a˘ive
 - 1] =Öª∑ª†[--
¥ï¨e˙t
];

4332 
	`ev_a˘ive
 (
¥ï¨es
 [
a˘ive
 - 1]) =áctive;

4335 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4337 
EV_FREQUENT_CHECK
;

4338 
	}
}

4341 #i‡
EV_CHECK_ENABLE


4343 
	$ev_check_°¨t
 (
EV_P_
 
ev_check
 *
w
Ë
EV_THROW


4345 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4348 
EV_FREQUENT_CHECK
;

4350 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, ++
check˙t
);

4351 
	`¨øy_√edsize
 (
ev_check
 *, 
checks
, 
checkmax
, 
check˙t
, 
EMPTY2
);

4352 
checks
 [
check˙t
 - 1] = 
w
;

4354 
EV_FREQUENT_CHECK
;

4355 
	}
}

4358 
	$ev_check_°›
 (
EV_P_
 
ev_check
 *
w
Ë
EV_THROW


4360 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4361 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4364 
EV_FREQUENT_CHECK
;

4367 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

4369 
checks
 [
a˘ive
 - 1] = check†[--
check˙t
];

4370 
	`ev_a˘ive
 (
checks
 [
a˘ive
 - 1]) =áctive;

4373 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4375 
EV_FREQUENT_CHECK
;

4376 
	}
}

4379 #i‡
EV_EMBED_ENABLE


4380 
noölöe


4381 
	$ev_embed_swìp
 (
EV_P_
 
ev_embed
 *
w
Ë
EV_THROW


4383 
	`ev_run
 (
w
->
Ÿhî
, 
EVRUN_NOWAIT
);

4384 
	}
}

4387 
	$embed_io_cb
 (
EV_P_
 
ev_io
 *
io
, 
ªvíts
)

4389 
ev_embed
 *
w
 = (ev_embed *)(((*)
io
Ë- 
	`off£tof
 (ev_embed, io));

4391 i‡(
	`ev_cb
 (
w
))

4392 
	`ev_„ed_evít
 (
	`EV_A_
 (
W
)
w
, 
EV_EMBED
);

4394 
	`ev_run
 (
w
->
Ÿhî
, 
EVRUN_NOWAIT
);

4395 
	}
}

4398 
	$embed_¥ï¨e_cb
 (
EV_P_
 
ev_¥ï¨e
 *
¥ï¨e
, 
ªvíts
)

4400 
ev_embed
 *
w
 = (ev_embed *)(((*)
¥ï¨e
Ë- 
	`off£tof
 (ev_embed,Örepare));

4403 
EV_P
 = 
w
->
Ÿhî
;

4405 
fdch™ge˙t
)

4407 
	`fd_ªify
 (
EV_A
);

4408 
	`ev_run
 (
EV_A_
 
EVRUN_NOWAIT
);

4411 
	}
}

4414 
	$embed_f‹k_cb
 (
EV_P_
 
ev_f‹k
 *
f‹k_w
, 
ªvíts
)

4416 
ev_embed
 *
w
 = (ev_embed *)(((*)
f‹k_w
Ë- 
	`off£tof
 (ev_embed, 
f‹k
));

4418 
	`ev_embed_°›
 (
EV_A_
 
w
);

4421 
EV_P
 = 
w
->
Ÿhî
;

4423 
	`ev_lo›_f‹k
 (
EV_A
);

4424 
	`ev_run
 (
EV_A_
 
EVRUN_NOWAIT
);

4427 
	`ev_embed_°¨t
 (
EV_A_
 
w
);

4428 
	}
}

4432 
	$embed_idÀ_cb
 (
EV_P_
 
ev_idÀ
 *
idÀ
, 
ªvíts
)

4434 
	`ev_idÀ_°›
 (
EV_A_
 
idÀ
);

4435 
	}
}

4439 
	$ev_embed_°¨t
 (
EV_P_
 
ev_embed
 *
w
Ë
EV_THROW


4441 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4445 
EV_P
 = 
w
->
Ÿhî
;

4446 
	`as£π
 (("libev:Üo›Åÿbêembedded i†nŸÉmbeddabÀ", 
backíd
 & 
	`ev_embeddabÀ_backíds
 ()));

4447 
	`ev_io_öô
 (&
w
->
io
, 
embed_io_cb
, 
backíd_fd
, 
EV_READ
);

4450 
EV_FREQUENT_CHECK
;

4452 
	`ev_£t_¥i‹ôy
 (&
w
->
io
, 
	`ev_¥i‹ôy
 (w));

4453 
	`ev_io_°¨t
 (
EV_A_
 &
w
->
io
);

4455 
	`ev_¥ï¨e_öô
 (&
w
->
¥ï¨e
, 
embed_¥ï¨e_cb
);

4456 
	`ev_£t_¥i‹ôy
 (&
w
->
¥ï¨e
, 
EV_MINPRI
);

4457 
	`ev_¥ï¨e_°¨t
 (
EV_A_
 &
w
->
¥ï¨e
);

4459 
	`ev_f‹k_öô
 (&
w
->
f‹k
, 
embed_f‹k_cb
);

4460 
	`ev_f‹k_°¨t
 (
EV_A_
 &
w
->
f‹k
);

4464 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, 1);

4466 
EV_FREQUENT_CHECK
;

4467 
	}
}

4470 
	$ev_embed_°›
 (
EV_P_
 
ev_embed
 *
w
Ë
EV_THROW


4472 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4473 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4476 
EV_FREQUENT_CHECK
;

4478 
	`ev_io_°›
 (
EV_A_
 &
w
->
io
);

4479 
	`ev_¥ï¨e_°›
 (
EV_A_
 &
w
->
¥ï¨e
);

4480 
	`ev_f‹k_°›
 (
EV_A_
 &
w
->
f‹k
);

4482 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4484 
EV_FREQUENT_CHECK
;

4485 
	}
}

4488 #i‡
EV_FORK_ENABLE


4490 
	$ev_f‹k_°¨t
 (
EV_P_
 
ev_f‹k
 *
w
Ë
EV_THROW


4492 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4495 
EV_FREQUENT_CHECK
;

4497 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, ++
f‹k˙t
);

4498 
	`¨øy_√edsize
 (
ev_f‹k
 *, 
f‹ks
, 
f‹kmax
, 
f‹k˙t
, 
EMPTY2
);

4499 
f‹ks
 [
f‹k˙t
 - 1] = 
w
;

4501 
EV_FREQUENT_CHECK
;

4502 
	}
}

4505 
	$ev_f‹k_°›
 (
EV_P_
 
ev_f‹k
 *
w
Ë
EV_THROW


4507 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4508 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4511 
EV_FREQUENT_CHECK
;

4514 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

4516 
f‹ks
 [
a˘ive
 - 1] = f‹k†[--
f‹k˙t
];

4517 
	`ev_a˘ive
 (
f‹ks
 [
a˘ive
 - 1]) =áctive;

4520 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4522 
EV_FREQUENT_CHECK
;

4523 
	}
}

4526 #i‡
EV_CLEANUP_ENABLE


4528 
	$ev_˛ónup_°¨t
 (
EV_P_
 
ev_˛ónup
 *
w
Ë
EV_THROW


4530 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4533 
EV_FREQUENT_CHECK
;

4535 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, ++
˛ónup˙t
);

4536 
	`¨øy_√edsize
 (
ev_˛ónup
 *, 
˛ónups
, 
˛ónupmax
, 
˛ónup˙t
, 
EMPTY2
);

4537 
˛ónups
 [
˛ónup˙t
 - 1] = 
w
;

4540 
	`ev_uƒef
 (
EV_A
);

4541 
EV_FREQUENT_CHECK
;

4542 
	}
}

4545 
	$ev_˛ónup_°›
 (
EV_P_
 
ev_˛ónup
 *
w
Ë
EV_THROW


4547 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4548 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4551 
EV_FREQUENT_CHECK
;

4552 
	`ev_ªf
 (
EV_A
);

4555 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

4557 
˛ónups
 [
a˘ive
 - 1] = cÀ™up†[--
˛ónup˙t
];

4558 
	`ev_a˘ive
 (
˛ónups
 [
a˘ive
 - 1]) =áctive;

4561 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4563 
EV_FREQUENT_CHECK
;

4564 
	}
}

4567 #i‡
EV_ASYNC_ENABLE


4569 
	$ev_async_°¨t
 (
EV_P_
 
ev_async
 *
w
Ë
EV_THROW


4571 i‡(
	`ex≥˘_Ál£
 (
	`ev_is_a˘ive
 (
w
)))

4574 
w
->
£¡
 = 0;

4576 
	`evpùe_öô
 (
EV_A
);

4578 
EV_FREQUENT_CHECK
;

4580 
	`ev_°¨t
 (
	`EV_A_
 (
W
)
w
, ++
async˙t
);

4581 
	`¨øy_√edsize
 (
ev_async
 *, 
asyncs
, 
asyncmax
, 
async˙t
, 
EMPTY2
);

4582 
asyncs
 [
async˙t
 - 1] = 
w
;

4584 
EV_FREQUENT_CHECK
;

4585 
	}
}

4588 
	$ev_async_°›
 (
EV_P_
 
ev_async
 *
w
Ë
EV_THROW


4590 
	`˛ór_≥ndög
 (
	`EV_A_
 (
W
)
w
);

4591 i‡(
	`ex≥˘_Ál£
 (!
	`ev_is_a˘ive
 (
w
)))

4594 
EV_FREQUENT_CHECK
;

4597 
a˘ive
 = 
	`ev_a˘ive
 (
w
);

4599 
asyncs
 [
a˘ive
 - 1] =ásync†[--
async˙t
];

4600 
	`ev_a˘ive
 (
asyncs
 [
a˘ive
 - 1]) =áctive;

4603 
	`ev_°›
 (
	`EV_A_
 (
W
)
w
);

4605 
EV_FREQUENT_CHECK
;

4606 
	}
}

4609 
	$ev_async_£nd
 (
EV_P_
 
ev_async
 *
w
Ë
EV_THROW


4611 
w
->
£¡
 = 1;

4612 
	`evpùe_wrôe
 (
EV_A_
 &
async_≥ndög
);

4613 
	}
}

4618 
	sev_⁄˚


4620 
ev_io
 
	mio
;

4621 
ev_timî
 
	mto
;

4622 (*
	mcb
)(
	mªvíts
, *
	m¨g
);

4623 *
	m¨g
;

4627 
	$⁄˚_cb
 (
EV_P_
 
ev_⁄˚
 *
⁄˚
, 
ªvíts
)

4629 (*
cb
)(
ªvíts
, *
¨g
Ë
⁄˚
->cb;

4630 *
¨g
 = 
⁄˚
->arg;

4632 
	`ev_io_°›
 (
EV_A_
 &
⁄˚
->
io
);

4633 
	`ev_timî_°›
 (
EV_A_
 &
⁄˚
->
to
);

4634 
	`ev_‰ì
 (
⁄˚
);

4636 
	`cb
 (
ªvíts
, 
¨g
);

4637 
	}
}

4640 
	$⁄˚_cb_io
 (
EV_P_
 
ev_io
 *
w
, 
ªvíts
)

4642 
ev_⁄˚
 *
⁄˚
 = (ev_⁄˚ *)(((*)
w
Ë- 
	`off£tof
 (ev_⁄˚, 
io
));

4644 
	`⁄˚_cb
 (
EV_A_
 
⁄˚
, 
ªvíts
 | 
	`ev_˛ór_≥ndög
 (EV_A_ &⁄˚->
to
));

4645 
	}
}

4648 
	$⁄˚_cb_to
 (
EV_P_
 
ev_timî
 *
w
, 
ªvíts
)

4650 
ev_⁄˚
 *
⁄˚
 = (ev_⁄˚ *)(((*)
w
Ë- 
	`off£tof
 (ev_⁄˚, 
to
));

4652 
	`⁄˚_cb
 (
EV_A_
 
⁄˚
, 
ªvíts
 | 
	`ev_˛ór_≥ndög
 (EV_A_ &⁄˚->
io
));

4653 
	}
}

4656 
ev_⁄˚
 (
EV_P_
 
fd
, 
evíts
, 
ev_t°amp
 
timeout
, (*
cb
)(
ªvíts
, *
¨g
), *¨gË
EV_THROW


4658 
ev_⁄˚
 *
⁄˚
 = (ev_⁄˚ *)
	`ev_mÆloc
 ( (ev_once));

4660 i‡(
	`ex≥˘_Ál£
 (!
⁄˚
))

4662 
	`cb
 (
EV_ERROR
 | 
EV_READ
 | 
EV_WRITE
 | 
EV_TIMER
, 
¨g
);

4666 
⁄˚
->
cb
 = cb;

4667 
⁄˚
->
¨g
 =árg;

4669 
	`ev_öô
 (&
⁄˚
->
io
, 
⁄˚_cb_io
);

4670 i‡(
fd
 >= 0)

4672 
	`ev_io_£t
 (&
⁄˚
->
io
, 
fd
, 
evíts
);

4673 
	`ev_io_°¨t
 (
EV_A_
 &
⁄˚
->
io
);

4676 
	`ev_öô
 (&
⁄˚
->
to
, 
⁄˚_cb_to
);

4677 i‡(
timeout
 >= 0.)

4679 
	`ev_timî_£t
 (&
⁄˚
->
to
, 
timeout
, 0.);

4680 
	`ev_timî_°¨t
 (
EV_A_
 &
⁄˚
->
to
);

4682 
	}
}

4686 #i‡
EV_WALK_ENABLE


4687 
ecb_cﬁd


4688 
ev_wÆk
 (
EV_P_
 
ty≥s
, (*
cb
)(EV_P_ 
ty≥
, *
w
)Ë
EV_THROW


4690 
i
, 
j
;

4691 
ev_w©chî_li°
 *
wl
, *
wn
;

4693 i‡(
ty≥s
 & (
EV_IO
 | 
EV_EMBED
))

4694 
i
 = 0; i < 
™fdmax
; ++i)

4695 
wl
 = 
™fds
 [
i
].
hód
; wl; )

4697 
wn
 = 
wl
->
√xt
;

4699 #i‡
EV_EMBED_ENABLE


4700 i‡(
	`ev_cb
 ((
ev_io
 *)
wl
Ë=
embed_io_cb
)

4702 i‡(
ty≥s
 & 
EV_EMBED
)

4703 
	`cb
 (
EV_A_
 
EV_EMBED
, ((*)
wl
Ë- 
	`off£tof
 (
ev_embed
, 
io
));

4707 #i‡
EV_USE_INOTIFY


4708 i‡(
	`ev_cb
 ((
ev_io
 *)
wl
Ë=
öfy_cb
)

4712 i‡((
ev_io
 *)
wl
 !&
pùe_w
)

4713 i‡(
ty≥s
 & 
EV_IO
)

4714 
	`cb
 (
EV_A_
 
EV_IO
, 
wl
);

4716 
wl
 = 
wn
;

4719 i‡(
ty≥s
 & (
EV_TIMER
 | 
EV_STAT
))

4720 
i
 = 
timî˙t
 + 
HEAP0
; i-- > HEAP0; )

4721 #i‡
EV_STAT_ENABLE


4723 i‡(
	`ev_cb
 ((
ev_timî
 *)
	`ANHE_w
 (
timîs
 [
i
])Ë=
°©_timî_cb
)

4725 i‡(
ty≥s
 & 
EV_STAT
)

4726 
	`cb
 (
EV_A_
 
EV_STAT
, ((*)
	`ANHE_w
 (
timîs
 [
i
])Ë- 
	`off£tof
 (
ev_°©
, 
timî
));

4730 i‡(
ty≥s
 & 
EV_TIMER
)

4731 
	`cb
 (
EV_A_
 
EV_TIMER
, 
	`ANHE_w
 (
timîs
 [
i
]));

4733 #i‡
EV_PERIODIC_ENABLE


4734 i‡(
ty≥s
 & 
EV_PERIODIC
)

4735 
i
 = 
≥riodic˙t
 + 
HEAP0
; i-- > HEAP0; )

4736 
	`cb
 (
EV_A_
 
EV_PERIODIC
, 
	`ANHE_w
 (
≥riodics
 [
i
]));

4739 #i‡
EV_IDLE_ENABLE


4740 i‡(
ty≥s
 & 
EV_IDLE
)

4741 
j
 = 
NUMPRI
; j--; )

4742 
i
 = 
idÀ˙t
 [
j
]; i--; )

4743 
	`cb
 (
EV_A_
 
EV_IDLE
, 
idÀs
 [
j
][
i
]);

4746 #i‡
EV_FORK_ENABLE


4747 i‡(
ty≥s
 & 
EV_FORK
)

4748 
i
 = 
f‹k˙t
; i--; )

4749 i‡(
	`ev_cb
 (
f‹ks
 [
i
]Ë!
embed_f‹k_cb
)

4750 
	`cb
 (
EV_A_
 
EV_FORK
, 
f‹ks
 [
i
]);

4753 #i‡
EV_ASYNC_ENABLE


4754 i‡(
ty≥s
 & 
EV_ASYNC
)

4755 
i
 = 
async˙t
; i--; )

4756 
	`cb
 (
EV_A_
 
EV_ASYNC
, 
asyncs
 [
i
]);

4759 #i‡
EV_PREPARE_ENABLE


4760 i‡(
ty≥s
 & 
EV_PREPARE
)

4761 
i
 = 
¥ï¨e˙t
; i--; )

4762 #i‡
EV_EMBED_ENABLE


4763 i‡(
	`ev_cb
 (
¥ï¨es
 [
i
]Ë!
embed_¥ï¨e_cb
)

4765 
	`cb
 (
EV_A_
 
EV_PREPARE
, 
¥ï¨es
 [
i
]);

4768 #i‡
EV_CHECK_ENABLE


4769 i‡(
ty≥s
 & 
EV_CHECK
)

4770 
i
 = 
check˙t
; i--; )

4771 
	`cb
 (
EV_A_
 
EV_CHECK
, 
checks
 [
i
]);

4774 #i‡
EV_SIGNAL_ENABLE


4775 i‡(
ty≥s
 & 
EV_SIGNAL
)

4776 
i
 = 0; i < 
EV_NSIG
 - 1; ++i)

4777 
wl
 = 
sig«ls
 [
i
].
hód
; wl; )

4779 
wn
 = 
wl
->
√xt
;

4780 
	`cb
 (
EV_A_
 
EV_SIGNAL
, 
wl
);

4781 
wl
 = 
wn
;

4785 #i‡
EV_CHILD_ENABLE


4786 i‡(
ty≥s
 & 
EV_CHILD
)

4787 
i
 = (
EV_PID_HASHSIZE
); i--; )

4788 
wl
 = 
chûds
 [
i
]; wl; )

4790 
wn
 = 
wl
->
√xt
;

4791 
	`cb
 (
EV_A_
 
EV_CHILD
, 
wl
);

4792 
wl
 = 
wn
;

4797 
	}
}

4800 #i‡
EV_MULTIPLICITY


4801 
	~"ev_wøp.h
"

	@libs/libev-4.15/ev.h

40 #i‚de‡
EV_H_


41 
	#EV_H_


	)

43 #ifde‡
__˝lu•lus


44 
	#EV_CPP
(
x
Ë
	)
x

46 
	#EV_CPP
(
x
)

	)

49 
	#EV_THROW
 
	`EV_CPP
(
	`throw
())

	)

51 
EV_CPP
("C" {)

56 #i‚de‡
EV_COMPAT3


57 
	#EV_COMPAT3
 1

	)

60 #i‚de‡
EV_FEATURES


61 #i‡
deföed
 
__OPTIMIZE_SIZE__


62 
	#EV_FEATURES
 0x7c

	)

64 
	#EV_FEATURES
 0x7f

	)

68 
	#EV_FEATURE_CODE
 ((
EV_FEATURES
Ë& 1)

	)

69 
	#EV_FEATURE_DATA
 ((
EV_FEATURES
Ë& 2)

	)

70 
	#EV_FEATURE_CONFIG
 ((
EV_FEATURES
Ë& 4)

	)

71 
	#EV_FEATURE_API
 ((
EV_FEATURES
Ë& 8)

	)

72 
	#EV_FEATURE_WATCHERS
 ((
EV_FEATURES
Ë& 16)

	)

73 
	#EV_FEATURE_BACKENDS
 ((
EV_FEATURES
Ë& 32)

	)

74 
	#EV_FEATURE_OS
 ((
EV_FEATURES
Ë& 64)

	)

77 #i‚de‡
EV_MINPRI


78 
	#EV_MINPRI
 (
EV_FEATURE_CONFIG
 ? -2 : 0)

	)

80 #i‚de‡
EV_MAXPRI


81 
	#EV_MAXPRI
 (
EV_FEATURE_CONFIG
 ? +2 : 0)

	)

84 #i‚de‡
EV_MULTIPLICITY


85 
	#EV_MULTIPLICITY
 
EV_FEATURE_CONFIG


	)

88 #i‚de‡
EV_PERIODIC_ENABLE


89 
	#EV_PERIODIC_ENABLE
 
EV_FEATURE_WATCHERS


	)

92 #i‚de‡
EV_STAT_ENABLE


93 
	#EV_STAT_ENABLE
 
EV_FEATURE_WATCHERS


	)

96 #i‚de‡
EV_PREPARE_ENABLE


97 
	#EV_PREPARE_ENABLE
 
EV_FEATURE_WATCHERS


	)

100 #i‚de‡
EV_CHECK_ENABLE


101 
	#EV_CHECK_ENABLE
 
EV_FEATURE_WATCHERS


	)

104 #i‚de‡
EV_IDLE_ENABLE


105 
	#EV_IDLE_ENABLE
 
EV_FEATURE_WATCHERS


	)

108 #i‚de‡
EV_FORK_ENABLE


109 
	#EV_FORK_ENABLE
 
EV_FEATURE_WATCHERS


	)

112 #i‚de‡
EV_CLEANUP_ENABLE


113 
	#EV_CLEANUP_ENABLE
 
EV_FEATURE_WATCHERS


	)

116 #i‚de‡
EV_SIGNAL_ENABLE


117 
	#EV_SIGNAL_ENABLE
 
EV_FEATURE_WATCHERS


	)

120 #i‚de‡
EV_CHILD_ENABLE


121 #ifde‡
_WIN32


122 
	#EV_CHILD_ENABLE
 0

	)

124 
	#EV_CHILD_ENABLE
 
EV_FEATURE_WATCHERS


	)

128 #i‚de‡
EV_ASYNC_ENABLE


129 
	#EV_ASYNC_ENABLE
 
EV_FEATURE_WATCHERS


	)

132 #i‚de‡
EV_EMBED_ENABLE


133 
	#EV_EMBED_ENABLE
 
EV_FEATURE_WATCHERS


	)

136 #i‚de‡
EV_WALK_ENABLE


137 
	#EV_WALK_ENABLE
 0

	)

142 #i‡
EV_CHILD_ENABLE
 && !
EV_SIGNAL_ENABLE


143 #unde‡
EV_SIGNAL_ENABLE


144 
	#EV_SIGNAL_ENABLE
 1

	)

149 
	tev_t°amp
;

151 #i‚de‡
EV_ATOMIC_T


152 
	~<sig«l.h
>

153 
	#EV_ATOMIC_T
 
sig_©omic_t
 vﬁ©ûe

	)

156 #i‡
EV_STAT_ENABLE


157 #ifde‡
_WIN32


158 
	~<time.h
>

159 
	~<sys/ty≥s.h
>

161 
	~<sys/°©.h
>

165 #i‡
EV_MULTIPLICITY


166 
ev_lo›
;

167 
	#EV_P
 
ev_lo›
 *
lo›


	)

168 
	#EV_P_
 
EV_P
,

	)

169 
	#EV_A
 
lo›


	)

170 
	#EV_A_
 
EV_A
,

	)

171 
	#EV_DEFAULT_UC
 
	`ev_deÁu…_lo›_uc_
 (Ë

	)

172 
	#EV_DEFAULT_UC_
 
EV_DEFAULT_UC
,

	)

173 
	#EV_DEFAULT
 
	`ev_deÁu…_lo›
 (0Ë

	)

174 
	#EV_DEFAULT_
 
EV_DEFAULT
,

	)

176 
	#EV_P
 

	)

177 
	#EV_P_


	)

178 
	#EV_A


	)

179 
	#EV_A_


	)

180 
	#EV_DEFAULT


	)

181 
	#EV_DEFAULT_


	)

182 
	#EV_DEFAULT_UC


	)

183 
	#EV_DEFAULT_UC_


	)

184 #unde‡
EV_EMBED_ENABLE


188 #i‡
__STDC_VERSION__
 >199901L || 
__GNUC__
 >= 3

189 
	#EV_INLINE
 
ölöe


	)

191 
	#EV_INLINE
 

	)

194 #ifde‡
EV_API_STATIC


195 
	#EV_API_DECL
 

	)

197 
	#EV_API_DECL
 

	)

201 #i‚de‡
EV_PROTOTYPES


202 
	#EV_PROTOTYPES
 1

	)

207 
	#EV_VERSION_MAJOR
 4

	)

208 
	#EV_VERSION_MINOR
 15

	)

212 
EV_UNDEF
 = ()0xFFFFFFFF,

213 
EV_NONE
 = 0x00,

214 
EV_READ
 = 0x01,

215 
EV_WRITE
 = 0x02,

216 
EV__IOFDSET
 = 0x80,

217 
EV_IO
 = 
EV_READ
,

218 
EV_TIMER
 = 0x00000100,

219 #i‡
EV_COMPAT3


220 
EV_TIMEOUT
 = 
EV_TIMER
,

222 
EV_PERIODIC
 = 0x00000200,

223 
EV_SIGNAL
 = 0x00000400,

224 
EV_CHILD
 = 0x00000800,

225 
EV_STAT
 = 0x00001000,

226 
EV_IDLE
 = 0x00002000,

227 
EV_PREPARE
 = 0x00004000,

228 
EV_CHECK
 = 0x00008000,

229 
EV_EMBED
 = 0x00010000,

230 
EV_FORK
 = 0x00020000,

231 
EV_CLEANUP
 = 0x00040000,

232 
EV_ASYNC
 = 0x00080000,

233 
EV_CUSTOM
 = 0x01000000,

234 
EV_ERROR
 = ()0x80000000

238 #i‚de‡
EV_COMMON


239 
	#EV_COMMON
 *
d©a
;

	)

242 #i‚de‡
EV_CB_DECLARE


243 
	#EV_CB_DECLARE
(
ty≥
Ë(*
cb
)(
EV_P_
 ty≥ *
w
, 
ªvíts
);

	)

245 #i‚de‡
EV_CB_INVOKE


246 
	#EV_CB_INVOKE
(
w©chî
,
ªvíts
Ë(w©chî)->
	`cb
 (
	`EV_A_
 (w©chî), (ªvíts))

	)

250 
	#EV_CB
(
ty≥
,
«me
Ë
	`«me
 (
EV_P_
 
ev_
 ##Åy≥ *
w
, 
ªvíts
)

	)

269 #i‡
EV_MINPRI
 =
EV_MAXPRI


270 
	#EV_DECL_PRIORITY


	)

271 #ñi‡!
deföed
 (
EV_DECL_PRIORITY
)

272 
	#EV_DECL_PRIORITY
 
¥i‹ôy
;

	)

276 
	#EV_WATCHER
(
ty≥
) \

277 
a˘ive
; \

278 
≥ndög
; \

279 
EV_DECL_PRIORITY
 \

280 
EV_COMMON
 \

281 
	`EV_CB_DECLARE
 (
ty≥
Ë

	)

283 
	#EV_WATCHER_LIST
(
ty≥
) \

284 
	`EV_WATCHER
 (
ty≥
) \

285 
ev_w©chî_li°
 *
√xt
;

	)

287 
	#EV_WATCHER_TIME
(
ty≥
) \

288 
	`EV_WATCHER
 (
ty≥
) \

289 
ev_t°amp
 
©
;

	)

292 
	sev_w©chî


294 
EV_WATCHER
 (
ev_w©chî
)

295 } 
	tev_w©chî
;

298 
	sev_w©chî_li°


300 
EV_WATCHER_LIST
 (
ev_w©chî_li°
)

301 } 
	tev_w©chî_li°
;

304 
	sev_w©chî_time


306 
EV_WATCHER_TIME
 (
ev_w©chî_time
)

307 } 
	tev_w©chî_time
;

311 
	sev_io


313 
EV_WATCHER_LIST
 (
ev_io
)

315 
	gfd
;

316 
	gevíts
;

317 } 
	tev_io
;

321 
	sev_timî


323 
EV_WATCHER_TIME
 (
ev_timî
)

325 
ev_t°amp
 
	gª≥©
;

326 } 
	tev_timî
;

330 
	sev_≥riodic


332 
EV_WATCHER_TIME
 (
ev_≥riodic
)

334 
ev_t°amp
 
	goff£t
;

335 
ev_t°amp
 
	göãrvÆ
;

336 
ev_t°amp
 (*
ªscheduÀ_cb
)(
ev_≥riodic
 *
	gw
,Év_t°am∞
	gnow
Ë
	gEV_THROW
;

337 } 
	tev_≥riodic
;

341 
	sev_sig«l


343 
EV_WATCHER_LIST
 (
ev_sig«l
)

345 
	gsignum
;

346 } 
	tev_sig«l
;

351 
	sev_chûd


353 
EV_WATCHER_LIST
 (
ev_chûd
)

355 
	gÊags
;

356 
	gpid
;

357 
	gΩid
;

358 
	gr°©us
;

359 } 
	tev_chûd
;

361 #i‡
EV_STAT_ENABLE


363 #ifde‡
_WIN32


364 
_°©i64
 
	tev_°©d©a
;

366 
°©
 
	tev_°©d©a
;

371 
	sev_°©


373 
EV_WATCHER_LIST
 (
ev_°©
)

375 
ev_timî
 
	gtimî
;

376 
ev_t°amp
 
	göãrvÆ
;

377 c⁄° *
	g∑th
;

378 
ev_°©d©a
 
	g¥ev
;

379 
ev_°©d©a
 
	g©å
;

381 
	gwd
;

382 } 
	tev_°©
;

385 #i‡
EV_IDLE_ENABLE


388 
	sev_idÀ


390 
EV_WATCHER
 (
ev_idÀ
)

391 } 
	tev_idÀ
;

397 
	sev_¥ï¨e


399 
EV_WATCHER
 (
ev_¥ï¨e
)

400 } 
	tev_¥ï¨e
;

404 
	sev_check


406 
EV_WATCHER
 (
ev_check
)

407 } 
	tev_check
;

409 #i‡
EV_FORK_ENABLE


412 
	sev_f‹k


414 
EV_WATCHER
 (
ev_f‹k
)

415 } 
	tev_f‹k
;

418 #i‡
EV_CLEANUP_ENABLE


421 
	sev_˛ónup


423 
EV_WATCHER
 (
ev_˛ónup
)

424 } 
	tev_˛ónup
;

427 #i‡
EV_EMBED_ENABLE


430 
	sev_embed


432 
EV_WATCHER
 (
ev_embed
)

434 
ev_lo›
 *
	gŸhî
;

435 
ev_io
 
	gio
;

436 
ev_¥ï¨e
 
	g¥ï¨e
;

437 
ev_check
 
	gcheck
;

438 
ev_timî
 
	gtimî
;

439 
ev_≥riodic
 
	g≥riodic
;

440 
ev_idÀ
 
	gidÀ
;

441 
ev_f‹k
 
	gf‹k
;

442 #i‡
EV_CLEANUP_ENABLE


443 
ev_˛ónup
 
	g˛ónup
;

445 } 
	tev_embed
;

448 #i‡
EV_ASYNC_ENABLE


451 
	sev_async


453 
EV_WATCHER
 (
ev_async
)

455 
EV_ATOMIC_T
 
	g£¡
;

456 } 
	tev_async
;

458 
	#ev_async_≥ndög
(
w
Ë(+(w)->
£¡
)

	)

462 
	uev_™y_w©chî


464 
ev_w©chî
 
	gw
;

465 
ev_w©chî_li°
 
	gwl
;

467 
ev_io
 
	gio
;

468 
ev_timî
 
	gtimî
;

469 
ev_≥riodic
 
	g≥riodic
;

470 
ev_sig«l
 
	gsig«l
;

471 
ev_chûd
 
	gchûd
;

472 #i‡
EV_STAT_ENABLE


473 
ev_°©
 
	g°©
;

475 #i‡
EV_IDLE_ENABLE


476 
ev_idÀ
 
	gidÀ
;

478 
ev_¥ï¨e
 
	g¥ï¨e
;

479 
ev_check
 
	gcheck
;

480 #i‡
EV_FORK_ENABLE


481 
ev_f‹k
 
	gf‹k
;

483 #i‡
EV_CLEANUP_ENABLE


484 
ev_˛ónup
 
	g˛ónup
;

486 #i‡
EV_EMBED_ENABLE


487 
ev_embed
 
	gembed
;

489 #i‡
EV_ASYNC_ENABLE


490 
ev_async
 
	gasync
;

497 
	gEVFLAG_AUTO
 = 0x00000000U,

499 
	gEVFLAG_NOENV
 = 0x01000000U,

500 
	gEVFLAG_FORKCHECK
 = 0x02000000U,

502 
	gEVFLAG_NOINOTIFY
 = 0x00100000U,

503 #i‡
EV_COMPAT3


504 
	gEVFLAG_NOSIGFD
 = 0,

506 
	gEVFLAG_SIGNALFD
 = 0x00200000U,

507 
	gEVFLAG_NOSIGMASK
 = 0x00400000U

512 
	gEVBACKEND_SELECT
 = 0x00000001U,

513 
	gEVBACKEND_POLL
 = 0x00000002U,

514 
	gEVBACKEND_EPOLL
 = 0x00000004U,

515 
	gEVBACKEND_KQUEUE
 = 0x00000008U,

516 
	gEVBACKEND_DEVPOLL
 = 0x00000010U,

517 
	gEVBACKEND_PORT
 = 0x00000020U,

518 
	gEVBACKEND_ALL
 = 0x0000003FU,

519 
	gEVBACKEND_MASK
 = 0x0000FFFFU

522 #i‡
EV_PROTOTYPES


523 
EV_API_DECL
 
ev_vîsi⁄_maj‹
 (Ë
	gEV_THROW
;

524 
EV_API_DECL
 
ev_vîsi⁄_mö‹
 (Ë
	gEV_THROW
;

526 
EV_API_DECL
 
ev_suµ‹ãd_backíds
 (Ë
	gEV_THROW
;

527 
EV_API_DECL
 
ev_ªcommíded_backíds
 (Ë
	gEV_THROW
;

528 
EV_API_DECL
 
ev_embeddabÀ_backíds
 (Ë
	gEV_THROW
;

530 
EV_API_DECL
 
ev_t°amp
 
ev_time
 (Ë
	gEV_THROW
;

531 
EV_API_DECL
 
ev_¶ìp
 (
ev_t°amp
 
dñay
Ë
	gEV_THROW
;

539 
EV_API_DECL
 
ev_£t_Æloˇt‹
 (*(*
cb
)(*
±r
, 
size
Ë
EV_THROW
Ë
	gEV_THROW
;

545 
EV_API_DECL
 
ev_£t_sy£º_cb
 ((*
cb
)(c⁄° *
msg
Ë
EV_THROW
Ë
	gEV_THROW
;

547 #i‡
EV_MULTIPLICITY


551 
EV_API_DECL
 
ev_lo›
 *
ev_deÁu…_lo›
 (
Êags
 
EV_CPP
 (0)Ë
EV_THROW
;

553 #ifde‡
EV_API_STATIC


554 
EV_API_DECL
 
ev_lo›
 *
	gev_deÁu…_lo›_±r
;

557 
EV_INLINE
 
ev_lo›
 *

558 
ev_deÁu…_lo›_uc_
 (Ë
	gEV_THROW


560 
ev_lo›
 *
ev_deÁu…_lo›_±r
;

562  
	gev_deÁu…_lo›_±r
;

565 
EV_INLINE
 

566 
ev_is_deÁu…_lo›
 (
EV_P
Ë
	gEV_THROW


568  
	gEV_A
 =
EV_DEFAULT_UC
;

572 
EV_API_DECL
 
ev_lo›
 *
ev_lo›_√w
 (
Êags
 
EV_CPP
 (0)Ë
EV_THROW
;

574 
EV_API_DECL
 
ev_t°amp
 
ev_now
 (
EV_P
Ë
	gEV_THROW
;

578 
EV_API_DECL
 
ev_deÁu…_lo›
 (
Êags
 
EV_CPP
 (0)Ë
EV_THROW
;

580 
EV_API_DECL
 
ev_t°amp
 
	gev_π_now
;

582 
EV_INLINE
 
ev_t°amp


583 
ev_now
 (Ë
	gEV_THROW


585  
	gev_π_now
;

589 
EV_INLINE
 

590 
ev_is_deÁu…_lo›
 (Ë
	gEV_THROW


598 
EV_API_DECL
 
ev_lo›_de°roy
 (
EV_P
);

604 
EV_API_DECL
 
ev_lo›_f‹k
 (
EV_P
Ë
	gEV_THROW
;

606 
EV_API_DECL
 
ev_backíd
 (
EV_P
Ë
	gEV_THROW
;

608 
EV_API_DECL
 
ev_now_upd©e
 (
EV_P
Ë
	gEV_THROW
;

610 #i‡
EV_WALK_ENABLE


614 
EV_API_DECL
 
ev_wÆk
 (
EV_P_
 
ty≥s
, (*
cb
)(EV_P_ 
ty≥
, *
w
)Ë
	gEV_THROW
;

621 
	gEVRUN_NOWAIT
 = 1,

622 
	gEVRUN_ONCE
 = 2

627 
	gEVBREAK_CANCEL
 = 0,

628 
	gEVBREAK_ONE
 = 1,

629 
	gEVBREAK_ALL
 = 2

632 #i‡
EV_PROTOTYPES


633 
EV_API_DECL
 
ev_run
 (
EV_P_
 
Êags
 
EV_CPP
 (= 0));

634 
EV_API_DECL
 
ev_bªak
 (
EV_P_
 
how
 
EV_CPP
 (
EVBREAK_ONE
)Ë
EV_THROW
;

641 
EV_API_DECL
 
ev_ªf
 (
EV_P
Ë
	gEV_THROW
;

642 
EV_API_DECL
 
ev_uƒef
 (
EV_P
Ë
	gEV_THROW
;

648 
EV_API_DECL
 
ev_⁄˚
 (
EV_P_
 
fd
, 
evíts
, 
ev_t°amp
 
timeout
, (*
cb
)(
ªvíts
, *
¨g
), *¨gË
	gEV_THROW
;

650 #i‡
EV_FEATURE_API


651 
EV_API_DECL
 
ev_ôî©i⁄
 (
EV_P
Ë
	gEV_THROW
;

652 
EV_API_DECL
 
ev_dïth
 (
EV_P
Ë
	gEV_THROW
;

653 
EV_API_DECL
 
ev_vîify
 (
EV_P
Ë
	gEV_THROW
;

655 
EV_API_DECL
 
ev_£t_io_cﬁÀ˘_öãrvÆ
 (
EV_P_
 
ev_t°amp
 
öãrvÆ
Ë
	gEV_THROW
;

656 
EV_API_DECL
 
ev_£t_timeout_cﬁÀ˘_öãrvÆ
 (
EV_P_
 
ev_t°amp
 
öãrvÆ
Ë
	gEV_THROW
;

659 
EV_API_DECL
 
ev_£t_u£rd©a
 (
EV_P_
 *
d©a
Ë
	gEV_THROW
;

660 
EV_API_DECL
 *
ev_u£rd©a
 (
EV_P
Ë
	gEV_THROW
;

661 
EV_API_DECL
 
ev_£t_övoke_≥ndög_cb
 (
EV_P_
 (*
övoke_≥ndög_cb
)(
EV_P
)Ë
	gEV_THROW
;

662 
EV_API_DECL
 
ev_£t_lo›_ªÀa£_cb
 (
EV_P_
 (*
ªÀa£
)(
EV_P
), (*
acquúe
)(EV_PË
EV_THROW
Ë
	gEV_THROW
;

664 
EV_API_DECL
 
ev_≥ndög_cou¡
 (
EV_P
Ë
	gEV_THROW
;

665 
EV_API_DECL
 
ev_övoke_≥ndög
 (
EV_P
);

670 
EV_API_DECL
 
ev_su•íd
 (
EV_P
Ë
	gEV_THROW
;

671 
EV_API_DECL
 
ev_ªsume
 (
EV_P
Ë
	gEV_THROW
;

678 
	#ev_öô
(
ev
,
cb_
) do { \

679 ((
ev_w©chî
 *)(*)(
ev
))->
a˘ive
 = \

680 ((
ev_w©chî
 *)(*)(
ev
))->
≥ndög
 = 0; \

681 
	`ev_£t_¥i‹ôy
 ((
ev
), 0); \

682 
	`ev_£t_cb
 ((
ev
), 
cb_
); \

683 } 0)

	)

685 
	#ev_io_£t
(
ev
,
fd_
,
evíts_
Ëdÿ{ (ev)->
fd
 = (fd_); (ev)->
evíts
 = (evíts_Ë| 
EV__IOFDSET
; } 0)

	)

686 
	#ev_timî_£t
(
ev
,
a·î_
,
ª≥©_
Ëdÿ{ ((
ev_w©chî_time
 *)”v))->
©
 = (a·î_); (ev)->
ª≥©
 = (ª≥©_); } 0)

	)

687 
	#ev_≥riodic_£t
(
ev
,
ofs_
,
ivÆ_
,
rcb_
Ëdÿ{ (ev)->
off£t
 = (ofs_); (ev)->
öãrvÆ
 = (ivÆ_); (ev)->
ªscheduÀ_cb
 = (rcb_); } 0)

	)

688 
	#ev_sig«l_£t
(
ev
,
signum_
Ëdÿ{ (ev)->
signum
 = (signum_); } 0)

	)

689 
	#ev_chûd_£t
(
ev
,
pid_
,
åa˚_
Ëdÿ{ (ev)->
pid
 = (pid_); (ev)->
Êags
 = !!—ø˚_); } 0)

	)

690 
	#ev_°©_£t
(
ev
,
∑th_
,
öãrvÆ_
Ëdÿ{ (ev)->
∑th
 = (∑th_); (ev)->
öãrvÆ
 = (öãrvÆ_); (ev)->
wd
 = -2; } 0)

	)

691 
	#ev_idÀ_£t
(
ev
Ë

	)

692 
	#ev_¥ï¨e_£t
(
ev
Ë

	)

693 
	#ev_check_£t
(
ev
Ë

	)

694 
	#ev_embed_£t
(
ev
,
Ÿhî_
Ëdÿ{ (ev)->
Ÿhî
 = (Ÿhî_); } 0)

	)

695 
	#ev_f‹k_£t
(
ev
Ë

	)

696 
	#ev_˛ónup_£t
(
ev
Ë

	)

697 
	#ev_async_£t
(
ev
Ë

	)

699 
	#ev_io_öô
(
ev
,
cb
,
fd
,
evíts
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_io_£t
 (”v),(fd),”víts)); } 0)

	)

700 
	#ev_timî_öô
(
ev
,
cb
,
a·î
,
ª≥©
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_timî_£t
 (”v),◊·î),‘ïót)); } 0)

	)

701 
	#ev_≥riodic_öô
(
ev
,
cb
,
ofs
,
ivÆ
,
rcb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_≥riodic_£t
 (”v),(ofs),(ivÆ),‘cb)); } 0)

	)

702 
	#ev_sig«l_öô
(
ev
,
cb
,
signum
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_sig«l_£t
 (”v), (signum)); } 0)

	)

703 
	#ev_chûd_öô
(
ev
,
cb
,
pid
,
åa˚
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_chûd_£t
 (”v),’id),—ø˚)); } 0)

	)

704 
	#ev_°©_öô
(
ev
,
cb
,
∑th
,
öãrvÆ
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_°©_£t
 (”v),’©h),(öãrvÆ)); } 0)

	)

705 
	#ev_idÀ_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_idÀ_£t
 (”v)); } 0)

	)

706 
	#ev_¥ï¨e_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_¥ï¨e_£t
 (”v)); } 0)

	)

707 
	#ev_check_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_check_£t
 (”v)); } 0)

	)

708 
	#ev_embed_öô
(
ev
,
cb
,
Ÿhî
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_embed_£t
 (”v),(Ÿhî)); } 0)

	)

709 
	#ev_f‹k_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_f‹k_£t
 (”v)); } 0)

	)

710 
	#ev_˛ónup_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_˛ónup_£t
 (”v)); } 0)

	)

711 
	#ev_async_öô
(
ev
,
cb
Ëdÿ{ 
	`ev_öô
 (”v), (cb)); 
	`ev_async_£t
 (”v)); } 0)

	)

713 
	#ev_is_≥ndög
(
ev
Ë(0 + ((
ev_w©chî
 *)(*)”v))->
≥ndög
Ë

	)

714 
	#ev_is_a˘ive
(
ev
Ë(0 + ((
ev_w©chî
 *)(*)”v))->
a˘ive
Ë

	)

716 
	#ev_cb
(
ev
Ë”v)->
cb


	)

718 #i‡
EV_MINPRI
 =
EV_MAXPRI


719 
	#ev_¥i‹ôy
(
ev
Ë(”v), 
EV_MINPRI
)

	)

720 
	#ev_£t_¥i‹ôy
(
ev
,
¥i
Ë(”v), (¥i))

	)

722 
	#ev_¥i‹ôy
(
ev
Ë(+(((
ev_w©chî
 *)(*)”v))->
¥i‹ôy
))

	)

723 
	#ev_£t_¥i‹ôy
(
ev
,
¥i
Ë–(
ev_w©chî
 *)(*)”v))->
¥i‹ôy
 = (¥i)

	)

726 
	#ev_≥riodic_©
(
ev
Ë(+((
ev_w©chî_time
 *)”v))->
©
)

	)

728 #i‚de‡
ev_£t_cb


729 
	#ev_£t_cb
(
ev
,
cb_
Ë
	`ev_cb
 (evË(cb_)

	)

734 #i‡
EV_PROTOTYPES


738 
EV_API_DECL
 
ev_„ed_evít
 (
EV_P_
 *
w
, 
ªvíts
Ë
	gEV_THROW
;

739 
EV_API_DECL
 
ev_„ed_fd_evít
 (
EV_P_
 
fd
, 
ªvíts
Ë
	gEV_THROW
;

740 #i‡
EV_SIGNAL_ENABLE


741 
EV_API_DECL
 
ev_„ed_sig«l
 (
signum
Ë
	gEV_THROW
;

742 
EV_API_DECL
 
ev_„ed_sig«l_evít
 (
EV_P_
 
signum
Ë
	gEV_THROW
;

744 
EV_API_DECL
 
ev_övoke
 (
EV_P_
 *
w
, 
ªvíts
);

745 
EV_API_DECL
 
ev_˛ór_≥ndög
 (
EV_P_
 *
w
Ë
	gEV_THROW
;

747 
EV_API_DECL
 
ev_io_°¨t
 (
EV_P_
 
ev_io
 *
w
Ë
	gEV_THROW
;

748 
EV_API_DECL
 
ev_io_°›
 (
EV_P_
 
ev_io
 *
w
Ë
	gEV_THROW
;

750 
EV_API_DECL
 
ev_timî_°¨t
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

751 
EV_API_DECL
 
ev_timî_°›
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

753 
EV_API_DECL
 
ev_timî_agaö
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

755 
EV_API_DECL
 
ev_t°amp
 
ev_timî_ªmaöög
 (
EV_P_
 
ev_timî
 *
w
Ë
	gEV_THROW
;

757 #i‡
EV_PERIODIC_ENABLE


758 
EV_API_DECL
 
ev_≥riodic_°¨t
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
	gEV_THROW
;

759 
EV_API_DECL
 
ev_≥riodic_°›
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
	gEV_THROW
;

760 
EV_API_DECL
 
ev_≥riodic_agaö
 (
EV_P_
 
ev_≥riodic
 *
w
Ë
	gEV_THROW
;

764 #i‡
EV_SIGNAL_ENABLE


765 
EV_API_DECL
 
ev_sig«l_°¨t
 (
EV_P_
 
ev_sig«l
 *
w
Ë
	gEV_THROW
;

766 
EV_API_DECL
 
ev_sig«l_°›
 (
EV_P_
 
ev_sig«l
 *
w
Ë
	gEV_THROW
;

770 #i‡
EV_CHILD_ENABLE


771 
EV_API_DECL
 
ev_chûd_°¨t
 (
EV_P_
 
ev_chûd
 *
w
Ë
	gEV_THROW
;

772 
EV_API_DECL
 
ev_chûd_°›
 (
EV_P_
 
ev_chûd
 *
w
Ë
	gEV_THROW
;

775 #i‡
EV_STAT_ENABLE


776 
EV_API_DECL
 
ev_°©_°¨t
 (
EV_P_
 
ev_°©
 *
w
Ë
	gEV_THROW
;

777 
EV_API_DECL
 
ev_°©_°›
 (
EV_P_
 
ev_°©
 *
w
Ë
	gEV_THROW
;

778 
EV_API_DECL
 
ev_°©_°©
 (
EV_P_
 
ev_°©
 *
w
Ë
	gEV_THROW
;

781 #i‡
EV_IDLE_ENABLE


782 
EV_API_DECL
 
ev_idÀ_°¨t
 (
EV_P_
 
ev_idÀ
 *
w
Ë
	gEV_THROW
;

783 
EV_API_DECL
 
ev_idÀ_°›
 (
EV_P_
 
ev_idÀ
 *
w
Ë
	gEV_THROW
;

786 #i‡
EV_PREPARE_ENABLE


787 
EV_API_DECL
 
ev_¥ï¨e_°¨t
 (
EV_P_
 
ev_¥ï¨e
 *
w
Ë
	gEV_THROW
;

788 
EV_API_DECL
 
ev_¥ï¨e_°›
 (
EV_P_
 
ev_¥ï¨e
 *
w
Ë
	gEV_THROW
;

791 #i‡
EV_CHECK_ENABLE


792 
EV_API_DECL
 
ev_check_°¨t
 (
EV_P_
 
ev_check
 *
w
Ë
	gEV_THROW
;

793 
EV_API_DECL
 
ev_check_°›
 (
EV_P_
 
ev_check
 *
w
Ë
	gEV_THROW
;

796 #i‡
EV_FORK_ENABLE


797 
EV_API_DECL
 
ev_f‹k_°¨t
 (
EV_P_
 
ev_f‹k
 *
w
Ë
	gEV_THROW
;

798 
EV_API_DECL
 
ev_f‹k_°›
 (
EV_P_
 
ev_f‹k
 *
w
Ë
	gEV_THROW
;

801 #i‡
EV_CLEANUP_ENABLE


802 
EV_API_DECL
 
ev_˛ónup_°¨t
 (
EV_P_
 
ev_˛ónup
 *
w
Ë
	gEV_THROW
;

803 
EV_API_DECL
 
ev_˛ónup_°›
 (
EV_P_
 
ev_˛ónup
 *
w
Ë
	gEV_THROW
;

806 #i‡
EV_EMBED_ENABLE


808 
EV_API_DECL
 
ev_embed_°¨t
 (
EV_P_
 
ev_embed
 *
w
Ë
	gEV_THROW
;

809 
EV_API_DECL
 
ev_embed_°›
 (
EV_P_
 
ev_embed
 *
w
Ë
	gEV_THROW
;

810 
EV_API_DECL
 
ev_embed_swìp
 (
EV_P_
 
ev_embed
 *
w
Ë
	gEV_THROW
;

813 #i‡
EV_ASYNC_ENABLE


814 
EV_API_DECL
 
ev_async_°¨t
 (
EV_P_
 
ev_async
 *
w
Ë
	gEV_THROW
;

815 
EV_API_DECL
 
ev_async_°›
 (
EV_P_
 
ev_async
 *
w
Ë
	gEV_THROW
;

816 
EV_API_DECL
 
ev_async_£nd
 (
EV_P_
 
ev_async
 *
w
Ë
	gEV_THROW
;

819 #i‡
EV_COMPAT3


820 
	#EVLOOP_NONBLOCK
 
EVRUN_NOWAIT


	)

821 
	#EVLOOP_ONESHOT
 
EVRUN_ONCE


	)

822 
	#EVUNLOOP_CANCEL
 
EVBREAK_CANCEL


	)

823 
	#EVUNLOOP_ONE
 
EVBREAK_ONE


	)

824 
	#EVUNLOOP_ALL
 
EVBREAK_ALL


	)

825 #i‡
EV_PROTOTYPES


826 
EV_INLINE
 
ev_lo›
 (
EV_P_
 
Êags
Ë{ 
ev_run
 (
EV_A_
 flags); }

827 
EV_INLINE
 
ev_u∆o›
 (
EV_P_
 
how
 ) { 
ev_bªak
 (
EV_A_
 how ); }

828 
EV_INLINE
 
ev_deÁu…_de°roy
 (Ë{ 
ev_lo›_de°roy
 (
EV_DEFAULT
); }

829 
EV_INLINE
 
ev_deÁu…_f‹k
 (Ë{ 
ev_lo›_f‹k
 (
EV_DEFAULT
); }

830 #i‡
EV_FEATURE_API


831 
EV_INLINE
 
ev_lo›_cou¡
 (
EV_P
Ë{  
ev_ôî©i⁄
 (
EV_A
); }

832 
EV_INLINE
 
ev_lo›_dïth
 (
EV_P
Ë{  
ev_dïth
 (
EV_A
); }

833 
EV_INLINE
 
ev_lo›_vîify
 (
EV_P
Ë{ 
ev_vîify
 (
EV_A
); }

837 
ev_lo›
 
	tev_lo›
;

842 
EV_CPP
(})

	@libs/libev-4.15/ev_epoll.c

66 
	~<sys/ïﬁl.h
>

68 
	#EV_EMASK_EPERM
 0x80

	)

71 
	$ïﬁl_modify
 (
EV_P_
 
fd
, 
€v
, 
√v
)

73 
ïﬁl_evít
 
ev
;

74 
ﬁdmask
;

84 i‡(!
√v
)

87 
ﬁdmask
 = 
™fds
 [
fd
].
emask
;

88 
™fds
 [
fd
].
emask
 = 
√v
;

91 
ev
.
d©a
.
u64
 = (
uöt64_t
)(
uöt32_t
)
fd


92 | ((
uöt64_t
)(
uöt32_t
)++
™fds
 [
fd
].
egí
 << 32);

93 
ev
.
evíts
 = (
√v
 & 
EV_READ
 ? 
EPOLLIN
 : 0)

94 | (
√v
 & 
EV_WRITE
 ? 
EPOLLOUT
 : 0);

96 i‡(
	`ex≥˘_åue
 (!
	`ïﬁl_˘l
 (
backíd_fd
, 
€v
 && 
ﬁdmask
 !
√v
 ? 
EPOLL_CTL_MOD
 : 
EPOLL_CTL_ADD
, 
fd
, &
ev
)))

99 i‡(
	`ex≥˘_åue
 (
î∫o
 =
ENOENT
))

102 i‡(!
√v
)

103 
dec_egí
;

105 i‡(!
	`ïﬁl_˘l
 (
backíd_fd
, 
EPOLL_CTL_ADD
, 
fd
, &
ev
))

108 i‡(
	`ex≥˘_åue
 (
î∫o
 =
EEXIST
))

112 i‡(
ﬁdmask
 =
√v
)

113 
dec_egí
;

115 i‡(!
	`ïﬁl_˘l
 (
backíd_fd
, 
EPOLL_CTL_MOD
, 
fd
, &
ev
))

118 i‡(
	`ex≥˘_åue
 (
î∫o
 =
EPERM
))

122 
™fds
 [
fd
].
emask
 = 
EV_EMASK_EPERM
;

125 i‡(!(
ﬁdmask
 & 
EV_EMASK_EPERM
))

127 
	`¨øy_√edsize
 (, 
ïﬁl_ïîms
, 
ïﬁl_ïîmmax
, 
ïﬁl_ïîm˙t
 + 1, 
EMPTY2
);

128 
ïﬁl_ïîms
 [
ïﬁl_ïîm˙t
++] = 
fd
;

134 
	`fd_kûl
 (
EV_A_
 
fd
);

136 
dec_egí
:

138 --
™fds
 [
fd
].
egí
;

139 
	}
}

142 
	$ïﬁl_pﬁl
 (
EV_P_
 
ev_t°amp
 
timeout
)

144 
i
;

145 
evít˙t
;

147 i‡(
	`ex≥˘_Ál£
 (
ïﬁl_ïîm˙t
))

148 
timeout
 = 0.;

152 
EV_RELEASE_CB
;

153 
evít˙t
 = 
	`ïﬁl_waô
 (
backíd_fd
, 
ïﬁl_evíts
, 
ïﬁl_evítmax
, 
timeout
 * 1e3);

154 
EV_ACQUIRE_CB
;

156 i‡(
	`ex≥˘_Ál£
 (
evít˙t
 < 0))

158 i‡(
î∫o
 !
EINTR
)

159 
	`ev_sy£º
 ("(libev)Époll_wait");

164 
i
 = 0; i < 
evít˙t
; ++i)

166 
ïﬁl_evít
 *
ev
 = 
ïﬁl_evíts
 + 
i
;

168 
fd
 = (
uöt32_t
)
ev
->
d©a
.
u64
;

169 
w™t
 = 
™fds
 [
fd
].
evíts
;

170 
gŸ
 = (
ev
->
evíts
 & (
EPOLLOUT
 | 
EPOLLERR
 | 
EPOLLHUP
Ë? 
EV_WRITE
 : 0)

171 | (
ev
->
evíts
 & (
EPOLLIN
 | 
EPOLLERR
 | 
EPOLLHUP
Ë? 
EV_READ
 : 0);

179 i‡(
	`ex≥˘_Ál£
 ((
uöt32_t
)
™fds
 [
fd
].
egí
 !(uöt32_t)(
ev
->
d©a
.
u64
 >> 32)))

182 
po°f‹k
 = 1;

186 i‡(
	`ex≥˘_Ál£
 (
gŸ
 & ~
w™t
))

188 
™fds
 [
fd
].
emask
 = 
w™t
;

199 
ev
->
evíts
 = (
w™t
 & 
EV_READ
 ? 
EPOLLIN
 : 0)

200 | (
w™t
 & 
EV_WRITE
 ? 
EPOLLOUT
 : 0);

204 i‡(
	`ïﬁl_˘l
 (
backíd_fd
, 
w™t
 ? 
EPOLL_CTL_MOD
 : 
EPOLL_CTL_DEL
, 
fd
, 
ev
))

206 
po°f‹k
 = 1;

211 
	`fd_evít
 (
EV_A_
 
fd
, 
gŸ
);

215 i‡(
	`ex≥˘_Ál£
 (
evít˙t
 =
ïﬁl_evítmax
))

217 
	`ev_‰ì
 (
ïﬁl_evíts
);

218 
ïﬁl_evítmax
 = 
	`¨øy_√xtsize
 ( (
ïﬁl_evít
),Époll_eventmax,Époll_eventmax + 1);

219 
ïﬁl_evíts
 = (
ïﬁl_evít
 *)
	`ev_mÆloc
 ( (ïﬁl_evítË* 
ïﬁl_evítmax
);

223 
i
 = 
ïﬁl_ïîm˙t
; i--; )

225 
fd
 = 
ïﬁl_ïîms
 [
i
];

226 
evíts
 = 
™fds
 [
fd
].evít†& (
EV_READ
 | 
EV_WRITE
);

228 i‡(
™fds
 [
fd
].
emask
 & 
EV_EMASK_EPERM
 && 
evíts
)

229 
	`fd_evít
 (
EV_A_
 
fd
, 
evíts
);

231 
ïﬁl_ïîms
 [
i
] =Épﬁl_ïîm†[--
ïﬁl_ïîm˙t
];

233 
	}
}

235 
ölöe_size


236 
	$ïﬁl_öô
 (
EV_P_
 
Êags
)

238 #ifde‡
EPOLL_CLOEXEC


239 
backíd_fd
 = 
	`ïﬁl_¸óã1
 (
EPOLL_CLOEXEC
);

241 i‡(
backíd_fd
 < 0 && (
î∫o
 =
EINVAL
 ||Éºnÿ=
ENOSYS
))

243 
backíd_fd
 = 
	`ïﬁl_¸óã
 (256);

245 i‡(
backíd_fd
 < 0)

248 
	`f˙é
 (
backíd_fd
, 
F_SETFD
, 
FD_CLOEXEC
);

250 
backíd_mötime
 = 1e-3;

251 
backíd_modify
 = 
ïﬁl_modify
;

252 
backíd_pﬁl
 = 
ïﬁl_pﬁl
;

254 
ïﬁl_evítmax
 = 64;

255 
ïﬁl_evíts
 = (
ïﬁl_evít
 *)
	`ev_mÆloc
 ( (ïﬁl_evítË* 
ïﬁl_evítmax
);

257  
EVBACKEND_EPOLL
;

258 
	}
}

260 
ölöe_size


261 
	$ïﬁl_de°roy
 (
EV_P
)

263 
	`ev_‰ì
 (
ïﬁl_evíts
);

264 
	`¨øy_‰ì
 (
ïﬁl_ïîm
, 
EMPTY
);

265 
	}
}

267 
ölöe_size


268 
	$ïﬁl_f‹k
 (
EV_P
)

270 
	`˛o£
 (
backíd_fd
);

272 (
backíd_fd
 = 
	`ïﬁl_¸óã
 (256)) < 0)

273 
	`ev_sy£º
 ("(libev)Époll_create");

275 
	`f˙é
 (
backíd_fd
, 
F_SETFD
, 
FD_CLOEXEC
);

277 
	`fd_ª¨m_Æl
 (
EV_A
);

278 
	}
}

	@libs/libev-4.15/ev_kqueue.c

40 
	~<sys/ty≥s.h
>

41 
	~<sys/time.h
>

42 
	~<sys/evít.h
>

43 
	~<°rög.h
>

44 
	~<î∫o.h
>

46 
ölöe_•ìd


47 
	$kqueue_ch™ge
 (
EV_P_
 
fd
, 
fûãr
, 
Êags
, 
fÊags
)

49 ++
kqueue_ch™ge˙t
;

50 
	`¨øy_√edsize
 (
kevít
, 
kqueue_ch™ges
, 
kqueue_ch™gemax
, 
kqueue_ch™ge˙t
, 
EMPTY2
);

52 
	`EV_SET
 (&
kqueue_ch™ges
 [
kqueue_ch™ge˙t
 - 1], 
fd
, 
fûãr
, 
Êags
, 
fÊags
, 0, 0);

53 
	}
}

56 #i‚de‡
EV_ENABLE


57 
	#EV_ENABLE
 0

	)

59 #i‚de‡
NOTE_EOF


60 
	#NOTE_EOF
 0

	)

64 
	$kqueue_modify
 (
EV_P_
 
fd
, 
€v
, 
√v
)

66 i‡(
€v
 !
√v
)

68 i‡(
€v
 & 
EV_READ
)

69 
	`kqueue_ch™ge
 (
EV_A_
 
fd
, 
EVFILT_READ
 , 
EV_DELETE
, 0);

71 i‡(
€v
 & 
EV_WRITE
)

72 
	`kqueue_ch™ge
 (
EV_A_
 
fd
, 
EVFILT_WRITE
, 
EV_DELETE
, 0);

78 i‡(
√v
 & 
EV_READ
)

79 
	`kqueue_ch™ge
 (
EV_A_
 
fd
, 
EVFILT_READ
 , 
EV_ADD
 | 
EV_ENABLE
, 
NOTE_EOF
);

81 i‡(
√v
 & 
EV_WRITE
)

82 
	`kqueue_ch™ge
 (
EV_A_
 
fd
, 
EVFILT_WRITE
, 
EV_ADD
 | 
EV_ENABLE
, 
NOTE_EOF
);

83 
	}
}

86 
	$kqueue_pﬁl
 (
EV_P_
 
ev_t°amp
 
timeout
)

88 
ªs
, 
i
;

89 
time•ec
 
ts
;

92 i‡(
kqueue_ch™ge˙t
 > 
kqueue_evítmax
)

94 
	`ev_‰ì
 (
kqueue_evíts
);

95 
kqueue_evítmax
 = 
	`¨øy_√xtsize
 ( (
kevít
), kqueue_evítmax, 
kqueue_ch™ge˙t
);

96 
kqueue_evíts
 = (
kevít
 *)
	`ev_mÆloc
 ( (kevítË* 
kqueue_evítmax
);

99 
EV_RELEASE_CB
;

100 
	`EV_TS_SET
 (
ts
, 
timeout
);

101 
ªs
 = 
	`kevít
 (
backíd_fd
, 
kqueue_ch™ges
, 
kqueue_ch™ge˙t
, 
kqueue_evíts
, 
kqueue_evítmax
, &
ts
);

102 
EV_ACQUIRE_CB
;

103 
kqueue_ch™ge˙t
 = 0;

105 i‡(
	`ex≥˘_Ál£
 (
ªs
 < 0))

107 i‡(
î∫o
 !
EINTR
)

108 
	`ev_sy£º
 ("(libev) kevent");

113 
i
 = 0; i < 
ªs
; ++i)

115 
fd
 = 
kqueue_evíts
 [
i
].
idít
;

117 i‡(
	`ex≥˘_Ál£
 (
kqueue_evíts
 [
i
].
Êags
 & 
EV_ERROR
))

119 
îr
 = 
kqueue_evíts
 [
i
].
d©a
;

122 i‡(
™fds
 [
fd
].
evíts
)

124 i‡(
îr
 =
ENOENT
)

125 
	`kqueue_modify
 (
EV_A_
 
fd
, 0, 
™fds
 [fd].
evíts
);

126 i‡(
îr
 =
EBADF
)

128 i‡(
	`fd_vÆid
 (
fd
))

129 
	`kqueue_modify
 (
EV_A_
 
fd
, 0, 
™fds
 [fd].
evíts
);

131 
	`fd_kûl
 (
EV_A_
 
fd
);

134 
	`fd_kûl
 (
EV_A_
 
fd
);

138 
	`fd_evít
 (

139 
EV_A_


140 
fd
,

141 
kqueue_evíts
 [
i
].
fûãr
 =
EVFILT_READ
 ? 
EV_READ


142 : 
kqueue_evíts
 [
i
].
fûãr
 =
EVFILT_WRITE
 ? 
EV_WRITE


147 i‡(
	`ex≥˘_Ál£
 (
ªs
 =
kqueue_evítmax
))

149 
	`ev_‰ì
 (
kqueue_evíts
);

150 
kqueue_evítmax
 = 
	`¨øy_√xtsize
 ( (
kevít
), kqueue_eventmax, kqueue_eventmax + 1);

151 
kqueue_evíts
 = (
kevít
 *)
	`ev_mÆloc
 ( (kevítË* 
kqueue_evítmax
);

153 
	}
}

155 
ölöe_size


156 
	$kqueue_öô
 (
EV_P_
 
Êags
)

159 
kqueue_fd_pid
 = 
	`gëpid
 ();

160 i‡((
backíd_fd
 = 
	`kqueue
 ()) < 0)

163 
	`f˙é
 (
backíd_fd
, 
F_SETFD
, 
FD_CLOEXEC
);

165 
backíd_mötime
 = 1e-9;

166 
backíd_modify
 = 
kqueue_modify
;

167 
backíd_pﬁl
 = 
kqueue_pﬁl
;

169 
kqueue_evítmax
 = 64;

170 
kqueue_evíts
 = (
kevít
 *)
	`ev_mÆloc
 ( (kevítË* 
kqueue_evítmax
);

172 
kqueue_ch™ges
 = 0;

173 
kqueue_ch™gemax
 = 0;

174 
kqueue_ch™ge˙t
 = 0;

176  
EVBACKEND_KQUEUE
;

177 
	}
}

179 
ölöe_size


180 
	$kqueue_de°roy
 (
EV_P
)

182 
	`ev_‰ì
 (
kqueue_evíts
);

183 
	`ev_‰ì
 (
kqueue_ch™ges
);

184 
	}
}

186 
ölöe_size


187 
	$kqueue_f‹k
 (
EV_P
)

197 
pid_t
 
√wpid
 = 
	`gëpid
 ();

199 i‡(
√wpid
 =
kqueue_fd_pid
)

200 
	`˛o£
 (
backíd_fd
);

202 
kqueue_fd_pid
 = 
√wpid
;

203 (
backíd_fd
 = 
	`kqueue
 ()) < 0)

204 
	`ev_sy£º
 ("(libev) kqueue");

206 
	`f˙é
 (
backíd_fd
, 
F_SETFD
, 
FD_CLOEXEC
);

209 
	`fd_ª¨m_Æl
 (
EV_A
);

210 
	}
}

213 #unde‡
EV_ERROR


	@libs/libev-4.15/ev_poll.c

40 
	~<pﬁl.h
>

42 
ölöe_size


43 
	$pﬁlidx_öô
 (*
ba£
, 
cou¡
)

47 
cou¡
--)

48 *
ba£
++ = -1;

49 
	}
}

52 
	$pﬁl_modify
 (
EV_P_
 
fd
, 
€v
, 
√v
)

54 
idx
;

56 i‡(
€v
 =
√v
)

59 
	`¨øy_√edsize
 (, 
pﬁlidxs
, 
pﬁlidxmax
, 
fd
 + 1, 
pﬁlidx_öô
);

61 
idx
 = 
pﬁlidxs
 [
fd
];

63 i‡(
idx
 < 0)

65 
pﬁlidxs
 [
fd
] = 
idx
 = 
pﬁl˙t
++;

66 
	`¨øy_√edsize
 (
pﬁlfd
, 
pﬁls
, 
pﬁlmax
, 
pﬁl˙t
, 
EMPTY2
);

67 
pﬁls
 [
idx
].
fd
 = fd;

70 
	`as£π
 (
pﬁls
 [
idx
].
fd
 == fd);

72 i‡(
√v
)

73 
pﬁls
 [
idx
].
evíts
 =

74 (
√v
 & 
EV_READ
 ? 
POLLIN
 : 0)

75 | (
√v
 & 
EV_WRITE
 ? 
POLLOUT
 : 0);

78 
pﬁlidxs
 [
fd
] = -1;

80 i‡(
	`ex≥˘_åue
 (
idx
 < --
pﬁl˙t
))

82 
pﬁls
 [
idx
] =Öﬁl†[
pﬁl˙t
];

83 
pﬁlidxs
 [
pﬁls
 [
idx
].
fd
] = idx;

86 
	}
}

89 
	$pﬁl_pﬁl
 (
EV_P_
 
ev_t°amp
 
timeout
)

91 
pﬁlfd
 *
p
;

92 
ªs
;

94 
EV_RELEASE_CB
;

95 
ªs
 = 
	`pﬁl
 (
pﬁls
, 
pﬁl˙t
, 
timeout
 * 1e3);

96 
EV_ACQUIRE_CB
;

98 i‡(
	`ex≥˘_Ál£
 (
ªs
 < 0))

100 i‡(
î∫o
 =
EBADF
)

101 
	`fd_ebadf
 (
EV_A
);

102 i‡(
î∫o
 =
ENOMEM
 && !
sy£º_cb
)

103 
	`fd_íomem
 (
EV_A
);

104 i‡(
î∫o
 !
EINTR
)

105 
	`ev_sy£º
 ("(libev)Öoll");

108 
p
 = 
pﬁls
; 
ªs
; ++p)

110 
	`as£π
 (("libev:Öﬁl(Ëªtu∫ed iŒegÆÑesu…, brokí BSD kî√l?", 
p
 < 
pﬁls
 + 
pﬁl˙t
));

112 i‡(
	`ex≥˘_Ál£
 (
p
->
ªvíts
))

114 --
ªs
;

116 i‡(
	`ex≥˘_Ál£
 (
p
->
ªvíts
 & 
POLLNVAL
))

117 
	`fd_kûl
 (
EV_A_
 
p
->
fd
);

119 
	`fd_evít
 (

120 
EV_A_


121 
p
->
fd
,

122 (
p
->
ªvíts
 & (
POLLOUT
 | 
POLLERR
 | 
POLLHUP
Ë? 
EV_WRITE
 : 0)

123 | (
p
->
ªvíts
 & (
POLLIN
 | 
POLLERR
 | 
POLLHUP
Ë? 
EV_READ
 : 0)

127 
	}
}

129 
ölöe_size


130 
	$pﬁl_öô
 (
EV_P_
 
Êags
)

132 
backíd_mötime
 = 1e-3;

133 
backíd_modify
 = 
pﬁl_modify
;

134 
backíd_pﬁl
 = 
pﬁl_pﬁl
;

136 
pﬁlidxs
 = 0; 
pﬁlidxmax
 = 0;

137 
pﬁls
 = 0; 
pﬁlmax
 = 0; 
pﬁl˙t
 = 0;

139  
EVBACKEND_POLL
;

140 
	}
}

142 
ölöe_size


143 
	$pﬁl_de°roy
 (
EV_P
)

145 
	`ev_‰ì
 (
pﬁlidxs
);

146 
	`ev_‰ì
 (
pﬁls
);

147 
	}
}

	@libs/libev-4.15/ev_port.c

51 
	~<sys/ty≥s.h
>

52 
	~<sys/time.h
>

53 
	~<pﬁl.h
>

54 
	~<p‹t.h
>

55 
	~<°rög.h
>

56 
	~<î∫o.h
>

58 
ölöe_•ìd


59 
	$p‹t_assocüã_™d_check
 (
EV_P_
 
fd
, 
ev
)

62 
	`p‹t_assocüã
 (

63 
backíd_fd
, 
PORT_SOURCE_FD
, 
fd
,

64 (
ev
 & 
EV_READ
 ? 
POLLIN
 : 0)

65 | (
ev
 & 
EV_WRITE
 ? 
POLLOUT
 : 0),

70 i‡(
î∫o
 =
EBADFD
)

71 
	`fd_kûl
 (
EV_A_
 
fd
);

73 
	`ev_sy£º
 ("(libev)Öort_associate");

75 
	}
}

78 
	$p‹t_modify
 (
EV_P_
 
fd
, 
€v
, 
√v
)

83 i‡(!
√v
)

85 i‡(
€v
)

86 
	`p‹t_dissocüã
 (
backíd_fd
, 
PORT_SOURCE_FD
, 
fd
);

89 
	`p‹t_assocüã_™d_check
 (
EV_A_
 
fd
, 
√v
);

90 
	}
}

93 
	$p‹t_pﬁl
 (
EV_P_
 
ev_t°amp
 
timeout
)

95 
ªs
, 
i
;

96 
time•ec
 
ts
;

97 
uöt_t
 
ngë
 = 1;

102 
p‹t_evíts
 [0].
p‹ãv_sour˚
 = 0;

104 
EV_RELEASE_CB
;

105 
	`EV_TS_SET
 (
ts
, 
timeout
);

106 
ªs
 = 
	`p‹t_gën
 (
backíd_fd
, 
p‹t_evíts
, 
p‹t_evítmax
, &
ngë
, &
ts
);

107 
EV_ACQUIRE_CB
;

111 i‡(
ªs
 =-1 && 
î∫o
 !
ETIME
 &&Éºnÿ!
EINTR
)

112 
	`ev_sy£º
 ("(libev)Öort_getn (see http://bugs.opensolaris.org/view_bug.do?bug_id=6268715,Åry LIBEV_FLAGS=3Énv variable)");

114 
i
 = 0; i < 
ngë
; ++i)

116 i‡(
p‹t_evíts
 [
i
].
p‹ãv_sour˚
 =
PORT_SOURCE_FD
)

118 
fd
 = 
p‹t_evíts
 [
i
].
p‹ãv_obje˘
;

120 
	`fd_evít
 (

121 
EV_A_


122 
fd
,

123 (
p‹t_evíts
 [
i
].
p‹ãv_evíts
 & (
POLLOUT
 | 
POLLERR
 | 
POLLHUP
Ë? 
EV_WRITE
 : 0)

124 | (
p‹t_evíts
 [
i
].
p‹ãv_evíts
 & (
POLLIN
 | 
POLLERR
 | 
POLLHUP
Ë? 
EV_READ
 : 0)

127 
	`fd_ch™ge
 (
EV_A_
 
fd
, 
EV__IOFDSET
);

131 i‡(
	`ex≥˘_Ál£
 (
ngë
 =
p‹t_evítmax
))

133 
	`ev_‰ì
 (
p‹t_evíts
);

134 
p‹t_evítmax
 = 
	`¨øy_√xtsize
 ( (
p‹t_evít_t
),Öort_eventmax,Öort_eventmax + 1);

135 
p‹t_evíts
 = (
p‹t_evít_t
 *)
	`ev_mÆloc
 ( (p‹t_evít_tË* 
p‹t_evítmax
);

137 
	}
}

139 
ölöe_size


140 
	$p‹t_öô
 (
EV_P_
 
Êags
)

143 i‡((
backíd_fd
 = 
	`p‹t_¸óã
 ()) < 0)

146 
	`as£π
 (("libev: PORT_SOURCE_FD mu°ÇŸ bêzîo", 
PORT_SOURCE_FD
));

148 
	`f˙é
 (
backíd_fd
, 
F_SETFD
, 
FD_CLOEXEC
);

156 
backíd_mötime
 = 1e-3;

157 
backíd_modify
 = 
p‹t_modify
;

158 
backíd_pﬁl
 = 
p‹t_pﬁl
;

160 
p‹t_evítmax
 = 64;

161 
p‹t_evíts
 = (
p‹t_evít_t
 *)
	`ev_mÆloc
 ( (p‹t_evít_tË* 
p‹t_evítmax
);

163  
EVBACKEND_PORT
;

164 
	}
}

166 
ölöe_size


167 
	$p‹t_de°roy
 (
EV_P
)

169 
	`ev_‰ì
 (
p‹t_evíts
);

170 
	}
}

172 
ölöe_size


173 
	$p‹t_f‹k
 (
EV_P
)

175 
	`˛o£
 (
backíd_fd
);

177 (
backíd_fd
 = 
	`p‹t_¸óã
 ()) < 0)

178 
	`ev_sy£º
 ("(libev)Öort");

180 
	`f˙é
 (
backíd_fd
, 
F_SETFD
, 
FD_CLOEXEC
);

183 
	`fd_ª¨m_Æl
 (
EV_A
);

184 
	}
}

	@libs/libev-4.15/ev_select.c

40 #i‚de‡
_WIN32


42 
	~<öây≥s.h
>

43 #i‚de‡
__hpux


45 
	~<sys/£À˘.h
>

49 #i‚de‡
EV_SELECT_USE_FD_SET


50 #ifde‡
NFDBITS


51 
	#EV_SELECT_USE_FD_SET
 0

	)

53 
	#EV_SELECT_USE_FD_SET
 1

	)

57 #i‡
EV_SELECT_IS_WINSOCKET


58 #unde‡
EV_SELECT_USE_FD_SET


59 
	#EV_SELECT_USE_FD_SET
 1

	)

60 #unde‡
NFDBITS


61 
	#NFDBITS
 0

	)

64 #i‡!
EV_SELECT_USE_FD_SET


65 
	#NFDBYTES
 (
NFDBITS
 / 8)

	)

68 
	~<°rög.h
>

71 
	$£À˘_modify
 (
EV_P_
 
fd
, 
€v
, 
√v
)

73 i‡(
€v
 =
√v
)

77 #i‡
EV_SELECT_USE_FD_SET


79 #i‡
EV_SELECT_IS_WINSOCKET


80 
SOCKET
 
h™dÀ
 = 
™fds
 [
fd
].handle;

82 
h™dÀ
 = 
fd
;

85 
	`as£π
 (("libev: fd >FD_SETSIZEÖas£dÅÿfd_£t-ba£d sñe˘ backíd", 
fd
 < 
FD_SETSIZE
));

90 #i‡
EV_SELECT_IS_WINSOCKET


91 i‡((
€v
 ^ 
√v
Ë& 
EV_READ
)

93 i‡(
√v
 & 
EV_READ
)

94 
	`FD_SET
 (
h™dÀ
, (
fd_£t
 *)
vec_ri
);

96 
	`FD_CLR
 (
h™dÀ
, (
fd_£t
 *)
vec_ri
);

98 #i‡
EV_SELECT_IS_WINSOCKET


99 i‡((
€v
 ^ 
√v
Ë& 
EV_WRITE
)

101 i‡(
√v
 & 
EV_WRITE
)

102 
	`FD_SET
 (
h™dÀ
, (
fd_£t
 *)
vec_wi
);

104 
	`FD_CLR
 (
h™dÀ
, (
fd_£t
 *)
vec_wi
);

108 
w‹d
 = 
fd
 / 
NFDBITS
;

109 
fd_mask
 
mask
 = 1UL << (
fd
 % 
NFDBITS
);

111 i‡(
	`ex≥˘_Ál£
 (
vec_max
 <
w‹d
))

113 
√w_max
 = 
w‹d
 + 1;

115 
vec_ri
 = 
	`ev_ªÆloc
 (vec_ri, 
√w_max
 * 
NFDBYTES
);

116 
vec_ro
 = 
	`ev_ªÆloc
 (vec_ro, 
√w_max
 * 
NFDBYTES
);

117 
vec_wi
 = 
	`ev_ªÆloc
 (vec_wi, 
√w_max
 * 
NFDBYTES
);

118 
vec_wo
 = 
	`ev_ªÆloc
 (vec_wo, 
√w_max
 * 
NFDBYTES
);

119 #ifde‡
_WIN32


120 
vec_eo
 = 
	`ev_ªÆloc
 (vec_eo, 
√w_max
 * 
NFDBYTES
);

123 ; 
vec_max
 < 
√w_max
; ++vec_max)

124 ((
fd_mask
 *)
vec_ri
Ë[
vec_max
] =

125 ((
fd_mask
 *)
vec_wi
Ë[
vec_max
] = 0;

128 ((
fd_mask
 *)
vec_ri
Ë[
w‹d
] |
mask
;

129 i‡(!(
√v
 & 
EV_READ
))

130 ((
fd_mask
 *)
vec_ri
Ë[
w‹d
] &~
mask
;

132 ((
fd_mask
 *)
vec_wi
Ë[
w‹d
] |
mask
;

133 i‡(!(
√v
 & 
EV_WRITE
))

134 ((
fd_mask
 *)
vec_wi
Ë[
w‹d
] &~
mask
;

137 
	}
}

140 
	$£À˘_pﬁl
 (
EV_P_
 
ev_t°amp
 
timeout
)

142 
timevÆ
 
tv
;

143 
ªs
;

144 
fd_£tsize
;

146 
EV_RELEASE_CB
;

147 
	`EV_TV_SET
 (
tv
, 
timeout
);

149 #i‡
EV_SELECT_USE_FD_SET


150 
fd_£tsize
 =  (
fd_£t
);

152 
fd_£tsize
 = 
vec_max
 * 
NFDBYTES
;

155 
	`mem˝y
 (
vec_ro
, 
vec_ri
, 
fd_£tsize
);

156 
	`mem˝y
 (
vec_wo
, 
vec_wi
, 
fd_£tsize
);

158 #ifde‡
_WIN32


164 
	`mem˝y
 (
vec_eo
, 
vec_wi
, 
fd_£tsize
);

165 
ªs
 = 
	`£À˘
 (
vec_max
 * 
NFDBITS
, (
fd_£t
 *)
vec_ro
, (fd_£à*)
vec_wo
, (fd_£à*)
vec_eo
, &
tv
);

166 #ñi‡
EV_SELECT_USE_FD_SET


167 
fd_£tsize
 = 
™fdmax
 < 
FD_SETSIZE
 ?ánfdmax : FD_SETSIZE;

168 
ªs
 = 
	`£À˘
 (
fd_£tsize
, (
fd_£t
 *)
vec_ro
, (fd_£à*)
vec_wo
, 0, &
tv
);

170 
ªs
 = 
	`£À˘
 (
vec_max
 * 
NFDBITS
, (
fd_£t
 *)
vec_ro
, (fd_£à*)
vec_wo
, 0, &
tv
);

172 
EV_ACQUIRE_CB
;

174 i‡(
	`ex≥˘_Ál£
 (
ªs
 < 0))

176 #i‡
EV_SELECT_IS_WINSOCKET


177 
î∫o
 = 
	`WSAGëLa°Eº‹
 ();

179 #ifde‡
WSABASEERR


181 i‡(
î∫o
 >
WSABASEERR
 &&Érrno < WSABASEERR + 1000)

182 i‡(
î∫o
 =
WSAENOTSOCK
)

183 
î∫o
 = 
EBADF
;

185 
î∫o
 -
WSABASEERR
;

188 #ifde‡
_WIN32


196 i‡(
î∫o
 =
EINVAL
)

198 i‡(
timeout
)

200 
ms
 = 
timeout
 * 1e3;

201 
	`SÀï
 (
ms
 ? ms : 1);

208 i‡(
î∫o
 =
EBADF
)

209 
	`fd_ebadf
 (
EV_A
);

210 i‡(
î∫o
 =
ENOMEM
 && !
sy£º_cb
)

211 
	`fd_íomem
 (
EV_A
);

212 i‡(
î∫o
 !
EINTR
)

213 
	`ev_sy£º
 ("(libev) select");

218 #i‡
EV_SELECT_USE_FD_SET


221 
fd
;

223 
fd
 = 0; fd < 
™fdmax
; ++fd)

224 i‡(
™fds
 [
fd
].
evíts
)

226 
evíts
 = 0;

227 #i‡
EV_SELECT_IS_WINSOCKET


228 
SOCKET
 
h™dÀ
 = 
™fds
 [
fd
].handle;

230 
h™dÀ
 = 
fd
;

233 i‡(
	`FD_ISSET
 (
h™dÀ
, (
fd_£t
 *)
vec_ro
)Ë
evíts
 |
EV_READ
;

234 i‡(
	`FD_ISSET
 (
h™dÀ
, (
fd_£t
 *)
vec_wo
)Ë
evíts
 |
EV_WRITE
;

235 #ifde‡
_WIN32


236 i‡(
	`FD_ISSET
 (
h™dÀ
, (
fd_£t
 *)
vec_eo
)Ë
evíts
 |
EV_WRITE
;

239 i‡(
	`ex≥˘_åue
 (
evíts
))

240 
	`fd_evít
 (
EV_A_
 
fd
, 
evíts
);

247 
w‹d
, 
bô
;

248 
w‹d
 = 
vec_max
; word--; )

250 
fd_mask
 
w‹d_r
 = ((fd_mask *)
vec_ro
Ë[
w‹d
];

251 
fd_mask
 
w‹d_w
 = ((fd_mask *)
vec_wo
Ë[
w‹d
];

252 #ifde‡
_WIN32


253 
w‹d_w
 |((
fd_mask
 *)
vec_eo
Ë[
w‹d
];

256 i‡(
w‹d_r
 || 
w‹d_w
)

257 
bô
 = 
NFDBITS
; bit--; )

259 
fd_mask
 
mask
 = 1UL << 
bô
;

260 
evíts
 = 0;

262 
evíts
 |
w‹d_r
 & 
mask
 ? 
EV_READ
 : 0;

263 
evíts
 |
w‹d_w
 & 
mask
 ? 
EV_WRITE
 : 0;

265 i‡(
	`ex≥˘_åue
 (
evíts
))

266 
	`fd_evít
 (
EV_A_
 
w‹d
 * 
NFDBITS
 + 
bô
, 
evíts
);

272 
	}
}

274 
ölöe_size


275 
	$£À˘_öô
 (
EV_P_
 
Êags
)

277 
backíd_mötime
 = 1e-6;

278 
backíd_modify
 = 
£À˘_modify
;

279 
backíd_pﬁl
 = 
£À˘_pﬁl
;

281 #i‡
EV_SELECT_USE_FD_SET


282 
vec_ri
 = 
	`ev_mÆloc
 ( (
fd_£t
)); 
	`FD_ZERO
 ((fd_set *)vec_ri);

283 
vec_ro
 = 
	`ev_mÆloc
 ( (
fd_£t
));

284 
vec_wi
 = 
	`ev_mÆloc
 ( (
fd_£t
)); 
	`FD_ZERO
 ((fd_set *)vec_wi);

285 
vec_wo
 = 
	`ev_mÆloc
 ( (
fd_£t
));

286 #ifde‡
_WIN32


287 
vec_eo
 = 
	`ev_mÆloc
 ( (
fd_£t
));

290 
vec_max
 = 0;

291 
vec_ri
 = 0;

292 
vec_ro
 = 0;

293 
vec_wi
 = 0;

294 
vec_wo
 = 0;

295 #ifde‡
_WIN32


296 
vec_eo
 = 0;

300  
EVBACKEND_SELECT
;

301 
	}
}

303 
ölöe_size


304 
	$£À˘_de°roy
 (
EV_P
)

306 
	`ev_‰ì
 (
vec_ri
);

307 
	`ev_‰ì
 (
vec_ro
);

308 
	`ev_‰ì
 (
vec_wi
);

309 
	`ev_‰ì
 (
vec_wo
);

310 #ifde‡
_WIN32


311 
	`ev_‰ì
 (
vec_eo
);

313 
	}
}

	@libs/libev-4.15/ev_vars.h

40 
	#VARx
(
ty≥
,
«me
Ë
	`VAR
“ame,Åy≥Çame)

	)

42 
	$VARx
(
ev_t°amp
, 
now_Êo‹
)

43 
	$VARx
(
ev_t°amp
, 
mn_now
)

44 
	$VARx
(
ev_t°amp
, 
πmn_diff
)

47 
	$VARx
(
W
 *, 
r„eds
)

48 
	$VARx
(, 
r„edmax
)

49 
	$VARx
(, 
r„ed˙t
)

51 
	$VAR
 (
≥ndögs
, 
ANPENDING
 *≥ndög†[
NUMPRI
])

52 
	$VAR
 (
≥ndögmax
, ≥ndögmax [
NUMPRI
])

53 
	$VAR
 (
≥ndög˙t
, ≥ndög˙à[
NUMPRI
])

54 
	$VARx
(, 
≥ndög¥i
)

55 
	$VARx
(
ev_¥ï¨e
, 
≥ndög_w
)

57 
	$VARx
(
ev_t°amp
, 
io_blocktime
)

58 
	$VARx
(
ev_t°amp
, 
timeout_blocktime
)

60 
	$VARx
(, 
backíd
)

61 
	$VARx
(, 
a˘ive˙t
)

62 
	$VARx
(
EV_ATOMIC_T
, 
lo›_d⁄e
)

64 
	$VARx
(, 
backíd_fd
)

65 
	$VARx
(
ev_t°amp
, 
backíd_mötime
)

66 
	`VAR
 (
backíd_modify
, (*backíd_modify)(
EV_P_
 
fd
, 
€v
, 
√v
))

67 
	`VAR
 (
backíd_pﬁl
 , (*backíd_pﬁl)(
EV_P_
 
ev_t°amp
 
timeout
))

69 
	$VARx
(
ANFD
 *, 
™fds
)

70 
	$VARx
(, 
™fdmax
)

72 
	$VAR
 (
evpùe
, evpipe [2])

73 
	$VARx
(
ev_io
, 
pùe_w
)

74 
	$VARx
(
EV_ATOMIC_T
, 
pùe_wrôe_w™ãd
)

75 
	$VARx
(
EV_ATOMIC_T
, 
pùe_wrôe_skù≥d
)

77 #i‡!
	`deföed
(
_WIN32
Ë|| 
EV_GENWRAP


78 
	$VARx
(
pid_t
, 
cuΩid
)

81 
	$VARx
(, 
po°f‹k
)

83 #i‡
EV_USE_SELECT
 || 
EV_GENWRAP


84 
	$VARx
(*, 
vec_ri
)

85 
	$VARx
(*, 
vec_ro
)

86 
	$VARx
(*, 
vec_wi
)

87 
	$VARx
(*, 
vec_wo
)

88 #i‡
	`deföed
(
_WIN32
Ë|| 
EV_GENWRAP


89 
	$VARx
(*, 
vec_eo
)

91 
	$VARx
(, 
vec_max
)

94 #i‡
EV_USE_POLL
 || 
EV_GENWRAP


95 
	$VARx
(
pﬁlfd
 *, 
pﬁls
)

96 
	$VARx
(, 
pﬁlmax
)

97 
	$VARx
(, 
pﬁl˙t
)

98 
	$VARx
(*, 
pﬁlidxs
)

99 
	$VARx
(, 
pﬁlidxmax
)

102 #i‡
EV_USE_EPOLL
 || 
EV_GENWRAP


103 
	$VARx
(
ïﬁl_evít
 *, 
ïﬁl_evíts
)

104 
	$VARx
(, 
ïﬁl_evítmax
)

105 
	$VARx
(*, 
ïﬁl_ïîms
)

106 
	$VARx
(, 
ïﬁl_ïîm˙t
)

107 
	$VARx
(, 
ïﬁl_ïîmmax
)

110 #i‡
EV_USE_KQUEUE
 || 
EV_GENWRAP


111 
	$VARx
(
pid_t
, 
kqueue_fd_pid
)

112 
	$VARx
(
kevít
 *, 
kqueue_ch™ges
)

113 
	$VARx
(, 
kqueue_ch™gemax
)

114 
	$VARx
(, 
kqueue_ch™ge˙t
)

115 
	$VARx
(
kevít
 *, 
kqueue_evíts
)

116 
	$VARx
(, 
kqueue_evítmax
)

119 #i‡
EV_USE_PORT
 || 
EV_GENWRAP


120 
	$VARx
(
p‹t_evít
 *, 
p‹t_evíts
)

121 
	$VARx
(, 
p‹t_evítmax
)

124 #i‡
EV_USE_IOCP
 || 
EV_GENWRAP


125 
	$VARx
(
HANDLE
, 
io˝
)

128 
	$VARx
(*, 
fdch™ges
)

129 
	$VARx
(, 
fdch™gemax
)

130 
	$VARx
(, 
fdch™ge˙t
)

132 
	$VARx
(
ANHE
 *, 
timîs
)

133 
	$VARx
(, 
timîmax
)

134 
	$VARx
(, 
timî˙t
)

136 #i‡
EV_PERIODIC_ENABLE
 || 
EV_GENWRAP


137 
	$VARx
(
ANHE
 *, 
≥riodics
)

138 
	$VARx
(, 
≥riodicmax
)

139 
	$VARx
(, 
≥riodic˙t
)

142 #i‡
EV_IDLE_ENABLE
 || 
EV_GENWRAP


143 
	$VAR
 (
idÀs
, 
ev_idÀ
 **idÀ†[
NUMPRI
])

144 
	$VAR
 (
idÀmax
, idÀmax [
NUMPRI
])

145 
	$VAR
 (
idÀ˙t
, idÀ˙à[
NUMPRI
])

147 
	$VARx
(, 
idÀÆl
)

149 
	$VARx
(
ev_¥ï¨e
 **, 
¥ï¨es
)

150 
	$VARx
(, 
¥ï¨emax
)

151 
	$VARx
(, 
¥ï¨e˙t
)

153 
	$VARx
(
ev_check
 **, 
checks
)

154 
	$VARx
(, 
checkmax
)

155 
	$VARx
(, 
check˙t
)

157 #i‡
EV_FORK_ENABLE
 || 
EV_GENWRAP


158 
	$VARx
(
ev_f‹k
 **, 
f‹ks
)

159 
	$VARx
(, 
f‹kmax
)

160 
	$VARx
(, 
f‹k˙t
)

163 #i‡
EV_CLEANUP_ENABLE
 || 
EV_GENWRAP


164 
	$VARx
(
ev_˛ónup
 **, 
˛ónups
)

165 
	$VARx
(, 
˛ónupmax
)

166 
	$VARx
(, 
˛ónup˙t
)

169 #i‡
EV_ASYNC_ENABLE
 || 
EV_GENWRAP


170 
	$VARx
(
EV_ATOMIC_T
, 
async_≥ndög
)

171 
	$VARx
(
ev_async
 **, 
asyncs
)

172 
	$VARx
(, 
asyncmax
)

173 
	$VARx
(, 
async˙t
)

176 #i‡
EV_USE_INOTIFY
 || 
EV_GENWRAP


177 
	$VARx
(, 
fs_fd
)

178 
	$VARx
(
ev_io
, 
fs_w
)

179 
	$VARx
(, 
fs_2625
)

180 
	$VAR
 (
fs_hash
, 
ANFS
 fs_hash [
EV_INOTIFY_HASHSIZE
])

183 
	$VARx
(
EV_ATOMIC_T
, 
sig_≥ndög
)

184 #i‡
EV_USE_SIGNALFD
 || 
EV_GENWRAP


185 
	$VARx
(, 
sigfd
)

186 
	$VARx
(
ev_io
, 
sigfd_w
)

187 
	$VARx
(
sig£t_t
, 
sigfd_£t
)

190 
	$VARx
(, 
‹igÊags
)

192 #i‡
EV_FEATURE_API
 || 
EV_GENWRAP


193 
	$VARx
(, 
lo›_cou¡
)

194 
	$VARx
(, 
lo›_dïth
)

196 
	$VARx
(*, 
u£rd©a
)

197 
	`VAR
 (
ªÀa£_cb
, (*ªÀa£_cb)(
EV_P
Ë
EV_THROW
)

198 
	`VAR
 (
acquúe_cb
, (*acquúe_cb)(
EV_P
Ë
EV_THROW
)

199 
	`VAR
 (
övoke_cb
 , (*övoke_cbË(
EV_P
))

202 #unde‡
VARx


	@libs/libev-4.15/ev_win32.c

40 #ifde‡
_WIN32


43 
	~<sys/timeb.h
>

49 vﬁ©ûê
	gSIGFPE_REQ
 = 0.0f;

51 
SOCKET


52 
	$ev_t˝_sockë
 ()

54 #i‡
EV_USE_WSASOCKET


55  
	`WSASockë
 (
AF_INET
, 
SOCK_STREAM
, 0, 0, 0, 0);

57  
	`sockë
 (
AF_INET
, 
SOCK_STREAM
, 0);

59 
	}
}

63 
	$ev_pùe
 (
fûedes
 [2])

65 
sockaddr_ö
 
addr
 = { 0 };

66 
addr_size
 =  (
addr
);

67 
sockaddr_ö
 
adr2
;

68 
adr2_size
 =  (
adr2
);

69 
SOCKET
 
li°íî
;

70 
SOCKET
 
sock
 [2] = { -1, -1 };

72 i‡((
li°íî
 = 
	`ev_t˝_sockë
 ()Ë=
INVALID_SOCKET
)

75 
addr
.
sö_Ámûy
 = 
AF_INET
;

76 
addr
.
sö_addr
.
s_addr
 = 
	`ht⁄l
 (
INADDR_LOOPBACK
);

77 
addr
.
sö_p‹t
 = 0;

79 i‡(
	`böd
 (
li°íî
, (
sockaddr
 *)&
addr
, 
addr_size
))

80 
Áû
;

82 i‡(
	`gësock«me
 (
li°íî
, (
sockaddr
 *)&
addr
, &
addr_size
))

83 
Áû
;

85 i‡(
	`li°í
 (
li°íî
, 1))

86 
Áû
;

88 i‡((
sock
 [0] = 
	`ev_t˝_sockë
 ()Ë=
INVALID_SOCKET
)

89 
Áû
;

91 i‡(
	`c⁄√˘
 (
sock
 [0], (
sockaddr
 *)&
addr
, 
addr_size
))

92 
Áû
;

94 i‡((
sock
 [1] = 
	`ac˚±
 (
li°íî
, 0, 0)) < 0)

95 
Áû
;

109 i‡(
	`gë≥î«me
 (
sock
 [0], (
sockaddr
 *)&
addr
, &
addr_size
))

110 
Áû
;

112 i‡(
	`gësock«me
 (
sock
 [1], (
sockaddr
 *)&
adr2
, &
adr2_size
))

113 
Áû
;

115 
î∫o
 = 
WSAEINVAL
;

116 i‡(
addr_size
 !
adr2_size


117 || 
addr
.
sö_addr
.
s_addr
 !
adr2
.sin_addr.s_addr

118 || 
addr
.
sö_p‹t
 !
adr2
.sin_port)

119 
Áû
;

121 
	`˛o£sockë
 (
li°íî
);

123 #i‡
EV_SELECT_IS_WINSOCKET


124 
fûedes
 [0] = 
	`EV_WIN32_HANDLE_TO_FD
 (
sock
 [0]);

125 
fûedes
 [1] = 
	`EV_WIN32_HANDLE_TO_FD
 (
sock
 [1]);

129 
fûedes
 [0] = 
sock
 [0];

130 
fûedes
 [1] = 
sock
 [1];

135 
Áû
:

136 
	`˛o£sockë
 (
li°íî
);

138 i‡(
sock
 [0] !
INVALID_SOCKET
Ë
	`˛o£sockë
 (sock [0]);

139 i‡(
sock
 [1] !
INVALID_SOCKET
Ë
	`˛o£sockë
 (sock [1]);

142 
	}
}

144 #unde‡
pùe


145 
	#pùe
(
fûedes
Ë
	`ev_pùe
 (fûedes)

	)

147 
	#EV_HAVE_EV_TIME
 1

	)

148 
ev_t°amp


149 
	$ev_time
 ()

151 
FILETIME
 
·
;

152 
ULARGE_INTEGER
 
ui
;

154 
	`GëSy°emTimeAsFûeTime
 (&
·
);

155 
ui
.
u
.
LowP¨t
 = 
·
.
dwLowD©eTime
;

156 
ui
.
u
.
HighP¨t
 = 
·
.
dwHighD©eTime
;

159  (
LONGLONG
)(
ui
.
QuadP¨t
 - 116444736000000000) * 1e-7;

160 
	}
}

	@libs/libev-4.15/ev_wrap.h

2 #i‚de‡
EV_WRAP_H


3 
	#EV_WRAP_H


	)

4 
	#acquúe_cb
 ((
lo›
)->
acquúe_cb
)

	)

5 
	#a˘ive˙t
 ((
lo›
)->
a˘ive˙t
)

	)

6 
	#™fdmax
 ((
lo›
)->
™fdmax
)

	)

7 
	#™fds
 ((
lo›
)->
™fds
)

	)

8 
	#async_≥ndög
 ((
lo›
)->
async_≥ndög
)

	)

9 
	#async˙t
 ((
lo›
)->
async˙t
)

	)

10 
	#asyncmax
 ((
lo›
)->
asyncmax
)

	)

11 
	#asyncs
 ((
lo›
)->
asyncs
)

	)

12 
	#backíd
 ((
lo›
)->
backíd
)

	)

13 
	#backíd_fd
 ((
lo›
)->
backíd_fd
)

	)

14 
	#backíd_mötime
 ((
lo›
)->
backíd_mötime
)

	)

15 
	#backíd_modify
 ((
lo›
)->
backíd_modify
)

	)

16 
	#backíd_pﬁl
 ((
lo›
)->
backíd_pﬁl
)

	)

17 
	#check˙t
 ((
lo›
)->
check˙t
)

	)

18 
	#checkmax
 ((
lo›
)->
checkmax
)

	)

19 
	#checks
 ((
lo›
)->
checks
)

	)

20 
	#˛ónup˙t
 ((
lo›
)->
˛ónup˙t
)

	)

21 
	#˛ónupmax
 ((
lo›
)->
˛ónupmax
)

	)

22 
	#˛ónups
 ((
lo›
)->
˛ónups
)

	)

23 
	#cuΩid
 ((
lo›
)->
cuΩid
)

	)

24 
	#ïﬁl_ïîm˙t
 ((
lo›
)->
ïﬁl_ïîm˙t
)

	)

25 
	#ïﬁl_ïîmmax
 ((
lo›
)->
ïﬁl_ïîmmax
)

	)

26 
	#ïﬁl_ïîms
 ((
lo›
)->
ïﬁl_ïîms
)

	)

27 
	#ïﬁl_evítmax
 ((
lo›
)->
ïﬁl_evítmax
)

	)

28 
	#ïﬁl_evíts
 ((
lo›
)->
ïﬁl_evíts
)

	)

29 
	#evpùe
 ((
lo›
)->
evpùe
)

	)

30 
	#fdch™ge˙t
 ((
lo›
)->
fdch™ge˙t
)

	)

31 
	#fdch™gemax
 ((
lo›
)->
fdch™gemax
)

	)

32 
	#fdch™ges
 ((
lo›
)->
fdch™ges
)

	)

33 
	#f‹k˙t
 ((
lo›
)->
f‹k˙t
)

	)

34 
	#f‹kmax
 ((
lo›
)->
f‹kmax
)

	)

35 
	#f‹ks
 ((
lo›
)->
f‹ks
)

	)

36 
	#fs_2625
 ((
lo›
)->
fs_2625
)

	)

37 
	#fs_fd
 ((
lo›
)->
fs_fd
)

	)

38 
	#fs_hash
 ((
lo›
)->
fs_hash
)

	)

39 
	#fs_w
 ((
lo›
)->
fs_w
)

	)

40 
	#idÀÆl
 ((
lo›
)->
idÀÆl
)

	)

41 
	#idÀ˙t
 ((
lo›
)->
idÀ˙t
)

	)

42 
	#idÀmax
 ((
lo›
)->
idÀmax
)

	)

43 
	#idÀs
 ((
lo›
)->
idÀs
)

	)

44 
	#övoke_cb
 ((
lo›
)->
övoke_cb
)

	)

45 
	#io_blocktime
 ((
lo›
)->
io_blocktime
)

	)

46 
	#io˝
 ((
lo›
)->
io˝
)

	)

47 
	#kqueue_ch™ge˙t
 ((
lo›
)->
kqueue_ch™ge˙t
)

	)

48 
	#kqueue_ch™gemax
 ((
lo›
)->
kqueue_ch™gemax
)

	)

49 
	#kqueue_ch™ges
 ((
lo›
)->
kqueue_ch™ges
)

	)

50 
	#kqueue_evítmax
 ((
lo›
)->
kqueue_evítmax
)

	)

51 
	#kqueue_evíts
 ((
lo›
)->
kqueue_evíts
)

	)

52 
	#kqueue_fd_pid
 ((
lo›
)->
kqueue_fd_pid
)

	)

53 
	#lo›_cou¡
 ((
lo›
)->
lo›_cou¡
)

	)

54 
	#lo›_dïth
 ((
lo›
)->
lo›_dïth
)

	)

55 
	#lo›_d⁄e
 ((
lo›
)->
lo›_d⁄e
)

	)

56 
	#mn_now
 ((
lo›
)->
mn_now
)

	)

57 
	#now_Êo‹
 ((
lo›
)->
now_Êo‹
)

	)

58 
	#‹igÊags
 ((
lo›
)->
‹igÊags
)

	)

59 
	#≥ndög_w
 ((
lo›
)->
≥ndög_w
)

	)

60 
	#≥ndög˙t
 ((
lo›
)->
≥ndög˙t
)

	)

61 
	#≥ndögmax
 ((
lo›
)->
≥ndögmax
)

	)

62 
	#≥ndög¥i
 ((
lo›
)->
≥ndög¥i
)

	)

63 
	#≥ndögs
 ((
lo›
)->
≥ndögs
)

	)

64 
	#≥riodic˙t
 ((
lo›
)->
≥riodic˙t
)

	)

65 
	#≥riodicmax
 ((
lo›
)->
≥riodicmax
)

	)

66 
	#≥riodics
 ((
lo›
)->
≥riodics
)

	)

67 
	#pùe_w
 ((
lo›
)->
pùe_w
)

	)

68 
	#pùe_wrôe_skù≥d
 ((
lo›
)->
pùe_wrôe_skù≥d
)

	)

69 
	#pùe_wrôe_w™ãd
 ((
lo›
)->
pùe_wrôe_w™ãd
)

	)

70 
	#pﬁl˙t
 ((
lo›
)->
pﬁl˙t
)

	)

71 
	#pﬁlidxmax
 ((
lo›
)->
pﬁlidxmax
)

	)

72 
	#pﬁlidxs
 ((
lo›
)->
pﬁlidxs
)

	)

73 
	#pﬁlmax
 ((
lo›
)->
pﬁlmax
)

	)

74 
	#pﬁls
 ((
lo›
)->
pﬁls
)

	)

75 
	#p‹t_evítmax
 ((
lo›
)->
p‹t_evítmax
)

	)

76 
	#p‹t_evíts
 ((
lo›
)->
p‹t_evíts
)

	)

77 
	#po°f‹k
 ((
lo›
)->
po°f‹k
)

	)

78 
	#¥ï¨e˙t
 ((
lo›
)->
¥ï¨e˙t
)

	)

79 
	#¥ï¨emax
 ((
lo›
)->
¥ï¨emax
)

	)

80 
	#¥ï¨es
 ((
lo›
)->
¥ï¨es
)

	)

81 
	#ªÀa£_cb
 ((
lo›
)->
ªÀa£_cb
)

	)

82 
	#r„ed˙t
 ((
lo›
)->
r„ed˙t
)

	)

83 
	#r„edmax
 ((
lo›
)->
r„edmax
)

	)

84 
	#r„eds
 ((
lo›
)->
r„eds
)

	)

85 
	#πmn_diff
 ((
lo›
)->
πmn_diff
)

	)

86 
	#sig_≥ndög
 ((
lo›
)->
sig_≥ndög
)

	)

87 
	#sigfd
 ((
lo›
)->
sigfd
)

	)

88 
	#sigfd_£t
 ((
lo›
)->
sigfd_£t
)

	)

89 
	#sigfd_w
 ((
lo›
)->
sigfd_w
)

	)

90 
	#timeout_blocktime
 ((
lo›
)->
timeout_blocktime
)

	)

91 
	#timî˙t
 ((
lo›
)->
timî˙t
)

	)

92 
	#timîmax
 ((
lo›
)->
timîmax
)

	)

93 
	#timîs
 ((
lo›
)->
timîs
)

	)

94 
	#u£rd©a
 ((
lo›
)->
u£rd©a
)

	)

95 
	#vec_eo
 ((
lo›
)->
vec_eo
)

	)

96 
	#vec_max
 ((
lo›
)->
vec_max
)

	)

97 
	#vec_ri
 ((
lo›
)->
vec_ri
)

	)

98 
	#vec_ro
 ((
lo›
)->
vec_ro
)

	)

99 
	#vec_wi
 ((
lo›
)->
vec_wi
)

	)

100 
	#vec_wo
 ((
lo›
)->
vec_wo
)

	)

102 #unde‡
EV_WRAP_H


103 #unde‡
acquúe_cb


104 #unde‡
a˘ive˙t


105 #unde‡
™fdmax


106 #unde‡
™fds


107 #unde‡
async_≥ndög


108 #unde‡
async˙t


109 #unde‡
asyncmax


110 #unde‡
asyncs


111 #unde‡
backíd


112 #unde‡
backíd_fd


113 #unde‡
backíd_mötime


114 #unde‡
backíd_modify


115 #unde‡
backíd_pﬁl


116 #unde‡
check˙t


117 #unde‡
checkmax


118 #unde‡
checks


119 #unde‡
˛ónup˙t


120 #unde‡
˛ónupmax


121 #unde‡
˛ónups


122 #unde‡
cuΩid


123 #unde‡
ïﬁl_ïîm˙t


124 #unde‡
ïﬁl_ïîmmax


125 #unde‡
ïﬁl_ïîms


126 #unde‡
ïﬁl_evítmax


127 #unde‡
ïﬁl_evíts


128 #unde‡
evpùe


129 #unde‡
fdch™ge˙t


130 #unde‡
fdch™gemax


131 #unde‡
fdch™ges


132 #unde‡
f‹k˙t


133 #unde‡
f‹kmax


134 #unde‡
f‹ks


135 #unde‡
fs_2625


136 #unde‡
fs_fd


137 #unde‡
fs_hash


138 #unde‡
fs_w


139 #unde‡
idÀÆl


140 #unde‡
idÀ˙t


141 #unde‡
idÀmax


142 #unde‡
idÀs


143 #unde‡
övoke_cb


144 #unde‡
io_blocktime


145 #unde‡
io˝


146 #unde‡
kqueue_ch™ge˙t


147 #unde‡
kqueue_ch™gemax


148 #unde‡
kqueue_ch™ges


149 #unde‡
kqueue_evítmax


150 #unde‡
kqueue_evíts


151 #unde‡
kqueue_fd_pid


152 #unde‡
lo›_cou¡


153 #unde‡
lo›_dïth


154 #unde‡
lo›_d⁄e


155 #unde‡
mn_now


156 #unde‡
now_Êo‹


157 #unde‡
‹igÊags


158 #unde‡
≥ndög_w


159 #unde‡
≥ndög˙t


160 #unde‡
≥ndögmax


161 #unde‡
≥ndög¥i


162 #unde‡
≥ndögs


163 #unde‡
≥riodic˙t


164 #unde‡
≥riodicmax


165 #unde‡
≥riodics


166 #unde‡
pùe_w


167 #unde‡
pùe_wrôe_skù≥d


168 #unde‡
pùe_wrôe_w™ãd


169 #unde‡
pﬁl˙t


170 #unde‡
pﬁlidxmax


171 #unde‡
pﬁlidxs


172 #unde‡
pﬁlmax


173 #unde‡
pﬁls


174 #unde‡
p‹t_evítmax


175 #unde‡
p‹t_evíts


176 #unde‡
po°f‹k


177 #unde‡
¥ï¨e˙t


178 #unde‡
¥ï¨emax


179 #unde‡
¥ï¨es


180 #unde‡
ªÀa£_cb


181 #unde‡
r„ed˙t


182 #unde‡
r„edmax


183 #unde‡
r„eds


184 #unde‡
πmn_diff


185 #unde‡
sig_≥ndög


186 #unde‡
sigfd


187 #unde‡
sigfd_£t


188 #unde‡
sigfd_w


189 #unde‡
timeout_blocktime


190 #unde‡
timî˙t


191 #unde‡
timîmax


192 #unde‡
timîs


193 #unde‡
u£rd©a


194 #unde‡
vec_eo


195 #unde‡
vec_max


196 #unde‡
vec_ri


197 #unde‡
vec_ro


198 #unde‡
vec_wi


199 #unde‡
vec_wo


	@libs/libev-4.15/event.c

40 
	~<°ddef.h
>

41 
	~<°dlib.h
>

42 
	~<as£π.h
>

44 #ifde‡
EV_EVENT_H


45 #ö˛udê
EV_EVENT_H


47 
	~"evít.h
"

50 #i‡
EV_MULTIPLICITY


51 
	#dLOOPev
 
ev_lo›
 *
lo›
 = (ev_lo› *)
ev
->
ev_ba£


	)

52 
	#dLOOPba£
 
ev_lo›
 *
lo›
 = (ev_lo› *)
ba£


	)

54 
	#dLOOPev


	)

55 
	#dLOOPba£


	)

59 
	sevít_ba£


61 
	mdummy
;

64 
evít_ba£
 *
	gev_x_cur
;

66 
ev_t°amp


67 
	$ev_tv_gë
 (
timevÆ
 *
tv
)

69 i‡(
tv
)

71 
ev_t°amp
 
a·î
 = 
tv
->
tv_£c
 +Åv->
tv_u£c
 * 1e-6;

72  
a·î
 ?áfter : 1e-6;

76 
	}
}

78 
	#EVENT_STRINGIFY
(
s
Ë#s

	)

79 
	#EVENT_VERSION
(
a
,
b
Ë
	`EVENT_STRINGIFY
 (aË"." EVENT_STRINGIFY (b)

	)

82 
	$evít_gë_vîsi⁄
 ()

85  
	`EVENT_VERSION
 (
EV_VERSION_MAJOR
, 
EV_VERSION_MINOR
);

86 
	}
}

89 
	$evít_gë_mëhod
 ()

92 
	}
}

94 *
	$evít_öô
 ()

96 #i‡
EV_MULTIPLICITY


97 i‡(
ev_x_cur
)

98 
ev_x_cur
 = (
evít_ba£
 *)
	`ev_lo›_√w
 (
EVFLAG_AUTO
);

100 
ev_x_cur
 = (
evít_ba£
 *)
	`ev_deÁu…_lo›
 (
EVFLAG_AUTO
);

102 
	`as£π
 (("libev: mu…ùÀÉvíàba£†nŸ suµ‹ãd whíÇŸ compûed wôh EV_MULTIPLICITY", !
ev_x_cur
));

104 
ev_x_cur
 = (
evít_ba£
 *)()
	`ev_deÁu…_lo›
 (
EVFLAG_AUTO
);

107  
ev_x_cur
;

108 
	}
}

111 
	$evít_ba£_gë_mëhod
 (c⁄° 
evít_ba£
 *
ba£
)

114 
	}
}

116 
evít_ba£
 *

117 
	$evít_ba£_√w
 ()

119 #i‡
EV_MULTIPLICITY


120  (
evít_ba£
 *)
	`ev_lo›_√w
 (
EVFLAG_AUTO
);

122 
	`as£π
 (("libev: multipleÉvent basesÇot supported whenÇot compiled with EV_MULTIPLICITY"));

123  
NULL
;

125 
	}
}

127 
	$evít_ba£_‰ì
 (
evít_ba£
 *
ba£
)

129 
dLOOPba£
;

131 #i‡
EV_MULTIPLICITY


132 i‡(!
	`ev_is_deÁu…_lo›
 (
lo›
))

133 
	`ev_lo›_de°roy
 (
lo›
);

135 
	}
}

137 
	$evít_di•©ch
 ()

139  
	`evít_ba£_di•©ch
 (
ev_x_cur
);

140 
	}
}

142 #ifde‡
EV_STANDALONE


143 
	$evít_£t_log_ˇŒback
 (
evít_log_cb
 
cb
)

146 
	}
}

149 
	$evít_lo›
 (
Êags
)

151  
	`evít_ba£_lo›
 (
ev_x_cur
, 
Êags
);

152 
	}
}

154 
	$evít_lo›exô
 (
timevÆ
 *
tv
)

156  
	`evít_ba£_lo›exô
 (
ev_x_cur
, 
tv
);

157 
	}
}

159 
evít_ˇŒback_‚
 
	gevít_gë_ˇŒback


160 (c⁄° 
evít
 *
	gev
)

162  
	gev
->
	gev_ˇŒback
;

166 
	$ev_x_cb
 (
evít
 *
ev
, 
ªvíts
)

168 
ªvíts
 &
EV_READ
 | 
EV_WRITE
 | 
EV_TIMER
 | 
EV_SIGNAL
;

170 
ev
->
ev_ªs
 = 
ªvíts
;

171 
ev
->
	`ev_ˇŒback
 (ev->
ev_fd
, ()
ªvíts
,Év->
ev_¨g
);

172 
	}
}

175 
	$ev_x_cb_sig
 (
EV_P_
 
ev_sig«l
 *
w
, 
ªvíts
)

177 
evít
 *
ev
 = (evíà*)(((*)
w
Ë- 
	`off£tof
 (evít, 
iosig
.
sig
));

179 i‡(
ªvíts
 & 
EV_ERROR
)

180 
	`evít_dñ
 (
ev
);

182 
	`ev_x_cb
 (
ev
, 
ªvíts
);

183 
	}
}

186 
	$ev_x_cb_io
 (
EV_P_
 
ev_io
 *
w
, 
ªvíts
)

188 
evít
 *
ev
 = (evíà*)(((*)
w
Ë- 
	`off£tof
 (evít, 
iosig
.
io
));

190 i‡((
ªvíts
 & 
EV_ERROR
Ë|| !(
ev
->
ev_evíts
 & 
EV_PERSIST
))

191 
	`evít_dñ
 (
ev
);

193 
	`ev_x_cb
 (
ev
, 
ªvíts
);

194 
	}
}

197 
	$ev_x_cb_to
 (
EV_P_
 
ev_timî
 *
w
, 
ªvíts
)

199 
evít
 *
ev
 = (evíà*)(((*)
w
Ë- 
	`off£tof
 (evít, 
to
));

201 
	`evít_dñ
 (
ev
);

203 
	`ev_x_cb
 (
ev
, 
ªvíts
);

204 
	}
}

206 
evít_£t
 (
evít
 *
ev
, 
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
)

208 i‡(
evíts
 & 
EV_SIGNAL
)

209 
	`ev_öô
 (&
ev
->
iosig
.
sig
, 
ev_x_cb_sig
);

211 
	`ev_öô
 (&
ev
->
iosig
.
io
, 
ev_x_cb_io
);

213 
	`ev_öô
 (&
ev
->
to
, 
ev_x_cb_to
);

215 
ev
->
ev_ba£
 = 
ev_x_cur
;

216 
ev
->
ev_fd
 = 
fd
;

217 
ev
->
ev_evíts
 = 
evíts
;

218 
ev
->
ev_¥i
 = 0;

219 
ev
->
ev_ˇŒback
 = 
cb
;

220 
ev
->
ev_¨g
 = 
¨g
;

221 
ev
->
ev_ªs
 = 0;

222 
ev
->
ev_Êags
 = 
EVLIST_INIT
;

223 
	}
}

225 
evít_⁄˚
 (
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
, 
timevÆ
 *
tv
)

227  
	`evít_ba£_⁄˚
 (
ev_x_cur
, 
fd
, 
evíts
, 
cb
, 
¨g
, 
tv
);

228 
	}
}

230 
	$evít_add
 (
evít
 *
ev
, 
timevÆ
 *
tv
)

232 
dLOOPev
;

234 i‡(
ev
->
ev_evíts
 & 
EV_SIGNAL
)

236 i‡(!
	`ev_is_a˘ive
 (&
ev
->
iosig
.
sig
))

238 
	`ev_sig«l_£t
 (&
ev
->
iosig
.
sig
,Év->
ev_fd
);

239 
	`ev_sig«l_°¨t
 (
EV_A_
 &
ev
->
iosig
.
sig
);

241 
ev
->
ev_Êags
 |
EVLIST_SIGNAL
;

244 i‡(
ev
->
ev_evíts
 & (
EV_READ
 | 
EV_WRITE
))

246 i‡(!
	`ev_is_a˘ive
 (&
ev
->
iosig
.
io
))

248 
	`ev_io_£t
 (&
ev
->
iosig
.
io
,Év->
ev_fd
,Év->
ev_evíts
 & (
EV_READ
 | 
EV_WRITE
));

249 
	`ev_io_°¨t
 (
EV_A_
 &
ev
->
iosig
.
io
);

251 
ev
->
ev_Êags
 |
EVLIST_INSERTED
;

255 i‡(
tv
)

257 
ev
->
to
.
ª≥©
 = 
	`ev_tv_gë
 (
tv
);

258 
	`ev_timî_agaö
 (
EV_A_
 &
ev
->
to
);

259 
ev
->
ev_Êags
 |
EVLIST_TIMEOUT
;

263 
	`ev_timî_°›
 (
EV_A_
 &
ev
->
to
);

264 
ev
->
ev_Êags
 &~
EVLIST_TIMEOUT
;

267 
ev
->
ev_Êags
 |
EVLIST_ACTIVE
;

270 
	}
}

272 
	$evít_dñ
 (
evít
 *
ev
)

274 
dLOOPev
;

276 i‡(
ev
->
ev_evíts
 & 
EV_SIGNAL
)

277 
	`ev_sig«l_°›
 (
EV_A_
 &
ev
->
iosig
.
sig
);

278 i‡(
ev
->
ev_evíts
 & (
EV_READ
 | 
EV_WRITE
))

279 
	`ev_io_°›
 (
EV_A_
 &
ev
->
iosig
.
io
);

281 i‡(
	`ev_is_a˘ive
 (&
ev
->
to
))

282 
	`ev_timî_°›
 (
EV_A_
 &
ev
->
to
);

284 
ev
->
ev_Êags
 = 
EVLIST_INIT
;

287 
	}
}

289 
	$evít_a˘ive
 (
evít
 *
ev
, 
ªs
, 
nˇŒs
)

291 
dLOOPev
;

293 i‡(
ªs
 & 
EV_TIMEOUT
)

294 
	`ev_„ed_evít
 (
EV_A_
 &
ev
->
to
, 
ªs
 & 
EV_TIMEOUT
);

296 i‡(
ªs
 & 
EV_SIGNAL
)

297 
	`ev_„ed_evít
 (
EV_A_
 &
ev
->
iosig
.
sig
, 
ªs
 & 
EV_SIGNAL
);

299 i‡(
ªs
 & (
EV_READ
 | 
EV_WRITE
))

300 
	`ev_„ed_evít
 (
EV_A_
 &
ev
->
iosig
.
io
, 
ªs
 & (
EV_READ
 | 
EV_WRITE
));

301 
	}
}

303 
	$evít_≥ndög
 (
evít
 *
ev
, 
evíts
, 
timevÆ
 *
tv
)

305 
ªvíts
 = 0;

306 
dLOOPev
;

308 i‡(
ev
->
ev_evíts
 & 
EV_SIGNAL
)

311 i‡(
	`ev_is_a˘ive
 (&
ev
->
iosig
.
sig
Ë|| 
	`ev_is_≥ndög
 (&ev->iosig.sig))

312 
ªvíts
 |
EV_SIGNAL
;

314 i‡(
ev
->
ev_evíts
 & (
EV_READ
 | 
EV_WRITE
))

317 i‡(
	`ev_is_a˘ive
 (&
ev
->
iosig
.
io
Ë|| 
	`ev_is_≥ndög
 (&ev->iosig.io))

318 
ªvíts
 |
ev
->
ev_evíts
 & (
EV_READ
 | 
EV_WRITE
);

321 i‡(
ev
->
ev_evíts
 & 
EV_TIMEOUT
 || 
	`ev_is_a˘ive
 (&ev->
to
Ë|| 
	`ev_is_≥ndög
 (&ev->to))

323 
ªvíts
 |
EV_TIMEOUT
;

325 i‡(
tv
)

327 
ev_t°amp
 
©
 = 
	`ev_now
 (
EV_A
);

329 
tv
->
tv_£c
 = ()
©
;

330 
tv
->
tv_u£c
 = ()((
©
 - (
ev_t°amp
Èv->
tv_£c
) * 1e6);

334  
evíts
 & 
ªvíts
;

335 
	}
}

337 
	$evít_¥i‹ôy_öô
 (
≈ri
)

339  
	`evít_ba£_¥i‹ôy_öô
 (
ev_x_cur
, 
≈ri
);

340 
	}
}

342 
	$evít_¥i‹ôy_£t
 (
evít
 *
ev
, 
¥i
)

344 
ev
->
ev_¥i
 = 
¥i
;

347 
	}
}

349 
	$evít_ba£_£t
 (
evít_ba£
 *
ba£
, 
evít
 *
ev
)

351 
ev
->
ev_ba£
 = 
ba£
;

354 
	}
}

356 
	$evít_ba£_lo›
 (
evít_ba£
 *
ba£
, 
Êags
)

358 
dLOOPba£
;

360  !
	`ev_run
 (
EV_A_
 
Êags
);

361 
	}
}

363 
	$evít_ba£_di•©ch
 (
evít_ba£
 *
ba£
)

365  
	`evít_ba£_lo›
 (
ba£
, 0);

366 
	}
}

369 
	$ev_x_lo›exô_cb
 (
ªvíts
, *
ba£
)

371 
dLOOPba£
;

373 
	`ev_bªak
 (
EV_A_
 
EVBREAK_ONE
);

374 
	}
}

376 
	$evít_ba£_lo›exô
 (
evít_ba£
 *
ba£
, 
timevÆ
 *
tv
)

378 
ev_t°amp
 
a·î
 = 
	`ev_tv_gë
 (
tv
);

379 
dLOOPba£
;

381 
	`ev_⁄˚
 (
EV_A_
 -1, 0, 
a·î
 >0. ?á·î : 0., 
ev_x_lo›exô_cb
, (*)
ba£
);

384 
	}
}

386 
	sev_x_⁄˚


388 
	mfd
;

389 (*
	mcb
)(, , *);

390 *
	m¨g
;

394 
	$ev_x_⁄˚_cb
 (
ªvíts
, *
¨g
)

396 
ev_x_⁄˚
 *
⁄˚
 = (ev_x_⁄˚ *)
¨g
;

398 
⁄˚
->
	`cb
 (⁄˚->
fd
, ()
ªvíts
, on˚->
¨g
);

399 
	`‰ì
 (
⁄˚
);

400 
	}
}

402 
evít_ba£_⁄˚
 (
evít_ba£
 *
ba£
, 
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
, 
timevÆ
 *
tv
)

404 
ev_x_⁄˚
 *
⁄˚
 = (ev_x_⁄˚ *)
	`mÆloc
 ( (ev_x_once));

405 
dLOOPba£
;

407 i‡(!
⁄˚
)

410 
⁄˚
->
fd
 = fd;

411 
⁄˚
->
cb
 = cb;

412 
⁄˚
->
¨g
 =árg;

414 
	`ev_⁄˚
 (
EV_A_
 
fd
, 
evíts
 & (
EV_READ
 | 
EV_WRITE
), 
	`ev_tv_gë
 (
tv
), 
ev_x_⁄˚_cb
, (*)
⁄˚
);

417 
	}
}

419 
	$evít_ba£_¥i‹ôy_öô
 (
evít_ba£
 *
ba£
, 
≈ri
)

424 
	}
}

	@libs/libev-4.15/event.h

40 #i‚de‡
EVENT_H_


41 
	#EVENT_H_


	)

43 #ifde‡
EV_H


44 #ö˛udê
EV_H


46 
	~"ev.h
"

49 #i‚de‡
EVLOOP_NONBLOCK


50 
	#EVLOOP_NONBLOCK
 
EVRUN_NOWAIT


	)

52 #i‚de‡
EVLOOP_ONESHOT


53 
	#EVLOOP_ONESHOT
 
EVRUN_ONCE


	)

55 #i‚de‡
EV_TIMEOUT


56 
	#EV_TIMEOUT
 
EV_TIMER


	)

59 #ifde‡
__˝lu•lus


64 #i‡!
deföed
 (
WIN32
Ë|| deföed (
__MINGW32__
)

65 
	~<time.h
>

66 
	~<sys/time.h
>

69 
evít_ba£
;

71 
	#EVLIST_TIMEOUT
 0x01

	)

72 
	#EVLIST_INSERTED
 0x02

	)

73 
	#EVLIST_SIGNAL
 0x04

	)

74 
	#EVLIST_ACTIVE
 0x08

	)

75 
	#EVLIST_INTERNAL
 0x10

	)

76 
	#EVLIST_INIT
 0x80

	)

78 (*
evít_ˇŒback_‚
)(, , *);

80 
	sevít


84 
ev_io
 
io
;

85 
ev_sig«l
 
sig
;

86 } 
iosig
;

87 
ev_timî
 
to
;

90 
evít_ba£
 *
ev_ba£
;

91 
evít_ˇŒback_‚
 
ev_ˇŒback
;

92 *
ev_¨g
;

93 
ev_fd
;

94 
ev_¥i
;

95 
ev_ªs
;

96 
ev_Êags
;

97 
ev_evíts
;

100 
evít_ˇŒback_‚
 
evít_gë_ˇŒback
 (c⁄° 
evít
 *
ev
);

102 
	#EV_READ
 
EV_READ


	)

103 
	#EV_WRITE
 
EV_WRITE


	)

104 
	#EV_PERSIST
 0x10

	)

105 
	#EV_ET
 0x20

	)

107 
	#EVENT_SIGNAL
(
ev
Ë((Ë”v)->
ev_fd
)

	)

108 
	#EVENT_FD
(
ev
Ë((Ë”v)->
ev_fd
)

	)

110 
	#evít_öôülized
(
ev
Ë(”v)->
ev_Êags
 & 
EVLIST_INIT
)

	)

112 
	#evtimî_add
(
ev
,
tv
Ë
	`evít_add
 (ev,Åv)

	)

113 
	#evtimî_£t
(
ev
,
cb
,
d©a
Ë
	`evít_£t
 (ev, -1, 0, cb, d©a)

	)

114 
	#evtimî_dñ
(
ev
Ë
	`evít_dñ
 (ev)

	)

115 
	#evtimî_≥ndög
(
ev
,
tv
Ë
	`evít_≥ndög
 (ev, 
EV_TIMEOUT
,Åv)

	)

116 
	#evtimî_öôülized
(
ev
Ë
	`evít_öôülized
 (ev)

	)

118 
	#timeout_add
(
ev
,
tv
Ë
	`evtimî_add
 (ev,Åv)

	)

119 
	#timeout_£t
(
ev
,
cb
,
d©a
Ë
	`evtimî_£t
 (ev, cb, d©a)

	)

120 
	#timeout_dñ
(
ev
Ë
	`evtimî_dñ
 (ev)

	)

121 
	#timeout_≥ndög
(
ev
,
tv
Ë
	`evtimî_≥ndög
 (ev,Åv)

	)

122 
	#timeout_öôülized
(
ev
Ë
	`evtimî_öôülized
 (ev)

	)

124 
	#sig«l_add
(
ev
,
tv
Ë
	`evít_add
 (ev,Åv)

	)

125 
	#sig«l_£t
(
ev
,
sig
,
cb
,
d©a
Ë
	`evít_£t
 (ev, sig, 
EV_SIGNAL
 | 
EV_PERSIST
, cb, d©a)

	)

126 
	#sig«l_dñ
(
ev
Ë
	`evít_dñ
 (ev)

	)

127 
	#sig«l_≥ndög
(
ev
,
tv
Ë
	`evít_≥ndög
 (ev, 
EV_SIGNAL
,Åv)

	)

128 
	#sig«l_öôülized
(
ev
Ë
	`evít_öôülized
 (ev)

	)

130 c⁄° *
evít_gë_vîsi⁄
 ();

131 c⁄° *
evít_gë_mëhod
 ();

133 *
evít_öô
 ();

134 
evít_ba£_‰ì
 (
evít_ba£
 *
ba£
);

136 
	#EVLOOP_ONCE
 
EVLOOP_ONESHOT


	)

137 
evít_lo›
 ();

138 
evít_lo›exô
 (
timevÆ
 *
tv
);

139 
evít_di•©ch
 ();

141 
	#_EVENT_LOG_DEBUG
 0

	)

142 
	#_EVENT_LOG_MSG
 1

	)

143 
	#_EVENT_LOG_WARN
 2

	)

144 
	#_EVENT_LOG_ERR
 3

	)

145 (*
evít_log_cb
)(
	t£vîôy
, c⁄° *
	tmsg
);

146 
evít_£t_log_ˇŒback
(
evít_log_cb
 
cb
);

148 
evít_£t
 (
evít
 *
ev
, 
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
);

149 
evít_⁄˚
 (
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
, 
timevÆ
 *
tv
);

151 
evít_add
 (
evít
 *
ev
, 
timevÆ
 *
tv
);

152 
evít_dñ
 (
evít
 *
ev
);

153 
evít_a˘ive
 (
evít
 *
ev
, 
ªs
, 
nˇŒs
);

155 
evít_≥ndög
 (
evít
 *
ev
, , 
timevÆ
 *
tv
);

157 
evít_¥i‹ôy_öô
 (
≈ri
);

158 
evít_¥i‹ôy_£t
 (
evít
 *
ev
, 
¥i
);

160 
evít_ba£
 *
evít_ba£_√w
 ();

161 c⁄° *
evít_ba£_gë_mëhod
 (c⁄° 
evít_ba£
 *);

162 
evít_ba£_£t
 (
evít_ba£
 *
ba£
, 
evít
 *
ev
);

163 
evít_ba£_lo›
 (
evít_ba£
 *
ba£
, );

164 
evít_ba£_lo›exô
 (
evít_ba£
 *
ba£
, 
timevÆ
 *
tv
);

165 
evít_ba£_di•©ch
 (
evít_ba£
 *
ba£
);

166 
evít_ba£_⁄˚
 (
evít_ba£
 *
ba£
, 
fd
, 
evíts
, (*
cb
)(, , *), *
¨g
, 
timevÆ
 *
tv
);

167 
evít_ba£_¥i‹ôy_öô
 (
evít_ba£
 *
ba£
, 
fd
);

172 #ifde‡
__˝lu•lus


	@src/SocketUtility.c

1 
	~"SockëUtûôy.h
"

2 
	~<°rögs.h
>

3 
	~<î∫o.h
>

4 
	~<°dio.h
>

6 
	$li°í_to
(c⁄° * 
ù
,
p‹t
, 
sockaddr_ö
* 
addr
, 
is_block
)

8 
ªs
;

10 
fd
 = 
	`¸óã_sockë
();

11 i‡(
fd
 < 0)

13 
	`Ârötf
(
°dîr
,"create socket failed!\n");

17 
ªsu…
 = 0;

18 i‡(
is_block
)

20 
ªsu…
 = 
	`£t_block
(
fd
);

24 
ªsu…
 = 
	`£t_n⁄block
(
fd
);

27 i‡(
ªsu…
==-1)

29 
	`Ârötf
(
°dîr
,"set block failed!\n");

33 
ªs
 = 
	`£t_ªu£
(
fd
);

34 i‡(
ªs
 < 0)

36 
	`Ârötf
(
°dîr
,"setÑeuse failed!\n");

37 
	`˛o£_sockë
(
fd
);

41 
	`make_addªss
(
addr
, 
ù
, 
p‹t
);

43 
ªs
 = 
	`böd
(
fd
, (c⁄° 
sockaddr
*)
addr
, (
sockÀn_t
)(
sockaddr_ö
));

44 i‡–
ªs
 < 0)

46 
	`Ârötf
(
°dîr
,"bind failed!\n");

47 
	`˛o£_sockë
(
fd
);

51 
ªs
 = 
	`li°í
(
fd
, 
SOMAXCONN
);

52 i‡–
ªs
 < 0)

54 
	`Ârötf
(
°dîr
,"listen failed!\n");

55 
	`˛o£_sockë
(
fd
);

59  
fd
;

60 
	}
}

62 
	$böd_to
(c⁄° * 
ù
,
p‹t
, 
sockaddr_ö
* 
addr
)

64 
ªs
;

66 
fd
 = 
	`¸óã_sockë_udp
();

67 i‡(
fd
 < 0)

72 
ªs
 = 
	`£t_ªu£
(
fd
);

73 i‡(
ªs
 < 0)

75 
	`˛o£_sockë
(
fd
);

79 
	`make_addªss
(
addr
, 
ù
, 
p‹t
);

81 
ªs
 = 
	`böd
(
fd
, (c⁄° 
sockaddr
*)
addr
, (
sockÀn_t
)(
sockaddr_ö
));

82 i‡–
ªs
 < 0)

84 
	`˛o£_sockë
(
fd
);

88  
fd
;

89 
	}
}

91 
	$c⁄√˘_to
(c⁄° * 
ù
,
p‹t
, 
sockaddr_ö
* 
addr
)

93 
ªs
;

95 
fd
 = 
	`¸óã_sockë
();

96 i‡(
fd
 < 0)

102 
	`make_addªss
(
addr
, 
ù
, 
p‹t
);

104 
ªs
 = 
	`c⁄√˘
(
fd
, (c⁄° 
sockaddr
*)
addr
, (
sockÀn_t
)(sockaddr));

105 i‡–
ªs
 < 0)

107 
	`˛o£_sockë
(
fd
);

111  
fd
;

112 
	}
}

114 
	$n⁄block_c⁄√˘_to
(c⁄° * 
ù
,
p‹t
, 
sockaddr_ö
* 
addr
)

116 
ªs
;

118 
fd
 = 
	`¸óã_sockë
();

119 i‡(
fd
 < 0)

124 
Êags
 = 
	`f˙é
(
fd
,
F_GETFL
,0);

125 
	`f˙é
(
fd
, 
F_SETFL
, 
Êags
 | 
O_NONBLOCK
);

127 
	`make_addªss
(
addr
, 
ù
, 
p‹t
);

129 
ªs
 = 
	`c⁄√˘
(
fd
, (c⁄° 
sockaddr
*)
addr
, (
sockÀn_t
)(sockaddr));

130 i‡–
ªs
 < 0)

132 if(
î∫o
 =
EINPROGRESS
)

134  
fd
;

137 
	`˛o£_sockë
(
fd
);

140  
fd
;

141 
	}
}

144 
	$ac˚±_˛õ¡
(
fd
, 
sockaddr_ö
* 
addr
)

146 
	`mem£t
((*)
addr
, 0, (
sockaddr_ö
));

147 
sockÀn_t
 
addr_Àn
 = (
sockaddr_ö
);

149 
˛õ¡_fd
 = 
	`ac˚±
(
fd
, (
sockaddr
*)
addr
, &
addr_Àn
);

150 i‡(
˛õ¡_fd
 < 0)

152 i‡(
î∫o
 =
EAGAIN
 ||Éºnÿ=
EWOULDBLOCK
)

155 i‡(
î∫o
 =
EMFILE
)

157 
	`Ârötf
(
°dîr
, "Too many open connections\n");

161 
	`≥º‹
("accept()");

167  
˛õ¡_fd
;

168 
	}
}

170 
	$make_addªss
(
sockaddr_ö
* 
addr
, c⁄° * 
ù
, 
p‹t
)

172 
	`mem£t
(
addr
, 0, (
sockaddr_ö
));

173 
addr
->
sö_Ámûy
 = 
AF_INET
;

174 
addr
->
sö_addr
.
s_addr
 = 
	`öë_addr
(
ù
);

175 
addr
->
sö_p‹t
 = 
	`ht⁄s
(
p‹t
);

176 
	}
}

178 
	$ªcv_d©a
(
fd
,* 
buf„r
, 
buf„r_Àn
)

180 
tŸÆ_ªcv_byãs
 = 
buf„r_Àn
;

181 
buf„r_Àn
 > 0)

183 
ªcv_byãs
 = 
	`ªcv
(
fd
, 
buf„r
, 
buf„r_Àn
, 0);

184 if(
ªcv_byãs
 <= 0)

186 i‡(
î∫o
 =
EINTR
)

190  
ªcv_byãs
;

193 
buf„r
 +
ªcv_byãs
;

194 
buf„r_Àn
 -
ªcv_byãs
;

197  
tŸÆ_ªcv_byãs
;

198 
	}
}

200 
	$£nd_d©a
(
fd
, c⁄° * 
buf„r
, 
buf„r_Àn
)

202 
tŸÆ_£nd_byãs
 = 
buf„r_Àn
;

203 
buf„r_Àn
 > 0)

205 
£nd_byãs
 = 
	`£nd
(
fd
, 
buf„r
, 
buf„r_Àn
, 
MSG_NOSIGNAL
);

206 if(
£nd_byãs
 <= 0)

208 i‡(
î∫o
 =
EINTR
)

212  
£nd_byãs
;

215 
buf„r
 +
£nd_byãs
;

216 
buf„r_Àn
 -
£nd_byãs
;

219  
tŸÆ_£nd_byãs
;

220 
	}
}

222 
	$ªcv_d©a2
(
fd
,* 
buf„r
,
buf„r_Àn
, 
sockaddr
* 
‰om
, 
sockÀn_t
* 
‰omÀn
)

224  
	`ªcv‰om
(
fd
, 
buf„r
, 
buf„r_Àn
, 0, 
‰om
, 
‰omÀn
);

225 
	}
}

227 
	$£nd_d©a2
(
fd
, c⁄° * 
buf„r
, 
buf„r_Àn
, 
sockaddr
* 
to
, 
sockÀn_t
 
tﬁí
)

229  
	`£ndto
(
fd
, 
buf„r
, 
buf„r_Àn
, 0, 
to
, 
tﬁí
);

230 
	}
}

232 * 
	$ù_to_°rög
(
uöt32_t
 
ù
)

234 
ö_addr
 
ù_addr
;

235 
ù_addr
.
s_addr
 = 
ù
;

236  
	`öë_¡ﬂ
(
ù_addr
);

237 
	}
}

239 
	$£t_block
(
fd
)

241 
Êag
 = 0;

242 i‡(–
Êag
 = 
	`f˙é
–
fd
, 
F_GETFL
 ) ) < 0

243 || 
	`f˙é
–
fd
, 
F_SETFL
, (
Êag
 & (~
O_NONBLOCK
)) ) < 0)

245 
	`¥ötf
("f˙é %†\n",
	`°ªº‹
(
î∫o
));

249 
	}
}

251 
	$£t_n⁄block
(
fd
)

253 
Êag
 = 0;

254 i‡(–
Êag
 = 
	`f˙é
–
fd
, 
F_GETFL
 ) ) < 0

255 || 
	`f˙é
–
fd
, 
F_SETFL
, (
Êag
 | (
O_NONBLOCK
)) ) < 0)

257 
	`≥º‹
("set_nonblockÉrror");

262 
	}
}

264 
	$£t_ªu£
(
fd
)

266 
ªu£
 = 1;

267  
	`£tsock›t
–
fd
, 
SOL_SOCKET
, 
SO_REUSEADDR
, &
ªu£
, (reuse) );

268 
	}
}

270 
	$£t_ªcv_timeout
(
fd
, 
timeout_ms
)

272 
timevÆ
 
time
;

273 
time
.
tv_£c
 = 
timeout_ms
 / 1000;

274 
time
.
tv_u£c
 = (
timeout_ms
 % 1000) * 1000;

276  
	`£tsock›t
–
fd
, 
SOL_SOCKET
, 
SO_RCVTIMEO
, &
time
, (time) );

277 
	}
}

279 
	$£t_£nd_timeout
(
fd
, 
timeout_ms
)

281 
timevÆ
 
time
;

282 
time
.
tv_£c
 = 
timeout_ms
 / 1000;

283 
time
.
tv_u£c
 = (
timeout_ms
 % 1000) * 1000;

285  
	`£tsock›t
–
fd
, 
SOL_SOCKET
, 
SO_SNDTIMEO
, &
time
, (time) );

286 
	}
}

288 
	$£t_ªcv_bufsize
(
fd
, 
bufsize
)

290  
	`£tsock›t
–
fd
, 
SOL_SOCKET
, 
SO_RCVBUF
, &
bufsize
, (bufsize) );

291 
	}
}

293 
	$£t_£nd_bufsize
(
fd
, 
bufsize
)

295  
	`£tsock›t
–
fd
, 
SOL_SOCKET
, 
SO_SNDBUF
, &
bufsize
, (bufsize) );

296 
	}
}

298 
	$£t_lögî
(
fd
, 
⁄off
, 
lögî
)

300 
lögî
 
my_lögî
;

301 
my_lögî
.
l_⁄off
 = 
⁄off
;

302 
my_lögî
.
l_lögî
 = 
lögî
;

304  
	`£tsock›t
–
fd
, 
SOL_SOCKET
, 
SO_LINGER
, &
my_lögî
, (my_linger) );

305 
	}
}

307 
	$¸óã_sockë
()

309  
	`sockë
–
AF_INET
, 
SOCK_STREAM
, 
IPPROTO_TCP
 );

310 
	}
}

312 
	$¸óã_sockë_udp
()

314  
	`sockë
–
AF_INET
, 
SOCK_DGRAM
, 
IPPROTO_UDP
 );

315 
	}
}

317 
	$˛o£_sockë
(
fd
)

319  
	`˛o£
–
fd
 );

320 
	}
}

322 
	$gë_loˇl_ùp‹t
(
sock_fd
, * 
ù
, * 
p‹t
)

324 
ù
 = 0;

325 
p‹t
 = 0;

326 
sockaddr_ö
 
loˇl_addr
;

327 
Àn
 = (
loˇl_addr
);

328 if(!
	`gësock«me
(
sock_fd
, (
sockaddr
*)&
loˇl_addr
, (
sockÀn_t
*)&
Àn
))

330 
ù
 = ()(
loˇl_addr
.
sö_addr
.
s_addr
);

331 
p‹t
 = ()(
loˇl_addr
.
sö_p‹t
);

333 
	}
}

335 
	$gë_≥î_ùp‹t
(
sock_fd
, * 
ù
, * 
p‹t
)

337 
ù
 = 0;

338 
p‹t
 = 0;

339 
sockaddr_ö
 
≥î_addr
;

340 
Àn
 = (
≥î_addr
);

341 if(!
	`gë≥î«me
(
sock_fd
, (
sockaddr
*)&
≥î_addr
, (
sockÀn_t
*)&
Àn
))

343 
ù
 = ()(
≥î_addr
.
sö_addr
.
s_addr
);

344 
p‹t
 = ()(
≥î_addr
.
sö_p‹t
);

346 
	}
}

347 
	$addr_to_ùp‹t
(
sockaddr_ö
* 
addr
, * 
ù
, 
uöt32_t
* 
p‹t
)

349 if(
ù
Ë
	`°r˝y
(ù,
	`öë_¡ﬂ
(
addr
->
sö_addr
));

350 if(
p‹t
Ë*p‹à
addr
->
sö_p‹t
;

351 
	}
}

	@src/SocketUtility.h

1 #i‚de‡
SOCKET_UTILITY_H


2 
	#SOCKET_UTILITY_H


	)

4 
	~<uni°d.h
>

5 
	~<f˙é.h
>

7 
	~<sys/ty≥s.h
>

8 
	~<sys/time.h
>

9 
	~<sys/sockë.h
>

10 
	~<√töë/ö.h
>

11 
	~<¨∑/öë.h
>

12 
	~<°rögs.h
>

13 
	~<°döt.h
>

16 
li°í_to
(c⁄° * 
ù
, 
p‹t
, 
sockaddr_ö
* 
addr
, 
is_block
);

17 
böd_to
(c⁄° * 
ù
, 
p‹t
, 
sockaddr_ö
* 
addr
);

18 
c⁄√˘_to
(c⁄° * 
ù
, 
p‹t
, 
sockaddr_ö
* 
addr
);

19 
n⁄block_c⁄√˘_to
(c⁄° * 
ù
,
p‹t
, 
sockaddr_ö
* 
addr
);

21 
ac˚±_˛õ¡
(
fd
, 
sockaddr_ö
* 
addr
);

22 
make_addªss
(
sockaddr_ö
* 
addr
, c⁄° * 
ù
, 
p‹t
);

24 
ªcv_d©a
(
fd
, * 
buf„r
, 
buf„r_Àn
);

25 
£nd_d©a
(
fd
, c⁄° * 
buf„r
, 
buf„r_Àn
);

27 
ªcv_d©a2
(
fd
, * 
buf„r
, 
buf„r_Àn
, 
sockaddr
* 
‰om
, 
sockÀn_t
* 
‰omÀn
);

28 
£nd_d©a2
(
fd
, c⁄° * 
buf„r
, 
buf„r_Àn
, 
sockaddr
* 
to
, 
sockÀn_t
 
tﬁí
);

30 * 
ù_to_°rög
(
uöt32_t
 
ù
);

32 
£t_block
(
fd
);

33 
£t_n⁄block
(
fd
);

34 
£t_ªu£
(
fd
);

35 
£t_ªcv_timeout
(
fd
, 
timeout_ms
);

36 
£t_£nd_timeout
(
fd
, 
timeout_ms
);

37 
£t_ªcv_bufsize
(
fd
, 
bufsize
);

38 
£t_£nd_bufsize
(
fd
, 
bufsize
);

39 
£t_lögî
(
fd
, 
⁄off
, 
lögî
);

41 
¸óã_sockë
();

42 
¸óã_sockë_udp
();

43 
˛o£_sockë
(
fd
);

45 
gë_≥î_ùp‹t
(
sock_fd
, * 
ù
, * 
p‹t
);

46 
gë_loˇl_ùp‹t
(
sock_fd
, * 
ù
, * 
p‹t
);

47 
addr_to_ùp‹t
(
sockaddr_ö
* 
addr
, * 
ù
, 
uöt32_t
* 
p‹t
);

	@src/base_header.h

11 #i‚de‡
_BASE_HEADER_H_


12 
	#_BASE_HEADER_H_


	)

15 
	~<sys/ty≥s.h
>

16 
	~<sys/sockë.h
>

17 
	~<√töë/ö.h
>

18 
	~<¨∑/öë.h
>

19 
	~<°rög.h
>

20 
	~<°rögs.h
>

21 
	~<î∫o.h
>

22 
	~<±hªad.h
>

23 
	~<as£π.h
>

24 
	~<î∫o.h
>

25 
	~<°rög.h
>

26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<uni°d.h
>

29 
	~<°döt.h
>

32 
	#åue
 1

	)

33 
	#Ál£
 0

	)

	@src/listen_thread.c

1 
	~"li°í_thªad.h
"

2 
	~"√t.h
"

3 
	~"ba£_hódî.h
"

4 
	~"SockëUtûôy.h
"

7 
li°í_thªad_s
 
	gg_li°í_thªad_s
;

9 * 
	$li°í_thªad_¥oc
(* 
¨g
)

11 
	`¥ötf
("listen_thread_procÑun\n");

12 
	`as£π
(
g_li°í_thªad_s
.
li°í_ev_lo›
.
ev_lo›_±r
!
NULL
);

13 
	`ev_run
(
g_li°í_thªad_s
.
li°í_ev_lo›
.
ev_lo›_±r
,0);

14 
	}
}

16 
	$li°í_thªad_öô
()

18 
	`¸óã_ev_lo›
(&
g_li°í_thªad_s
.
li°í_ev_lo›
);

19 
	`±hªad_¸óã
(&
g_li°í_thªad_s
.
thªad_id
, 
NULL
, 
li°í_thªad_¥oc
, NULL);

20 
	`c⁄n_li°_öô
();

21 
	`sched_yõld
();

22 
	}
}

24 
	$ac˚±_t˝_h™dÀr
(
ev_lo›
* 
lo›
, 
ev_io
* 
io_w
, 
evíts
)

26 
	`¥ötf
("accept_tcp_handler \n");

27 
	`as£π
(
evíts
 =
EV_READ
);

28 
sockë_evít_s
* 
sockë_evít_±r
 = (sockë_evít_s*)
io_w
;

29 
fd
 = 
sockë_evít_±r
->fd;

30 
sockaddr_ö
 
addr
;

31 
˛õ¡_fd
;

32 i‡(0 > (
˛õ¡_fd
 = 
	`ac˚±_˛õ¡
(
fd
, &
addr
))){

33 
	`•rötf
(
°dîr
,"ac˚±_˛õ¡Éº‹ %d \n", 
˛õ¡_fd
);

36 
ù
[16] ={'\0'};

37 
uöt32_t
 
p‹t
;

38 
	`addr_to_ùp‹t
(&
addr
, 
ù
, &
p‹t
);

39 
	`¥ötf
("ac˚±_˛õ¡ %†%d \n",
ù
,
p‹t
);

42 
	`li°_ôem_±r
(
c⁄n_li°
Ë
c⁄n_±r
 = 
	`¸óã_˛õ¡
(
CONN_CLIENT
, 
CONN_ESTABLISHED
, 
˛õ¡_fd
);

43 i‡(
NULL
 =
c⁄n_±r
) {

44 
	`˛o£
(
fd
);

47 
sockë_evít_±r
->
˛õ¡_d©a
 = (*)
c⁄n_±r
;

49 
	`di•©h_√w_c⁄n
(
sockë_evít_±r
);

51 
	}
}

52 
	$add_li°í
(* 
ù
, 
p‹t
, 
sockë_evít_ty≥_e
 
sockë_ty≥
)

54 
sockaddr_ö
 
addr
;

55 
li°í_fd
 = 
	`li°í_to
(
ù
,
p‹t
,&
addr
,
Ál£
);

56 i‡(
li°í_fd
 < 0){

57 
	`¥ötf
–"li°í_tÿî∏%†%d \n",
ù
,
p‹t
);

60 
	`¥ötf
–"li°í_tÿ%†%d\n",
ù
,
p‹t
);

61 
g_li°í_thªad_s
.
li°í_ev_lo›
.
sockë_evít_±r
[
li°í_fd
].
evít_ty≥
 = 
sockë_ty≥
;

62 
	`¸óã_ev_evít
(&
g_li°í_thªad_s
.
li°í_ev_lo›
, 
li°í_fd
, 
EV_READ
, 
ac˚±_t˝_h™dÀr
,
NULL
);

63 
	}
}

	@src/listen_thread.h

11 #i‚de‡
_LISTEN_THREAD_H_


12 
	#_LISTEN_THREAD_H_


	)

13 
	~"√t.h
"

17 
ev_lo›_s
 
	mli°í_ev_lo›
;

18 
±hªad_t
 
	mthªad_id
;

19 }
	tli°í_thªad_s
;

23 * 
	mli°í_ù
;

24 
	mp‹t
;

25 
	mfd
;

26 }
	tli°í_sockë_s
;

28 * 
li°í_thªad_¥oc
(* 
¨g
);

29 
ac˚±_t˝_cb
(
ev_lo›
* 
lo›
, 
ev_io
* 
io_w
, 
evíts
);

34 
li°í_thªad_öô
();

35 
add_li°í
(* 
ù
, 
p‹t
, 
sockë_evít_ty≥_e
 
sockë_ty≥
);

	@src/main.c

1 
	~<°dio.h
>

2 
	~"√t.h
"

3 
	~"li°í_thªad.h
"

4 
	~"thªad_pﬁl.h
"

5 
	~"ba£_hódî.h
"

6 
	$öô_£rvî
()

8 
	`li°í_thªad_öô
(3);

9 
	`w‹k_thªad_öô
(2);

10 
	`add_li°í
("0.0.0.0", 2000, 
LISTEN_CLIENT
);

11 
	}
}

12 
	$maö
(
¨gc
, c⁄° *
¨gv
[])

15 
	`öô_£rvî
();

16 
åue
){

18 
	`¶ìp
(1);

21 
	}
}

	@src/net.c

1 
	~"√t.h
"

3 
	$li°_hód_±r
(
c⁄n_li°
Ë
g_c⁄n_li°_hód
 = 
NULL
;

4 
uöt32_t
 
c⁄n_li°_maxnum
 = 
UINT16_MAX
;

5 
uöt32_t
 
c⁄n_li°_size
;

7 
sockë_evít_s
 
g_sockë_evíts
[
UINT16_MAX
];

8 
g_max_evít_num
 = 
UINT16_MAX
;

9 
g_maxfd
 = 0;

11 
	$¸óã_ev_lo›
(
ev_lo›_s
* 
ev_lo›_s_±r
)

14 
ev_lo›_s_±r
->
ev_lo›_±r
 = 
	`ev_lo›_√w
(
EVBACKEND_EPOLL
);

15 
	`as£π
(
ev_lo›_s_±r
->
ev_lo›_±r
 !
NULL
);

16 
ev_lo›_s_±r
->
sockë_evít_±r
 = 
g_sockë_evíts
;

18 
	}
}

19 
	$dñëe_ev_lo›
(
ev_lo›_s
* 
ev_lo›_s_±r
)

21 
g_maxfd
 = 0;

22 if(
ev_lo›_s_±r
)

24 
	`ev_lo›_de°roy
(
ev_lo›_s_±r
->
ev_lo›_±r
);

26 
	}
}

27 
	$¸óã_ev_evít
(
ev_lo›_s
* 
ev_lo›_s_±r
, 
fd
, 
mask
,
ev_sock_cb
* 
cb_¥oc
, * 
˛õ¡_d©a
)

29 i‡(
fd
 > 
g_max_evít_num
){

30 
	`≥º‹
("fd > max_event_num");

33 i‡(
fd
 > 
g_maxfd
){

34 
g_maxfd
 = 
fd
;

36 
sockë_evít_s
* 
sockë_evít_±r
 = &
ev_lo›_s_±r
->sockë_evít_±r[
fd
];

37 
sockë_evít_±r
->
mask
 = mask;

38 
sockë_evít_±r
->
fd
 = fd;

39 
sockë_evít_±r
->
˛õ¡_d©a
 = client_data;

40 
	`ev_io_öô
(&
sockë_evít_±r
->
w©hî
, 
cb_¥oc
, 
fd
, 
mask
);

41 
	`ev_io_°¨t
(
ev_lo›_s_±r
->
ev_lo›_±r
, &
sockë_evít_±r
->
w©hî
);

43 
	}
}

45 
	$dñëe_ev_evít
(
ev_lo›_s
* 
ev_lo›_s_±r
, 
fd
)

47 i‡(
fd
 > 
g_max_evít_num
){

50 
sockë_evít_s
* 
sockë_evít_±r
 = &
ev_lo›_s_±r
->sockë_evít_±r[
fd
];

51 
sockë_evít_±r
->
mask
 = 0;

52 
	`ev_io_°›
(
ev_lo›_s_±r
->
ev_lo›_±r
,&
sockë_evít_±r
->
w©hî
);

54 i‡(
fd
 =
g_maxfd
)

56 
ev_lo›_s_±r
->
sockë_evít_±r
[
g_maxfd
].
mask
 == 0)

58 
g_maxfd
--;

62 
	}
}

67 
	$c⁄n_li°_öô
()

69 i‡(
NULL
 =
g_c⁄n_li°_hód
) {

70 
	`li°_√w
(
c⁄n_li°
, 
c⁄n_li°_hód
);

71 
	`as£π
(
c⁄n_li°_hód
!
NULL
);

72 
g_c⁄n_li°_hód
 = 
c⁄n_li°_hód
;

75 
	}
}

76 
	$li°_ôem_±r
(
c⁄n_li°
Ë
	$¸óã_˛õ¡
(
c⁄n_ty≥_e
 
c⁄n_ty≥
, 
c⁄n_°©_e
 
c⁄n_°©
, 
fd
)

78 i‡(
c⁄n_li°_size
 > 
c⁄n_li°_maxnum
) {

80  
NULL
;

82 
	`li°_ôem_√w
(
c⁄n_li°
,
c⁄n_±r
);

83 
	`as£π
(
c⁄n_±r
 !
NULL
);

84 
c⁄n_±r
->
c⁄n_ty≥
 = conn_type;

85 
c⁄n_±r
->
c⁄n_°©
 = conn_stat;

86 
c⁄n_±r
->
fd
 = fd;

88 
c⁄n_±r
->
rbuf
 = 
NULL
;

89 
c⁄n_±r
->
rbyãs
 = 0;

90 
c⁄n_±r
->
rsize
 = 1024;

92 
c⁄n_±r
->
wbuf
 = 
NULL
;

93 
c⁄n_±r
->
wbyãs
 = 0;

94 
c⁄n_±r
->
wsize
 = 1024;

96 
c⁄n_±r
->
thªad_id
= 0;

98 
	`li°_lock
(
g_c⁄n_li°_hód
);

99 
c⁄n_li°_size
++;

100 
	`li°_push
(
g_c⁄n_li°_hód
,
c⁄n_±r
);

101 
	`li°_u∆ock
(
g_c⁄n_li°_hód
);

103  
c⁄n_±r
;

104 
	}
}

	@src/net.h

11 #i‚de‡
_NET_H_


12 
	#_NET_H_


	)

14 
	~<ev.h
>

15 
	~"queue.h
"

16 
	~"ba£_hódî.h
"

21 
	ec⁄n_°©_e
{

22 
	mCONN_LISTENING
,

23 
	mCONN_ESTABLISHED
,

24 
	mCONN_CLOSED


26 
	ec⁄n_ty≥_e
{

27 
	mCONN_CLIENT
,

28 
	mCONN_SERVER


32 
li°_def
(
c⁄n_li°
);

33 
	$li°_ôem_«me
(
c⁄n_li°
){

34 
fd
;

35 
li°í_ù
[16];

36 
p‹t
;

37 
c⁄n_°©_e
 
c⁄n_°©
;

38 
c⁄n_ty≥_e
 
c⁄n_ty≥
;

40 
evít_mask
;

41 
which
;

43 * 
rbuf
;

44 
rbyãs
;

45 
rsize
;

46 * 
wbuf
;

47 
wbyãs
;

48 
wsize
;

49 
thªad_id
;

50 
	`li°_√xt_±r
(
c⁄n_li°
);

51 
	}
};

52 
c⁄n_li°_öô
();

53 
	$li°_ôem_±r
(
c⁄n_li°
Ë
	`¸óã_˛õ¡
(
c⁄n_ty≥_e
 
c⁄n_ty≥
, 
c⁄n_°©_e
 
c⁄n_°©
, 
fd
);

58 
	esockë_evít_ty≥_e
 {

59 
LISTEN_CLIENT
,

60 
LISTEN_SERVER
,

61 
SERVER_SOCKET
,

62 
CLIENT_SOCKET
,

63 
PIPE_EVENT


66 
ev_io
 
w©hî
;

67 
ev_timî
 
sockë_timî
;

68 
mask
;

69 
sockë_evít_ty≥_e
 
evít_ty≥
;

70 
fd
;

71 * 
˛õ¡_d©a
;

72 }
	tsockë_evít_s
;

76 
ev_lo›
* 
ev_lo›_±r
;

77 
sockë_evít_s
* 
sockë_evít_±r
;

78 
°›
;

79 } 
	tev_lo›_s
;

82 
	tev_sock_cb
(
	tev_lo›
* 
	tlo›
, 
	tev_io
* 
	tio_w
, 
	tevíts
);

84 
	`¸óã_ev_lo›
(
ev_lo›_s
* 
ev_lo›_s_±r
);

85 
	`dñëe_ev_lo›
(
ev_lo›_s
* 
ev_lo›_s_±r
);

87 
	`¸óã_ev_evít
(
ev_lo›_s
* 
ev_lo›_s_±r
, 
fd
, 
mask
,
ev_sock_cb
* 
cb_¥oc
, * 
˛õ¡_d©a
);

88 
	`dñëe_ev_evít
(
ev_lo›_s
* 
ev_lo›_s_±r
, 
fd
);

	@src/thread_poll.c

1 
	~"thªad_pﬁl.h
"

4 
LIBEV_WORK_THREAD
* 
	gg_w‹k_thªads
;

5 
	gg_w‹k_thªad_num
 = 0;

6 
__thªad
 vﬁ©ûê
uöt64_t
 
	gg_thªad_id
;

7 
	gg_œ°_thªad_id
 = -1;

9 
	$˛õ¡_c⁄n_evít_cb
(
ev_lo›
* 
lo›
, 
ev_io
* 
io_w
, 
evíts
)

11 
sockë_evít_s
* 
sockë_evít_±r
 = (sockë_evít_s*)
io_w
;

12 
fd
 = 
sockë_evít_±r
->fd;

13 
	`li°_ôem_±r
(
c⁄n_li°
Ë
c⁄n_±r
 = 
sockë_evít_±r
->
˛õ¡_d©a
;

15 i‡(
evíts
 & 
EV_READ
)

17 if(
c⁄n_±r
->
rsize
 <c⁄n_±r->
rbyãs
)

19 * 
√w_buf
 = 
	`ªÆloc
(
c⁄n_±r
->
rbuf
,c⁄n_±r->
rsize
*2);

20 i‡(!
√w_buf
) {

21 
	`≥º‹
("recv_bufÑealloc failed ");

22 
c⁄n_±r
->
rbyãs
 = 0;

25 
c⁄n_±r
->
rbuf
 = 
√w_buf
;

26 
c⁄n_±r
->
rsize
 *= 2;

28 
˙t
 = 
	`ªcv_d©a
(
fd
,
c⁄n_±r
->
rbuf
,c⁄n_±r->
rsize
 - c⁄n_±r->
rbyãs
);

29 i‡(
˙t
<0) {

30 
	`˛o£
(
fd
);

33 
c⁄n_±r
->
rbyãs
 = 
˙t
;

34 
	`£nd_d©a
(
fd
,
c⁄n_±r
->
rbuf
,c⁄n_±r->
rbyãs
);

36 
	}
}

38 * 
	$w‹k_thªad_¥oc
(* 
¨g
)

40 
g_thªad_id
 = (
öçå_t
)
¨g
;

41 
fd
 = 
g_w‹k_thªads
[
g_thªad_id
].
nŸify_ªad_fd
;

42 
g_w‹k_thªads
[
g_thªad_id
].
w‹k_ev
.
sockë_evít_±r
[
fd
].
evít_ty≥
 = 
PIPE_EVENT
;

43 
	`¸óã_ev_evít
(&
g_w‹k_thªads
[
g_thªad_id
].
w‹k_ev
, g_w‹k_thªads[g_thªad_id].
nŸify_ªad_fd
, 
EV_READ
, 
pùe_evít_cb
,
NULL
);

44 
	}
}

46 
	$pùe_evít_cb
(
ev_lo›
* 
lo›
, 
ev_io
* 
io_w
, 
evíts
)

48 
	`as£π
(
evíts
 =
EV_READ
);

49 
sockë_evít_s
* 
sockë_evít_±r
 = (sockë_evít_s*)
io_w
;

50 
fd
 = 
sockë_evít_±r
->fd;

51 
buf
[1] = {0};

52 i‡(1 !
	`ªad
(
fd
, 
buf
, 1)) {

53 
	`Ârötf
(
°dîr
, "cantÇotÑead fromÖipe\n");

55 
	`li°_ôem_±r
(
c⁄n_li°
Ë
c⁄n_±r
;

56 
	`li°_shi·
(
g_w‹k_thªads
[
g_thªad_id
].
√w_c⁄ns
, 
c⁄n_±r
);

57 if(
NULL
 =
c⁄n_±r
) {

58 
	`Ârötf
(
°dîr
, "Shift workÅhread conn_list NULL ");

61 
	`¸óã_ev_evít
(&
g_w‹k_thªads
[
g_thªad_id
].
w‹k_ev
,
c⁄n_±r
->
fd
,c⁄n_±r->
evít_mask
,
˛õ¡_c⁄n_evít_cb
,conn_ptr);

63 
	}
}

65 
	$is_w‹k_thªad
()

67  
	`±hªad_£lf
(Ë=
g_w‹k_thªads
[
g_thªad_id
].
thªad_id
;

68 
	}
}

69 
	$w‹k_thªad_öô
(
nw‹k_thªads
)

71 
g_w‹k_thªads
 = (
LIBEV_WORK_THREAD
*)
	`mÆloc
((LIBEV_WORK_THREAD)* 
nw‹k_thªads
);

72 
	`as£π
(
g_w‹k_thªads
 !
NULL
);

73 
	`as£π
(
nw‹k_thªads
 > 0);

74 
g_w‹k_thªad_num
 = 
nw‹k_thªads
;

76 
i
 = 0; i < 
nw‹k_thªads
; i++) {

78 
fds
[2];

79 i‡(
	`pùe
(
fds
)){

80 
	`≥º‹
("cant createÇotifyÖipe");

81 
	`exô
(-1);

83 
g_w‹k_thªads
[
i
].
nŸify_ªad_fd
 = 
fds
[0];

84 
g_w‹k_thªads
[
i
].
nŸify_wrôe_fd
 = 
fds
[1];

86 
	`li°_√w
(
c⁄n_li°
,
c⁄ns_tmp
);

87 
	`as£π
(
c⁄ns_tmp
 !
NULL
);

88 
g_w‹k_thªads
[
i
].
√w_c⁄ns
 = 
c⁄ns_tmp
;

90 
	`£t_n⁄block
(
g_w‹k_thªads
[
i
].
nŸify_ªad_fd
);

91 
	`¸óã_ev_lo›
(&
g_w‹k_thªads
[
i
].
w‹k_ev
);

92 
	`±hªad_¸óã
(&
g_w‹k_thªads
[
i
].
thªad_id
, 
NULL
, 
w‹k_thªad_¥oc
,(*)(
öçå_t
)i);

93 
	`sched_yõld
();

96 
	}
}

98 
	$di•©h_√w_c⁄n
(
sockë_evít_s
* 
sockë_evít_±r
)

100 
thªad_id
 = (
g_œ°_thªad_id
 + 1)%
g_w‹k_thªad_num
;

101 
g_œ°_thªad_id
 = 
thªad_id
;

102 
	`li°_push
(
g_w‹k_thªads
[
thªad_id
].
√w_c⁄ns
,(
	`li°_ôem_±r
(
c⁄n_li°
))
sockë_evít_±r
->
˛õ¡_d©a
);

103 
buf
[1] = {'1'};

104 if(1 !
	`wrôe
(
g_w‹k_thªads
[
thªad_id
].
nŸify_wrôe_fd
,
buf
,1)) {

105 
	`≥º‹
("writeÅo workthreadÖipeÉrror");

107 
	}
}

	@src/thread_poll.h

11 #i‚de‡
_THREAD_POLL_H_


12 
	#_THREAD_POLL_H_


	)

14 
	~"√t.h
"

16 
	#WORK_THREAD_NUM
 8

	)

19 
±hªad_t
 
	mthªad_id
;

20 
ev_lo›_s
 
	mw‹k_ev
;

21 
	mnŸify_ªad_fd
;

22 
	mnŸify_wrôe_fd
;

23 
li°_hód_±r
(
c⁄n_li°
Ë
	m√w_c⁄ns
;

24 } 
	tLIBEV_WORK_THREAD
;

26 * 
w‹k_thªad_¥oc
(* 
¨g
);

27 
pùe_evít_cb
(
ev_lo›
* 
lo›
, 
ev_io
* 
io_w
, 
evíts
);

28 
˛õ¡_c⁄n_evít_cb
(
ev_lo›
* 
lo›
, 
ev_io
* 
io_w
, 
evíts
);

30 
di•©hî_thªad_öô
(
nw‹k_thªads
);

31 
di•©hî_c⁄n
(
sockë_evít_s
* 
sockë_evít_±r
);

	@
1
.
0
55
1407
libs/include/libev/ev++.h
libs/include/libev/ev.h
libs/include/libev/event.h
libs/include/rock/CUnit/Automated.h
libs/include/rock/CUnit/Basic.h
libs/include/rock/CUnit/CUError.h
libs/include/rock/CUnit/CUnit.h
libs/include/rock/CUnit/CUnit_intl.h
libs/include/rock/CUnit/Console.h
libs/include/rock/CUnit/MyMem.h
libs/include/rock/CUnit/TestDB.h
libs/include/rock/CUnit/TestRun.h
libs/include/rock/CUnit/Util.h
libs/include/rock/aes.h
libs/include/rock/asyncproc.h
libs/include/rock/bstrlib.h
libs/include/rock/cjson.h
libs/include/rock/crc32.h
libs/include/rock/cstring.h
libs/include/rock/darray.h
libs/include/rock/jhash.h
libs/include/rock/json.h
libs/include/rock/log.h
libs/include/rock/md5.h
libs/include/rock/queue.h
libs/include/rock/rock_hash.h
libs/include/rock/sha1.h
libs/include/rock/slab.h
libs/include/rock/stdint.h
libs/include/rock/urlencode.h
libs/include/rock/uthash.h
libs/libev-4.15/config.h
libs/libev-4.15/ev++.h
libs/libev-4.15/ev.c
libs/libev-4.15/ev.h
libs/libev-4.15/ev_epoll.c
libs/libev-4.15/ev_kqueue.c
libs/libev-4.15/ev_poll.c
libs/libev-4.15/ev_port.c
libs/libev-4.15/ev_select.c
libs/libev-4.15/ev_vars.h
libs/libev-4.15/ev_win32.c
libs/libev-4.15/ev_wrap.h
libs/libev-4.15/event.c
libs/libev-4.15/event.h
src/SocketUtility.c
src/SocketUtility.h
src/base_header.h
src/listen_thread.c
src/listen_thread.h
src/main.c
src/net.c
src/net.h
src/thread_poll.c
src/thread_poll.h
